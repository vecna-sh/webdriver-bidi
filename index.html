<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>WebDriver BiDi</title>
  <meta content="ED" name="w3c-status">
  <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-ED" rel="stylesheet">
  <meta content="Bikeshed version 82ce88815, updated Thu Sep 7 16:33:55 2023 -0700" name="generator">
  <link href="https://w3c.github.io/webdriver-bidi/" rel="canonical">
  <meta content="4361bead17f7face9edf3b3755c407b650b513cb" name="document-revision">
<style>
var {
  color: #cd5c5c
}
</style>
<style>/* Boilerplate: style-autolinks */
.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}

@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}
</style>
<style>/* Boilerplate: style-colors */

/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
</style>
<style>/* Boilerplate: style-counters */
body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}
</style>
<style>/* Boilerplate: style-dfn-panel */
:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
}
@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
    }
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0 0 0 1em; list-style: none; }
.dfn-panel li a {
    white-space: pre;
    display: inline-block;
    max-width: calc(300px - 1.5em - 1em);
    overflow: hidden;
    text-overflow: ellipsis;
}

.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: .5em;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
}

.dfn-paneled[role="button"] { cursor: pointer; }
</style>
<style>/* Boilerplate: style-dfn-panel */
:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
}
@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
    }
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0 0 0 1em; list-style: none; }
.dfn-panel li a {
    white-space: pre;
    display: inline-block;
    max-width: calc(300px - 1.5em - 1em);
    overflow: hidden;
    text-overflow: ellipsis;
}

.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: .5em;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
}

.dfn-paneled[role="button"] { cursor: pointer; }
</style>
<style>/* Boilerplate: style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* Boilerplate: style-md-lists */
/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}
</style>
<style>/* Boilerplate: style-selflinks */

:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* Boilerplate: style-var-click-highlighting */
/*
Colors were chosen in Lab using https://nixsensor.com/free-color-converter/
D50 2deg illuminant, L in [0,100], a and b in [-128, 128]
0 = lab(85,0,85)
1 = lab(85,80,30)
2 = lab(85,-40,40)
3 = lab(85,-50,0)
4 = lab(85,5,15)
5 = lab(85,-10,-50)
6 = lab(85,35,-15)
*/
var { cursor: pointer; }
var.selected0 { background-color: #F4D200; box-shadow: 0 0 0 2px #F4D200; }
var.selected1 { background-color: #FF87A2; box-shadow: 0 0 0 2px #FF87A2; }
var.selected2 { background-color: #96E885; box-shadow: 0 0 0 2px #96E885; }
var.selected3 { background-color: #3EEED2; box-shadow: 0 0 0 2px #3EEED2; }
var.selected4 { background-color: #EACFB6; box-shadow: 0 0 0 2px #EACFB6; }
var.selected5 { background-color: #82DDFF; box-shadow: 0 0 0 2px #82DDFF; }
var.selected6 { background-color: #FFBCF2; box-shadow: 0 0 0 2px #FFBCF2; }
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">WebDriver BiDi</h1>
   <p id="w3c-state"><a href="https://www.w3.org/standards/types#ED">Editor’s Draft</a>, <time class="dt-updated" datetime="2023-09-21">21 September 2023</time></p>
   <details open>
    <summary>More details about this document</summary>
    <div data-fill-with="spec-metadata">
     <dl>
      <dt>This version:
      <dd><a class="u-url" href="https://w3c.github.io/webdriver-bidi/">https://w3c.github.io/webdriver-bidi/</a>
      <dt>Implementation Report:
      <dd><a href="https://wpt.fyi/results/webdriver/tests/bidi">https://wpt.fyi/results/webdriver/tests/bidi</a>
      <dt>Test Suite:
      <dd><a href="https://github.com/web-platform-tests/wpt/tree/master/webdriver/tests/bidi">https://github.com/web-platform-tests/wpt/tree/master/webdriver/tests/bidi</a>
      <dt>Issue Tracking:
      <dd><a href="https://github.com/w3c/webdriver-bidi/issues/">GitHub</a>
      <dd><a href="#issues-index">Inline In Spec</a>
      <dt>Channel:
      <dd><a href="https://www.w3.org/wiki/IRC">#webdriver on irc.w3.org</a>
      <dt>Wiki:
      <dd><a href="https://www.w3.org/wiki/WebDriver">W3C WebDriver Wiki</a>
     </dl>
    </div>
   </details>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2023 <a href="https://www.w3.org/">World Wide Web Consortium</a>. <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup> <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="https://www.w3.org/Consortium/Legal/copyright-software" rel="license" title="W3C Software and Document License">permissive document license</a> rules apply. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>This document defines the BiDirectional WebDriver Protocol, a mechanism for remote control of user agents.</p>
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> This is a public copy of the editors’ draft.
        It is provided for discussion only and may change at any moment.
        Its publication here does not imply endorsement of its contents by W3C.
        Don’t cite this document other than as work in progress. </p>
   <p> <a href="https://github.com/w3c/webdriver-bidi/issues">GitHub Issues</a> are preferred for discussion of this specification. </p>
   <p> This document was produced by the <a href="https://www.w3.org/groups/wg/browser-tools-testing">Browser Testing and Tools Working Group</a>. </p>
   <p> This document was produced by a group operating under
        the <a href="https://www.w3.org/Consortium/Patent-Policy-20170801/">W3C Patent Policy</a>.
        W3C maintains a <a href="https://www.w3.org/2004/01/pp-impl/32061/status" rel="disclosure">public list of any patent disclosures</a> made in connection with the deliverables of the group;
        that page also includes instructions for disclosing a patent.
        An individual who has actual knowledge of a patent which the individual believes contains <a href="https://www.w3.org/Consortium/Patent-Policy-20170801/#def-essential">Essential Claim(s)</a> must disclose the information in accordance with <a href="https://www.w3.org/Consortium/Patent-Policy-20170801/#sec-Disclosure">section 6 of the W3C Patent Policy</a>. </p>
   <p> This document is governed by the <a href="https://www.w3.org/2023/Process-20230612/" id="w3c_process_revision">12 June 2023 W3C Process Document</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#intro"><span class="secno">1</span> <span class="content">Introduction</span></a>
    <li><a href="#infrastructure"><span class="secno">2</span> <span class="content">Infrastructure</span></a>
    <li>
     <a href="#protocol"><span class="secno">3</span> <span class="content">Protocol</span></a>
     <ol class="toc">
      <li><a href="#protocol-definition"><span class="secno">3.1</span> <span class="content">Definition</span></a>
      <li><a href="#session"><span class="secno">3.2</span> <span class="content">Session</span></a>
      <li><a href="#protocol-modules"><span class="secno">3.3</span> <span class="content">Modules</span></a>
      <li><a href="#commands"><span class="secno">3.4</span> <span class="content">Commands</span></a>
      <li><a href="#errors"><span class="secno">3.5</span> <span class="content">Errors</span></a>
      <li><a href="#events"><span class="secno">3.6</span> <span class="content">Events</span></a>
     </ol>
    <li>
     <a href="#transport"><span class="secno">4</span> <span class="content">Transport</span></a>
     <ol class="toc">
      <li><a href="#establishing"><span class="secno">4.1</span> <span class="content">Establishing a Connection</span></a>
     </ol>
    <li>
     <a href="#sandbox"><span class="secno">5</span> <span class="content">Sandboxed Script Execution</span></a>
     <ol class="toc">
      <li><a href="#sandbox-realm"><span class="secno">5.1</span> <span class="content">Sandbox Realms</span></a>
      <li><a href="#sandbox-proxy"><span class="secno">5.2</span> <span class="content">Sandbox Proxy Objects</span></a>
      <li><a href="#sandbox-sandboxwindowproxy"><span class="secno">5.3</span> <span class="content">SandboxWindowProxy</span></a>
     </ol>
    <li>
     <a href="#modules"><span class="secno">6</span> <span class="content">Modules</span></a>
     <ol class="toc">
      <li>
       <a href="#module-session"><span class="secno">6.1</span> <span class="content">The session Module</span></a>
       <ol class="toc">
        <li><a href="#module-session-definition"><span class="secno">6.1.1</span> <span class="content">Definition</span></a>
        <li>
         <a href="#module-session-types"><span class="secno">6.1.2</span> <span class="content">Types</span></a>
         <ol class="toc">
          <li><a href="#type-session-CapabilitiesRequest"><span class="secno">6.1.2.1</span> <span class="content">The session.CapabilitiesRequest Type</span></a>
          <li><a href="#type-session-CapabilityRequest"><span class="secno">6.1.2.2</span> <span class="content">The session.CapabilityRequest Type</span></a>
          <li><a href="#type-session-SubscriptionRequest"><span class="secno">6.1.2.3</span> <span class="content">The session.SubscriptionRequest Type</span></a>
         </ol>
        <li>
         <a href="#module-session-commands"><span class="secno">6.1.3</span> <span class="content">Commands</span></a>
         <ol class="toc">
          <li><a href="#command-session-status"><span class="secno">6.1.3.1</span> <span class="content">The session.status Command</span></a>
          <li><a href="#command-session-new"><span class="secno">6.1.3.2</span> <span class="content">The session.new Command</span></a>
          <li><a href="#command-session-end"><span class="secno">6.1.3.3</span> <span class="content">The session.end Command</span></a>
          <li><a href="#command-session-subscribe"><span class="secno">6.1.3.4</span> <span class="content">The session.subscribe Command</span></a>
          <li><a href="#command-session-unsubscribe"><span class="secno">6.1.3.5</span> <span class="content">The session.unsubscribe Command</span></a>
         </ol>
       </ol>
      <li>
       <a href="#module-browser"><span class="secno">6.2</span> <span class="content">The browser Module</span></a>
       <ol class="toc">
        <li><a href="#module-browser-definition"><span class="secno">6.2.1</span> <span class="content">Definition</span></a>
        <li>
         <a href="#module-browser-commands"><span class="secno">6.2.2</span> <span class="content">Commands</span></a>
         <ol class="toc">
          <li><a href="#command-browser-close"><span class="secno">6.2.2.1</span> <span class="content">The browser.close Command</span></a>
         </ol>
       </ol>
      <li>
       <a href="#module-browsingContext"><span class="secno">6.3</span> <span class="content">The browsingContext Module</span></a>
       <ol class="toc">
        <li><a href="#module-browsingContext-definition"><span class="secno">6.3.1</span> <span class="content">Definition</span></a>
        <li>
         <a href="#module-browsingcontext-types"><span class="secno">6.3.2</span> <span class="content">Types</span></a>
         <ol class="toc">
          <li><a href="#type-browsingContext-Browsingcontext"><span class="secno">6.3.2.1</span> <span class="content">The browsingContext.BrowsingContext Type</span></a>
          <li><a href="#type-browsingContext-Info"><span class="secno">6.3.2.2</span> <span class="content">The browsingContext.Info Type</span></a>
          <li><a href="#type-browsingContext-Navigation"><span class="secno">6.3.2.3</span> <span class="content">The browsingContext.Navigation Type</span></a>
          <li><a href="#type-browsingContext-NavigationInfo"><span class="secno">6.3.2.4</span> <span class="content">The browsingContext.NavigationInfo Type</span></a>
          <li><a href="#type-browsingContext-ReadinessState"><span class="secno">6.3.2.5</span> <span class="content">The browsingContext.ReadinessState Type</span></a>
         </ol>
        <li>
         <a href="#module-browsingContext-commands"><span class="secno">6.3.3</span> <span class="content">Commands</span></a>
         <ol class="toc">
          <li><a href="#command-browsingContext-activate"><span class="secno">6.3.3.1</span> <span class="content">The browsingContext.activate Command</span></a>
          <li><a href="#command-browsingContext-captureScreenshot"><span class="secno">6.3.3.2</span> <span class="content">The browsingContext.captureScreenshot Command</span></a>
          <li><a href="#command-browsingContext-close"><span class="secno">6.3.3.3</span> <span class="content">The browsingContext.close Command</span></a>
          <li><a href="#command-browsingContext-create"><span class="secno">6.3.3.4</span> <span class="content">The browsingContext.create Command</span></a>
          <li><a href="#command-browsingContext-getTree"><span class="secno">6.3.3.5</span> <span class="content">The browsingContext.getTree Command</span></a>
          <li><a href="#command-browsingContext-handleUserPrompt"><span class="secno">6.3.3.6</span> <span class="content">The browsingContext.handleUserPrompt Command</span></a>
          <li><a href="#command-browsingContext-navigate"><span class="secno">6.3.3.7</span> <span class="content">The browsingContext.navigate Command</span></a>
          <li><a href="#command-browsingContext-print"><span class="secno">6.3.3.8</span> <span class="content">The browsingContext.print Command</span></a>
          <li><a href="#command-browsingContext-reload"><span class="secno">6.3.3.9</span> <span class="content">The browsingContext.reload Command</span></a>
          <li><a href="#command-browsingContext-setViewport"><span class="secno">6.3.3.10</span> <span class="content">The browsingContext.setViewport Command</span></a>
         </ol>
        <li>
         <a href="#module-contexts-events"><span class="secno">6.3.4</span> <span class="content">Events</span></a>
         <ol class="toc">
          <li><a href="#event-browsingContext-contextCreated"><span class="secno">6.3.4.1</span> <span class="content">The browsingContext.contextCreated Event</span></a>
          <li><a href="#event-browsingContext-contextDestroyed"><span class="secno">6.3.4.2</span> <span class="content">The browsingContext.contextDestroyed Event</span></a>
          <li><a href="#event-browsingContext-navigationStarted"><span class="secno">6.3.4.3</span> <span class="content">The browsingContext.navigationStarted Event</span></a>
          <li><a href="#event-browsingContext-fragmentNavigated"><span class="secno">6.3.4.4</span> <span class="content">The browsingContext.fragmentNavigated Event</span></a>
          <li><a href="#event-browsingContext-domContentLoaded"><span class="secno">6.3.4.5</span> <span class="content">The browsingContext.domContentLoaded Event</span></a>
          <li><a href="#event-browsingContext-load"><span class="secno">6.3.4.6</span> <span class="content">The browsingContext.load Event</span></a>
          <li><a href="#event-browsingContext-downoadWillBegin"><span class="secno">6.3.4.7</span> <span class="content">The browsingContext.downloadWillBegin Event</span></a>
          <li><a href="#event-browsingContext-navigationAborted"><span class="secno">6.3.4.8</span> <span class="content">The browsingContext.navigationAborted Event</span></a>
          <li><a href="#event-browsingContext-navigationFailed"><span class="secno">6.3.4.9</span> <span class="content">The browsingContext.navigationFailed Event</span></a>
          <li><a href="#event-browsingContext-userPromptClosed"><span class="secno">6.3.4.10</span> <span class="content">The browsingContext.userPromptClosed Event</span></a>
          <li><a href="#event-browsingContext-userPromptOpened"><span class="secno">6.3.4.11</span> <span class="content">The browsingContext.userPromptOpened Event</span></a>
         </ol>
       </ol>
      <li>
       <a href="#module-network"><span class="secno">6.4</span> <span class="content">The network Module</span></a>
       <ol class="toc">
        <li><a href="#module-network-definition"><span class="secno">6.4.1</span> <span class="content">Definition</span></a>
        <li><a href="#network-intercepts"><span class="secno">6.4.2</span> <span class="content">Network Intercepts</span></a>
        <li>
         <a href="#module-network-types"><span class="secno">6.4.3</span> <span class="content">Types</span></a>
         <ol class="toc">
          <li><a href="#type-network-AuthChallenge"><span class="secno">6.4.3.1</span> <span class="content">The network.AuthChallenge Type</span></a>
          <li><a href="#type-network-AuthCredentials"><span class="secno">6.4.3.2</span> <span class="content">The network.AuthCredentials Type</span></a>
          <li><a href="#type-network-BaseParameters"><span class="secno">6.4.3.3</span> <span class="content">The network.BaseParameters Type</span></a>
          <li><a href="#type-network-BytesValue"><span class="secno">6.4.3.4</span> <span class="content">The network.BytesValue Type</span></a>
          <li><a href="#type-network-Cookie"><span class="secno">6.4.3.5</span> <span class="content">The network.Cookie Type</span></a>
          <li><a href="#type-network-CookieHeader"><span class="secno">6.4.3.6</span> <span class="content">The network.CookieHeader Type</span></a>
          <li><a href="#type-network-FetchTimingInfo"><span class="secno">6.4.3.7</span> <span class="content">The network.FetchTimingInfo Type</span></a>
          <li><a href="#type-network-Header"><span class="secno">6.4.3.8</span> <span class="content">The network.Header Type</span></a>
          <li><a href="#type-network-Initiator"><span class="secno">6.4.3.9</span> <span class="content">The network.Initiator Type</span></a>
          <li><a href="#type-network-Intercept"><span class="secno">6.4.3.10</span> <span class="content">The network.Intercept Type</span></a>
          <li><a href="#type-network-Request"><span class="secno">6.4.3.11</span> <span class="content">The network.Request Type</span></a>
          <li><a href="#type-network-RequestData"><span class="secno">6.4.3.12</span> <span class="content">The network.RequestData Type</span></a>
          <li><a href="#type-network-ResponseContent"><span class="secno">6.4.3.13</span> <span class="content">The network.ResponseContent Type</span></a>
          <li><a href="#type-network-ResponseData"><span class="secno">6.4.3.14</span> <span class="content">The network.ResponseData Type</span></a>
          <li><a href="#type-network-SetCookieHeader"><span class="secno">6.4.3.15</span> <span class="content">The network.SetCookieHeader Type</span></a>
          <li><a href="#type-network-UrlPattern"><span class="secno">6.4.3.16</span> <span class="content">The network.UrlPattern Type</span></a>
         </ol>
        <li>
         <a href="#module-network-commands"><span class="secno">6.4.4</span> <span class="content">Commands</span></a>
         <ol class="toc">
          <li><a href="#command-network-addIntercept"><span class="secno">6.4.4.1</span> <span class="content">The network.addIntercept Command</span></a>
          <li><a href="#command-network-continueRequest"><span class="secno">6.4.4.2</span> <span class="content">The network.continueRequest Command</span></a>
          <li><a href="#command-network-continueResponse"><span class="secno">6.4.4.3</span> <span class="content">The network.continueResponse Command</span></a>
          <li><a href="#command-network-continueWithAuth"><span class="secno">6.4.4.4</span> <span class="content">The network.continueWithAuth Command</span></a>
          <li><a href="#command-network-failRequest"><span class="secno">6.4.4.5</span> <span class="content">The network.failRequest Command</span></a>
          <li><a href="#command-network-provideResponse"><span class="secno">6.4.4.6</span> <span class="content">The network.provideResponse Command</span></a>
          <li><a href="#command-network-removeIntercept"><span class="secno">6.4.4.7</span> <span class="content">The network.removeIntercept Command</span></a>
         </ol>
        <li>
         <a href="#module-network-event"><span class="secno">6.4.5</span> <span class="content">Events</span></a>
         <ol class="toc">
          <li><a href="#event-network-authRequired"><span class="secno">6.4.5.1</span> <span class="content">The network.authRequired Event</span></a>
          <li><a href="#event-network-beforeSendRequest"><span class="secno">6.4.5.2</span> <span class="content">The network.beforeRequestSent Event</span></a>
          <li><a href="#event-network-fetchError"><span class="secno">6.4.5.3</span> <span class="content">The network.fetchError Event</span></a>
          <li><a href="#event-network-responseCompleted"><span class="secno">6.4.5.4</span> <span class="content">The network.responseCompleted Event</span></a>
          <li><a href="#event-network-responseStarted"><span class="secno">6.4.5.5</span> <span class="content">The network.responseStarted Event</span></a>
         </ol>
       </ol>
      <li>
       <a href="#module-script"><span class="secno">6.5</span> <span class="content">The script Module</span></a>
       <ol class="toc">
        <li><a href="#module-script-definition"><span class="secno">6.5.1</span> <span class="content">Definition</span></a>
        <li><a href="#preload-scripts"><span class="secno">6.5.2</span> <span class="content">Preload Scripts</span></a>
        <li>
         <a href="#module-script-types"><span class="secno">6.5.3</span> <span class="content">Types</span></a>
         <ol class="toc">
          <li><a href="#type-script-Channel"><span class="secno">6.5.3.1</span> <span class="content">The script.Channel Type</span></a>
          <li><a href="#type-script-ChannelValue"><span class="secno">6.5.3.2</span> <span class="content">The script.ChannelValue Type</span></a>
          <li><a href="#type-script-EvaluateResult"><span class="secno">6.5.3.3</span> <span class="content">The script.EvaluateResult Type</span></a>
          <li><a href="#type-script-ExceptionDetails"><span class="secno">6.5.3.4</span> <span class="content">The script.ExceptionDetails Type</span></a>
          <li><a href="#type-script-Handle"><span class="secno">6.5.3.5</span> <span class="content">The script.Handle Type</span></a>
          <li><a href="#type-script-LocalValue"><span class="secno">6.5.3.6</span> <span class="content">The script.LocalValue Type</span></a>
          <li><a href="#type-script-PreloadScript"><span class="secno">6.5.3.7</span> <span class="content">The script.PreloadScript Type</span></a>
          <li><a href="#type-script-Realm"><span class="secno">6.5.3.8</span> <span class="content">The script.Realm Type</span></a>
          <li><a href="#type-script-PrimitiveProtocolValue"><span class="secno">6.5.3.9</span> <span class="content">The script.PrimitiveProtocolValue Type</span></a>
          <li><a href="#type-script-RealmInfo"><span class="secno">6.5.3.10</span> <span class="content">The script.RealmInfo Type</span></a>
          <li><a href="#type-script-RealmType"><span class="secno">6.5.3.11</span> <span class="content">The script.RealmType Type</span></a>
          <li><a href="#type-script-RemoteReference"><span class="secno">6.5.3.12</span> <span class="content">The script.RemoteReference Type</span></a>
          <li><a href="#type-script-RemoteValue"><span class="secno">6.5.3.13</span> <span class="content">The script.RemoteValue Type</span></a>
          <li><a href="#type-script-ResultOwnership"><span class="secno">6.5.3.14</span> <span class="content">The script.ResultOwnership Type</span></a>
          <li><a href="#type-script-SerializationOptions"><span class="secno">6.5.3.15</span> <span class="content">The script.SerializationOptions Type</span></a>
          <li><a href="#type-script-SharedId"><span class="secno">6.5.3.16</span> <span class="content">The script.SharedId Type</span></a>
          <li><a href="#type-script-StackFrame"><span class="secno">6.5.3.17</span> <span class="content">The script.StackFrame Type</span></a>
          <li><a href="#type-script-StackTrace"><span class="secno">6.5.3.18</span> <span class="content">The script.StackTrace Type</span></a>
          <li><a href="#type-script-Source"><span class="secno">6.5.3.19</span> <span class="content">The script.Source Type</span></a>
          <li><a href="#type-script-Target"><span class="secno">6.5.3.20</span> <span class="content">The script.Target Type</span></a>
         </ol>
        <li>
         <a href="#module-script-commands"><span class="secno">6.5.4</span> <span class="content">Commands</span></a>
         <ol class="toc">
          <li><a href="#command-script-addPreloadScript"><span class="secno">6.5.4.1</span> <span class="content">The script.addPreloadScript Command</span></a>
          <li><a href="#command-script-disown"><span class="secno">6.5.4.2</span> <span class="content">The script.disown Command</span></a>
          <li><a href="#command-script-callFunction"><span class="secno">6.5.4.3</span> <span class="content">The script.callFunction Command</span></a>
          <li><a href="#command-script-evaluate"><span class="secno">6.5.4.4</span> <span class="content">The script.evaluate Command</span></a>
          <li><a href="#command-script-getRealms"><span class="secno">6.5.4.5</span> <span class="content">The script.getRealms Command</span></a>
          <li><a href="#command-script-removePreloadScript"><span class="secno">6.5.4.6</span> <span class="content">The script.removePreloadScript Command</span></a>
         </ol>
        <li>
         <a href="#module-script-events"><span class="secno">6.5.5</span> <span class="content">Events</span></a>
         <ol class="toc">
          <li><a href="#event-script-message"><span class="secno">6.5.5.1</span> <span class="content">The script.message Event</span></a>
          <li><a href="#event-script-realmCreated"><span class="secno">6.5.5.2</span> <span class="content">The script.realmCreated Event</span></a>
          <li><a href="#event-script-realmDestroyed"><span class="secno">6.5.5.3</span> <span class="content">The script.realmDestroyed Event</span></a>
         </ol>
       </ol>
      <li>
       <a href="#module-log"><span class="secno">6.6</span> <span class="content">The log Module</span></a>
       <ol class="toc">
        <li><a href="#module-log-definition"><span class="secno">6.6.1</span> <span class="content">Definition</span></a>
        <li>
         <a href="#module-log-types"><span class="secno">6.6.2</span> <span class="content">Types</span></a>
         <ol class="toc">
          <li><a href="#types-log-logentry"><span class="secno">6.6.2.1</span> <span class="content">log.LogEntry</span></a>
         </ol>
        <li>
         <a href="#module-log-events"><span class="secno">6.6.3</span> <span class="content">Events</span></a>
         <ol class="toc">
          <li><a href="#event-log-entryAdded"><span class="secno">6.6.3.1</span> <span class="content">The log.entryAdded Event</span></a>
         </ol>
       </ol>
      <li>
       <a href="#module-input"><span class="secno">6.7</span> <span class="content">The Input Module</span></a>
       <ol class="toc">
        <li><a href="#module-input-definition"><span class="secno">6.7.1</span> <span class="content">Definition</span></a>
        <li>
         <a href="#module-input-types"><span class="secno">6.7.2</span> <span class="content">Types</span></a>
         <ol class="toc">
          <li><a href="#type-input-origin"><span class="secno">6.7.2.1</span> <span class="content">input.ElementOrigin</span></a>
         </ol>
        <li>
         <a href="#module-input-commands"><span class="secno">6.7.3</span> <span class="content">Commands</span></a>
         <ol class="toc">
          <li><a href="#command-input-performActions"><span class="secno">6.7.3.1</span> <span class="content">The input.performActions Command</span></a>
          <li><a href="#command-input-releaseActions"><span class="secno">6.7.3.2</span> <span class="content">The input.releaseActions Command</span></a>
         </ol>
       </ol>
     </ol>
    <li>
     <a href="#patches"><span class="secno">7</span> <span class="content">Patches to Other Specifications</span></a>
     <ol class="toc">
      <li><a href="#patches-html"><span class="secno">7.1</span> <span class="content">HTML</span></a>
      <li><a href="#patches-console"><span class="secno">7.2</span> <span class="content">Console</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#intro"></a></h2>
   <p><em>This section is non-normative.</em></p>
   <p><a data-link-type="biblio" href="#biblio-webdriver" title="WebDriver">WebDriver</a> defines a protocol for introspection and
remote control of user agents. This specification extends WebDriver by
introducing bidirectional communication. In place of the strict
command/response format of WebDriver, this permits events to stream
from the user agent to the controlling software, better matching the
evented nature of the browser DOM.</p>
   <h2 class="heading settled" data-level="2" id="infrastructure"><span class="secno">2. </span><span class="content">Infrastructure</span><a class="self-link" href="#infrastructure"></a></h2>
   <p>This specification depends on the Infra Standard. <a data-link-type="biblio" href="#biblio-infra" title="Infra Standard">[INFRA]</a></p>
   <p>Network protocol messages are defined using CDDL. <a data-link-type="biblio" href="#biblio-rfc8610" title="Concise Data Definition Language (CDDL): A Notational Convention to Express Concise Binary Object Representation (CBOR) and JSON Data Structures">[RFC8610]</a></p>
   <p>This specification defines a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="wait-queue">wait queue</dfn> which is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map">map</a>.</p>
   <p class="issue" id="issue-555cee0f"><a class="self-link" href="#issue-555cee0f"></a> Surely there’s a better mechanism for doing this "wait for an event" thing.</p>
   <div class="algorithm" data-algorithm="awaits">
    <p>When an algorithm <var>algorithm</var> running <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel">in parallel</a> <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="awaits">awaits</dfn> a set of
events <var>events</var>, and <var>resume id</var>:</p>
    <ol>
     <li data-md>
      <p>Pause the execution of <var>algorithm</var>.</p>
     <li data-md>
      <p class="assertion">Assert: <a data-link-type="dfn" href="#wait-queue" id="ref-for-wait-queue">wait queue</a> does not contain <var>resume id</var>.</p>
     <li data-md>
      <p>Set <a data-link-type="dfn" href="#wait-queue" id="ref-for-wait-queue①">wait queue</a>[<var>resume id</var>] to (<var>events</var>, <var>algorithm</var>).</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="resume">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="resume">resume</dfn> given <var>name</var>, <var>id</var> and <var>parameters</var>: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="#wait-queue" id="ref-for-wait-queue②">wait queue</a> does not contain <var>id</var>, return.</p>
     <li data-md>
      <p>Let (<var>events</var>, <var>algorithm</var>) be <a data-link-type="dfn" href="#wait-queue" id="ref-for-wait-queue③">wait queue</a>[<var>id</var>]</p>
     <li data-md>
      <p>For each <var>event</var> in <var>events</var>:</p>
      <ol>
       <li data-md>
        <p>If <var>event</var> equals <var>name</var>:</p>
        <ol>
         <li data-md>
          <p>Remove <var>id</var> from <a data-link-type="dfn" href="#wait-queue" id="ref-for-wait-queue④">wait queue</a>.</p>
         <li data-md>
          <p>Resume running the steps in <var>algorithm</var> from the
 point at which they were paused, passing <var>name</var> and <var>parameters</var> as the
 result of the <a data-link-type="dfn" href="#awaits" id="ref-for-awaits">await</a>.</p>
          <p class="issue" id="issue-540e1580"><a class="self-link" href="#issue-540e1580"></a> Should we have something like microtasks to ensure this runs
 before any other tasks on the event loop?</p>
        </ol>
      </ol>
    </ol>
   </div>
   <h2 class="heading settled" data-level="3" id="protocol"><span class="secno">3. </span><span class="content">Protocol</span><a class="self-link" href="#protocol"></a></h2>
   <p>This section defines the basic concepts of the WebDriver BiDi
protocol. These terms are distinct from their representation at the <a href="#transport">transport</a> layer.</p>
   <p>The protocol is defined using a <a data-link-type="biblio" href="#biblio-rfc8610" title="Concise Data Definition Language (CDDL): A Notational Convention to Express Concise Binary Object Representation (CBOR) and JSON Data Structures">CDDL</a> definition. For the
convenience of implementors two separate CDDL definitions are defined; the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="remote-end-definition">remote end definition</dfn> which defines the format of messages produced
on the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-local-ends" id="ref-for-dfn-local-ends">local end</a> and consumed on the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-ends" id="ref-for-dfn-remote-ends">remote end</a>, and the <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="local end definition" data-noexport id="local-end-definition">local end
definition</dfn> which defines the format of messages produced on the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-ends" id="ref-for-dfn-remote-ends①">remote end</a> and consumed on the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-local-ends" id="ref-for-dfn-local-ends①">local end</a></p>
   <h3 class="heading settled" data-level="3.1" id="protocol-definition"><span class="secno">3.1. </span><span class="content">Definition</span><a class="self-link" href="#protocol-definition"></a></h3>
   <p class="issue" id="issue-40ad1db0"><a class="self-link" href="#issue-40ad1db0"></a> Should this be an appendix?</p>
   <p>This section gives the initial contents of the <a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition">remote end definition</a> and <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition">local end definition</a>. These are augmented by the definition fragments defined in
the remainder of the specification.</p>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition①">Remote end definition</a></p>
<pre class="cddl remote-cddl">Command = {
  id: js-uint,
  CommandData,
  Extensible,
}

CommandData = (
  BrowserCommand //
  BrowsingContextCommand //
  InputCommand //
  NetworkCommand //
  ScriptCommand //
  SessionCommand
)

EmptyParams = {
   Extensible
}
</pre>
   <p><a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition①">Local end definition</a></p>
<pre class="cddl local-cddl">Message = (
  CommandResponse /
  ErrorResponse /
  Event
)

CommandResponse = {
  type: "success",
  id: js-uint,
  result: ResultData,
  Extensible
}

ErrorResponse = {
  type: "error",
  id: js-uint / null,
  error: ErrorCode,
  message: text,
  ? stacktrace: text,
  Extensible
}

ResultData = (
  BrowsingContextResult /
  EmptyResult /
  NetworkResult /
  ScriptResult /
  SessionResult
)

EmptyResult = {
  Extensible
}

Event = {
  type: "event",
  EventData,
  Extensible
}

EventData = (
  BrowsingContextEvent //
  LogEvent //
  NetworkEvent //
  ScriptEvent
)
</pre>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition②">Remote end definition</a> and <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition②">Local end definition</a></p>
<pre class="cddl local-cddl remote-cddl">Extensible = (*text => any)

js-int = -9007199254740991..9007199254740991
js-uint = 0..9007199254740991
</pre>
   <h3 class="heading settled" data-level="3.2" id="session"><span class="secno">3.2. </span><span class="content">Session</span><a class="self-link" href="#session"></a></h3>
   <p>WebDriver BiDi extends the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-sessions" id="ref-for-dfn-sessions">session</a> concept from <a data-link-type="biblio" href="#biblio-webdriver" title="WebDriver">WebDriver</a>.</p>
   <p>A <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-sessions" id="ref-for-dfn-sessions①">session</a> has a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="bidi-flag">BiDi flag</dfn>, which is false unless otherwise
stated.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="bidi-session">BiDi session</dfn> is a <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-sessions" id="ref-for-dfn-sessions②">session</a> which has the <a data-link-type="dfn" href="#bidi-flag" id="ref-for-bidi-flag">BiDi flag</a> set to true.</p>
   <div class="algorithm" data-algorithm="active BiDi sessions">
     The list of <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="active-bidi-sessions">active BiDi sessions</dfn> is given by: 
    <ol>
     <li data-md>
      <p>Let <var>BiDi sessions</var> be a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list">list</a>.</p>
     <li data-md>
      <p>For each <var>session</var> in <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-active-session" id="ref-for-dfn-active-session">active sessions</a>:</p>
      <ol>
       <li data-md>
        <p>If <var>session</var> is a <a data-link-type="dfn" href="#bidi-session" id="ref-for-bidi-session">BiDi session</a> append <var>session</var> to <var>BiDi sessions</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>BiDi sessions</var>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="3.3" id="protocol-modules"><span class="secno">3.3. </span><span class="content">Modules</span><a class="self-link" href="#protocol-modules"></a></h3>
   <p>The WebDriver BiDi protocol is organized into modules.</p>
   <p>Each <dfn data-dfn-type="dfn" data-export id="module">module<a class="self-link" href="#module"></a></dfn> represents a collection of related <a data-link-type="dfn" href="#command" id="ref-for-command">commands</a> and <a data-link-type="dfn" href="#event" id="ref-for-event">events</a> pertaining to a certain aspect of the user
agent. For example, a module might contain functionality for inspecting and
manipulating the DOM, or for script execution.</p>
   <p>Each module has a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="module-name">module name</dfn> which is a string. The <a data-link-type="dfn" href="#command-command-name" id="ref-for-command-command-name">command name</a> and <a data-link-type="dfn" href="#event-event-name" id="ref-for-event-event-name">event name</a> for commands and events defined in the
module start with the <a data-link-type="dfn" href="#module-name" id="ref-for-module-name">module name</a> followed by a period "<code>.</code>".</p>
   <p>Modules which contain <a data-link-type="dfn" href="#command" id="ref-for-command①">commands</a> define <a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition③">remote end definition</a> fragments. These provide choices in the <code>CommandData</code> group for the
module’s <a data-link-type="dfn" href="#command" id="ref-for-command②">commands</a>, and can also define additional definition properties. They
can also define <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition③">local end definition</a> fragments that provide additional choices
in the <code>ResultData</code> group for the results of commands in the module.</p>
   <p>Modules which contain events define <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition④">local end definition</a> fragments that are
choices in the <code>Event</code> group for the module’s <a data-link-type="dfn" href="#event" id="ref-for-event①">events</a>.</p>
   <p>An implementation may define <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="extension-modules">extension modules</dfn>. These must have a <a data-link-type="dfn" href="#module-name" id="ref-for-module-name①">module name</a> that contains a single colon "<code>:</code>" character. The
part before the colon is the prefix; this is typically the same for all
extension modules specific to a given implementation and should be unique for a
given implementation. Such modules extend the <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition⑤">local end definition</a> and <a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition④">remote end definition</a> providing additional groups as choices for the defined <a data-link-type="dfn" href="#command" id="ref-for-command③">commands</a> and <a data-link-type="dfn" href="#event" id="ref-for-event②">events</a>.</p>
   <h3 class="heading settled" data-level="3.4" id="commands"><span class="secno">3.4. </span><span class="content">Commands</span><a class="self-link" href="#commands"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="command">command</dfn> is an asynchronous operation, requested by
the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-local-ends" id="ref-for-dfn-local-ends②">local end</a> and run on the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-ends" id="ref-for-dfn-remote-ends②">remote end</a>, resulting in either a
result or an error being returned to the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-local-ends" id="ref-for-dfn-local-ends③">local end</a>. Multiple
commands can run at the same time, and commands can potentially be
long-running. As a consequence, commands can finish out-of-order.</p>
   <p>Each <a data-link-type="dfn" href="#command" id="ref-for-command④">command</a> is defined by:</p>
   <ul>
    <li data-md>
     <p>A <dfn data-dfn-for="command" data-dfn-type="dfn" data-export id="command-command-type">command type<a class="self-link" href="#command-command-type"></a></dfn> which is defined by a <a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition⑤">remote end definition</a> fragment containing a group. Each such group has two fields:</p>
     <ul>
      <li data-md>
       <p><code>method</code> which is a string literal of the form <code>[module
name].[method name]</code>. This is the <dfn class="dfn-paneled" data-dfn-for="command" data-dfn-type="dfn" data-export data-lt="command name" id="command-command-name">command
name</dfn>.</p>
      <li data-md>
       <p><code>params</code> which defines a mapping containing data that to be passed into
the command. The populated value of this map is the <dfn class="dfn-paneled" data-dfn-for="command" data-dfn-type="dfn" data-export id="command-command-parameters">command parameters</dfn>.</p>
     </ul>
    <li data-md>
     <p>A <dfn class="dfn-paneled" data-dfn-for="command" data-dfn-type="dfn" data-export id="command-result-type">result type</dfn>, which is defined by a <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition⑥">local
end definition</a> fragment.</p>
    <li data-md>
     <p>A set of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-end-steps" id="ref-for-dfn-remote-end-steps">remote end steps</a> which define the actions to take for a command
given a <a data-link-type="dfn" href="#bidi-session" id="ref-for-bidi-session①">BiDi session</a> and <a data-link-type="dfn" href="#command-command-parameters" id="ref-for-command-command-parameters">command parameters</a> and return an
instance of the command <a data-link-type="dfn" href="#command-result-type" id="ref-for-command-result-type">result type</a>.</p>
   </ul>
   <p>A command that can run without an active session is a <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="static command" data-noexport id="static-command">static
command</dfn>. Commands are not static commands unless stated in their
definition.</p>
   <p>When commands are sent from the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-local-ends" id="ref-for-dfn-local-ends④">local end</a> they have a command id. This is an
identifier used by the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-local-ends" id="ref-for-dfn-local-ends⑤">local end</a> to identify the response from a particular
command. From the point of view of the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-ends" id="ref-for-dfn-remote-ends③">remote end</a> this identifier is opaque
and cannot be used internally to identify the command.</p>
   <p class="note" role="note"><span class="marker">Note:</span> This is because the command id is entirely controlled by the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-local-ends" id="ref-for-dfn-local-ends⑥">local end</a> and isn’t necessarily unique over the course of a session. For example a <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-local-ends" id="ref-for-dfn-local-ends⑦">local
end</a> which ignores all responses could use the same command id for each command.</p>
   <p>The <dfn class="dfn-paneled" data-dfn-for="command" data-dfn-type="dfn" data-export id="command-set-of-all-command-names">set of all command names</dfn> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set">set</a> containing
all the defined <a data-link-type="dfn" href="#command-command-name" id="ref-for-command-command-name①">command names</a>, including any belonging to <a data-link-type="dfn" href="#extension-modules" id="ref-for-extension-modules">extension
modules</a>.</p>
   <h3 class="heading settled" data-level="3.5" id="errors"><span class="secno">3.5. </span><span class="content">Errors</span><a class="self-link" href="#errors"></a></h3>
   <p>WebDriver BiDi extends the set of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code">error codes</a> from <a data-link-type="biblio" href="#biblio-webdriver" title="WebDriver">WebDriver</a> with the following additional codes:</p>
   <dl>
    <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="no-such-handle">no such handle</dfn> 
    <dd>Tried to deserialize an unknown <code>RemoteObjectReference</code>. 
    <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="no-such-intercept">no such intercept</dfn> 
    <dd>Tried to remove an unknown <a data-link-type="dfn" href="#network-intercept" id="ref-for-network-intercept">network intercept</a>. 
    <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="no-such-node">no such node</dfn> 
    <dd>Tried to deserialize an unknown <code>SharedReference</code>. 
    <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="no-such-request">no such request</dfn> 
    <dd>Tried to continue an unknown <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request" id="ref-for-concept-request">request</a>. 
    <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="no-such-script">no such script</dfn> 
    <dd>Tried to remove an unknown <a data-link-type="dfn" href="#preload-script" id="ref-for-preload-script">preload script</a>. 
    <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="unable-to-close-browser">unable to close browser</dfn> 
    <dd>Tried to close the browser, but failed to do so. 
   </dl>
<pre class="cddl local-cddl">ErrorCode = "invalid argument" /
            "invalid session id" /
            "move target out of bounds" /
            "no such alert" /
            "no such element" /
            "no such frame" /
            "no such handle" /
            "no such intercept" /
            "no such node" /
            "no such request" /
            "no such script" /
            "session not created" /
            "unable to capture screen" /
            "unable to close browser" /
            "unknown command" /
            "unknown error" /
            "unsupported operation"
</pre>
   <h3 class="heading settled" data-level="3.6" id="events"><span class="secno">3.6. </span><span class="content">Events</span><a class="self-link" href="#events"></a></h3>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="event">event</dfn> is a notification, sent by the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-ends" id="ref-for-dfn-remote-ends④">remote end</a> to the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-local-ends" id="ref-for-dfn-local-ends⑧">local end</a>, signaling that something of interest has
occurred on the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-ends" id="ref-for-dfn-remote-ends⑤">remote end</a>.</p>
   <ul>
    <li data-md>
     <p>An <dfn class="dfn-paneled" data-dfn-for="event" data-dfn-type="dfn" data-export id="event-event-type">event type</dfn> is defined by a <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition⑦">local
 end definition</a> fragment containing a group. Each such group has two fields:</p>
     <ul>
      <li data-md>
       <p><code>method</code> which is a string literal of the form <code>[module
name].[event name]</code>. This is the <dfn class="dfn-paneled" data-dfn-for="event" data-dfn-type="dfn" data-export data-lt="event name" id="event-event-name">event
name</dfn>.</p>
      <li data-md>
       <p><code>params</code> which defines a mapping containing event data. The
populated value of this map is the <dfn data-dfn-for="command" data-dfn-type="dfn" data-export data-lt="event parameters." id="command-event-parameters">event
parameters.<a class="self-link" href="#command-event-parameters"></a></dfn></p>
     </ul>
    <li data-md>
     <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="remote-end-event-trigger">remote end event trigger</dfn> which defines when the event is
 triggered and steps to construct the <a data-link-type="dfn" href="#event-event-type" id="ref-for-event-event-type">event type</a> data.</p>
    <li data-md>
     <p>Optionally, a set of <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="remote-end-subscribe-steps">remote end subscribe steps</dfn>, which define
 steps to take when a local end subscribes to an event. Where defined these
 steps have an associated <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="subscribe-priority">subscribe priority</dfn> which is an integer
 controlling the order in which the steps are run when multiple events are
 enabled at once, with lower integers indicating steps that run earlier.</p>
   </ul>
   <p>A <a data-link-type="dfn" href="#bidi-session" id="ref-for-bidi-session②">BiDi session</a> has a <dfn class="dfn-paneled" data-dfn-for="event" data-dfn-type="dfn" data-export id="event-global-event-set">global event set</dfn> which is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set①">set</a> containing the event names for events that are enabled for all
browsing contexts. This initially contains the <a data-link-type="dfn" href="#event-event-name" id="ref-for-event-event-name①">event name</a> for events that
are <dfn data-dfn-for="event" data-dfn-type="dfn" data-export id="event-in-the-default-event-set">in the default event set<a class="self-link" href="#event-in-the-default-event-set"></a></dfn>.</p>
   <p>A <a data-link-type="dfn" href="#bidi-session" id="ref-for-bidi-session③">BiDi session</a> has a <dfn class="dfn-paneled" data-dfn-for="event" data-dfn-type="dfn" data-export data-lt="browsing context event map" id="event-browsing-context-event-map">browsing context event
map</dfn>, which is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①">map</a> with <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context" id="ref-for-top-level-browsing-context">top-level browsing context</a> keys and values
that are a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set②">set</a> of <a data-link-type="dfn" href="#event-event-name" id="ref-for-event-event-name②">event name</a>s for events that are enabled in the given
browsing context.</p>
   <div class="algorithm" data-algorithm="event enabled browsing contexts">
    <p>To obtain a list of <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="event-enabled-browsing-contexts">event enabled browsing contexts</dfn> given <var>session</var> and <var>event name</var>:</p>
    <ol>
     <li data-md>
      <p>Let <var>contexts</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set③">set</a>.</p>
     <li data-md>
      <p>For each <var>context</var> → <var>events</var> of <var>session</var>’s <a data-link-type="dfn" href="#event-browsing-context-event-map" id="ref-for-event-browsing-context-event-map">browsing context event map</a>:</p>
      <ol>
       <li data-md>
        <p>If <var>events</var> contains <var>event name</var>, append <var>context</var> to <var>contexts</var></p>
      </ol>
     <li data-md>
      <p>Return <var>contexts</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="set of sessions for which an event is enabled">
    <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="set-of-sessions-for-which-an-event-is-enabled">set of sessions for which an event is enabled</dfn> given <var>event name</var> and <var>browsing contexts</var> is:</p>
    <ol>
     <li data-md>
      <p>Let <var>sessions</var> be a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set④">set</a>.</p>
     <li data-md>
      <p>For each <var>session</var> in <a data-link-type="dfn" href="#active-bidi-sessions" id="ref-for-active-bidi-sessions">active BiDI sessions</a>:</p>
      <ol>
       <li data-md>
        <p>If <a data-link-type="dfn" href="#event-is-enabled" id="ref-for-event-is-enabled">event is enabled</a> with <var>session</var>, <var>event name</var> and <var>browsing
 contexts</var>, append <var>session</var> to <var>sessions</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>sessions</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="event is enabled">
    <p>To determine if an <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="event-is-enabled">event is enabled</dfn> given <var>session</var>, <var>event name</var> and <var>browsing contexts</var>:</p>
    <p class="note" role="note"><span class="marker">Note:</span> <var>browsing contexts</var> is a set because a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/workers.html#shared-workers" id="ref-for-shared-workers">shared worker</a> can be associated
      with multiple contexts.</p>
    <ol>
     <li data-md>
      <p>Let <var>top-level browsing contexts</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set⑤">set</a>.</p>
     <li data-md>
      <p>For each <var>browsing context</var> of <var>browsing contexts</var>, append <var>browsing
 context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context" id="ref-for-top-level-browsing-context①">top-level browsing context</a> to <var>top-level browsing contexts</var>.</p>
     <li data-md>
      <p>Let <var>event map</var> be the <a data-link-type="dfn" href="#event-browsing-context-event-map" id="ref-for-event-browsing-context-event-map①">browsing context event map</a> for <var>session</var>.</p>
     <li data-md>
      <p>For each <var>browsing context</var> of <var>top-level browsing contexts</var>:</p>
      <ol>
       <li data-md>
        <p>If <var>event map</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists">contains</a> <var>browsing context</var>, let <var>browsing context
 events</var> be <var>event map</var>[<var>browsing context</var>].  Otherwise let <var>browsing
 context events</var> be null.</p>
       <li data-md>
        <p>If <var>browsing context events</var> is not null, and <var>browsing context events</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-contain" id="ref-for-list-contain">contains</a> <var>event name</var>, return true.</p>
      </ol>
     <li data-md>
      <p>If the <a data-link-type="dfn" href="#event-global-event-set" id="ref-for-event-global-event-set">global event set</a> for <var>session</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-contain" id="ref-for-list-contain①">contains</a> <var>event name</var> return
 true.</p>
     <li data-md>
      <p>Return false.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="obtain a set of event names">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="obtain-a-set-of-event-names">obtain a set of event names</dfn> given an <var>name</var>: 
    <ol>
     <li data-md>
      <p>Let <var>events</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set⑥">set</a>.</p>
     <li data-md>
      <p>If <var>name</var> contains a U+002E (period):</p>
      <ol>
       <li data-md>
        <p>If <var>name</var> is the <a data-link-type="dfn" href="#event-event-name" id="ref-for-event-event-name③">event name</a> for an event, append <var>name</var> to <var>events</var> and return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success">success</a> with data <var>events</var>.</p>
       <li data-md>
        <p>Return an <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code①">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument">invalid argument</a></p>
      </ol>
     <li data-md>
      <p>Otherwise <var>name</var> is interpreted as representing all the events in a
 module. If <var>name</var> is not a <a data-link-type="dfn" href="#module-name" id="ref-for-module-name②">module name</a> return an <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors①">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code②">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument①">invalid argument</a>.</p>
     <li data-md>
      <p>Append the <a data-link-type="dfn" href="#event-event-name" id="ref-for-event-event-name④">event name</a> for each <a data-link-type="dfn" href="#event" id="ref-for-event③">event</a> in the module with name <var>name</var> to <var>events</var>.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success①">success</a> with data <var>events</var>.</p>
    </ol>
   </div>
   <h2 class="heading settled" data-level="4" id="transport"><span class="secno">4. </span><span class="content">Transport</span><a class="self-link" href="#transport"></a></h2>
   <p>Message transport is provided using the WebSocket protocol. <a data-link-type="biblio" href="#biblio-rfc6455" title="The WebSocket Protocol">[RFC6455]</a></p>
   <p class="note" role="note"><span class="marker">Note:</span> In the terms of the WebSocket protocol, the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-local-ends" id="ref-for-dfn-local-ends⑨">local end</a> is the
client and the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-ends" id="ref-for-dfn-remote-ends⑥">remote end</a> is the server / remote host.</p>
   <p class="note" role="note"><span class="marker">Note:</span> The encoding of <a data-link-type="dfn" href="#command" id="ref-for-command⑤">commands</a> and <a data-link-type="dfn" href="#event" id="ref-for-event④">events</a> as messages is
similar to JSON-RPC, but this specification does not normatively
reference it. <a data-link-type="biblio" href="#biblio-json-rpc" title="JSON-RPC 2.0 Specification">[JSON-RPC]</a> The normative requirements on <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-ends" id="ref-for-dfn-remote-ends⑦">remote ends</a> are instead given as a precise processing model, while no
normative requirements are given for <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-local-ends" id="ref-for-dfn-local-ends①⓪">local ends</a>.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="websocket-listener">WebSocket listener</dfn> is a network endpoint that is able
to accept incoming <a data-link-type="biblio" href="#biblio-rfc6455" title="The WebSocket Protocol">WebSocket</a> connections.</p>
   <p>A <a data-link-type="dfn" href="#websocket-listener" id="ref-for-websocket-listener">WebSocket listener</a> has a <dfn class="dfn-paneled" data-dfn-for="listener" data-dfn-type="dfn" data-noexport id="listener-host">host</dfn>, a <dfn class="dfn-paneled" data-dfn-for="listener" data-dfn-type="dfn" data-noexport id="listener-port">port</dfn>, a <dfn class="dfn-paneled" data-dfn-for="listener" data-dfn-type="dfn" data-noexport id="listener-secure-flag">secure flag</dfn>, and a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="list-of-websocket-resources">list of WebSocket resources</dfn>.</p>
   <p>When a <a data-link-type="dfn" href="#websocket-listener" id="ref-for-websocket-listener①">WebSocket listener</a> <var>listener</var> is created, a <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-ends" id="ref-for-dfn-remote-ends⑧">remote end</a> must start to listen for WebSocket connections on the host and port
given by <var>listener</var>’s <a data-link-type="dfn" href="#listener-host" id="ref-for-listener-host">host</a> and <a data-link-type="dfn" href="#listener-port" id="ref-for-listener-port">port</a>. If <var>listener</var>’s <a data-link-type="dfn" href="#listener-secure-flag" id="ref-for-listener-secure-flag">secure flag</a> is set, then connections
established from <var>listener</var> must be TLS encrypted.</p>
   <p>A <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-ends" id="ref-for-dfn-remote-ends⑨">remote end</a> has a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set⑦">set</a> of <a data-link-type="dfn" href="#websocket-listener" id="ref-for-websocket-listener②">WebSocket listeners</a> <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="active listeners" data-noexport id="active-listeners">active
listeners</dfn>, which is initially empty.</p>
   <p>A <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-ends" id="ref-for-dfn-remote-ends①⓪">remote end</a> has a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set⑧">set</a> of <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="WebSocket connections not associated with a session" data-noexport id="websocket-connections-not-associated-with-a-session">WebSocket connections not associated with a
session</dfn>, which is initially empty.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="websocket-connection">WebSocket connection</dfn> is a network connection that follows the
requirements of the <a data-link-type="biblio" href="#biblio-rfc6455" title="The WebSocket Protocol">WebSocket protocol</a></p>
   <p>A <a data-link-type="dfn" href="#bidi-session" id="ref-for-bidi-session④">BiDi session</a> has a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set⑨">set</a> of <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="session WebSocket connections" data-noexport id="session-websocket-connections">session WebSocket
connections</dfn> whose elements are <a data-link-type="dfn" href="#websocket-connection" id="ref-for-websocket-connection">WebSocket connections</a>. This is
initially empty.</p>
   <p>A <a data-link-type="dfn" href="#bidi-session" id="ref-for-bidi-session⑤">BiDi session</a> <var>session</var> is <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="associated-with-connection">associated with connection</dfn> <var>connection</var> if <var>session</var>’s <a data-link-type="dfn" href="#session-websocket-connections" id="ref-for-session-websocket-connections">session WebSocket connections</a> contains <var>connection</var>.</p>
   <p class="note" role="note"><span class="marker">Note:</span> Each <a data-link-type="dfn" href="#websocket-connection" id="ref-for-websocket-connection①">WebSocket connection</a> is associated with at most one <a data-link-type="dfn" href="#bidi-session" id="ref-for-bidi-session⑥">BiDi
session</a>.</p>
   <div>
    <p>When a client <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc6455#section-4.1" id="ref-for-section-4.1">establishes a WebSocket connection</a> <var>connection</var> by
connecting to one of the set of <a data-link-type="dfn" href="#active-listeners" id="ref-for-active-listeners">active listeners</a> <var>listener</var>, the
implementation must proceed according to the WebSocket <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc6455#section-4.2" id="ref-for-section-4.2">server-side
requirements</a>, with the following steps run when deciding whether to
accept the incoming connection:</p>
    <ol>
     <li data-md>
      <p>Let <var>resource name</var> be the resource name from <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc6455#section-4.2.1" id="ref-for-section-4.2.1">reading the
 client’s opening handshake</a>. If <var>resource name</var> is not in <var>listener</var>’s <a data-link-type="dfn" href="#list-of-websocket-resources" id="ref-for-list-of-websocket-resources">list of WebSocket resources</a>, then stop
 running these steps and act as if the requested service is not
 available.</p>
     <li data-md>
      <p>If <var>resource name</var> is the byte string "<code>/session</code>",
 and the implementation <a data-link-type="dfn" href="#supports-bidi-only-sessions" id="ref-for-supports-bidi-only-sessions">supports BiDi-only sessions</a>:</p>
      <ol>
       <li data-md>
        <p>Run any other implementation-defined steps to decide if the
 connection should be accepted, and if it is not stop running these
 steps and act as if the requested service is not available.</p>
       <li data-md>
        <p>Add the connection to <a data-link-type="dfn" href="#websocket-connections-not-associated-with-a-session" id="ref-for-websocket-connections-not-associated-with-a-session">WebSocket connections not associated with a
 session</a>.</p>
       <li data-md>
        <p>Return.</p>
      </ol>
     <li data-md>
      <p><a data-link-type="dfn" href="#get-a-session-id-for-a-websocket-resource" id="ref-for-get-a-session-id-for-a-websocket-resource">Get a session ID for a WebSocket resource</a> with <var>resource name</var> and let <var>session id</var> be that value. If <var>session id</var> is null then
 stop running these steps and act as if the requested service is not
 available.</p>
     <li data-md>
      <p>If there is a <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-sessions" id="ref-for-dfn-sessions③">session</a> in the list of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-active-session" id="ref-for-dfn-active-session①">active sessions</a> with <var>session id</var> as its <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-session-id" id="ref-for-dfn-session-id">session ID</a> then let <var>session</var> be that
 session. Otherwise stop running these steps and act as if the
 requested service is not available.</p>
     <li data-md>
      <p>Run any other implementation-defined steps to decide if the
 connection should be accepted, and if it is not stop running these
 steps and act as if the requested service is not available.</p>
     <li data-md>
      <p>Otherwise append <var>connection</var> to <var>session</var>’s <a data-link-type="dfn" href="#session-websocket-connections" id="ref-for-session-websocket-connections①">session WebSocket
 connections</a>, and proceed with the WebSocket <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc6455#section-4.2" id="ref-for-section-4.2①">server-side requirements</a> when a server chooses to accept an incoming connection.</p>
    </ol>
    <p class="issue" id="issue-0dc5e7b6"><a class="self-link" href="#issue-0dc5e7b6"></a> Do we support > 1 connection for a single session?</p>
   </div>
   <p>When <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc6455#section-6.2" id="ref-for-section-6.2">a WebSocket message has been received</a> for a <a data-link-type="dfn" href="#websocket-connection" id="ref-for-websocket-connection②">WebSocket
connection</a> <var>connection</var> with type <var>type</var> and data <var>data</var>, a <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-ends" id="ref-for-dfn-remote-ends①①">remote end</a> must <a data-link-type="dfn" href="#handle-an-incoming-message" id="ref-for-handle-an-incoming-message">handle an incoming message</a> given <var>connection</var>, <var>type</var> and <var>data</var>.</p>
   <p>When <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc6455#section-7.1.3" id="ref-for-section-7.1.3">the WebSocket closing handshake is started</a> or when <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc6455#section-7.1.4" id="ref-for-section-7.1.4">the
WebSocket connection is closed</a> for a <a data-link-type="dfn" href="#websocket-connection" id="ref-for-websocket-connection③">WebSocket connection</a> <var>connection</var>, a <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-ends" id="ref-for-dfn-remote-ends①②">remote end</a> must <a data-link-type="dfn" href="#handle-a-connection-closing" id="ref-for-handle-a-connection-closing">handle a connection closing</a> given <var>connection</var>.</p>
   <p class="note" role="note"><span class="marker">Note:</span> Both conditions are needed because it is possible for a
WebSocket connection to be closed without a closing handshake.</p>
   <div class="algorithm" data-algorithm="construct a WebSocket resource name">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="construct a WebSocket resource name|constructing a
WebSocket resource name" data-noexport id="construct-a-websocket-resource-name">construct a WebSocket resource name</dfn> given a <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-sessions" id="ref-for-dfn-sessions④">session</a> <var>session</var>:</p>
    <ol>
     <li data-md>
      <p>If <var>session</var> is null, return "<code>/session</code>"</p>
     <li data-md>
      <p>Return the result of concatenating the string "<code>/session/</code>"
 with <var>session</var>’s <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-session-id" id="ref-for-dfn-session-id①">session ID</a>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="construct a WebSocket URL">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="construct a WebSocket URL|constructing a WebSocket
URL" data-noexport id="construct-a-websocket-url">construct a WebSocket URL</dfn> given a <a data-link-type="dfn" href="#websocket-listener" id="ref-for-websocket-listener③">WebSocket listener</a> <var>listener</var> and <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-sessions" id="ref-for-dfn-sessions⑤">session</a> <var>session</var>:</p>
    <ol>
     <li data-md>
      <p>Let <var>resource name</var> be the result of <a data-link-type="dfn" href="#construct-a-websocket-resource-name" id="ref-for-construct-a-websocket-resource-name">constructing a WebSocket
 resource name</a> given <var>session</var>.</p>
     <li data-md>
      <p>Return a <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc6455#section-3" id="ref-for-section-3">WebSocket URI</a> constructed with host set to <var>listener</var>’s <a data-link-type="dfn" href="#listener-host" id="ref-for-listener-host①">host</a>, port set to <var>listener</var>’s <a data-link-type="dfn" href="#listener-port" id="ref-for-listener-port①">port</a>, path set to <var>resource name</var>, following the wss-URI
 construct if <var>listener</var>’s <a data-link-type="dfn" href="#listener-secure-flag" id="ref-for-listener-secure-flag①">secure flag</a> is set and the ws-URL
 construct otherwise.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="get a session ID for a WebSocket resource">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="get-a-session-id-for-a-websocket-resource">get a session ID for a WebSocket resource</dfn> given <var>resource name</var>:</p>
    <ol>
     <li data-md>
      <p>If <var>resource name</var> doesn’t begin with the byte string
 "<code>/session/</code>", return null.</p>
     <li data-md>
      <p>Let <var>session id</var> be the bytes in <var>resource name</var> following the
 "<code>/session/</code>" prefix.</p>
     <li data-md>
      <p>If <var>session id</var> is not the string representation of a <a data-link-type="biblio" href="#biblio-rfc4122" title="A Universally Unique IDentifier (UUID) URN Namespace">UUID</a>, return null.</p>
     <li data-md>
      <p>Return <var>session id</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="start listening for a WebSocket connection">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="start-listening-for-a-websocket-connection">start listening for a WebSocket connection</dfn> given a <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-sessions" id="ref-for-dfn-sessions⑥">session</a> <var>session</var>: 
    <ol>
     <li data-md>
      <p>If there is an existing <a data-link-type="dfn" href="#websocket-listener" id="ref-for-websocket-listener④">WebSocket listener</a> in <a data-link-type="dfn" href="#active-listeners" id="ref-for-active-listeners①">active listeners</a> which
 the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-ends" id="ref-for-dfn-remote-ends①③">remote end</a> would like to reuse, let <var>listener</var> be that
 listener. Otherwise let <var>listener</var> be a new <a data-link-type="dfn" href="#websocket-listener" id="ref-for-websocket-listener⑤">WebSocket listener</a> with <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#implementation-defined" id="ref-for-implementation-defined">implementation-defined</a> <a data-link-type="dfn" href="#listener-host" id="ref-for-listener-host②">host</a>, <a data-link-type="dfn" href="#listener-port" id="ref-for-listener-port②">port</a>, <a data-link-type="dfn" href="#listener-secure-flag" id="ref-for-listener-secure-flag②">secure flag</a>, and an empty <a data-link-type="dfn" href="#list-of-websocket-resources" id="ref-for-list-of-websocket-resources①">list of WebSocket resources</a>.</p>
     <li data-md>
      <p>Let <var>resource name</var> be the result of <a data-link-type="dfn" href="#construct-a-websocket-resource-name" id="ref-for-construct-a-websocket-resource-name①">constructing a WebSocket
 resource name</a> given <var>session</var>.</p>
     <li data-md>
      <p>Append <var>resource name</var> to the <a data-link-type="dfn" href="#list-of-websocket-resources" id="ref-for-list-of-websocket-resources②">list of WebSocket resources</a> for <var>listener</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append" id="ref-for-set-append">Append</a> <var>listener</var> to the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-ends" id="ref-for-dfn-remote-ends①④">remote end</a>'s <a data-link-type="dfn" href="#active-listeners" id="ref-for-active-listeners②">active
  listeners</a>.</p>
     <li data-md>
      <p>Return <var>listener</var>.</p>
    </ol>
   </div>
   <p class="note" role="note"><span class="marker">Note:</span> An <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-intermediary-node" id="ref-for-dfn-intermediary-node">intermediary node</a> handling multiple sessions can use one
or many WebSocket listeners. <a data-link-type="biblio" href="#biblio-webdriver" title="WebDriver">WebDriver</a> defines that
an <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-endpoint-node" id="ref-for-dfn-endpoint-node">endpoint node</a> supports at most one session at a time, so it’s
expected to only have a single listener.</p>
   <p class="note" role="note"><span class="marker">Note:</span> For an <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-endpoint-node" id="ref-for-dfn-endpoint-node①">endpoint node</a> the <a data-link-type="dfn" href="#listener-host" id="ref-for-listener-host③">host</a> in the above steps will
typically be "<code>localhost</code>".</p>
   <div class="algorithm" data-algorithm="handle an incoming message">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="handle-an-incoming-message">handle an incoming message</dfn> given a <a data-link-type="dfn" href="#websocket-connection" id="ref-for-websocket-connection④">WebSocket connection</a> <var>connection</var>, type <var>type</var> and data <var>data</var>: 
    <ol>
     <li data-md>
      <p>If <var>type</var> is not <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc6455#section-5.2" id="ref-for-section-5.2">text</a>, <a data-link-type="dfn" href="#send-an-error-response" id="ref-for-send-an-error-response">send an error
 response</a> given <var>connection</var>, null, and <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument②">invalid argument</a>, and finally
 return.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert">Assert</a>: <var>data</var> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#scalar-value-string" id="ref-for-scalar-value-string">scalar value string</a>, because the
  WebSocket <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc6455#section-8.1" id="ref-for-section-8.1">handling errors in UTF-8-encoded data</a> would already
  have <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc6455#section-7.1.7" id="ref-for-section-7.1.7">failed the WebSocket
  connection</a> otherwise.</p>
      <p class="issue" id="issue-449f8f30"><a class="self-link" href="#issue-449f8f30"></a> Nothing seems to define what <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc6455#section-7.4" id="ref-for-section-7.4">status code</a> is used for UTF-8 errors.</p>
     <li data-md>
      <p>If there is a <a data-link-type="dfn" href="#bidi-session" id="ref-for-bidi-session⑦">BiDi Session</a> <a data-link-type="dfn" href="#associated-with-connection" id="ref-for-associated-with-connection">associated with connection</a> <var>connection</var>,
 let <var>session</var> be that session. Otherwise if <var>connection</var> is in <a data-link-type="dfn" href="#websocket-connections-not-associated-with-a-session" id="ref-for-websocket-connections-not-associated-with-a-session①">WebSocket
 connections not associated with a session</a>, let <var>session</var> be
 null. Otherwise, return.</p>
     <li data-md>
      <p>Let <var>parsed</var> be the result of <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#parse-a-json-string-to-an-infra-value" id="ref-for-parse-a-json-string-to-an-infra-value">parsing JSON
 into Infra values</a> given <var>data</var>. If this throws an exception, then <a data-link-type="dfn" href="#send-an-error-response" id="ref-for-send-an-error-response①">send
 an error response</a> given <var>connection</var>, null, and <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument③">invalid argument</a>, and
 finally return.</p>
     <li data-md>
      <p>If <var>session</var> is not null and not in <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-active-session" id="ref-for-dfn-active-session②">active sessions</a> then return.</p>
     <li data-md>
      <p>Match <var>parsed</var> against the <a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition⑥">remote end definition</a>. If this results in a
 match:</p>
      <ol>
       <li data-md>
        <p>Let <var>matched</var> be the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map②">map</a> representing the matched data.</p>
       <li data-md>
        <p class="assertion">Assert: <var>matched</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①">contains</a> "<code>id</code>", "<code>method</code>", and
  "<code>params</code>".</p>
       <li data-md>
        <p>Let <var>command id</var> be <var>matched</var>["<code>id</code>"].</p>
       <li data-md>
        <p>Let <var>method</var> be <var>matched</var>["<code>method</code>"]</p>
       <li data-md>
        <p>Let <var>command</var> be the command with <a data-link-type="dfn" href="#command-command-name" id="ref-for-command-command-name②">command name</a> <var>method</var>.</p>
       <li data-md>
        <p>If <var>session</var> is null and <var>command</var> is not a <a data-link-type="dfn" href="#static-command" id="ref-for-static-command">static command</a>, then <a data-link-type="dfn" href="#send-an-error-response" id="ref-for-send-an-error-response②">send an error response</a> given <var>connection</var>, <var>command id</var>, and <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-session-id" id="ref-for-dfn-invalid-session-id">invalid
  session id</a>, and return.</p>
       <li data-md>
        <p>Run the following steps in parallel:</p>
        <ol>
         <li data-md>
          <p>Let <var>result</var> be the result of running the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-end-steps" id="ref-for-dfn-remote-end-steps①">remote end steps</a> for <var>command</var> given <var>session</var> and <a data-link-type="dfn" href="#command-command-parameters" id="ref-for-command-command-parameters①">command parameters</a> <var>matched</var>["<code>params</code>"]</p>
         <li data-md>
          <p>If <var>result</var> is an <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors②">error</a>, then <a data-link-type="dfn" href="#send-an-error-response" id="ref-for-send-an-error-response③">send an error response</a> given <var>connection</var>, <var>command id</var>, and <var>result</var>’s <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code③">error code</a>, and finally
 return.</p>
         <li data-md>
          <p>Let <var>value</var> be <var>result</var>’s data.</p>
         <li data-md>
          <p class="assertion">Assert: <var>value</var> matches the definition for the <a data-link-type="dfn" href="#command-result-type" id="ref-for-command-result-type①">result type</a> corresponding to the command with <a data-link-type="dfn" href="#command-command-name" id="ref-for-command-command-name③">command name</a> <var>method</var>.</p>
         <li data-md>
          <p>If <var>method</var> is "<code>session.new</code>", let <var>session</var> be the entry in
 the list of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-active-session" id="ref-for-dfn-active-session③">active sessions</a> whose <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-session-id" id="ref-for-dfn-session-id②">session ID</a> is equal to the
 "<code>sessionId</code>" property of <var>value</var>, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append" id="ref-for-set-append①">append</a> <var>connection</var> to <var>session</var>’s <a data-link-type="dfn" href="#session-websocket-connections" id="ref-for-session-websocket-connections②">session WebSocket connections</a>, and
 remove <var>connection</var> from the <a data-link-type="dfn" href="#websocket-connections-not-associated-with-a-session" id="ref-for-websocket-connections-not-associated-with-a-session②">WebSocket connections not associated with
 a session</a>.</p>
         <li data-md>
          <p>Let <var>response</var> be a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map③">map</a> matching the <code>CommandResponse</code> production in the <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition⑧">local end definition</a> with the <code>id</code> field set to <var>command id</var> and the <code>value</code> field set to <var>value</var>.</p>
         <li data-md>
          <p>Let <var>serialized</var> be the result of <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#serialize-an-infra-value-to-json-bytes" id="ref-for-serialize-an-infra-value-to-json-bytes">serialize an infra value to JSON
 bytes</a> given <var>response</var>.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://tools.ietf.org/html/rfc6455#section-6.1" id="ref-for-section-6.1">Send a WebSocket message</a> comprised of <var>serialized</var> over <var>connection</var>.</p>
        </ol>
      </ol>
     <li data-md>
      <p>Otherwise:</p>
      <ol>
       <li data-md>
        <p>Let <var>command id</var> be null.</p>
       <li data-md>
        <p>If <var>parsed</var> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map④">map</a> and <var>parsed</var>["<code>id</code>"] exists and is an
  integer greater than or equal to zero, set <var>command id</var> to that integer.</p>
       <li data-md>
        <p>Let <var>error code</var> be <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument④">invalid argument</a>.</p>
       <li data-md>
        <p>If <var>parsed</var> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑤">map</a> and <var>parsed</var>["<code>method</code>"] exists and is a
  string, but <var>parsed</var>["<code>method</code>"] is not in the <a data-link-type="dfn" href="#command-set-of-all-command-names" id="ref-for-command-set-of-all-command-names">set of all
  command names</a>, set <var>error code</var> to <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-unknown-command" id="ref-for-dfn-unknown-command">unknown command</a>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="#send-an-error-response" id="ref-for-send-an-error-response④">Send an error response</a> given <var>connection</var>, <var>command id</var>, and <var>error code</var>.</p>
      </ol>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="get related browsing contexts">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="get-related-browsing-contexts">get related browsing contexts</dfn> given an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#settings-object" id="ref-for-settings-object">settings object</a> <var>settings</var>:</p>
    <ol>
     <li data-md>
      <p>Let <var>related browsing contexts</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set①⓪">set</a></p>
     <li data-md>
      <p>If <var>settings</var>’ <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global">relevant global object</a> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window">Window</a></code>, append <var>settings</var>’ <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window">associated <code>Document</code></a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#concept-document-bc" id="ref-for-concept-document-bc">browsing context</a> to <var>related browsing contexts</var>.</p>
      <p>Otherwise if the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global">global object</a> specified by <var>settings</var> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/workers.html#workerglobalscope" id="ref-for-workerglobalscope">WorkerGlobalScope</a></code>, for each <var>owner</var> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global①">global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/workers.html#concept-WorkerGlobalScope-owner-set" id="ref-for-concept-WorkerGlobalScope-owner-set">owner set</a>, if <var>owner</var> is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document">Document</a>, append <var>owner</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#concept-document-bc" id="ref-for-concept-document-bc①">browsing context</a> to <var>related browsing contexts</var>.</p>
     <li data-md>
      <p>Return <var>related browsing contexts</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="emit an event">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="emit-an-event">emit an event</dfn> given <var>session</var>, and <var>body</var>: 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert①">Assert</a>: <var>body</var> has <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-size" id="ref-for-map-size">size</a> 2 and <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists②">contains</a> "<code>method</code>"
 and "<code>params</code>".</p>
     <li data-md>
      <p>Let <var>serialized</var> be the result of <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#serialize-an-infra-value-to-json-bytes" id="ref-for-serialize-an-infra-value-to-json-bytes①">serialize an infra value to JSON
 bytes</a> given <var>body</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate">For each</a> <var>connection</var> in <var>session</var>’s <a data-link-type="dfn" href="#session-websocket-connections" id="ref-for-session-websocket-connections③">session WebSocket connections</a>:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://tools.ietf.org/html/rfc6455#section-6.1" id="ref-for-section-6.1①">Send a WebSocket message</a> comprised of <var>serialized</var> over <var>connection</var>.</p>
      </ol>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="send an error response">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="send-an-error-response">send an error response</dfn> given a <a data-link-type="dfn" href="#websocket-connection" id="ref-for-websocket-connection⑤">WebSocket connection</a> <var>connection</var>, <var>command id</var>, and <var>error code</var>: 
    <ol>
     <li data-md>
      <p>Let <var>error data</var> be a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑥">map</a> matching the <code>ErrorResponse</code> production in the <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition⑨">local end definition</a>, with the <code>id</code> field
 set to <var>command id</var>, the <code>error</code> field set to <var>error code</var>, the <code>message</code> field set to an implementation-defined string
 containing a human-readable definition of the error that occurred and the <code>stacktrace</code> field optionally set to an implementation-defined
 string containing a stack trace report of the active stack frames at the
 time when the error occurred.</p>
     <li data-md>
      <p>Let <var>response</var> be the result of <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#serialize-an-infra-value-to-json-bytes" id="ref-for-serialize-an-infra-value-to-json-bytes②">serialize an infra value to JSON bytes</a> given <var>error data</var>.</p>
      <p class="note" role="note"><span class="marker">Note:</span> <var>command id</var> can be null, in which case the <code>id</code> field will
 also be set to null, not omitted from <var>response</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://tools.ietf.org/html/rfc6455#section-6.1" id="ref-for-section-6.1②">Send a WebSocket message</a> comprised of <var>response</var> over <var>connection</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="handle a connection closing">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="handle-a-connection-closing">handle a connection closing</dfn> given a <a data-link-type="dfn" href="#websocket-connection" id="ref-for-websocket-connection⑥">WebSocket connection</a> <var>connection</var>:</p>
    <ol>
     <li data-md>
      <p>If there is a <a data-link-type="dfn" href="#bidi-session" id="ref-for-bidi-session⑧">BiDi session</a> <a data-link-type="dfn" href="#associated-with-connection" id="ref-for-associated-with-connection①">associated with connection</a> <var>connection</var>:</p>
      <ol>
       <li data-md>
        <p>Let <var>session</var> be the <a data-link-type="dfn" href="#bidi-session" id="ref-for-bidi-session⑨">BiDi session</a> <a data-link-type="dfn" href="#associated-with-connection" id="ref-for-associated-with-connection②">associated with connection</a> <var>connection</var>.</p>
       <li data-md>
        <p>Remove <var>connection</var> from <var>session</var>’s <a data-link-type="dfn" href="#session-websocket-connections" id="ref-for-session-websocket-connections④">session WebSocket
 connections</a>.</p>
      </ol>
     <li data-md>
      <p>Otherwise, if <a data-link-type="dfn" href="#websocket-connections-not-associated-with-a-session" id="ref-for-websocket-connections-not-associated-with-a-session③">WebSocket connections not associated with a session</a> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-contain" id="ref-for-list-contain②">contains</a> <var>connection</var>, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-remove" id="ref-for-list-remove">remove</a> <var>connection</var> from that set.</p>
    </ol>
   </div>
   <p class="note" role="note"><span class="marker">Note:</span> This does not end any <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-sessions" id="ref-for-dfn-sessions⑦">session</a>.</p>
   <p class="issue" id="issue-9f7aff26"><a class="self-link" href="#issue-9f7aff26"></a> Need to hook in to the session ending to allow the UA to close
the listener if it wants.</p>
   <div class="algorithm" data-algorithm="close the WebSocket connections">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="close-the-websocket-connections">close the WebSocket connections</dfn> given <var>session</var>:</p>
    <ol>
     <li data-md>
      <p>For each <var>connection</var> in <var>session</var>’s <a data-link-type="dfn" href="#session-websocket-connections" id="ref-for-session-websocket-connections⑤">session WebSocket
 connections</a>:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://tools.ietf.org/html/rfc6455#section-7.1.2" id="ref-for-section-7.1.2">Start the WebSocket closing handshake</a> with <var>connection</var>.</p>
        <p class="note" role="note"><span class="marker">Note:</span> this will result in the steps in <a data-link-type="dfn" href="#handle-a-connection-closing" id="ref-for-handle-a-connection-closing①">handle a connection closing</a> being run for <var>connection</var>, which will clean up resources associated with <var>connection</var>.</p>
      </ol>
    </ol>
   </div>
   <h3 class="heading settled" data-level="4.1" id="establishing"><span class="secno">4.1. </span><span class="content">Establishing a Connection</span><a class="self-link" href="#establishing"></a></h3>
   <p>WebDriver clients opt in to a bidirectional connection by requesting a
capability with the name "<code>webSocketUrl</code>" and value
true.</p>
   <p>This specification defines an <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-additional-webdriver-capability" id="ref-for-dfn-additional-webdriver-capability">additional webdriver capability</a> with the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-capability-name" id="ref-for-dfn-capability-name">capability name</a> "<code>webSocketUrl</code>".</p>
   <div class="algorithm" data-algorithm="webSocketUrl capability deserialization algorithm">
     The <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-additional-capability-deserialization-algorithm" id="ref-for-dfn-additional-capability-deserialization-algorithm">additional capability deserialization algorithm</a> for the
"<code>webSocketUrl</code>" capability, with parameter <var>value</var> is: 
    <ol>
     <li data-md>
      <p>If <var>value</var> is not a boolean, return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors③">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code④">code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument⑤">invalid argument</a>.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success②">success</a> with data <var>value</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="webSocketUrl capability serialization algorithm">
     The <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-matched-capability-serialization-algorithm" id="ref-for-dfn-matched-capability-serialization-algorithm">matched capability serialization algorithm</a> for the "<code>webSocketUrl</code>" capability,
with parameter <var>value</var> is: 
    <ol>
     <li data-md>
      <p>If <var>value</var> is false, return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success③">success</a> with data null.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success④">success</a> with data true.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="webSocketUrl new session algorithm">
     The <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-webdriver-new-session-algorithm" id="ref-for-dfn-webdriver-new-session-algorithm">WebDriver new session algorithm</a> defined by this specification,
with parameters <var>session</var>, <var>capabilities</var>, and <var>flags</var> is: 
    <ol>
     <li data-md>
      <p>If <var>flags</var> contains "<code>bidi</code>", return.</p>
     <li data-md>
      <p>Let <var>webSocketUrl</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-get-a-property" id="ref-for-dfn-get-a-property">getting a property</a> named
 "<code>webSocketUrl</code>" from <var>capabilities</var>.</p>
     <li data-md>
      <p>If <var>webSocketUrl</var> is undefined or false, return.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert②">Assert</a>: <var>webSocketUrl</var> is true.</p>
     <li data-md>
      <p>Let <var>listener</var> be the result of <a data-link-type="dfn" href="#start-listening-for-a-websocket-connection" id="ref-for-start-listening-for-a-websocket-connection">start listening for a WebSocket
 connection</a> given <var>session</var>.</p>
     <li data-md>
      <p>Set <var>webSocketUrl</var> to the result of <a data-link-type="dfn" href="#construct-a-websocket-url" id="ref-for-construct-a-websocket-url">constructing a WebSocket
 URL</a> given <var>listener</var> and <var>session</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-set-a-property" id="ref-for-dfn-set-a-property">Set a property</a> on <var>capabilities</var> named
 "<code>webSocketUrl</code>" to <var>webSocketUrl</var>.</p>
     <li data-md>
      <p>Set <var>session</var>’s <a data-link-type="dfn" href="#bidi-flag" id="ref-for-bidi-flag①">BiDi flag</a> to true.</p>
     <li data-md>
      <p>Append "<code>bidi</code>" to flags.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="no HTTP new session">
    <p>Implementations should also allow clients to establish a <a data-link-type="dfn" href="#bidi-session" id="ref-for-bidi-session①⓪">BiDi Session</a> which
is not a <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-http-session" id="ref-for-dfn-http-session">HTTP Session</a>. In this case the URL to the WebSocket server is
communicated out-of-band. An implementation that allows this <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="supports BiDi-only sessions" data-noexport id="supports-bidi-only-sessions">supports
BiDi-only sessions</dfn>. At the time such an implementation is ready to accept
requests to start a WebDriver session, it must:</p>
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="#start-listening-for-a-websocket-connection" id="ref-for-start-listening-for-a-websocket-connection①">Start listening for a WebSocket connection</a> given null.</p>
    </ol>
   </div>
   <h2 class="heading settled" data-level="5" id="sandbox"><span class="secno">5. </span><span class="content">Sandboxed Script Execution</span><a class="self-link" href="#sandbox"></a></h2>
   <p>A common requirement for automation tools is to execute scripts which have
access to the DOM of a document, but don’t have information about any changes to
the DOM APIs made by scripts running in the browsing context containing the
document.</p>
   <p>A <a data-link-type="dfn" href="#bidi-session" id="ref-for-bidi-session①①">BiDi session</a> has a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="sandbox-map">sandbox map</dfn> which is a weak map in which the
keys are <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window①">Window</a></code> objects, and the values are maps between strings and <code class="idl"><a data-link-type="idl" href="#sandboxwindowproxy" id="ref-for-sandboxwindowproxy">SandboxWindowProxy</a></code> objects.</p>
   <p class="note" role="note"><span class="marker">Note:</span> The definition of sandboxes here is an attempt to codify the behaviour of
existing implementations. It exposes parts of the implementations that have
previously been considered internal by specifications, in particular the
distinction between the internal state of platform objects (which is typically
implemented as native objects in the main implementation language of the browser
engine) and the ECMAScript-visible state. Because existing sandbox
implementations happen at a low level in the engine, implementations converging
toward the specification in all details might be a slow process. In the
meantime, implementors are encouraged to provide detailed documentation on any
differences with the specification, and users of this feature are encouraged to
explicitly test that scripts running in sandboxes work in all implementations.</p>
   <h3 class="heading settled" data-level="5.1" id="sandbox-realm"><span class="secno">5.1. </span><span class="content">Sandbox Realms</span><a class="self-link" href="#sandbox-realm"></a></h3>
   <p>Each sandbox is a unique ECMAScript <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-code-realms" id="ref-for-sec-code-realms">Realm</a>. However the sandbox realm
provides access to platform objects in an existing <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window②">Window</a></code> realm via <code class="idl"><a data-link-type="idl" href="#sandboxproxy" id="ref-for-sandboxproxy">SandboxProxy</a></code> objects.</p>
   <div class="algorithm" data-algorithm="get or create a sandbox realm">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="get-or-create-a-sandbox-realm">get or create a sandbox realm</dfn> given <var>name</var> and <var>browsing context</var>: 
    <ol>
     <li data-md>
      <p>If <var>name</var> is an empty string, then return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors④">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code⑤">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument⑥">invalid argument</a>.</p>
     <li data-md>
      <p>Let <var>window</var> be <var>browsing context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#active-window" id="ref-for-active-window">active window</a>.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="#sandbox-map" id="ref-for-sandbox-map">sandbox map</a> does not contain <var>window</var>, set <a data-link-type="dfn" href="#sandbox-map" id="ref-for-sandbox-map①">sandbox map</a>[<var>window</var>]
 to a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑦">map</a>.</p>
     <li data-md>
      <p>Let <var>sandboxes</var> be <a data-link-type="dfn" href="#sandbox-map" id="ref-for-sandbox-map②">sandbox map</a>[<var>window</var>].</p>
     <li data-md>
      <p>If <var>sandboxes</var> does not contain <var>name</var>, set <var>sandboxes</var>[<var>name</var>] to <a data-link-type="dfn" href="#create-a-sandbox-realm" id="ref-for-create-a-sandbox-realm">create
 a sandbox realm</a> with <var>browsing context</var>.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success⑤">success</a> with data <var>sandboxes</var>[<var>name</var>].</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="create a sandbox realm">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="create-a-sandbox-realm">create a sandbox realm</dfn> with <var>window</var>: 
    <p class="issue" id="issue-cd353b2b"><a class="self-link" href="#issue-cd353b2b"></a> Define creation of sandbox realm. This is going to return a <code class="idl"><a data-link-type="idl" href="#sandboxwindowproxy" id="ref-for-sandboxwindowproxy①">SandboxWindowProxy</a></code> wrapping <var>window</var>.</p>
   </div>
   <div class="algorithm" data-algorithm="get a sandbox name">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="get-a-sandbox-name">get a sandbox name</dfn> given <var>target realm</var>:</p>
    <ol>
     <li data-md>
      <p>Let <var>realms maps</var> be <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-getting-the-values" id="ref-for-map-getting-the-values">get the values</a> of <a data-link-type="dfn" href="#sandbox-map" id="ref-for-sandbox-map③">sandbox map</a>.</p>
     <li data-md>
      <p>For each <var>realms map</var> in <var>realms maps</var>:</p>
      <ol>
       <li data-md>
        <p>For each <var>name</var> → <var>realm</var> in <var>realms map</var>:</p>
        <ol>
         <li data-md>
          <p>If <var>realm</var> is <var>target realm</var>, return <var>name</var>.</p>
        </ol>
      </ol>
     <li data-md>
      <p>Return null.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="5.2" id="sandbox-proxy"><span class="secno">5.2. </span><span class="content">Sandbox Proxy Objects</span><a class="self-link" href="#sandbox-proxy"></a></h3>
   <p>A <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="sandboxproxy"><code>SandboxProxy</code></dfn> object is an exotic object that mediates sandboxed access to
objects from another realm. Sandbox proxy objects are designed to enforce the
following restrictions:</p>
   <ul>
    <li data-md>
     <p>Platform objects are accessible, but property access returns only
Web IDL-defined properties and not ECMAScript-defined properties (either
"expando" properties that are not present in the underlying interface, or
ECMAScript-defined properties that shadow a property in the underlying
interface).</p>
    <li data-md>
     <p>Setting a property either runs Web IDL-defined setter steps, or sets a property
on the proxy object. This means that properties written outside the sandbox
are not accessible, but interface members can be used as normal.</p>
   </ul>
   <p>There is no <code class="idl"><a data-link-type="idl" href="#sandboxproxy" id="ref-for-sandboxproxy①">SandboxProxy</a></code> interface object.</p>
   <p class="issue" id="issue-de7468b6"><a class="self-link" href="#issue-de7468b6"></a> Define in detail how <code class="idl"><a data-link-type="idl" href="#sandboxproxy" id="ref-for-sandboxproxy②">SandboxProxy</a></code> works</p>
   <div class="algorithm" data-algorithm="unwrapped">
     To get <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="unwrapped">unwrapped</dfn> <var>object</var>: 
    <ol>
     <li data-md>
      <p>While <var>object</var> is <code class="idl"><a data-link-type="idl" href="#sandboxproxy" id="ref-for-sandboxproxy③">SandboxProxy</a></code> or <code class="idl"><a data-link-type="idl" href="#sandboxwindowproxy" id="ref-for-sandboxwindowproxy②">SandboxWindowProxy</a></code>, set <var>object</var> to it’s
 wrapped object.</p>
     <li data-md>
      <p>Return <var>object</var>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="5.3" id="sandbox-sandboxwindowproxy"><span class="secno">5.3. </span><span class="content">SandboxWindowProxy</span><a class="self-link" href="#sandbox-sandboxwindowproxy"></a></h3>
   <p>A <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="sandboxwindowproxy"><code>SandboxWindowProxy</code></dfn> is an exotic object that represents a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window③">Window</a></code> object wrapped by a <code class="idl"><a data-link-type="idl" href="#sandboxproxy" id="ref-for-sandboxproxy④">SandboxProxy</a></code> object. This provides sandboxed
access to that data in a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window④">Window</a></code> global.</p>
   <p class="issue" id="issue-5dc87d67"><a class="self-link" href="#issue-5dc87d67"></a> Define how this works.</p>
   <h2 class="heading settled" data-level="6" id="modules"><span class="secno">6. </span><span class="content">Modules</span><a class="self-link" href="#modules"></a></h2>
   <h3 class="heading settled" data-level="6.1" id="module-session"><span class="secno">6.1. </span><span class="content">The session Module</span><a class="self-link" href="#module-session"></a></h3>
   <p>The <dfn data-dfn-for="modules" data-dfn-type="dfn" data-export id="modules-session">session<a class="self-link" href="#modules-session"></a></dfn> module contains commands and
events for monitoring the status of the remote end.</p>
   <h4 class="heading settled" data-level="6.1.1" id="module-session-definition"><span class="secno">6.1.1. </span><span class="content">Definition</span><a class="self-link" href="#module-session-definition"></a></h4>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition⑦">remote end definition</a></p>
<pre class="cddl remote-cddl">SessionCommand = (
  session.End //
  session.New //
  session.Status //
  session.Subscribe //
  session.Unsubscribe
)
</pre>
   <p><a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition①⓪">local end definition</a></p>
<pre class="cddl local-cddl">SessionResult = (
   session.NewResult /
   session.StatusResult
)
</pre>
   <div class="algorithm" data-algorithm="end the session">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="end-the-session">end the session</dfn> given <var>session</var>: 
    <ol>
     <li data-md>
      <p>Remove <var>session</var> from <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-active-session" id="ref-for-dfn-active-session④">active sessions</a>.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-active-session" id="ref-for-dfn-active-session⑤">active sessions</a> is <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty" id="ref-for-list-empty">empty</a>, set the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-webdriver-active-flag" id="ref-for-dfn-webdriver-active-flag">webdriver-active flag</a> to false.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="cleanup the session">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="cleanup-the-session">cleanup the session</dfn> given <var>session</var>:</p>
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="#close-the-websocket-connections" id="ref-for-close-the-websocket-connections">Close the WebSocket connections</a> with <var>session</var>.</p>
     <li data-md>
      <p>Perform any implementation-specific cleanup steps.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="update the event map">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="update-the-event-map">update the event map</dfn>, given <var>session</var>, <var>requested event names</var>, <var>browsing contexts</var>, and <var>enabled</var>: 
    <p class="note" role="note"><span class="marker">Note:</span> The return value of this algorithm is a map between event names and
contexts. When the events are being enabled, the contexts in the return value
are those for which the event are now enabled but were not previously. When
events are disabled, the return value is always empty.</p>
    <ol>
     <li data-md>
      <p>Let <var>global event set</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-clone" id="ref-for-list-clone">clone</a> of the <a data-link-type="dfn" href="#event-global-event-set" id="ref-for-event-global-event-set①">global event set</a> for <var>session</var>.</p>
     <li data-md>
      <p>Let <var>event map</var> be a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑧">map</a>.</p>
     <li data-md>
      <p>For each <var>key</var> → <var>value</var> of the <a data-link-type="dfn" href="#event-browsing-context-event-map" id="ref-for-event-browsing-context-event-map②">browsing context event map</a> for <var>session</var>:</p>
      <ol>
       <li data-md>
        <p>Set <var>event map</var>[<var>key</var>] to a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-clone" id="ref-for-list-clone①">clone</a> of <var>value</var>.</p>
      </ol>
     <li data-md>
      <p>Let <var>event names</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set①①">set</a>.</p>
     <li data-md>
      <p>For each entry <var>name</var> in <var>requested event names</var>,
 let <var>event names</var> be the union of <var>event names</var> and the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try">trying</a> to <a data-link-type="dfn" href="#obtain-a-set-of-event-names" id="ref-for-obtain-a-set-of-event-names">obtain a set of event names</a> with <var>name</var>.</p>
     <li data-md>
      <p>Let <var>enabled events</var> be a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑨">map</a>.</p>
     <li data-md>
      <p>If <var>browsing contexts</var> is null:</p>
      <ol>
       <li data-md>
        <p>If <var>enabled</var> is true:</p>
        <ol>
         <li data-md>
          <p>For each <var>event name</var> of <var>event names</var>:</p>
          <ol>
           <li data-md>
            <p>If <var>global event set</var> doesn’t contain <var>event name</var>:</p>
            <ol>
             <li data-md>
              <p>Let <var>already enabled contexts</var> be the <a data-link-type="dfn" href="#event-enabled-browsing-contexts" id="ref-for-event-enabled-browsing-contexts">event enabled browsing
  contexts</a> given <var>session</var> and <var>event name</var></p>
             <li data-md>
              <p>Add <var>event name</var> to <var>global event set</var>.</p>
             <li data-md>
              <p>For each <var>context</var> of <var>already enabled contexts</var>, remove <var>event
  name</var> from <var>event map</var>[<var>context</var>].</p>
             <li data-md>
              <p>Let <var>newly enabled contexts</var> be a list of all <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context" id="ref-for-top-level-browsing-context②">top-level browsing
  contexts</a> that are not contained in <var>already enabled contexts</var>,</p>
             <li data-md>
              <p>Set <var>enabled events</var>[<var>event name</var>] to <var>newly enabled contexts</var>.</p>
            </ol>
          </ol>
        </ol>
       <li data-md>
        <p>If <var>enabled</var> is false:</p>
        <ol>
         <li data-md>
          <p>For each <var>event name</var> in <var>event names</var>:</p>
          <ol>
           <li data-md>
            <p>If <var>global event set</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-contain" id="ref-for-list-contain③">contains</a> <var>event name</var>, remove <var>event
 name</var> from <var>global event set</var>. Otherwise return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors⑤">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code⑥">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument⑦">invalid argument</a>.</p>
          </ol>
        </ol>
      </ol>
     <li data-md>
      <p>Otherwise, if <var>browsing contexts</var> is not null:</p>
      <ol>
       <li data-md>
        <p>Let <var>targets</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①⓪">map</a>.</p>
       <li data-md>
        <p>For each <var>context id</var> in <var>browsing contexts</var>:</p>
        <ol>
         <li data-md>
          <p>Let <var>context</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try①">trying</a> to <a data-link-type="dfn" href="#get-a-browsing-context" id="ref-for-get-a-browsing-context">get a browsing context</a> with <var>context id</var>.</p>
         <li data-md>
          <p>Let <var>top-level context</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context" id="ref-for-top-level-browsing-context③">top-level browsing context</a> for <var>context</var>.</p>
         <li data-md>
          <p>If <var>event map</var> does not contain <var>top-level context</var>, set <var>event
 map</var>[<var>top-level context</var>] to a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set①②">set</a>.</p>
         <li data-md>
          <p>Set <var>targets</var>[<var>top-level context</var>] to <var>event map</var>[<var>top-level context</var>].</p>
        </ol>
       <li data-md>
        <p>For each <var>event name</var> in <var>event names</var>:</p>
        <ol>
         <li data-md>
          <p>If <var>enabled</var> is true and <var>global event set</var> contains <var>event name</var>, continue.</p>
         <li data-md>
          <p>For each <var>context</var> → <var>target</var> in <var>targets</var>:</p>
          <ol>
           <li data-md>
            <p>If <var>enabled</var> is true and <var>target</var> does not contain <var>event name</var>:</p>
            <ol>
             <li data-md>
              <p>Add <var>event name</var> to <var>target</var>.</p>
             <li data-md>
              <p>If <var>enabled events</var> does not contain <var>event name</var>, set <var>enabled
 events</var>[<var>event name</var>] to a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set①③">set</a>.</p>
             <li data-md>
              <p>Append <var>context</var> to <var>enabled events</var>[<var>event name</var>].</p>
            </ol>
           <li data-md>
            <p>If <var>enabled</var> is false:</p>
            <ol>
             <li data-md>
              <p>If <var>target</var> contains <var>event name</var>, remove <var>event name</var> from <var>target</var>. Otherwise return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors⑥">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code⑦">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument⑧">invalid
 argument</a>.</p>
            </ol>
          </ol>
        </ol>
      </ol>
     <li data-md>
      <p>Set the <a data-link-type="dfn" href="#event-global-event-set" id="ref-for-event-global-event-set②">global event set</a> for <var>session</var> to <var>global event set</var>.</p>
     <li data-md>
      <p>Set the <a data-link-type="dfn" href="#event-browsing-context-event-map" id="ref-for-event-browsing-context-event-map③">browsing context event map</a> for <var>session</var> to <var>event map</var>.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success⑥">success</a> with data <var>enabled events</var>.</p>
    </ol>
    <p class="note" role="note"><span class="marker">Note:</span> Implementations that do additional work when an event is enabled,
e.g. subscribing to the relevant engine-internal events, will likely perform
those additional steps when updating the event map. This specification uses
a model where hooks are always called and then the event map is used to
filter only those that ought to be returned to the local end.</p>
   </div>
   <h4 class="heading settled" data-level="6.1.2" id="module-session-types"><span class="secno">6.1.2. </span><span class="content">Types</span><a class="self-link" href="#module-session-types"></a></h4>
   <h5 class="heading settled" data-level="6.1.2.1" id="type-session-CapabilitiesRequest"><span class="secno">6.1.2.1. </span><span class="content">The session.CapabilitiesRequest Type</span><a class="self-link" href="#type-session-CapabilitiesRequest"></a></h5>
<pre class="cddl local-cddl remote-cddl">session.CapabilitiesRequest = {
  ? alwaysMatch: session.CapabilityRequest,
  ? firstMatch: [*session.CapabilityRequest]
}
</pre>
   <p>The <code>session.CapabilitiesRequest</code> type represents the capabilities requested
for a session.</p>
   <h5 class="heading settled" data-level="6.1.2.2" id="type-session-CapabilityRequest"><span class="secno">6.1.2.2. </span><span class="content">The session.CapabilityRequest Type</span><a class="self-link" href="#type-session-CapabilityRequest"></a></h5>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition⑧">remote end definition</a> and <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition①①">local end definition</a></p>
<pre class="cddl local-cddl remote-cddl">session.CapabilityRequest = {
  ? acceptInsecureCerts: bool,
  ? browserName: text,
  ? browserVersion: text,
  ? platformName: text,
  ? proxy: {
    ? proxyType: "pac" / "direct" / "autodetect" / "system" / "manual",
    ? proxyAutoconfigUrl: text,
    ? ftpProxy: text,
    ? httpProxy: text,
    ? noProxy: [*text],
    ? sslProxy: text,
    ? socksProxy: text,
    ? socksVersion: 0..255,
  },
  Extensible
};
</pre>
   <p>The <code>session.CapabilityRequest</code> type represents a specific set of
requested capabilities.</p>
   <h5 class="heading settled" data-level="6.1.2.3" id="type-session-SubscriptionRequest"><span class="secno">6.1.2.3. </span><span class="content">The session.SubscriptionRequest Type</span><a class="self-link" href="#type-session-SubscriptionRequest"></a></h5>
<pre class="cddl remote-cddl">session.SubscriptionRequest = {
  events: [*text],
  ? contexts: [*browsingContext.BrowsingContext],
}
</pre>
   <p>The <code>session.SubscriptionRequest</code> type represents a request to
subscribe to or unsubscribe from a specific set of events.</p>
   <h4 class="heading settled" data-level="6.1.3" id="module-session-commands"><span class="secno">6.1.3. </span><span class="content">Commands</span><a class="self-link" href="#module-session-commands"></a></h4>
   <h5 class="heading settled" data-level="6.1.3.1" id="command-session-status"><span class="secno">6.1.3.1. </span><span class="content">The session.status Command</span><a class="self-link" href="#command-session-status"></a></h5>
   <p>The <dfn data-dfn-for="commands" data-dfn-type="dfn" data-export id="commands-sessionstatus">session.status<a class="self-link" href="#commands-sessionstatus"></a></dfn> command returns information about
whether a remote end is in a state in which it can create new sessions,
but may additionally include arbitrary meta information that is specific
to the implementation.</p>
   <p>This is a <a data-link-type="dfn" href="#static-command" id="ref-for-static-command①">static command</a>.</p>
   <dl>
    <dt>Command Type
    <dd>
<pre class="cddl remote-cddl">session.Status = (
  method: "session.status",
  params: EmptyParams,
)
</pre>
    <dt>Result Type
    <dd>
<pre class="cddl local-cddl">session.StatusResult = {
  ready: bool,
  message: text,
}
</pre>
   </dl>
   <div class="algorithm" data-algorithm="remote end steps for session.status">
    <p>The <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-end-steps" id="ref-for-dfn-remote-end-steps②">remote end steps</a> given <var>session</var>, and <var>command parameters</var> are:</p>
    <ol>
     <li data-md>
      <p>Let <var>body</var> be a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①①">map</a> with the following properties:</p>
      <dl>
       <dt>"ready"
       <dd>The <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-ends" id="ref-for-dfn-remote-ends①⑤">remote end</a>’s <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-readiness-state" id="ref-for-dfn-readiness-state">readiness state</a>.
       <dt>"message"
       <dd>An implementation-defined string explaining the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-ends" id="ref-for-dfn-remote-ends①⑥">remote end</a>’s <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-readiness-state" id="ref-for-dfn-readiness-state①">readiness state</a>.
      </dl>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success⑦">success</a> with data <var>body</var></p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.1.3.2" id="command-session-new"><span class="secno">6.1.3.2. </span><span class="content">The session.new Command</span><a class="self-link" href="#command-session-new"></a></h5>
   <p>The <dfn data-dfn-for="commands" data-dfn-type="dfn" data-export id="commands-sessionnew">session.new<a class="self-link" href="#commands-sessionnew"></a></dfn> command allows creating a new <a data-link-type="dfn" href="#bidi-session" id="ref-for-bidi-session①②">BiDi session</a>.</p>
   <p class="note" role="note"><span class="marker">Note:</span> A session created this way will not be accessible via HTTP.</p>
   <p>This is a <a data-link-type="dfn" href="#static-command" id="ref-for-static-command②">static command</a>.</p>
   <dl>
    <dt>Command Type
    <dd>
<pre class="cddl remote-cddl">session.New = (
  method: "session.new",
  params: session.NewParameters
)

session.NewParameters = {
  capabilities: session.CapabilitiesRequest
}
</pre>
    <dt>Result Type
    <dd>
<pre class="cddl local-cddl">session.NewResult = {
  sessionId: text,
  capabilities: {
    acceptInsecureCerts: bool,
    browserName: text,
    browserVersion: text,
    platformName: text,
    proxy: {
      ? proxyType: "pac" / "direct" / "autodetect" / "system" / "manual",
      ? proxyAutoconfigUrl: text,
      ? ftpProxy: text,
      ? httpProxy: text,
      ? noProxy: [*text],
      ? sslProxy: text,
      ? socksProxy: text,
      ? socksVersion: 0..255,
    },
    setWindowRect: bool,
    Extensible
  }
}
</pre>
   </dl>
   <div class="algorithm" data-algorithm="remote end steps for session.new">
    <p>The <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-end-steps" id="ref-for-dfn-remote-end-steps③">remote end steps</a> given <var>session</var> and <var>command parameters</var> are:</p>
    <ol>
     <li data-md>
      <p>If <var>session</var> is not null, return an <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors⑦">error</a> with error code <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-session-not-created" id="ref-for-dfn-session-not-created">session not created</a>.</p>
     <li data-md>
      <p>If the implementation is unable to start a new session for any reason, return
 an <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors⑧">error</a> with error code <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-session-not-created" id="ref-for-dfn-session-not-created①">session not created</a>.</p>
     <li data-md>
      <p>Let <var>flags</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set①④">set</a> containing "<code>bidi</code>".</p>
     <li data-md>
      <p>Let <var>capabilities</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try②">trying</a> to <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-processing-capabilities" id="ref-for-dfn-processing-capabilities">process capabilities</a> with <var>command parameters</var> and <var>flags</var>.</p>
     <li data-md>
      <p>Let <var>session</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try③">trying</a> to <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-create-a-session" id="ref-for-dfn-create-a-session">create a session</a> with <var>capabilities</var> and <var>flags</var>.</p>
     <li data-md>
      <p>Set <var>session</var>’s <a data-link-type="dfn" href="#bidi-flag" id="ref-for-bidi-flag②">BiDi flag</a> to true.</p>
      <p class="note" role="note"><span class="marker">Note:</span> the connection for this session will be set to the current connection
 by the caller.</p>
     <li data-md>
      <p>Let <var>body</var> be a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①②">map</a> matching the <code>session.NewResult</code> production,
 with the <code>sessionId</code> field set to <var>session</var>’s <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-session-id" id="ref-for-dfn-session-id③">session ID</a>, and
 the <code>capabilities</code> field set to <var>capabilities</var>.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success⑧">success</a> with data <var>body</var>.</p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.1.3.3" id="command-session-end"><span class="secno">6.1.3.3. </span><span class="content">The session.end Command</span><a class="self-link" href="#command-session-end"></a></h5>
   <p>The <dfn data-dfn-for="commands" data-dfn-type="dfn" data-export id="commands-sessionend">session.end<a class="self-link" href="#commands-sessionend"></a></dfn> command ends the current <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-sessions" id="ref-for-dfn-sessions⑧">session</a>.</p>
   <dl>
    <dt>Command Type
    <dd>
<pre class="cddl remote-cddl">session.End = (
  method: "session.end",
  params: EmptyParams
)

</pre>
    <dt>Result Type
    <dd>
<pre class="cddl">EmptyResult
</pre>
   </dl>
   <div class="algorithm" data-algorithm="remote end steps for session.end">
    <p>The <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-end-steps" id="ref-for-dfn-remote-end-steps④">remote end steps</a> given <var>session</var> and <var>command parameters</var> are:</p>
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="#end-the-session" id="ref-for-end-the-session">End the session</a> with <var>session</var>.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success⑨">success</a> with data null, and in parallel run the following steps:</p>
      <ol>
       <li data-md>
        <p>Wait until the <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc6455#section-6.1" id="ref-for-section-6.1③">Send a WebSocket message</a> steps have been called with the
 response to this command.</p>
        <p class="issue" id="issue-c10fe58d"><a class="self-link" href="#issue-c10fe58d"></a> this is rather imprecise language, but hopefully it’s clear that the
 intent is that we send the response to the command before starting shutdown
 of the connections.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="#cleanup-the-session" id="ref-for-cleanup-the-session">Cleanup the session</a> with <var>session</var>.</p>
      </ol>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.1.3.4" id="command-session-subscribe"><span class="secno">6.1.3.4. </span><span class="content">The session.subscribe Command</span><a class="self-link" href="#command-session-subscribe"></a></h5>
   <p>The <dfn data-dfn-for="commands" data-dfn-type="dfn" data-export id="commands-sessionsubscribe">session.subscribe<a class="self-link" href="#commands-sessionsubscribe"></a></dfn> command enables certain events
either globally or for a set of browsing contexts</p>
   <p class="issue" id="issue-77ae0f57"><a class="self-link" href="#issue-77ae0f57"></a> This needs to be generalized to work with realms too</p>
   <dl>
    <dt>Command Type
    <dd>
<pre class="cddl remote-cddl">session.Subscribe = (
  method: "session.subscribe",
  params: session.SubscriptionRequest
)
</pre>
    <dt>Result Type
    <dd>
<pre class="cddl">EmptyResult
</pre>
   </dl>
   <div class="algorithm" data-algorithm="remote end steps for session.subscribe">
     The <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-end-steps" id="ref-for-dfn-remote-end-steps⑤">remote end steps</a> with <var>session</var> and <var>command parameters</var> are: 
    <ol>
     <li data-md>
      <p>Let the <var>list of event names</var> be the value of the <code>events</code> field of <var>command parameters</var></p>
     <li data-md>
      <p>Let the <var>list of contexts</var> be the value of the <code>contexts</code> field of <var>command parameters</var> if it is present or null if it isn’t.</p>
     <li data-md>
      <p>Let <var>enabled events</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try④">trying</a> to <a data-link-type="dfn" href="#update-the-event-map" id="ref-for-update-the-event-map">update the event map</a> with <var>session</var>, <var>list of event names</var> , <var>list of contexts</var> and
 enabled true.</p>
     <li data-md>
      <p>Let <var>subscribe step events</var> be a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①③">map</a>.</p>
     <li data-md>
      <p>For each <var>event name</var> → <var>contexts</var> in <var>enabled events</var>:</p>
      <ol>
       <li data-md>
        <p>If the <a data-link-type="dfn" href="#event" id="ref-for-event⑤">event</a> with <a data-link-type="dfn" href="#event-event-name" id="ref-for-event-event-name⑤">event name</a> <var>event name</var> defines <a data-link-type="dfn" href="#remote-end-subscribe-steps" id="ref-for-remote-end-subscribe-steps">remote end
 subscribe steps</a>, set <var>subscribe step events</var>[<var>event name</var>] to <var>contexts</var>.</p>
      </ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-sort-in-ascending-order" id="ref-for-map-sort-in-ascending-order">Sort in ascending order</a> <var>subscribe step events</var> using the following less
 than algorithm given two entries with keys <var>event name one</var> and <var>event
 name two</var>:</p>
      <ol>
       <li data-md>
        <p>Let <var>event one</var> be the <a data-link-type="dfn" href="#event" id="ref-for-event⑥">event</a> with name <var>event name one</var></p>
       <li data-md>
        <p>Let <var>event two</var> be the <a data-link-type="dfn" href="#event" id="ref-for-event⑦">event</a> with name <var>event name two</var></p>
       <li data-md>
        <p>Return true if <var>event one</var>’s <a data-link-type="dfn" href="#subscribe-priority" id="ref-for-subscribe-priority">subscribe priority</a> is less than <var>event
 two</var>’s subscribe priority, or false otherwise.</p>
      </ol>
     <li data-md>
      <p>If <var>list of contexts</var> is null, let <var>include global</var> be true, otherwise let <var>include global</var> be false.</p>
     <li data-md>
      <p>For each <var>event name</var> → <var>contexts</var> in <var>subscribe step events</var>:</p>
      <ol>
       <li data-md>
        <p>Run the <a data-link-type="dfn" href="#remote-end-subscribe-steps" id="ref-for-remote-end-subscribe-steps①">remote end subscribe steps</a> for the <a data-link-type="dfn" href="#event" id="ref-for-event⑧">event</a> with <a data-link-type="dfn" href="#event-event-name" id="ref-for-event-event-name⑥">event name</a> <var>event name</var> given <var>session</var>, <var>contexts</var> and <var>include global</var>.</p>
      </ol>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success①⓪">success</a> with data null.</p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.1.3.5" id="command-session-unsubscribe"><span class="secno">6.1.3.5. </span><span class="content">The session.unsubscribe Command</span><a class="self-link" href="#command-session-unsubscribe"></a></h5>
   <p>The <dfn data-dfn-for="commands" data-dfn-type="dfn" data-export id="commands-sessionunsubscribe">session.unsubscribe<a class="self-link" href="#commands-sessionunsubscribe"></a></dfn> command disables events
either globally or for a set of browsing contexts</p>
   <p class="issue" id="issue-851a021c"><a class="self-link" href="#issue-851a021c"></a> This needs to be generalised to work with realms too</p>
   <dl>
    <dt>Command Type
    <dd>
<pre class="cddl remote-cddl">session.Unsubscribe = (
  method: "session.unsubscribe",
  params: session.SubscriptionRequest
)
</pre>
    <dt>Result Type
    <dd>
<pre class="cddl">EmptyResult
</pre>
   </dl>
   <div class="algorithm" data-algorithm="remote end steps for session.unsubscribe">
     The <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-end-steps" id="ref-for-dfn-remote-end-steps⑥">remote end steps</a> with <var>session</var> and <var>command parameters</var> are: 
    <ol>
     <li data-md>
      <p>Let the <var>list of event names</var> be the value of the <code>events</code> field of <var>command parameters</var>.</p>
     <li data-md>
      <p>Let the <var>list of contexts</var> be the value of the <code>contexts</code> field of <var>command parameters</var> if it is present or null if it isn’t.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try⑤">Try</a> to <a data-link-type="dfn" href="#update-the-event-map" id="ref-for-update-the-event-map①">update the event map</a> with <var>session</var>, <var>list of event names</var>, <var>list of contexts</var> and enabled false.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success①①">success</a> with data null.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="6.2" id="module-browser"><span class="secno">6.2. </span><span class="content">The browser Module</span><a class="self-link" href="#module-browser"></a></h3>
   <p>The <dfn data-dfn-for="modules" data-dfn-type="dfn" data-export id="modules-browser">browser<a class="self-link" href="#modules-browser"></a></dfn> module contains commands for
managing the remote end browser process.</p>
   <h4 class="heading settled" data-level="6.2.1" id="module-browser-definition"><span class="secno">6.2.1. </span><span class="content">Definition</span><a class="self-link" href="#module-browser-definition"></a></h4>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition⑨">remote end definition</a></p>
<pre class="cddl remote-cddl">BrowserCommand = (
  browser.Close
)
</pre>
   <p><a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition①②">local end definition</a></p>
<pre class="cddl local-cddl"></pre>
   <h4 class="heading settled" data-level="6.2.2" id="module-browser-commands"><span class="secno">6.2.2. </span><span class="content">Commands</span><a class="self-link" href="#module-browser-commands"></a></h4>
   <h5 class="heading settled" data-level="6.2.2.1" id="command-browser-close"><span class="secno">6.2.2.1. </span><span class="content">The browser.close Command</span><a class="self-link" href="#command-browser-close"></a></h5>
   <p>The <dfn data-dfn-for="commands" data-dfn-type="dfn" data-export id="commands-browserclose">browser.close<a class="self-link" href="#commands-browserclose"></a></dfn> command terminates all
WebDriver sessions and cleans up automation state in the remote browser instance.</p>
   <dl>
    <dt>Command Type
    <dd>
<pre class="cddl remote-cddl">browser.Close = (
  method: "browser.close",
  params: EmptyParams,
)
</pre>
    <dt>Return Type
    <dd>
<pre class="cddl">EmptyResult
</pre>
   </dl>
   <div class="algorithm" data-algorithm="remote end steps for browser.close">
     The <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-end-steps" id="ref-for-dfn-remote-end-steps⑦">remote end steps</a> with <var>session</var> and <var>command parameters</var> are: 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="#end-the-session" id="ref-for-end-the-session①">End the session</a> with <var>session</var>.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-active-session" id="ref-for-dfn-active-session⑥">active sessions</a> is not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty" id="ref-for-list-empty①">empty</a> an implementation may
 return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors⑨">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code⑧">error code</a> <a data-link-type="dfn" href="#unable-to-close-browser" id="ref-for-unable-to-close-browser">unable to close browser</a>, and then
 run the following steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel①">in parallel</a>:</p>
      <ol>
       <li data-md>
        <p>Wait until the <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc6455#section-6.1" id="ref-for-section-6.1④">Send a WebSocket message</a> steps have been called with the
 response to this command.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="#cleanup-the-session" id="ref-for-cleanup-the-session①">Cleanup the session</a> with <var>session</var>.</p>
      </ol>
      <p class="note" role="note"><span class="marker">Note:</span> The behaviour in cases where the browser has multiple automation
 sessions is currently unspecified. It might be that any session can close the
 browser, or that only the final open session can actually close the browser,
 or only the first session started can. This behaviour might be fully
 specified in a future version of this specification.</p>
     <li data-md>
      <p>For each <var>active session</var> in <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-active-session" id="ref-for-dfn-active-session⑦">active sessions</a>:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="#end-the-session" id="ref-for-end-the-session②">End the session</a> <var>active session</var>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="#cleanup-the-session" id="ref-for-cleanup-the-session②">Cleanup the session</a> with <var>active session</var></p>
      </ol>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success①②">success</a> with data null, and run the following steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel②">in parallel</a>.</p>
      <ol>
       <li data-md>
        <p>Wait until the <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc6455#section-6.1" id="ref-for-section-6.1⑤">Send a WebSocket message</a> steps have been called with the
 response to this command.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="#cleanup-the-session" id="ref-for-cleanup-the-session③">Cleanup the session</a> with <var>session</var>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#close-a-browsing-context" id="ref-for-close-a-browsing-context">Close</a> any <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context" id="ref-for-top-level-browsing-context④">top-level browsing contexts</a> without <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#prompt-to-unload-a-document" id="ref-for-prompt-to-unload-a-document">prompting to unload</a>.</p>
        <p class="note" role="note"><span class="marker">Note:</span> This implicitly only affects browsing contexts that were under
 automation in the first place.</p>
       <li data-md>
        <p>Perform implementation defined steps to clean up resources associated with
 the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-ends" id="ref-for-dfn-remote-ends①⑦">remote end</a> under automation.</p>
        <p class="note" role="note"><span class="marker">Note:</span> For example this might include cleanly shutting down any OS-level
 processes associated with the browser under automation, removing temporary
 state, such as user profile data, created by the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-ends" id="ref-for-dfn-remote-ends①⑧">remote end</a> while under
 automation, or shutting down the <a data-link-type="dfn" href="#websocket-listener" id="ref-for-websocket-listener⑥">WebSocket Listener</a>. Because of
 differences between browsers and operating systems it is not possible to
 specify in detail precise invariants <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-local-ends" id="ref-for-dfn-local-ends①①">local ends</a> can depend on here.</p>
      </ol>
    </ol>
   </div>
   <h3 class="heading settled" data-level="6.3" id="module-browsingContext"><span class="secno">6.3. </span><span class="content">The browsingContext Module</span><a class="self-link" href="#module-browsingContext"></a></h3>
   <p>The <dfn data-dfn-for="modules" data-dfn-type="dfn" data-export id="modules-browsingcontext">browsingContext<a class="self-link" href="#modules-browsingcontext"></a></dfn> module contains commands and
events relating to browsing contexts.</p>
   <p>The progress of navigation is communicated using an immutable <dfn data-dfn-type="dfn" data-export data-lt="WebDriver navigation status" id="webdriver-navigation-status">WebDriver
navigation status<a class="self-link" href="#webdriver-navigation-status"></a></dfn> struct, which has the following items:</p>
   <dl>
    <dt><dfn data-dfn-for="WebDriver navigation status" data-dfn-type="dfn" data-export id="navigation-status-id">id<a class="self-link" href="#navigation-status-id"></a></dfn>
    <dd>The <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigation-id" id="ref-for-navigation-id">navigation id</a> for the navigation, or null when the navigation is
  canceled before making progress.
    <dt><dfn data-dfn-for="WebDriver navigation status" data-dfn-type="dfn" data-export id="navigation-status-status">status<a class="self-link" href="#navigation-status-status"></a></dfn>
    <dd>A status code that is either
      "<dfn data-dfn-type="dfn" data-export id="navigation-status-canceled"><code>canceled</code><a class="self-link" href="#navigation-status-canceled"></a></dfn>",
      "<dfn data-dfn-type="dfn" data-export id="navigation-status-pending"><code>pending</code><a class="self-link" href="#navigation-status-pending"></a></dfn>", or
      "<dfn data-dfn-type="dfn" data-export id="navigation-status-complete"><code>complete</code><a class="self-link" href="#navigation-status-complete"></a></dfn>". 
    <dt><dfn data-dfn-for="WebDriver navigation status" data-dfn-type="dfn" data-export id="navigation-status-url">url<a class="self-link" href="#navigation-status-url"></a></dfn>
    <dd>The URL which is being loaded in the navigation
   </dl>
   <h4 class="heading settled" data-level="6.3.1" id="module-browsingContext-definition"><span class="secno">6.3.1. </span><span class="content">Definition</span><a class="self-link" href="#module-browsingContext-definition"></a></h4>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition①⓪">remote end definition</a></p>
<pre class="cddl remote-cddl">BrowsingContextCommand = (
  browsingContext.Activate //
  browsingContext.CaptureScreenshot //
  browsingContext.Close //
  browsingContext.Create //
  browsingContext.GetTree //
  browsingContext.HandleUserPrompt //
  browsingContext.Navigate //
  browsingContext.Print //
  browsingContext.Reload //
  browsingContext.SetViewport
)
</pre>
   <p><a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition①③">local end definition</a></p>
<pre class="cddl local-cddl">BrowsingContextResult = (
  browsingContext.CaptureScreenshotResult /
  browsingContext.CreateResult /
  browsingContext.GetTreeResult /
  browsingContext.NavigateResult /
  browsingContext.PrintResult
)

BrowsingContextEvent = (
  browsingContext.ContextCreated //
  browsingContext.ContextDestroyed //
  browsingContext.DomContentLoaded //
  browsingContext.DownloadWillBegin //
  browsingContext.FragmentNavigated //
  browsingContext.Load //
  browsingContext.NavigationAborted //
  browsingContext.NavigationFailed //
  browsingContext.NavigationStarted //
  browsingContext.UserPromptClosed //
  browsingContext.UserPromptOpened
)
</pre>
   <h4 class="heading settled" data-level="6.3.2" id="module-browsingcontext-types"><span class="secno">6.3.2. </span><span class="content">Types</span><a class="self-link" href="#module-browsingcontext-types"></a></h4>
   <h5 class="heading settled" data-level="6.3.2.1" id="type-browsingContext-Browsingcontext"><span class="secno">6.3.2.1. </span><span class="content">The browsingContext.BrowsingContext Type</span><a class="self-link" href="#type-browsingContext-Browsingcontext"></a></h5>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition①①">remote end definition</a> and <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition①④">local end definition</a></p>
<pre class="cddl local-cddl remote-cddl">browsingContext.BrowsingContext = text;
</pre>
   <p>Each <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context" id="ref-for-browsing-context">browsing context</a> has an associated <dfn class="dfn-paneled" data-dfn-type="dfn" data-export data-lt="browsing context id" id="browsing-context-id">browsing context
id</dfn>, which is a string uniquely identifying that browsing context. This is
implicitly set when the context is created. For browsing contexts with an
associated WebDriver <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-window-handle" id="ref-for-dfn-window-handle">window handle</a> the <a data-link-type="dfn" href="#browsing-context-id" id="ref-for-browsing-context-id">browsing context id</a> must be the
same as the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-window-handle" id="ref-for-dfn-window-handle①">window handle</a>.</p>
   <div class="algorithm" data-algorithm="get a browsing context">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="get-a-browsing-context">get a browsing context</dfn> given <var>context id</var>: 
    <ol>
     <li data-md>
      <p>If <var>context id</var> is null, return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success①③">success</a> with data null.</p>
     <li data-md>
      <p>If there is no browsing context with <a data-link-type="dfn" href="#browsing-context-id" id="ref-for-browsing-context-id①">browsing context id</a> <var>context id</var> return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors①⓪">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code⑨">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-no-such-frame" id="ref-for-dfn-no-such-frame">no such frame</a></p>
     <li data-md>
      <p>Let <var>context</var> be the browsing context with id <var>context id</var>.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success①④">success</a> with data <var>context</var></p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.3.2.2" id="type-browsingContext-Info"><span class="secno">6.3.2.2. </span><span class="content">The browsingContext.Info Type</span><a class="self-link" href="#type-browsingContext-Info"></a></h5>
   <p><a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition①⑤">local end definition</a></p>
<pre class="cddl local-cddl">browsingContext.InfoList = [*browsingContext.Info]

browsingContext.Info = {
  context: browsingContext.BrowsingContext,
  url: text,
  children: browsingContext.InfoList / null
  ? parent: browsingContext.BrowsingContext / null,
}
</pre>
   <p>The <code>browsingContext.Info</code> type represents the properties of a
browsing context.</p>
   <div class="algorithm" data-algorithm="get the parent browsing context">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="get-the-parent-browsing-context">get the parent browsing context</dfn> given <var>browsing context</var>: 
    <ol>
     <li data-md>
      <p>Let <var>navigable</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#navigables" id="ref-for-navigables">navigable</a> whose <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document" id="ref-for-nav-document">active
 document</a> is <var>browsing context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#active-document" id="ref-for-active-document">active document</a>.</p>
     <li data-md>
      <p>Let <var>parent navigable</var> be <var>navigable</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-parent" id="ref-for-nav-parent">parent</a>.</p>
     <li data-md>
      <p>If <var>parent navigable</var> is null, then return null.</p>
     <li data-md>
      <p>Return <var>parent navigable</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-bc" id="ref-for-nav-bc">active browsing context</a>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="get the child browsing contexts">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="get-the-child-browsing-contexts">get the child browsing contexts</dfn> given <var>browsing context</var>: 
    <p>TODO: make this return a list in document order</p>
    <ol>
     <li data-md>
      <p>Let <var>navigable</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#navigables" id="ref-for-navigables①">navigable</a> whose <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document" id="ref-for-nav-document①">active
 document</a> is <var>browsing context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#active-document" id="ref-for-active-document①">active document</a>.</p>
     <li data-md>
      <p>Let <var>child navigables</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set①⑤">set</a> containing all navigables that are
 a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#child-navigable" id="ref-for-child-navigable">child navigable</a> of <var>navigable</var>.</p>
     <li data-md>
      <p>Let <var>child browsing contexts</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set①⑥">set</a>.</p>
     <li data-md>
      <p>For each <var>child navigable</var> in <var>child navigables</var>:</p>
      <ol>
       <li data-md>
        <p>Append <var>child navigable</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-bc" id="ref-for-nav-bc①">active browsing context</a> to <var>child
 browsing contexts</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>child browsing contexts</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="get the browsing context info">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="get-the-browsing-context-info">get the browsing context info</dfn> given <var>context</var>, <var>max depth</var> and <var>is root</var>: 
    <ol>
     <li data-md>
      <p>Let <var>context id</var> be the <a data-link-type="dfn" href="#browsing-context-id" id="ref-for-browsing-context-id②">browsing context id</a> for <var>context</var>.</p>
     <li data-md>
      <p>Let <var>parent browsing context</var> be <a data-link-type="dfn" href="#get-the-parent-browsing-context" id="ref-for-get-the-parent-browsing-context">get the parent browsing
 context</a> given <var>context</var>.</p>
     <li data-md>
      <p>If <var>parent browsing context</var> is not null let <var>parent id</var> be the <a data-link-type="dfn" href="#browsing-context-id" id="ref-for-browsing-context-id③">browsing context id</a> of <var>parent browsing context</var>. Otherwise let <var>parent id</var> be null.</p>
     <li data-md>
      <p>Let <var>document</var> be <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#active-document" id="ref-for-active-document②">active document</a>.</p>
     <li data-md>
      <p>Let <var>url</var> be the result of running the <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-serializer" id="ref-for-concept-url-serializer">URL serializer</a>, given <var>document</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-url" id="ref-for-concept-document-url">URL</a>.</p>
      <p class="note" role="note"><span class="marker">Note:</span> This includes the fragment component of the URL.</p>
     <li data-md>
      <p>Let <var>child infos</var> be null.</p>
     <li data-md>
      <p>If <var>max depth</var> is null, or <var>max depth</var> is greater than 0:</p>
      <ol>
       <li data-md>
        <p>Let <var>child contexts</var> be <a data-link-type="dfn" href="#get-the-child-browsing-contexts" id="ref-for-get-the-child-browsing-contexts">get the child browsing contexts</a> given <var>context</var>.</p>
       <li data-md>
        <p>Let <var>child depth</var> be <var>max depth</var> - 1 if <var>max depth</var> is not null, or null otherwise.</p>
       <li data-md>
        <p>Set <var>child infos</var> to an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list①">list</a>.</p>
       <li data-md>
        <p>For each <var>context</var> of <var>child contexts</var>:</p>
        <ol>
         <li data-md>
          <p>Let <var>info</var> be the result of <a data-link-type="dfn" href="#get-the-browsing-context-info" id="ref-for-get-the-browsing-context-info">get the browsing context info</a> given <var>context</var>, <var>child depth</var>, and false.</p>
         <li data-md>
          <p>Append <var>info</var> to <var>child infos</var></p>
        </ol>
      </ol>
     <li data-md>
      <p>Let <var>context info</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①④">map</a> matching the <code>browsingContext.Info</code> production with the <code>context</code> field set to <var>context id</var>, the <code>parent</code> field set to <var>parent id</var> if <var>is root</var> is <code>true</code>, or unset otherwise, the <code>url</code> field set to <var>url</var>, and the <code>children</code> field set to <var>child infos</var>.</p>
     <li data-md>
      <p>Return <var>context info</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="await a navigation">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="await-a-navigation">await a navigation</dfn> given <var>context</var>, <var>request</var>, <var>wait condition</var>, and optionally <var>history handling</var> (default: "<code>default</code>") and <var>ignore cache</var> (default: false): 
    <ol>
     <li data-md>
      <p>Let <var>navigation id</var> be the string representation of a <a data-link-type="biblio" href="#biblio-rfc4122" title="A Universally Unique IDentifier (UUID) URN Namespace">UUID</a> based on truly random, or pseudo-random numbers.</p>
     <li data-md>
      <p>Let <var>navigable</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#navigables" id="ref-for-navigables②">navigable</a> whose <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document" id="ref-for-nav-document②">active
 document</a> is <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#active-document" id="ref-for-active-document③">active document</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate" id="ref-for-navigate">Navigate</a> <var>navigable</var> with resource <var>request</var>, and using <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#active-document" id="ref-for-active-document④">active document</a> as the source <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document">Document</a></code>, with <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigation-id" id="ref-for-navigation-id①">navigation id</a> <var>navigation id</var>, and <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#history-handling-behavior" id="ref-for-history-handling-behavior">history
 handling behavior</a> <var>history handling</var>. If <var>ignore cache</var> is true,
 the navigation must not load resources from the HTTP cache.</p>
      <p class="issue" id="issue-40db6a3c"><a class="self-link" href="#issue-40db6a3c"></a> property specify how the <var>ignore cache</var> flag works. This needs to
 consider whether only the first load of a resource bypasses the cache
 (i.e. whether this is like initially clearing the cache and proceeding like
 normal), or whether resources not directly loaded by the HTML parser
 (e.g. loads initiated by scripts or stylesheets) also bypass the cache.</p>
     <li data-md>
      <p>Let (<var>event received</var>, <var>navigate status</var>) be <a data-link-type="dfn" href="#awaits" id="ref-for-awaits①">await</a> given
  «"<code>navigation started</code>", "<code>navigation failed</code>",
  "<code>fragment navigated</code>"», and <var>navigation id</var>.</p>
     <li data-md>
      <p class="assertion">Assert: <var>navigate status</var>’s id is <var>navigation id</var>.</p>
     <li data-md>
      <p>If <var>navigate status</var>’s status is "<code>complete</code>":</p>
      <ol>
       <li data-md>
        <p>Let <var>body</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①⑤">map</a> matching the <code>browsingContext.NavigateResult</code> production, with the <code>navigation</code> field set to <var>navigation id</var>, and the <code>url</code> field set to the result of the <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-serializer" id="ref-for-concept-url-serializer①">URL serializer</a> given <var>navigate status</var>’s url.</p>
       <li data-md>
        <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success①⑤">success</a> with data <var>body</var>.</p>
      </ol>
      <p class="note" role="note"><span class="marker">Note:</span> this is the case if the navigation only caused the fragment to
 change.</p>
     <li data-md>
      <p>If <var>navigate status</var>’s status is "<code>canceled</code>" return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors①①">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code①⓪">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-unknown-error" id="ref-for-dfn-unknown-error">unknown error</a>.</p>
      <p>TODO: is this the right way to handle errors here?</p>
     <li data-md>
      <p class="assertion">Assert: <var>navigate status</var>’s status is "<code>pending</code>" and <var>navigation id</var> is not null.</p>
     <li data-md>
      <p>If <var>wait condition</var> is "<code>none</code>":</p>
      <ol>
       <li data-md>
        <p>Let <var>body</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①⑥">map</a> matching the <code>browsingContext.NavigateResult</code> production, with the <code>navigation</code> field set to <var>navigation id</var>, and the <code>url</code> field set to the result of the <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-serializer" id="ref-for-concept-url-serializer②">URL serializer</a> given <var>navigate status</var>’s url.</p>
       <li data-md>
        <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success①⑥">success</a> with data <var>body</var>.</p>
      </ol>
     <li data-md>
      <p>If <var>wait condition</var> is "<code>interactive</code>", let <var>event name</var> be
 "<code>domContentLoaded</code>", otherwise let <var>event name</var> be
 "<code>load</code>".</p>
     <li data-md>
      <p>Let (<var>event received</var>, <var>status</var>) be <a data-link-type="dfn" href="#awaits" id="ref-for-awaits②">await</a> given «<var>event name</var>,
  "<code>download started</code>", "<code>navigation aborted</code>",
  "<code>navigation failed</code>"» and <var>navigation id</var>.</p>
     <li data-md>
      <p>If <var>event received</var> is "<code>navigation failed</code>"
 return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors①②">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code①①">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-unknown-error" id="ref-for-dfn-unknown-error①">unknown error</a>.</p>
      <p class="issue" id="issue-ceba1469"><a class="self-link" href="#issue-ceba1469"></a> Are we surfacing enough information about what failed and why with
 an error here? What error code do we want? Is there going to be a problem
 where local ends parse the implementation-defined strings to figure out
 what actually went wrong?</p>
     <li data-md>
      <p>Let <var>body</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①⑦">map</a> matching the <code>browsingContext.NavigateResult</code> production, with the <code>navigation</code> field set to <var>status</var>’s id, and the <code>url</code> field set to the result of the <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-serializer" id="ref-for-concept-url-serializer③">URL serializer</a> given <var>status</var>’s url.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success①⑦">success</a> with data <var>body</var>.</p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.3.2.3" id="type-browsingContext-Navigation"><span class="secno">6.3.2.3. </span><span class="content">The browsingContext.Navigation Type</span><a class="self-link" href="#type-browsingContext-Navigation"></a></h5>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition①②">remote end definition</a> and <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition①⑥">local end definition</a></p>
<pre class="cddl local-cddl remote-cddl">browsingContext.Navigation = text;
</pre>
   <p>The <code>browsingContext.Navigation</code> type is a unique string identifying an ongoing
navigation.</p>
   <p>TODO: Link to the definition in the HTML spec.</p>
   <h5 class="heading settled" data-level="6.3.2.4" id="type-browsingContext-NavigationInfo"><span class="secno">6.3.2.4. </span><span class="content">The browsingContext.NavigationInfo Type</span><a class="self-link" href="#type-browsingContext-NavigationInfo"></a></h5>
   <p><a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition①⑦">local end definition</a>:</p>
<pre class="cddl local-cddl">browsingContext.NavigationInfo = {
  context: browsingContext.BrowsingContext,
  navigation: browsingContext.Navigation / null,
  timestamp: js-uint,
  url: text,
}
</pre>
   <p>The <code>browsingContext.NavigationInfo</code> type provides details of an ongoing navigation.</p>
   <div class="algorithm" data-algorithm="get the navigation info">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="get-the-navigation-info">get the navigation info</dfn>, given <var>context</var> and <var>navigation status</var>: 
    <ol>
     <li data-md>
      <p>Let <var>context id</var> be the <a data-link-type="dfn" href="#browsing-context-id" id="ref-for-browsing-context-id④">browsing context id</a> for <var>context</var>.</p>
     <li data-md>
      <p>Let <var>navigation id</var> be <var>navigation status</var>’s id.</p>
     <li data-md>
      <p>Let <var>timestamp</var> be a <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-time-values-and-time-range" id="ref-for-sec-time-values-and-time-range">time value</a> representing the current date and time in UTC.</p>
     <li data-md>
      <p>Let <var>url</var> be <var>navigation status</var>’s url.</p>
     <li data-md>
      <p>Return a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①⑧">map</a> matching the <code>browsingContext.NavigationInfo</code> production, with the <code>context</code> field set to <var>context id</var>, the <code>navigation</code> field set to <var>navigation id</var>, the <code>timestamp</code> field set to <var>timestamp</var>, and the <code>url</code> field set to the result of the <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-serializer" id="ref-for-concept-url-serializer④">URL serializer</a> given <var>url</var>.</p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.3.2.5" id="type-browsingContext-ReadinessState"><span class="secno">6.3.2.5. </span><span class="content">The browsingContext.ReadinessState Type</span><a class="self-link" href="#type-browsingContext-ReadinessState"></a></h5>
<pre class="cddl remote-cddl">browsingContext.ReadinessState = "none" / "interactive" / "complete"
</pre>
   <p>The <code>browsingContext.ReadinessState</code> type represents the stage of
document loading at which a navigation command will return.</p>
   <h4 class="heading settled" data-level="6.3.3" id="module-browsingContext-commands"><span class="secno">6.3.3. </span><span class="content">Commands</span><a class="self-link" href="#module-browsingContext-commands"></a></h4>
   <h5 class="heading settled" data-level="6.3.3.1" id="command-browsingContext-activate"><span class="secno">6.3.3.1. </span><span class="content">The browsingContext.activate Command</span><a class="self-link" href="#command-browsingContext-activate"></a></h5>
   <p>The <dfn data-dfn-for="commands" data-dfn-type="dfn" data-export id="commands-browsingcontextactivate">browsingContext.activate<a class="self-link" href="#commands-browsingcontextactivate"></a></dfn> command activates and focuses the given top-level browsing context.</p>
   <dl>
    <dt>Command Type
    <dd>
<pre class="cddl remote-cddl">browsingContext.Activate = (
  method: "browsingContext.activate",
  params: browsingContext.ActivateParameters
)

browsingContext.ActivateParameters = {
  context: browsingContext.BrowsingContext
}
</pre>
    <dt>Result Type
    <dd>
<pre class="cddl">EmptyResult
</pre>
   </dl>
   <div class="algorithm" data-algorithm="remote end steps for browsingContext.activate">
    <p>The <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-end-steps" id="ref-for-dfn-remote-end-steps⑧">remote end steps</a> with <var>command parameters</var> are:</p>
    <ol>
     <li data-md>
      <p>Let <var>context id</var> be the value of the <var>command parameters</var>["<code>context</code>"] field.</p>
     <li data-md>
      <p>Let <var>context</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try⑥">trying</a> to <a data-link-type="dfn" href="#get-a-browsing-context" id="ref-for-get-a-browsing-context①">get a browsing context</a> with <var>context id</var>.</p>
     <li data-md>
      <p>If <var>context</var> is not a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context" id="ref-for-top-level-browsing-context⑤">top-level browsing context</a>, return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors①③">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code①②">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument⑨">invalid argument</a>.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="#activate-a-context" id="ref-for-activate-a-context">activate a context</a> with <var>context</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="activate a context">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="activate-a-context">activate a context</dfn> given <var>context</var>: 
    <ol>
     <li data-md>
      <p>Run implementation-specific steps so that <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#traversable-navigable" id="ref-for-traversable-navigable">traversable navigable</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#system-visibility-state" id="ref-for-system-visibility-state">system visibility state</a> becomes <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#system-visibility-state" id="ref-for-system-visibility-state①">visible</a>. If this is not possible return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors①④">error</a> with error code <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-unsupported-operation" id="ref-for-dfn-unsupported-operation">unsupported operation</a>.</p>
      <p class="note" role="note"><span class="marker">Note:</span> This can have the side effect of making currently <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#system-visibility-state" id="ref-for-system-visibility-state②">visible</a> <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#navigables" id="ref-for-navigables③">navigables</a> <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#system-visibility-state" id="ref-for-system-visibility-state③">hidden</a>.</p>
      <p class="note" role="note"><span class="marker">Note:</span> This can change the underlying OS state by causing the window to become unminimized or by other side effects related to changing the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#system-visibility-state" id="ref-for-system-visibility-state④">system visibility state</a>.</p>
     <li data-md>
      <p>Run implementation-specific steps to set the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#system-focus" id="ref-for-system-focus">system focus</a> on the <var>context</var> if it is not focused.</p>
      <p class="note" role="note"><span class="marker">Note:</span> This does not change the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#focused-area-of-the-document" id="ref-for-focused-area-of-the-document">focused area of the document</a> except as mandated by other specifications.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success①⑧">success</a> with data null.</p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.3.3.2" id="command-browsingContext-captureScreenshot"><span class="secno">6.3.3.2. </span><span class="content">The browsingContext.captureScreenshot Command</span><a class="self-link" href="#command-browsingContext-captureScreenshot"></a></h5>
   <p>The <dfn data-dfn-for="commands" data-dfn-type="dfn" data-export id="commands-browsingcontextcapturescreenshot">browsingContext.captureScreenshot<a class="self-link" href="#commands-browsingcontextcapturescreenshot"></a></dfn> command
captures an image of the given browsing context, and returns it as a
Base64-encoded string.</p>
   <dl>
    <dt>Command Type
    <dd>
<pre class="cddl remote-cddl">browsingContext.CaptureScreenshot = (
  method: "browsingContext.captureScreenshot",
  params: browsingContext.CaptureScreenshotParameters
)

browsingContext.CaptureScreenshotParameters = {
  context: browsingContext.BrowsingContext,
  ? clip: browsingContext.ClipRectangle
}

browsingContext.ClipRectangle = (
  browsingContext.BoxClipRectangle /
  browsingContext.ElementClipRectangle
)

browsingContext.ElementClipRectangle = {
  type: "element",
  element: script.SharedReference,
  ? scrollIntoView: bool
}

browsingContext.BoxClipRectangle = {
   type: "viewport",
   x: float,
   y: float,
   width: float,
   height: float
}
</pre>
    <dt>Result Type
    <dd>
<pre class="cddl local-cddl">browsingContext.CaptureScreenshotResult = {
  data: text
}
</pre>
   </dl>
   <p>TODO: Full page screenshots, and multiple output formats</p>
   <div class="algorithm" data-algorithm="normalize rect">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="normalize-rect">normalize rect</dfn> given <var>rect</var>: 
    <p class="note" role="note"><span class="marker">Note:</span> This ensures that the resulting rect has positive <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-width-dimension" id="ref-for-rectangle-width-dimension">width dimension</a> and <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-height-dimension" id="ref-for-rectangle-height-dimension">height dimension</a>.</p>
    <ol>
     <li data-md>
      <p>Let <var>x</var> be <var>rect</var>’s <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-x-coordinate" id="ref-for-rectangle-x-coordinate">x coordinate</a>.</p>
     <li data-md>
      <p>Let <var>y</var> be <var>rect</var>’s <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-y-coordinate" id="ref-for-rectangle-y-coordinate">y coordinate</a>.</p>
     <li data-md>
      <p>Let <var>width</var> be <var>rect</var>’s <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-width-dimension" id="ref-for-rectangle-width-dimension①">width dimension</a>.</p>
     <li data-md>
      <p>Let <var>height</var> be <var>rect</var>’s <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-height-dimension" id="ref-for-rectangle-height-dimension①">height dimension</a>.</p>
     <li data-md>
      <p>If <var>width</var> is less than 0, set <var>x</var> to <var>x</var> + <var>width</var> and then set <var>width</var> to
 -<var>width</var>.</p>
     <li data-md>
      <p>If <var>height</var> is less than 0, set <var>y</var> to <var>y</var> + <var>height</var> and then set <var>height</var> to -<var>height</var>.</p>
     <li data-md>
      <p>Return a new <code class="idl"><a data-link-type="idl" href="https://drafts.fxtf.org/geometry-1/#domrectreadonly" id="ref-for-domrectreadonly">DOMRectReadOnly</a></code> with <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-x-coordinate" id="ref-for-rectangle-x-coordinate①">x coordinate</a> <var>x</var>, <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-y-coordinate" id="ref-for-rectangle-y-coordinate①">y coordinate</a> <var>y</var>, <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-width-dimension" id="ref-for-rectangle-width-dimension②">width dimension</a> <var>width</var> and <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-height-dimension" id="ref-for-rectangle-height-dimension②">height dimension</a> <var>height</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="rectangle intersection">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="rectangle-intersection">rectangle intersection</dfn> given <var>rect1</var> and <var>rect2</var> 
    <ol>
     <li data-md>
      <p>Let <var>rect1</var> be <a data-link-type="dfn" href="#normalize-rect" id="ref-for-normalize-rect">normalize rect</a> with <var>rect1</var>.</p>
     <li data-md>
      <p>Let <var>rect2</var> be <a data-link-type="dfn" href="#normalize-rect" id="ref-for-normalize-rect①">normalize rect</a> with <var>rect2</var>.</p>
     <li data-md>
      <p>Let <var>x1_0</var> be <var>rect1</var>’s <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-x-coordinate" id="ref-for-rectangle-x-coordinate②">x coordinate</a>.</p>
     <li data-md>
      <p>Let <var>x2_0</var> be <var>rect2</var>’s <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-x-coordinate" id="ref-for-rectangle-x-coordinate③">x coordinate</a>.</p>
     <li data-md>
      <p>Let <var>x1_1</var> be <var>rect1</var>’s <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-x-coordinate" id="ref-for-rectangle-x-coordinate④">x coordinate</a> plus <var>rect1</var>’s <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-width-dimension" id="ref-for-rectangle-width-dimension③">width dimension</a>.</p>
     <li data-md>
      <p>Let <var>x2_1</var> be <var>rect2</var>’s <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-x-coordinate" id="ref-for-rectangle-x-coordinate⑤">x coordinate</a> plus <var>rect2</var>’s <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-width-dimension" id="ref-for-rectangle-width-dimension④">width dimension</a>.</p>
     <li data-md>
      <p>Let <var>x_0</var> be the maximum element of «<var>x1_0</var>, <var>x2_0</var>».</p>
     <li data-md>
      <p>Let <var>x_1</var> be the minimum element of «<var>x1_1</var>, <var>x2_1</var>».</p>
     <li data-md>
      <p>Let <var>y1_0</var> be <var>rect1</var>’s <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-y-coordinate" id="ref-for-rectangle-y-coordinate②">y coordinate</a>.</p>
     <li data-md>
      <p>Let <var>y2_0</var> be <var>rect2</var>’s <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-y-coordinate" id="ref-for-rectangle-y-coordinate③">y coordinate</a>.</p>
     <li data-md>
      <p>Let <var>y1_1</var> be <var>rect1</var>’s <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-y-coordinate" id="ref-for-rectangle-y-coordinate④">y coordinate</a> plus <var>rect1</var>’s <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-height-dimension" id="ref-for-rectangle-height-dimension③">height dimension</a>.</p>
     <li data-md>
      <p>Let <var>y2_1</var> be <var>rect2</var>’s <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-y-coordinate" id="ref-for-rectangle-y-coordinate⑤">y coordinate</a> plus <var>rect2</var>’s <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-height-dimension" id="ref-for-rectangle-height-dimension④">height dimension</a>.</p>
     <li data-md>
      <p>Let <var>y_0</var> be the maximum element of «<var>y1_0</var>, <var>y2_0</var>».</p>
     <li data-md>
      <p>Let <var>y_1</var> be the minimum element of «<var>y1_1</var>, <var>y2_1</var>».</p>
     <li data-md>
      <p>If <var>x_1</var> is less than <var>x_0</var>, let <var>width</var> be 0. Otherwise let <var>width</var> be <var>x_1</var> - <var>x_0</var>.</p>
     <li data-md>
      <p>If <var>y_1</var> is less than <var>y_0</var>, let <var>height</var> be 0. Otherwise let <var>height</var> be <var>y_1</var> - <var>y_0</var>.</p>
     <li data-md>
      <p>Return a new <code class="idl"><a data-link-type="idl" href="https://drafts.fxtf.org/geometry-1/#domrectreadonly" id="ref-for-domrectreadonly①">DOMRectReadOnly</a></code> with <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-x-coordinate" id="ref-for-rectangle-x-coordinate⑥">x coordinate</a> <var>x_0</var>, <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-y-coordinate" id="ref-for-rectangle-y-coordinate⑥">y coordinate</a> <var>y_0</var>, <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-width-dimension" id="ref-for-rectangle-width-dimension⑤">width dimension</a> <var>width</var> and <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-height-dimension" id="ref-for-rectangle-height-dimension⑤">height dimension</a> <var>height</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="render viewport to a canvas">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="render-viewport-to-a-canvas">render viewport to a canvas</dfn> given <var>viewport</var> and <var>rect</var>: 
    <ol>
     <li data-md>
      <p class="assertion">Assert: <var>rect</var> is normalized and represents a non-empty sub-region of <var>viewport</var>,
 i.e. all the following hold:</p>
      <ul>
       <li data-md>
        <p><var>rect</var>’s <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-x-coordinate" id="ref-for-rectangle-x-coordinate⑦">x coordinate</a> is greater than or equal to 0.</p>
       <li data-md>
        <p><var>rect</var>’s <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-width-dimension" id="ref-for-rectangle-width-dimension⑥">width dimension</a> is greater than 0.</p>
       <li data-md>
        <p><var>rect</var>’s <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-y-coordinate" id="ref-for-rectangle-y-coordinate⑦">y coordinate</a> is greater than or equal to 0.</p>
       <li data-md>
        <p><var>rect</var>’s <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-height-dimension" id="ref-for-rectangle-height-dimension⑥">height dimension</a> is greater than 0.</p>
       <li data-md>
        <p><var>rect</var>’s <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-x-coordinate" id="ref-for-rectangle-x-coordinate⑧">x coordinate</a> plus <var>rect</var>’s <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-width-dimension" id="ref-for-rectangle-width-dimension⑦">width dimension</a> is less than
 or equal to <var>viewport</var>’s width.</p>
       <li data-md>
        <p><var>rect</var>’s <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-y-coordinate" id="ref-for-rectangle-y-coordinate⑧">y coordinate</a> plus <var>rect</var>’s <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-height-dimension" id="ref-for-rectangle-height-dimension⑦">height dimension</a> is less than
 or equal to <var>viewport</var>’s height.</p>
      </ul>
     <li data-md>
      <p>Let <var>scale</var> be <a data-link-type="dfn" href="https://drafts.csswg.org/cssom-view-1/#determine-the-device-pixel-ratio" id="ref-for-determine-the-device-pixel-ratio">determine the device pixel ratio</a> for the output device of <var>viewport</var>.</p>
     <li data-md>
      <p>Let <var>paint width</var> be <var>rect</var>’s <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-width-dimension" id="ref-for-rectangle-width-dimension⑧">width dimension</a> multiplied by <var>scale</var>,
 rounded to the nearest integer, so it matches the width of <var>rect</var> in device
 pixels.</p>
     <li data-md>
      <p>Let <var>paint height</var> be <var>rect</var>’s <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-height-dimension" id="ref-for-rectangle-height-dimension⑧">height dimension</a> multiplied by <var>scale</var>,
 rounded to the nearest integer, so it matches the height of <var>rect</var> in device
 pixels.</p>
     <li data-md>
      <p>Let <var>canvas</var> be a new <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/canvas.html#htmlcanvaselement" id="ref-for-htmlcanvaselement">HTMLCanvasElement</a></code> with <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/canvas.html#dom-canvas-width" id="ref-for-dom-canvas-width">width</a></code> <var>paint
 width</var> and <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/canvas.html#dom-canvas-height" id="ref-for-dom-canvas-height">height</a></code> <var>paint height</var>.</p>
     <li data-md>
      <p>Let <var>context</var> be the result of running the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/canvas.html#2d-context-creation-algorithm" id="ref-for-2d-context-creation-algorithm">2D context creation algorithm</a> with <var>canvas</var> and null.</p>
     <li data-md>
      <p>Set <var>canvas</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage//canvas.html#offscreencanvas-context-mode" id="ref-for-offscreencanvas-context-mode">context mode</a> to <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/canvas.html#concept-canvas-2d" id="ref-for-concept-canvas-2d">2D</a>.</p>
     <li data-md>
      <p>Complete implementation specific steps equivalent to drawing the region of
 the framebuffer representing the region of <var>viewport</var> covered by <var>rect</var> to <var>context</var>, such that each pixel in the framebuffer corresponds to a pixel in <var>context</var> with (<var>rect</var>’s <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-x-coordinate" id="ref-for-rectangle-x-coordinate⑨">x coordinate</a>, <var>rect</var>’s <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-y-coordinate" id="ref-for-rectangle-y-coordinate⑨">y coordinate</a>) in
 viewport coordinates corresponding to (0,0) in <var>context</var> and (<var>rect</var>’s <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-x-coordinate" id="ref-for-rectangle-x-coordinate①⓪">x coordinate</a> + <var>rect</var>’s <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-width-dimension" id="ref-for-rectangle-width-dimension⑨">width dimension</a>, <var>rect</var>’s <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-y-coordinate" id="ref-for-rectangle-y-coordinate①⓪">y coordinate</a> + <var>rect</var>’s <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-height-dimension" id="ref-for-rectangle-height-dimension⑨">height dimension</a>) corresponding to (<var>paint
 width</var>, <var>paint height</var>).</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://www.w3.org/TR/CSS21/intro.html#canvas" id="ref-for-canvas">canvas</a>.</p>
    </ol>
   </div>
   <p>The <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-end-steps" id="ref-for-dfn-remote-end-steps⑨">remote end steps</a> with <var>session</var> and <var>command parameters</var> are:</p>
   <ol>
    <li data-md>
     <p>Let <var>context id</var> be <var>command parameters</var>["<code>context</code>"].</p>
    <li data-md>
     <p>Let <var>context</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try⑦">trying</a> to <a data-link-type="dfn" href="#get-a-browsing-context" id="ref-for-get-a-browsing-context②">get a browsing context</a> with <var>context id</var>.</p>
    <li data-md>
     <p>If the implementation is unable to capture a screenshot of <var>context</var> for any
 reason then return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors①⑤">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code①③">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-unsupported-operation" id="ref-for-dfn-unsupported-operation①">unsupported operation</a>.</p>
    <li data-md>
     <p>Let <var>document</var> be <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#active-document" id="ref-for-active-document⑤">active document</a>.</p>
    <li data-md>
     <p>Let <var>viewport</var> be <var>document</var>’s <a data-link-type="dfn" href="https://drafts.csswg.org/cssom-view/#visual-viewport" id="ref-for-visual-viewport">visual viewport</a>.</p>
    <li data-md>
     <p>Immediately after the next invocation of the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/imagebitmap-and-animations.html#run-the-animation-frame-callbacks" id="ref-for-run-the-animation-frame-callbacks">run the animation frame
 callbacks</a> algorithm for <var>document</var>:</p>
     <p class="issue" id="issue-b2b83ca0"><a class="self-link" href="#issue-b2b83ca0"></a> This ought to be integrated into the update rendering algorithm
 in some more explicit way.</p>
    <li data-md>
     <p>Let <var>viewport rect</var> be a <code class="idl"><a data-link-type="idl" href="https://drafts.fxtf.org/geometry-1/#domrectreadonly" id="ref-for-domrectreadonly②">DOMRectReadOnly</a></code> with <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-x-coordinate" id="ref-for-rectangle-x-coordinate①①">x coordinate</a> 0, <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-y-coordinate" id="ref-for-rectangle-y-coordinate①①">y
 coordinate</a> 0, <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-width-dimension" id="ref-for-rectangle-width-dimension①⓪">width dimension</a> <var>viewport</var> width, and <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-height-dimension" id="ref-for-rectangle-height-dimension①⓪">height
 dimension</a> <var>viewport</var> height.</p>
    <li data-md>
     <p>Let <var>clip rect</var> be <var>viewport rect</var>.</p>
    <li data-md>
     <p>If <var>command parameters</var> contains "<code>clip</code>":</p>
     <ol>
      <li data-md>
       <p>Let <var>clip</var> be <var>command parameters</var>["<code>clip</code>"].</p>
      <li data-md>
       <p>Run the steps under the first matching condition:</p>
       <dl>
        <dt><var>clip</var> matches the <code>browsingContext.ElementClipRectangle</code> production: 
        <dd>
         <ol>
          <li data-md>
           <p>Let <var>environment settings</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object">environment settings object</a> whose <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global②">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window①">associated <code>Document</code></a> is <var>document</var>.</p>
          <li data-md>
           <p>Let <var>realm</var> be <var>environment settings</var>’ <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#realm-execution-context" id="ref-for-realm-execution-context">realm execution context</a>'s
  Realm component.</p>
          <li data-md>
           <p>Let <var>element</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try⑧">trying</a> to <a data-link-type="dfn" href="#deserialize-remote-reference" id="ref-for-deserialize-remote-reference">deserialize remote reference</a> with <var>clip</var>["<code>element</code>"], <var>realm</var>, and <var>session</var>.</p>
          <li data-md>
           <p>If <var>element</var> doesn’t implement <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element">Element</a></code> return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors①⑥">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code①④">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-no-such-element" id="ref-for-dfn-no-such-element">no such element</a>.</p>
          <li data-md>
           <p>If <var>element</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document">node document</a> is not <var>document</var>, return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors①⑦">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code①⑤">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-no-such-element" id="ref-for-dfn-no-such-element①">no such element</a>.</p>
          <li data-md>
           <p>If <var>clip</var> contains "<code>scrollIntoView</code>" and <var>clip</var>["<code>scrollIntoView</code>"]:</p>
           <ol>
            <li data-md>
             <p><a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-scrolls-into-view" id="ref-for-dfn-scrolls-into-view">Scroll into view</a> with <var>element</var>.</p>
           </ol>
          <li data-md>
           <p>Let <var>clip rect</var> be <a data-link-type="dfn" href="https://drafts.csswg.org/cssom-view-1/#element-get-the-bounding-box" id="ref-for-element-get-the-bounding-box">get the bounding box</a> for <var>element</var>.</p>
         </ol>
        <dt><var>clip</var> matches the <code>browsingContext.BoxClipRectangle</code> production: 
        <dd>
         <ol>
          <li data-md>
           <p>Let <var>clip rect</var> be a <code class="idl"><a data-link-type="idl" href="https://drafts.fxtf.org/geometry-1/#domrectreadonly" id="ref-for-domrectreadonly③">DOMRectReadOnly</a></code> with x coordinate <var>clip</var>["<code>x</code>"],
  y coordinate <var>clip</var>["<code>y</code>"], width <var>clip</var>["<code>width</code>"],
  and height <var>clip</var>["<code>height</code>"].</p>
         </ol>
       </dl>
     </ol>
    <li data-md>
     <p>Let <var>rect</var> be the <a data-link-type="dfn" href="#rectangle-intersection" id="ref-for-rectangle-intersection">rectangle intersection</a> of <var>viewport rect</var> and <var>clip rect</var>.</p>
    <li data-md>
     <p>If <var>rect</var>’s <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-width-dimension" id="ref-for-rectangle-width-dimension①①">width dimension</a> is 0 or <var>rect</var>’s <a data-link-type="dfn" href="https://drafts.fxtf.org/geometry/#rectangle-height-dimension" id="ref-for-rectangle-height-dimension①①">height dimension</a> is 0,
 return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors①⑧">error</a> with error code <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-unable-to-capture-screen" id="ref-for-dfn-unable-to-capture-screen">unable to capture screen</a>.</p>
    <li data-md>
     <p>Let <var>canvas</var> be <a data-link-type="dfn" href="#render-viewport-to-a-canvas" id="ref-for-render-viewport-to-a-canvas">render viewport to a canvas</a> with <var>viewport</var> and <var>rect</var>.</p>
    <li data-md>
     <p>Let <var>encoding result</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try⑨">trying</a> to <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-encoding-a-canvas-as-base64" id="ref-for-dfn-encoding-a-canvas-as-base64">encode a canvas as
 Base64</a> with <var>canvas</var>.</p>
    <li data-md>
     <p>Let <var>body</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①⑨">map</a> matching the <code>browsingContext.CaptureScreenshotResult</code> production, with the <code>data</code> field set to <var>encoding result</var>.</p>
    <li data-md>
     <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success①⑨">success</a> with data <var>body</var>.</p>
   </ol>
   <h5 class="heading settled" data-level="6.3.3.3" id="command-browsingContext-close"><span class="secno">6.3.3.3. </span><span class="content">The browsingContext.close Command</span><a class="self-link" href="#command-browsingContext-close"></a></h5>
   <p>The <dfn data-dfn-for="commands" data-dfn-type="dfn" data-export id="commands-browsingcontextclose">browsingContext.close<a class="self-link" href="#commands-browsingcontextclose"></a></dfn> command closes a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context" id="ref-for-top-level-browsing-context⑥">top-level browsing context</a>.</p>
   <dl>
    <dt>Command Type
    <dd>
<pre class="cddl remote-cddl">browsingContext.Close = (
  method: "browsingContext.close",
  params: browsingContext.CloseParameters
)

browsingContext.CloseParameters = {
  context: browsingContext.BrowsingContext
}
</pre>
    <dt>Result Type
    <dd>
<pre class="cddl">EmptyResult
</pre>
   </dl>
   <div class="algorithm" data-algorithm="remote end steps for browsingContext.close">
     The <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-end-steps" id="ref-for-dfn-remote-end-steps①⓪">remote end steps</a> with <var>command parameters</var> are: 
    <ol>
     <li data-md>
      <p>Let <var>context id</var> be the value of the <code>context</code> field of <var>command parameters</var>.</p>
     <li data-md>
      <p>Let <var>context</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try①⓪">trying</a> to <a data-link-type="dfn" href="#get-a-browsing-context" id="ref-for-get-a-browsing-context③">get a browsing context</a> with <var>context id</var>.</p>
     <li data-md>
      <p class="assertion">Assert: <var>context</var> is not null.</p>
     <li data-md>
      <p>If <var>context</var> is not a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context" id="ref-for-top-level-browsing-context⑦">top-level browsing context</a>, return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors①⑨">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code①⑥">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument①⓪">invalid argument</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#close-a-browsing-context" id="ref-for-close-a-browsing-context①">Close</a> <var>context</var>.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success②⓪">success</a> with data null.</p>
    </ol>
    <p class="issue" id="issue-bd9840d8"><a class="self-link" href="#issue-bd9840d8"></a> There is an open discussion about the behavior
when closing the last <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context" id="ref-for-top-level-browsing-context⑧">top-level browsing context</a>. We could expect to close
the browser, close the session or leave this up to the implementation. <a href="https://github.com/w3c/webdriver-bidi/issues/170">[Issue #w3c/webdriver-bidi#170]</a></p>
   </div>
   <h5 class="heading settled" data-level="6.3.3.4" id="command-browsingContext-create"><span class="secno">6.3.3.4. </span><span class="content">The browsingContext.create Command</span><a class="self-link" href="#command-browsingContext-create"></a></h5>
   <p>The <dfn data-dfn-for="commands" data-dfn-type="dfn" data-export id="commands-browsingcontextcreate">browsingContext.create<a class="self-link" href="#commands-browsingcontextcreate"></a></dfn> command creates a new <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context" id="ref-for-browsing-context①">browsing context</a>, either in a new tab or in a new window, and returns its <a data-link-type="dfn" href="#browsing-context-id" id="ref-for-browsing-context-id⑤">browsing context id</a>.</p>
   <dl>
    <dt>Command Type
    <dd>
<pre class="cddl remote-cddl">browsingContext.Create = (
  method: "browsingContext.create",
  params: browsingContext.CreateParameters
)

browsingContext.CreateType = "tab" / "window"

browsingContext.CreateParameters = {
  type: browsingContext.CreateType,
  ? referenceContext: browsingContext.BrowsingContext,
  ? background: bool .default false
}
</pre>
    <dt>Result Type
    <dd>
<pre class="cddl local-cddl">browsingContext.CreateResult = {
  context: browsingContext.BrowsingContext
}
</pre>
   </dl>
   <div class="algorithm" data-algorithm="remote end steps for browsingContext.create">
     The <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-end-steps" id="ref-for-dfn-remote-end-steps①①">remote end steps</a> with <var>command parameters</var> are: 
    <ol>
     <li data-md>
      <p>Let <var>type</var> be the value of the <code>type</code> field of <var>command parameters</var>.</p>
     <li data-md>
      <p>Let <var>reference context id</var> be the value of the <code>referenceContext</code> field of <var>command parameters</var>, if present, or null otherwise.</p>
     <li data-md>
      <p>If <var>reference context id</var> is not null, let <var>reference context</var> be the
 result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try①①">trying</a> to <a data-link-type="dfn" href="#get-a-browsing-context" id="ref-for-get-a-browsing-context④">get a browsing context</a> with <var>reference context id</var>. Otherwise let <var>reference context</var> be null.</p>
     <li data-md>
      <p>If <var>reference context</var> is not null and is not a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context" id="ref-for-top-level-browsing-context⑨">top-level browsing context</a>,
return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors②⓪">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code①⑦">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument①①">invalid argument</a>.</p>
     <li data-md>
      <p>If the implementation is unable to create a new browsing context for any
 reason then return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors②①">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code①⑧">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-unsupported-operation" id="ref-for-dfn-unsupported-operation②">unsupported operation</a>.</p>
     <li data-md>
      <p>Create a new <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context" id="ref-for-top-level-browsing-context①⓪">top-level browsing context</a> by running the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#window-open-steps" id="ref-for-window-open-steps">window open
 steps</a> with <var>url</var> set to "<code>about:blank</code>", <var>target</var> set to the empty string, and <var>features</var> set to "<code>noopener</code>". Which OS window the new <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context" id="ref-for-browsing-context②">browsing context</a> is created in depends on <var>type</var> and <var>reference context</var>:</p>
      <ul>
       <li data-md>
        <p>If <var>type</var> is "<code>tab</code>" and the implementation supports
 multiple browsing contexts in the same OS window:</p>
        <ul>
         <li data-md>
          <p>The new browsing context should reuse an existing OS window, if any.</p>
         <li data-md>
          <p>If <var>reference context</var> is not null, the new browsing context should
 reuse the window containing <var>reference context</var>, if any. If the
 top-level browsing contexts inside an OS window have a definite ordering,
 the new browsing context should be immediately after <var>reference context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context" id="ref-for-top-level-browsing-context①①">top-level browsing context</a> in that ordering.</p>
        </ul>
       <li data-md>
        <p>If <var>type</var> is "<code>window</code>", and the implementation supports
 multiple browsing contexts in separate OS windows, the created browsing
 context should be in a new OS window.</p>
       <li data-md>
        <p>Otherwise, the details of how the browsing context is presented to the
 user are implementation defined.</p>
      </ul>
     <li data-md>
      <p>If the value of the <var>command parameters</var>’ <code>background</code> field is false:</p>
      <ol>
       <li data-md>
        <p>Let <var>activate result</var> be the result of <a data-link-type="dfn" href="#activate-a-context" id="ref-for-activate-a-context①">activate a context</a> with the newly created <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context" id="ref-for-browsing-context③">browsing context</a>.</p>
       <li data-md>
        <p>If <var>activate result</var> is an <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors②②">error</a>, return <var>activate result</var>.</p>
      </ol>
      <p class="note" role="note"><span class="marker">Note:</span> Do not invoke the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#focusing-steps" id="ref-for-focusing-steps">focusing steps</a> for the created browsing context if <code>background</code> is true.</p>
     <li data-md>
      <p>Let <var>context id</var> be the <a data-link-type="dfn" href="#browsing-context-id" id="ref-for-browsing-context-id⑥">browsing context id</a> of the newly created <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context" id="ref-for-browsing-context④">browsing context</a>.</p>
     <li data-md>
      <p>Let <var>body</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map②⓪">map</a> matching the <code>browsingContext.CreateResult</code> production, with the <code>context</code> field set to <var>context id</var>.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success②①">success</a> with data <var>body</var>.</p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.3.3.5" id="command-browsingContext-getTree"><span class="secno">6.3.3.5. </span><span class="content">The browsingContext.getTree Command</span><a class="self-link" href="#command-browsingContext-getTree"></a></h5>
   <p>The <dfn data-dfn-for="commands" data-dfn-type="dfn" data-export id="commands-browsingcontextgettree">browsingContext.getTree<a class="self-link" href="#commands-browsingcontextgettree"></a></dfn> command returns a
tree of all descendent browsing contexts including the given parent itself,
or all top-level contexts when no parent is provided.</p>
   <dl>
    <dt>Command Type
    <dd>
<pre class="cddl remote-cddl">browsingContext.GetTree = (
  method: "browsingContext.getTree",
  params: browsingContext.GetTreeParameters
)

browsingContext.GetTreeParameters = {
  ? maxDepth: js-uint,
  ? root: browsingContext.BrowsingContext,
}
</pre>
    <dt>Result Type
    <dd>
<pre class="cddl local-cddl">browsingContext.GetTreeResult = {
  contexts: browsingContext.InfoList
}
</pre>
   </dl>
   <div class="algorithm" data-algorithm="remote end steps for browsingContext.getTree">
     The <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-end-steps" id="ref-for-dfn-remote-end-steps①②">remote end steps</a> with <var>session</var> and <var>command parameters</var> are: 
    <ol>
     <li data-md>
      <p>Let <var>root id</var> be the value of the <code>root</code> field of <var>command parameters</var> if present, or null otherwise.</p>
     <li data-md>
      <p>Let <var>max depth</var> be the value of the <code>maxDepth</code> field of <var>command
 parameters</var> if present, or null otherwise.</p>
     <li data-md>
      <p>Let <var>contexts</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list②">list</a>.</p>
     <li data-md>
      <p>If <var>root id</var> is not null, append the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try①②">trying</a> to <a data-link-type="dfn" href="#get-a-browsing-context" id="ref-for-get-a-browsing-context⑤">get a browsing context</a> given <var>root id</var> to <var>contexts</var>.
 Otherwise append all <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context" id="ref-for-top-level-browsing-context①②">top-level browsing contexts</a> to <var>contexts</var>.</p>
     <li data-md>
      <p>Let <var>contexts info</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list③">list</a>.</p>
     <li data-md>
      <p>For each <var>context</var> of <var>contexts</var>:</p>
      <ol>
       <li data-md>
        <p>Let <var>info</var> be the result of <a data-link-type="dfn" href="#get-the-browsing-context-info" id="ref-for-get-the-browsing-context-info①">get the browsing context info</a> given <var>context</var>, <var>max depth</var>, and true.</p>
       <li data-md>
        <p>Append <var>info</var> to <var>contexts info</var></p>
      </ol>
     <li data-md>
      <p>Let <var>body</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map②①">map</a> matching the <code>browsingContext.GetTreeResult</code> production, with the <code>contexts</code> field set to <var>contexts info</var>.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success②②">success</a> with data <var>body</var>.</p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.3.3.6" id="command-browsingContext-handleUserPrompt"><span class="secno">6.3.3.6. </span><span class="content">The browsingContext.handleUserPrompt Command</span><a class="self-link" href="#command-browsingContext-handleUserPrompt"></a></h5>
   <p>The <dfn data-dfn-for="commands" data-dfn-type="dfn" data-export id="commands-browsingcontexthandleuserprompt">browsingContext.handleUserPrompt<a class="self-link" href="#commands-browsingcontexthandleuserprompt"></a></dfn> command allows closing an open prompt</p>
   <dl>
    <dt>Command Type
    <dd>
<pre class="cddl remote-cddl">browsingContext.HandleUserPrompt = (
  method: "browsingContext.handleUserPrompt",
  params: browsingContext.HandleUserPromptParameters
)

browsingContext.HandleUserPromptParameters = {
  context: browsingContext.BrowsingContext,
  ? accept: bool,
  ? userText: text,
}
</pre>
    <dt>Result Type
    <dd>
<pre class="cddl">EmptyResult
</pre>
   </dl>
   <div class="algorithm" data-algorithm="remote end steps for browsingContext.handleUserPrompt">
    <p>The <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-end-steps" id="ref-for-dfn-remote-end-steps①③">remote end steps</a> with <var>session</var> and <var>command parameters</var> are:</p>
    <ol>
     <li data-md>
      <p>Let <var>context id</var> be the value of the <code>context</code> field of <var>command parameters</var>.</p>
     <li data-md>
      <p>Let <var>context</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try①③">trying</a> to <a data-link-type="dfn" href="#get-a-browsing-context" id="ref-for-get-a-browsing-context⑥">get a browsing context</a> with <var>context id</var>.</p>
     <li data-md>
      <p>Let <var>accept</var> be the value of the <code>accept</code> field of <var>command
 parameters</var> if present, or true otherwise.</p>
     <li data-md>
      <p>Let <var>userText</var> be the value of the <code>userText</code> field of <var>command
 parameters</var> if present, or the empty string otherwise.</p>
     <li data-md>
      <p>If <var>context</var> is currently showing a simple dialog from a call to <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-alert" id="ref-for-dom-alert">alert</a> then
 acknowledge the prompt.</p>
      <p>Otherwise if <var>context</var> is currently showing a simple dialog from a call to <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-confirm" id="ref-for-dom-confirm">confirm</a>, then respond positively if <var>accept</var> is true, or respond
 negatively if <var>accept</var> is false.</p>
      <p>Otherwise if <var>context</var> is currently showing a simple dialog from a call to <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-prompt" id="ref-for-dom-prompt">prompt</a>, then respond with the string value <var>userText</var> if <var>accept</var> is
 true, or abort if <var>accept</var> is false.</p>
      <p>Otherwise, if <var>context</var> is currently showing a prompt as part of the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#prompt-to-unload-a-document" id="ref-for-prompt-to-unload-a-document①">prompt
 to unload</a> steps, then confirm the navigation if <var>accept</var> is true, otherwise
 refuse the navigation.</p>
      <p>Otherwise return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors②③">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code①⑨">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-no-such-alert" id="ref-for-dfn-no-such-alert">no such alert</a>.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success②③">success</a> with data null.</p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.3.3.7" id="command-browsingContext-navigate"><span class="secno">6.3.3.7. </span><span class="content">The browsingContext.navigate Command</span><a class="self-link" href="#command-browsingContext-navigate"></a></h5>
   <p>The <dfn data-dfn-for="commands" data-dfn-type="dfn" data-export id="commands-browsingcontextnavigate">browsingContext.navigate<a class="self-link" href="#commands-browsingcontextnavigate"></a></dfn> command navigates a
browsing context to the given URL.</p>
   <dl>
    <dt>Command Type
    <dd>
<pre class="cddl remote-cddl">browsingContext.Navigate = (
  method: "browsingContext.navigate",
  params: browsingContext.NavigateParameters
)

browsingContext.NavigateParameters = {
  context: browsingContext.BrowsingContext,
  url: text,
  ? wait: browsingContext.ReadinessState,
}
</pre>
    <dt>Result Type
    <dd>
<pre class="cddl local-cddl">browsingContext.NavigateResult = {
  navigation: browsingContext.Navigation / null,
  url: text,
}
</pre>
   </dl>
   <div class="algorithm" data-algorithm="remote end steps for browsingContext.navigate">
     The <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-end-steps" id="ref-for-dfn-remote-end-steps①④">remote end steps</a> with <var>session</var> and <var>command parameters</var> are: 
    <ol>
     <li data-md>
      <p>Let <var>context id</var> be the value of the <code>context</code> field of <var>command parameters</var>.</p>
     <li data-md>
      <p>Let <var>context</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try①④">trying</a> to <a data-link-type="dfn" href="#get-a-browsing-context" id="ref-for-get-a-browsing-context⑦">get a browsing context</a> with <var>context id</var>.</p>
     <li data-md>
      <p class="assertion">Assert: <var>context</var> is not null.</p>
     <li data-md>
      <p>Let <var>wait condition</var> be the value of the <code>wait</code> field of <var>command
 parameters</var> if present, or "<code>none</code>" otherwise.</p>
     <li data-md>
      <p>Let <var>url</var> be the value of the <code>url</code> field of <var>command
 parameters</var>.</p>
     <li data-md>
      <p>Let <var>document</var> be <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#active-document" id="ref-for-active-document⑥">active document</a>.</p>
     <li data-md>
      <p>Let <var>base</var> be <var>document</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-script-base-url" id="ref-for-concept-script-base-url">base URL</a>.</p>
     <li data-md>
      <p>Let <var>url record</var> be the result of applying the <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-parser" id="ref-for-concept-url-parser">URL parser</a> to <var>url</var>,
 with <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-script-base-url" id="ref-for-concept-script-base-url①">base URL</a> <var>base</var>.</p>
     <li data-md>
      <p>If <var>url record</var> is failure, return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors②④">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code②⓪">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument①②">invalid
 argument</a>.</p>
     <li data-md>
      <p>Let <var>request</var> be a new <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request" id="ref-for-concept-request①">request</a> whose URL is <var>url record</var>.</p>
     <li data-md>
      <p>Return the result of <a data-link-type="dfn" href="#await-a-navigation" id="ref-for-await-a-navigation">await a navigation</a> with <var>context</var>, <var>request</var> and <var>wait condition</var>.</p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.3.3.8" id="command-browsingContext-print"><span class="secno">6.3.3.8. </span><span class="content">The browsingContext.print Command</span><a class="self-link" href="#command-browsingContext-print"></a></h5>
   <p>The <dfn data-dfn-for="commands" data-dfn-type="dfn" data-export id="commands-browsingcontextprint">browsingContext.print<a class="self-link" href="#commands-browsingcontextprint"></a></dfn> command
creates a paginated representation of a document, and returns it as a
PDF document represented as a Base64-encoded string.</p>
   <dl>
    <dt>Command Type
    <dd>
<pre class="cddl remote-cddl">browsingContext.Print = (
  method: "browsingContext.print",
  params: browsingContext.PrintParameters
)

browsingContext.PrintParameters = {
  context: browsingContext.BrowsingContext,
  ? background: bool .default false,
  ? margin: browsingContext.PrintMarginParameters,
  ? orientation: ("portrait" / "landscape") .default "portrait",
  ? page: browsingContext.PrintPageParameters,
  ? pageRanges: [*(js-uint / text)],
  ? scale: (0.1..2.0) .default 1.0,
  ? shrinkToFit: bool .default true,
}

browsingContext.PrintMarginParameters = {
  ? bottom: (float .ge 0.0) .default 1.0,
  ? left: (float .ge 0.0) .default 1.0,
  ? right: (float .ge 0.0) .default 1.0,
  ? top: (float .ge 0.0) .default 1.0,
}

; Minimum size is 1pt x 1pt. Conversion follows from
; https://www.w3.org/TR/css3-values/#absolute-lengths
browsingContext.PrintPageParameters = {
  ? height: (float .ge 0.0352) .default 27.94,
  ? width: (float .ge 0.0352) .default 21.59,
}
</pre>
    <dt>Result Type
    <dd>
<pre class="cddl local-cddl">browsingContext.PrintResult = {
  data: text
}
</pre>
   </dl>
   <p>The <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-end-steps" id="ref-for-dfn-remote-end-steps①⑤">remote end steps</a> with <var>session</var> and <var>command parameters</var> are:</p>
   <ol>
    <li data-md>
     <p>Let <var>context id</var> be the value of the <code>context</code> field of <var>command parameters</var>.</p>
    <li data-md>
     <p>Let <var>context</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try①⑤">trying</a> to <a data-link-type="dfn" href="#get-a-browsing-context" id="ref-for-get-a-browsing-context⑧">get a browsing context</a> with <var>context id</var>.</p>
    <li data-md>
     <p>If the implementation is unable to provide a paginated representation of <var>context</var> for any reason then return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors②⑤">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code②①">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-unsupported-operation" id="ref-for-dfn-unsupported-operation③">unsupported operation</a>.</p>
    <li data-md>
     <p>Let <var>margin</var> be the value of the <code>margin</code> field of <var>command
 parameters</var> if present, or otherwise a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map②②">map</a> matching the <code>browsingContext.PrintMarginParameters</code> with the fields set to
 their default values.</p>
    <li data-md>
     <p>Let <var>page size</var> be the value of the <code>page</code> field of <var>command
 parameters</var> if present, or otherwise a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map②③">map</a> matching the <code>browsingContext.PrintPageParameters</code> with the fields set to
 their default values.</p>
   </ol>
   <p class="note" role="note"><span class="marker">Note:</span> The minimum page size is 1 point, which is (2.54 / 72) cm as per <a data-link-type="dfn" href="https://drafts.csswg.org/css-values-3/#absolute-lengths" id="ref-for-absolute-lengths">absolute lengths</a>.</p>
   <ol>
    <li data-md>
     <p>Let <var>page ranges</var> be the value of the <code>pageRanges</code> field of <var>command parameters</var> if present or an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list④">list</a> otherwise.</p>
    <li data-md>
     <p>Let <var>document</var> be <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#active-document" id="ref-for-active-document⑦">active document</a>.</p>
    <li data-md>
     <p>Immediately after the next invocation of the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/imagebitmap-and-animations.html#run-the-animation-frame-callbacks" id="ref-for-run-the-animation-frame-callbacks①">run the animation frame
 callbacks</a> algorithm for <var>document</var>:</p>
     <p class="issue" id="issue-b2b83ca0①"><a class="self-link" href="#issue-b2b83ca0①"></a> This ought to be integrated into the update rendering algorithm
 in some more explicit way.</p>
     <ol>
      <li data-md>
       <p>Let <var>pdf data</var> be the result taking UA-specific steps to generate a
 paginated representation of <var>document</var>, with the CSS <a data-link-type="dfn" href="https://drafts.csswg.org/mediaqueries-5/#media-type" id="ref-for-media-type">media type</a> set to <code>print</code>, encoded as a PDF, with the following paper settings:</p>
       <table>
        <tbody>
         <tr>
          <th>Property 
          <th>Value 
         <tr>
          <td>Width in cm 
          <td><var>page size</var>["<code>width</code>"] if <var>command parameters</var>["<code>orientation</code>"] is
         "<code>portrait</code>" otherwise <var>page size</var>["<code>height</code>"] 
         <tr>
          <td>Height in cm 
          <td><var>page size</var>["<code>height</code>"] if <var>command parameters</var>["<code>orientation</code>"] is
         "<code>portrait</code>" otherwise <var>page size</var>["<code>width</code>"] 
         <tr>
          <td>Top margin, in cm 
          <td><var>margin</var>["<code>top</code>"] 
         <tr>
          <td>Bottom margin, in cm 
          <td><var>margin</var>["<code>bottom</code>"] 
         <tr>
          <td>Left margin, in cm 
          <td><var>margin</var>["<code>left</code>"] 
         <tr>
          <td>Right margin, in cm 
          <td><var>margin</var>["<code>right</code>"] 
       </table>
       <p>In addition, the following formatting hints should be applied by the UA:</p>
       <dl>
        <dt>If <var>command parameters</var>["<code>scale</code>"] is not equal to <code>1</code>: 
        <dd>Zoom the size of the content by a factor <var>command parameters</var>["<code>scale</code>"] 
        <dt>If <var>command parameters</var>["<code>background</code>"] is false: 
        <dd>Suppress output of background images 
        <dt>If <var>command parameters</var>["<code>shrinkToFit</code>"] is true: 
        <dd>Resize the content to match the page width, overriding any page
         width specified in the content 
       </dl>
      <li data-md>
       <p>If <var>page ranges</var> is not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty" id="ref-for-list-empty②">empty</a>, let <var>pages</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try①⑥">trying</a> to <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-parse-a-page-range" id="ref-for-dfn-parse-a-page-range">parse a page range</a> with <var>page ranges</var> and the number of
 pages contained in <var>pdf data</var>, then remove any pages from <var>pdf data</var> whose one-based index is not contained in <var>pages</var>.</p>
      <li data-md>
       <p>Let <var>encoding result</var> be the result of calling <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc4648#section-4" id="ref-for-section-4">Base64 Encode</a> on <var>pdf data</var>.</p>
      <li data-md>
       <p>Let <var>encoded data</var> be <var>encoding result</var>’s data.</p>
      <li data-md>
       <p>Let <var>body</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map②④">map</a> matching the <code>browsingContext.PrintResult</code> production, with the <code>data</code> field set to <var>encoded data</var>.</p>
      <li data-md>
       <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success②④">success</a> with data <var>body</var>.</p>
     </ol>
   </ol>
   <h5 class="heading settled" data-level="6.3.3.9" id="command-browsingContext-reload"><span class="secno">6.3.3.9. </span><span class="content">The browsingContext.reload Command</span><a class="self-link" href="#command-browsingContext-reload"></a></h5>
   <p>The <dfn data-dfn-for="commands" data-dfn-type="dfn" data-export id="commands-browsingcontextreload">browsingContext.reload<a class="self-link" href="#commands-browsingcontextreload"></a></dfn> command reloads a
browsing context.</p>
   <dl>
    <dt>Command Type
    <dd>
<pre class="cddl remote-cddl">browsingContext.Reload = (
  method: "browsingContext.reload",
  params: browsingContext.ReloadParameters
)

browsingContext.ReloadParameters = {
  context: browsingContext.BrowsingContext,
  ? ignoreCache: bool,
  ? wait: browsingContext.ReadinessState,
}
</pre>
    <dt>Return Type
    <dd>
<pre class="cddl">browsingContext.NavigateResult
</pre>
   </dl>
   <div class="algorithm" data-algorithm="remote end steps for browsingContext.reload">
     The <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-end-steps" id="ref-for-dfn-remote-end-steps①⑥">remote end steps</a> with <var>command parameters</var> are: 
    <ol>
     <li data-md>
      <p>Let <var>context id</var> be the value of the <code>context</code> field of <var>command parameters</var>.</p>
     <li data-md>
      <p>Let <var>context</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try①⑦">trying</a> to <a data-link-type="dfn" href="#get-a-browsing-context" id="ref-for-get-a-browsing-context⑨">get a browsing context</a> with <var>context id</var>.</p>
     <li data-md>
      <p class="assertion">Assert: <var>context</var> is not null.</p>
     <li data-md>
      <p>Let <var>ignore cache</var> be the the value of the <code>ignoreCache</code> field of <var>command
 parameters</var> if present, or false otherwise.</p>
     <li data-md>
      <p>Let <var>wait condition</var> be the value of the <code>wait</code> field of <var>command
 parameters</var> if present, or "<code>none</code>" otherwise.</p>
     <li data-md>
      <p>Let <var>document</var> be <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#active-document" id="ref-for-active-document⑧">active document</a>.</p>
     <li data-md>
      <p>Let <var>url</var> be <var>document</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-url" id="ref-for-concept-document-url①">URL</a>.</p>
     <li data-md>
      <p>Let <var>request</var> be a new <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request" id="ref-for-concept-request②">request</a> whose URL is <var>url</var>.</p>
     <li data-md>
      <p>Return the result of <a data-link-type="dfn" href="#await-a-navigation" id="ref-for-await-a-navigation①">await a navigation</a> with <var>context</var>, <var>request</var>, <var>wait
 condition</var>, history handling "<code>reload</code>", and ignore
 cache <var>ignore cache</var>.</p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.3.3.10" id="command-browsingContext-setViewport"><span class="secno">6.3.3.10. </span><span class="content">The browsingContext.setViewport Command</span><a class="self-link" href="#command-browsingContext-setViewport"></a></h5>
   <p>The <dfn data-dfn-for="commands" data-dfn-type="dfn" data-export id="commands-browsingcontextsetviewport">browsingContext.setViewport<a class="self-link" href="#commands-browsingcontextsetviewport"></a></dfn> command  specific viewport characteristics (e.g. viewport width and viewport height) on the given top-level browsing context.</p>
   <dl>
    <dt>Command Type
    <dd>
<pre class="cddl remote-cddl">browsingContext.SetViewport = (
  method: "browsingContext.setViewport",
  params: browsingContext.SetViewportParameters
)

browsingContext.SetViewportParameters = {
  context: browsingContext.BrowsingContext,
  viewport: browsingContext.Viewport / null,
}

browsingContext.Viewport = {
  width: js-uint,
  height: js-uint,
}
</pre>
    <dt>Result Type
    <dd>
<pre class="cddl">EmptyResult
</pre>
   </dl>
   <div class="algorithm" data-algorithm="remote end steps for browsingContext.setViewport">
    <p>The <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-end-steps" id="ref-for-dfn-remote-end-steps①⑦">remote end steps</a> with <var>command parameters</var> are:</p>
    <ol>
     <li data-md>
      <p>Let <var>context id</var> be the value of the <var>command parameters</var>["<code>context</code>"] field.</p>
     <li data-md>
      <p>Let <var>context</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try①⑧">trying</a> to <a data-link-type="dfn" href="#get-a-browsing-context" id="ref-for-get-a-browsing-context①⓪">get a browsing context</a> with <var>context id</var>.</p>
     <li data-md>
      <p>If <var>context</var> is not a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context" id="ref-for-top-level-browsing-context①③">top-level browsing context</a>, return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors②⑥">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code②②">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument①③">invalid argument</a>.</p>
     <li data-md>
      <p>Let <var>viewport parameter</var> be the <var>command parameters</var>["<code>viewport</code>"] field.</p>
     <li data-md>
      <p>If <var>viewport parameter</var> is not null:</p>
      <ol>
       <li data-md>
        <p>Let <var>width</var> be the <var>viewport parameter</var>["<code>width</code>"]</p>
       <li data-md>
        <p>Let <var>height</var> be the <var>viewport parameter</var>["<code>height</code>"]</p>
       <li data-md>
        <p>If the <var>width</var> or <var>height</var> is outside of the implementation-specific or runtime constraints, return an <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors②⑦">error</a> with the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code②③">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-unsupported-operation" id="ref-for-dfn-unsupported-operation④">unsupported operation</a>.</p>
       <li data-md>
        <p>Set the layout <a href="https://www.w3.org/TR/CSS21/visuren.html#viewport"><cite>CSS 2.1</cite> § 9.1.1 The viewport</a> of the <var>context</var> to be <var>width</var> CSS pixels wide and <var>height</var> CSS pixels high.</p>
      </ol>
     <li data-md>
      <p>Else:</p>
      <ol>
       <li data-md>
        <p>Set the layout <a href="https://www.w3.org/TR/CSS21/visuren.html#viewport"><cite>CSS 2.1</cite> § 9.1.1 The viewport</a> of <var>context</var> to the implementation-defined default layout viewport for <var>context</var>.</p>
      </ol>
     <li data-md>
      <p>Run the <a href="https://drafts.csswg.org/cssom-view-1/#resizing-viewports"><cite>CSSOM View</cite> § 13.1 Resizing viewports</a> steps.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success②⑤">success</a> with data null.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="6.3.4" id="module-contexts-events"><span class="secno">6.3.4. </span><span class="content">Events</span><a class="self-link" href="#module-contexts-events"></a></h4>
   <h5 class="heading settled" data-level="6.3.4.1" id="event-browsingContext-contextCreated"><span class="secno">6.3.4.1. </span><span class="content">The browsingContext.contextCreated Event</span><a class="self-link" href="#event-browsingContext-contextCreated"></a></h5>
   <dl>
    <dt>Event Type
    <dd>
<pre class="cddl local-cddl">browsingContext.ContextCreated = (
 method: "browsingContext.contextCreated",
 params: browsingContext.Info
)
</pre>
   </dl>
   <div class="algorithm" data-algorithm="Recursively emit context created events">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="recursively-emit-context-created-events">Recursively emit context created events</dfn> given <var>session</var> and <var>context</var>:</p>
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="#emit-a-context-created-event" id="ref-for-emit-a-context-created-event">Emit a context created event</a> with <var>session</var> and <var>context</var>.</p>
     <li data-md>
      <p>For each child browsing context, <var>child</var>, of <var>context</var>:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="#recursively-emit-context-created-events" id="ref-for-recursively-emit-context-created-events">Recursively emit context created events</a> given <var>session</var> and <var>child</var>.</p>
      </ol>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="Emit a context created event">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="emit-a-context-created-event">Emit a context created event</dfn> given <var>session</var> and <var>context</var>:</p>
    <ol>
     <li data-md>
      <p>Let <var>params</var> be the result of <a data-link-type="dfn" href="#get-the-browsing-context-info" id="ref-for-get-the-browsing-context-info②">get the browsing context info</a> given <var>context</var>, 0, and true.</p>
     <li data-md>
      <p>Let <var>body</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map②⑤">map</a> matching the <code>browsingContext.ContextCreated</code> production, with the <code>params</code> field set to <var>params</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="#emit-an-event" id="ref-for-emit-an-event">Emit an event</a> with <var>session</var> and <var>body</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="remote end event trigger for browsingContext.contextCreated">
    <p>The <a data-link-type="dfn" href="#remote-end-event-trigger" id="ref-for-remote-end-event-trigger">remote end event trigger</a> is:</p>
    <p>When the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#creating-a-new-browsing-context" id="ref-for-creating-a-new-browsing-context">create a new browsing context</a> algorithm is invoked, after the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#active-document" id="ref-for-active-document⑨">active document</a> of the browsing context is set, run the following steps:</p>
    <ol>
     <li data-md>
      <p>Let <var>context</var> be the newly created browsing context.</p>
     <li data-md>
      <p>Let <var>related browsing contexts</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set①⑦">set</a> containing <var>context</var>.</p>
     <li data-md>
      <p>For each <var>session</var> in the <a data-link-type="dfn" href="#set-of-sessions-for-which-an-event-is-enabled" id="ref-for-set-of-sessions-for-which-an-event-is-enabled">set of sessions for which an event is enabled</a> given "<code>browsingContext.contextCreated</code>" and <var>related browsing
 contexts</var>:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="#emit-a-context-created-event" id="ref-for-emit-a-context-created-event①">Emit a context created event</a> given <var>session</var> and <var>context</var>.</p>
      </ol>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="remote end subscribe steps for browsingContext.contextCreated">
    <p>The <a data-link-type="dfn" href="#remote-end-subscribe-steps" id="ref-for-remote-end-subscribe-steps②">remote end subscribe steps</a>, with <a data-link-type="dfn" href="#subscribe-priority" id="ref-for-subscribe-priority①">subscribe priority</a> 1, given <var>session</var>, <var>contexts</var> and <var>include global</var> are:</p>
    <ol>
     <li data-md>
      <p>For each <var>context</var> in <var>contexts</var>:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="#recursively-emit-context-created-events" id="ref-for-recursively-emit-context-created-events①">Recursively emit context created events</a> given <var>session</var> and <var>context</var>.</p>
      </ol>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.3.4.2" id="event-browsingContext-contextDestroyed"><span class="secno">6.3.4.2. </span><span class="content">The browsingContext.contextDestroyed Event</span><a class="self-link" href="#event-browsingContext-contextDestroyed"></a></h5>
   <dl>
    <dt>Event Type
    <dd>
<pre class="cddl local-cddl">browsingContext.ContextDestroyed = (
 method: "browsingContext.contextDestroyed",
 params: browsingContext.Info
)
</pre>
   </dl>
    The <a data-link-type="dfn" href="#remote-end-event-trigger" id="ref-for-remote-end-event-trigger①">remote end event trigger</a> is: 
   <div class="algorithm" data-algorithm="remote end event trigger for browsingContext.contexDestroyed">
    <p>Define the following <a data-link-type="dfn" href="#browsing-context-tree-discarded" id="ref-for-browsing-context-tree-discarded">browsing context tree discarded</a> steps:</p>
    <ol>
     <li data-md>
      <p>Let <var>context</var> be the browsing context being discarded.</p>
     <li data-md>
      <p>Let <var>params</var> be the result of <a data-link-type="dfn" href="#get-the-browsing-context-info" id="ref-for-get-the-browsing-context-info③">get the browsing context info</a>, given <var>context</var>, 0, and true.</p>
     <li data-md>
      <p>Let <var>body</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map②⑥">map</a> matching the <code>browsingContext.ContextDestroyed</code> production, with the <code>params</code> field set to <var>params</var>.</p>
     <li data-md>
      <p>Let <var>related browsing contexts</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set①⑧">set</a> containing the result of <a data-link-type="dfn" href="#get-the-parent-browsing-context" id="ref-for-get-the-parent-browsing-context①">get the parent browsing context</a> with <var>context</var>, if that is not
 null, or an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set①⑨">set</a> otherwise.</p>
     <li data-md>
      <p>For each <var>session</var> in the <a data-link-type="dfn" href="#set-of-sessions-for-which-an-event-is-enabled" id="ref-for-set-of-sessions-for-which-an-event-is-enabled①">set of sessions for which an event is enabled</a> given "<code>browsingContext.contextDestroyed</code>" and <var>related browsing
 contexts</var>:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="#emit-an-event" id="ref-for-emit-an-event①">Emit an event</a> with <var>session</var> and <var>body</var>.</p>
      </ol>
    </ol>
    <p class="issue" id="issue-7a4ace46"><a class="self-link" href="#issue-7a4ace46"></a> the way this hooks into HTML feels very fragile. See https://github.com/whatwg/html/issues/6194</p>
    <p class="issue" id="issue-4e122e13"><a class="self-link" href="#issue-4e122e13"></a> It’s unclear if we ought to only fire this event for browsing
contexts that have active documents; navigation can also cause contexts to
become inaccessible but not yet get discarded because bfcache.</p>
   </div>
   <h5 class="heading settled" data-level="6.3.4.3" id="event-browsingContext-navigationStarted"><span class="secno">6.3.4.3. </span><span class="content">The browsingContext.navigationStarted Event</span><a class="self-link" href="#event-browsingContext-navigationStarted"></a></h5>
   <dl>
    <dt>Event Type
    <dd>
<pre class="cddl local-cddl">browsingContext.NavigationStarted = (
 method: "browsingContext.navigationStarted",
 params: browsingContext.NavigationInfo
)
</pre>
   </dl>
   <div class="algorithm" data-algorithm="WebDriver BiDi navigation started">
     The <a data-link-type="dfn" href="#remote-end-event-trigger" id="ref-for-remote-end-event-trigger②">remote end event trigger</a> is the <dfn data-dfn-type="dfn" data-export data-lt="WebDriver BiDi navigation started" id="webdriver-bidi-navigation-started">WebDriver BiDi navigation
started<a class="self-link" href="#webdriver-bidi-navigation-started"></a></dfn> steps given <var>context</var> and <var>navigation status</var>: 
    <ol>
     <li data-md>
      <p>Let <var>params</var> be the result of <a data-link-type="dfn" href="#get-the-navigation-info" id="ref-for-get-the-navigation-info">get the navigation info</a> given <var>context</var> and <var>navigation status</var>.</p>
     <li data-md>
      <p>Let <var>body</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map②⑦">map</a> matching the <code>browsingContext.NavigationStarted</code> production, with the <code>params</code> field set to <var>params</var>.</p>
     <li data-md>
      <p>Let <var>navigation id</var> be <var>navigation status</var>’s id.</p>
     <li data-md>
      <p>Let <var>related browsing contexts</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set②⓪">set</a> containing <var>context</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="#resume" id="ref-for-resume">Resume</a> with "<code>navigation started</code>", <var>navigation id</var>, and <var>navigation status</var>.</p>
     <li data-md>
      <p>For each <var>session</var> in the <a data-link-type="dfn" href="#set-of-sessions-for-which-an-event-is-enabled" id="ref-for-set-of-sessions-for-which-an-event-is-enabled②">set of sessions for which an event is enabled</a> given "<code>browsingContext.navigationStarted</code>" and <var>related browsing contexts</var>:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="#emit-an-event" id="ref-for-emit-an-event②">Emit an event</a> with <var>session</var> and <var>body</var>.</p>
      </ol>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.3.4.4" id="event-browsingContext-fragmentNavigated"><span class="secno">6.3.4.4. </span><span class="content">The browsingContext.fragmentNavigated Event</span><a class="self-link" href="#event-browsingContext-fragmentNavigated"></a></h5>
   <dl>
    <dt>Event Type
    <dd>
<pre class="cddl local-cddl">browsingContext.FragmentNavigated = (
 method: "browsingContext.fragmentNavigated",
 params: browsingContext.NavigationInfo
)
</pre>
   </dl>
   <div class="algorithm" data-algorithm="WebDriver BiDi fragment navigated">
     The <a data-link-type="dfn" href="#remote-end-event-trigger" id="ref-for-remote-end-event-trigger③">remote end event trigger</a> is the <dfn data-dfn-type="dfn" data-export data-lt="WebDriver BiDi fragment navigated" id="webdriver-bidi-fragment-navigated">WebDriver BiDi fragment
navigated<a class="self-link" href="#webdriver-bidi-fragment-navigated"></a></dfn> steps given <var>context</var> and <var>navigation status</var>: 
    <ol>
     <li data-md>
      <p>Let <var>params</var> be the result of <a data-link-type="dfn" href="#get-the-navigation-info" id="ref-for-get-the-navigation-info①">get the navigation info</a> given <var>context</var> and <var>navigation status</var>.</p>
     <li data-md>
      <p>Let <var>body</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map②⑧">map</a> matching the <code>browsingContext.FragmentNavigated</code> production, with the <code>params</code> field set to <var>params</var>.</p>
     <li data-md>
      <p>Let <var>navigation id</var> be <var>navigation status</var>’s id.</p>
     <li data-md>
      <p>Let <var>related browsing contexts</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set②①">set</a> containing <var>context</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="#resume" id="ref-for-resume①">Resume</a> with "<code>fragment navigated</code>", <var>navigation id</var>, and <var>navigation status</var>.</p>
     <li data-md>
      <p>For each <var>session</var> in the <a data-link-type="dfn" href="#set-of-sessions-for-which-an-event-is-enabled" id="ref-for-set-of-sessions-for-which-an-event-is-enabled③">set of sessions for which an event is enabled</a> given "<code>browsingContext.fragmentNavigated</code>" and <var>related browsing contexts</var>:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="#emit-an-event" id="ref-for-emit-an-event③">Emit an event</a> with <var>session</var> and <var>body</var>.</p>
      </ol>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.3.4.5" id="event-browsingContext-domContentLoaded"><span class="secno">6.3.4.5. </span><span class="content">The browsingContext.domContentLoaded Event</span><a class="self-link" href="#event-browsingContext-domContentLoaded"></a></h5>
   <dl>
    <dt>Event Type
    <dd>
<pre class="cddl local-cddl">browsingContext.DomContentLoaded = (
 method: "browsingContext.domContentLoaded",
 params: browsingContext.NavigationInfo
)
</pre>
   </dl>
   <div class="algorithm" data-algorithm="WebDriver BiDi DOM content loaded">
     The <a data-link-type="dfn" href="#remote-end-event-trigger" id="ref-for-remote-end-event-trigger④">remote end event trigger</a> is the <dfn data-dfn-type="dfn" data-export data-lt="WebDriver BiDi DOM content loaded" id="webdriver-bidi-dom-content-loaded">WebDriver BiDi DOM content
loaded<a class="self-link" href="#webdriver-bidi-dom-content-loaded"></a></dfn> steps given <var>context</var> and <var>navigation status</var>: 
    <ol>
     <li data-md>
      <p>Let <var>params</var> be the result of <a data-link-type="dfn" href="#get-the-navigation-info" id="ref-for-get-the-navigation-info②">get the navigation info</a> given <var>context</var> and <var>navigation status</var>.</p>
     <li data-md>
      <p>Let <var>body</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map②⑨">map</a> matching the <code>browsingContext.DomContentLoaded</code> production, with the <code>params</code> field set to <var>params</var>.</p>
     <li data-md>
      <p>Let <var>related browsing contexts</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set②②">set</a> containing <var>context</var>.</p>
     <li data-md>
      <p>Let <var>navigation id</var> be <var>navigation status</var>’s id.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="#resume" id="ref-for-resume②">Resume</a> with "<code>domContentLoaded</code>", <var>navigation id</var>, and <var>navigation status</var>.</p>
     <li data-md>
      <p>For each <var>session</var> in the <a data-link-type="dfn" href="#set-of-sessions-for-which-an-event-is-enabled" id="ref-for-set-of-sessions-for-which-an-event-is-enabled④">set of sessions for which an event is enabled</a> given "<code>browsingContext.domContentLoaded</code>" and <var>related browsing contexts</var>:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="#emit-an-event" id="ref-for-emit-an-event④">Emit an event</a> with <var>session</var> and <var>body</var>.</p>
      </ol>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.3.4.6" id="event-browsingContext-load"><span class="secno">6.3.4.6. </span><span class="content">The browsingContext.load Event</span><a class="self-link" href="#event-browsingContext-load"></a></h5>
   <dl>
    <dt>Event Type
    <dd>
<pre class="cddl local-cddl">browsingContext.Load = (
 method: "browsingContext.load",
 params: browsingContext.NavigationInfo
)
</pre>
   </dl>
   <div class="algorithm" data-algorithm="WebDriver BiDi load complete">
     The <a data-link-type="dfn" href="#remote-end-event-trigger" id="ref-for-remote-end-event-trigger⑤">remote end event trigger</a> is the <dfn data-dfn-type="dfn" data-export data-lt="WebDriver BiDi load complete" id="webdriver-bidi-load-complete">WebDriver BiDi load
complete<a class="self-link" href="#webdriver-bidi-load-complete"></a></dfn> steps given <var>context</var> and <var>navigation status</var>: 
    <ol>
     <li data-md>
      <p>Let <var>params</var> be the result of <a data-link-type="dfn" href="#get-the-navigation-info" id="ref-for-get-the-navigation-info③">get the navigation info</a> given <var>context</var> and <var>navigation status</var>.</p>
     <li data-md>
      <p>Let <var>body</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map③⓪">map</a> matching the <code>browsingContext.Load</code> production, with the <code>params</code> field set to <var>params</var>.</p>
     <li data-md>
      <p>Let <var>related browsing contexts</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set②③">set</a> containing <var>context</var>.</p>
     <li data-md>
      <p>Let <var>navigation id</var> be <var>navigation status</var>’s id.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="#resume" id="ref-for-resume③">Resume</a> with "<code>load</code>", <var>navigation id</var> and <var>navigation status</var>.</p>
     <li data-md>
      <p>For each <var>session</var> in the <a data-link-type="dfn" href="#set-of-sessions-for-which-an-event-is-enabled" id="ref-for-set-of-sessions-for-which-an-event-is-enabled⑤">set of sessions for which an event is enabled</a> given "<code>browsingContext.load</code>" and <var>related browsing contexts</var>:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="#emit-an-event" id="ref-for-emit-an-event⑤">Emit an event</a> with <var>session</var> and <var>body</var>.</p>
      </ol>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.3.4.7" id="event-browsingContext-downoadWillBegin"><span class="secno">6.3.4.7. </span><span class="content">The browsingContext.downloadWillBegin Event</span><a class="self-link" href="#event-browsingContext-downoadWillBegin"></a></h5>
   <dl>
    <dt>Event Type
    <dd>
<pre class="cddl local-cddl">browsingContext.DownloadWillBegin = (
 method: "browsingContext.downloadWillBegin",
 params: browsingContext.NavigationInfo
)
</pre>
   </dl>
   <div class="algorithm" data-algorithm="WebDriver BiDi download started">
     The <a data-link-type="dfn" href="#remote-end-event-trigger" id="ref-for-remote-end-event-trigger⑥">remote end event trigger</a> is the <dfn data-dfn-type="dfn" data-export data-lt="WebDriver BiDi download started" id="webdriver-bidi-download-started">WebDriver BiDi download
started<a class="self-link" href="#webdriver-bidi-download-started"></a></dfn> steps given <var>context</var> and <var>navigation status</var>: 
    <ol>
     <li data-md>
      <p>Let <var>params</var> be the result of <a data-link-type="dfn" href="#get-the-navigation-info" id="ref-for-get-the-navigation-info④">get the navigation info</a> given <var>context</var> and <var>navigation status</var>.</p>
     <li data-md>
      <p>Let <var>body</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map③①">map</a> matching the <code>browsingContext.DownloadWillBegin</code> production, with the <code>params</code> field set to <var>params</var>.</p>
     <li data-md>
      <p>Let <var>navigation id</var> be <var>navigation status</var>’s id.</p>
     <li data-md>
      <p>Let <var>related browsing contexts</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set②④">set</a> containing <var>context</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="#resume" id="ref-for-resume④">Resume</a> with "<code>download started</code>", <var>navigation id</var>, and <var>navigation status</var>.</p>
     <li data-md>
      <p>For each <var>session</var> in the <a data-link-type="dfn" href="#set-of-sessions-for-which-an-event-is-enabled" id="ref-for-set-of-sessions-for-which-an-event-is-enabled⑥">set of sessions for which an event is enabled</a> given "<code>browsingContext.downloadWillBegin</code>" and <var>related browsing contexts</var>:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="#emit-an-event" id="ref-for-emit-an-event⑥">Emit an event</a> with <var>session</var> and <var>body</var>.</p>
      </ol>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.3.4.8" id="event-browsingContext-navigationAborted"><span class="secno">6.3.4.8. </span><span class="content">The browsingContext.navigationAborted Event</span><a class="self-link" href="#event-browsingContext-navigationAborted"></a></h5>
   <dl>
    <dt>Event Type
    <dd>
<pre class="cddl local-cddl">browsingContext.NavigationAborted = (
 method: "browsingContext.navigationAborted",
 params: browsingContext.NavigationInfo
)
</pre>
   </dl>
   <div class="algorithm" data-algorithm="WebDriver BiDi navigation aborted">
     The <a data-link-type="dfn" href="#remote-end-event-trigger" id="ref-for-remote-end-event-trigger⑦">remote end event trigger</a> is the <dfn data-dfn-type="dfn" data-export data-lt="WebDriver BiDi navigation aborted" id="webdriver-bidi-navigation-aborted">WebDriver BiDi navigation
aborted<a class="self-link" href="#webdriver-bidi-navigation-aborted"></a></dfn> steps given <var>context</var> and <var>navigation status</var>: 
    <ol>
     <li data-md>
      <p>Let <var>params</var> be the result of <a data-link-type="dfn" href="#get-the-navigation-info" id="ref-for-get-the-navigation-info⑤">get the navigation info</a> given <var>context</var> and <var>navigation status</var>.</p>
     <li data-md>
      <p>Let <var>body</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map③②">map</a> matching the <code>browsingContext.NavigationAborted</code> production, with the <code>params</code> field set to <var>params</var>.</p>
     <li data-md>
      <p>Let <var>navigation id</var> be <var>navigation status</var>’s id.</p>
     <li data-md>
      <p>Let <var>related browsing contexts</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set②⑤">set</a> containing <var>context</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="#resume" id="ref-for-resume⑤">Resume</a> with "<code>navigation aborted</code>", <var>navigation id</var>, and <var>navigation status</var>.</p>
     <li data-md>
      <p>For each <var>session</var> in the <a data-link-type="dfn" href="#set-of-sessions-for-which-an-event-is-enabled" id="ref-for-set-of-sessions-for-which-an-event-is-enabled⑦">set of sessions for which an event is enabled</a> given "<code>browsingContext.navigationAborted</code>" and <var>related browsing contexts</var>:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="#emit-an-event" id="ref-for-emit-an-event⑦">Emit an event</a> with <var>session</var> and <var>body</var>.</p>
      </ol>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.3.4.9" id="event-browsingContext-navigationFailed"><span class="secno">6.3.4.9. </span><span class="content">The browsingContext.navigationFailed Event</span><a class="self-link" href="#event-browsingContext-navigationFailed"></a></h5>
   <dl>
    <dt>Event Type
    <dd>
<pre class="cddl local-cddl">browsingContext.NavigationFailed = (
 method: "browsingContext.navigationFailed",
 params: browsingContext.NavigationInfo
)
</pre>
   </dl>
   <div class="algorithm" data-algorithm="WebDriver BiDi navigation failed">
     The <a data-link-type="dfn" href="#remote-end-event-trigger" id="ref-for-remote-end-event-trigger⑧">remote end event trigger</a> is the <dfn data-dfn-type="dfn" data-export data-lt="WebDriver BiDi navigation failed" id="webdriver-bidi-navigation-failed">WebDriver BiDi navigation
failed<a class="self-link" href="#webdriver-bidi-navigation-failed"></a></dfn> steps given <var>context</var> and <var>navigation status</var>: 
    <ol>
     <li data-md>
      <p>Let <var>params</var> be the result of <a data-link-type="dfn" href="#get-the-navigation-info" id="ref-for-get-the-navigation-info⑥">get the navigation info</a> given <var>context</var> and <var>navigation status</var>.</p>
     <li data-md>
      <p>Let <var>body</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map③③">map</a> matching the <code>browsingContext.NavigationFailed</code> production, with the <code>params</code> field set to <var>params</var>.</p>
     <li data-md>
      <p>Let <var>navigation id</var> be <var>navigation status</var>’s id.</p>
     <li data-md>
      <p>Let <var>related browsing contexts</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set②⑥">set</a> containing <var>context</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="#resume" id="ref-for-resume⑥">Resume</a> with "<code>navigation failed</code>", <var>navigation id</var>, and <var>navigation status</var>.</p>
     <li data-md>
      <p>For each <var>session</var> in the <a data-link-type="dfn" href="#set-of-sessions-for-which-an-event-is-enabled" id="ref-for-set-of-sessions-for-which-an-event-is-enabled⑧">set of sessions for which an event is enabled</a> given "<code>browsingContext.navigationFailed</code>" and <var>related browsing contexts</var>:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="#emit-an-event" id="ref-for-emit-an-event⑧">Emit an event</a> with <var>session</var> and <var>body</var>.</p>
      </ol>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.3.4.10" id="event-browsingContext-userPromptClosed"><span class="secno">6.3.4.10. </span><span class="content">The browsingContext.userPromptClosed Event</span><a class="self-link" href="#event-browsingContext-userPromptClosed"></a></h5>
   <dl>
    <dt>Event Type
    <dd>
<pre class="cddl local-cddl">browsingContext.UserPromptClosed = (
  method: "browsingContext.userPromptClosed",
  params: browsingContext.UserPromptClosedParameters
)

browsingContext.UserPromptClosedParameters = {
  context: browsingContext.BrowsingContext,
  accepted: bool,
  ? userText: text
}
</pre>
   </dl>
   <div class="algorithm" data-algorithm="WebDriver BiDi user prompt closed">
     The <a data-link-type="dfn" href="#remote-end-event-trigger" id="ref-for-remote-end-event-trigger⑨">remote end event trigger</a> is the <dfn data-dfn-type="dfn" data-export data-lt="WebDriver BiDi user prompt closed" id="webdriver-bidi-user-prompt-closed">WebDriver BiDi user prompt
closed<a class="self-link" href="#webdriver-bidi-user-prompt-closed"></a></dfn> steps given <var>window</var>, <var>accepted</var> and optional <var>user text</var> (default: null). 
    <ol>
     <li data-md>
      <p>Let <var>context</var> be <var>window</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context" id="ref-for-browsing-context⑤">browsing context</a>.</p>
     <li data-md>
      <p>Let <var>context id</var> be the <a data-link-type="dfn" href="#browsing-context-id" id="ref-for-browsing-context-id⑦">browsing context id</a> for <var>context</var>.</p>
     <li data-md>
      <p>Let <var>params</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map③④">map</a> matching the <code>browsingContext.UserPromptClosedParameters</code> production with the <code>context</code> field set to <var>context id</var>, the <code>accepted</code> field set to <var>accepted</var>, and the <code>userText</code> field set to <var>user
 text</var> if <var>user text</var> is not null or omitted otherwise.</p>
     <li data-md>
      <p>Let <var>body</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map③⑤">map</a> matching the <code>BrowsingContextUserPromptClosedEvent</code> production, with the <code>params</code> field set to <var>params</var>.</p>
     <li data-md>
      <p>Let <var>related browsing contexts</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set②⑦">set</a> containing <var>context</var>.</p>
     <li data-md>
      <p>For each <var>session</var> in the <a data-link-type="dfn" href="#set-of-sessions-for-which-an-event-is-enabled" id="ref-for-set-of-sessions-for-which-an-event-is-enabled⑨">set of sessions for which an event is enabled</a> given "<code>browsingContext.userPromptClosed</code>" and <var>related browsing contexts</var>:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="#emit-an-event" id="ref-for-emit-an-event⑨">Emit an event</a> with <var>session</var> and <var>body</var>.</p>
      </ol>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.3.4.11" id="event-browsingContext-userPromptOpened"><span class="secno">6.3.4.11. </span><span class="content">The browsingContext.userPromptOpened Event</span><a class="self-link" href="#event-browsingContext-userPromptOpened"></a></h5>
   <dl>
    <dt>Event Type
    <dd>
<pre class="cddl local-cddl">browsingContext.UserPromptOpened = (
  method: "browsingContext.userPromptOpened",
  params: browsingContext.UserPromptOpenedParameters
)

browsingContext.UserPromptOpenedParameters = {
  context: browsingContext.BrowsingContext,
  type: "alert" / "confirm" / "prompt" / "beforeunload",
  message: text,
  ? defaultValue: text
}
</pre>
   </dl>
   <div class="algorithm" data-algorithm="WebDriver BiDi user prompt opened">
     The <a data-link-type="dfn" href="#remote-end-event-trigger" id="ref-for-remote-end-event-trigger①⓪">remote end event trigger</a> is the <dfn data-dfn-type="dfn" data-export data-lt="WebDriver BiDi user prompt opened" id="webdriver-bidi-user-prompt-opened">WebDriver BiDi user prompt
opened<a class="self-link" href="#webdriver-bidi-user-prompt-opened"></a></dfn> steps given <var>window</var>, <var>type</var>, <var>message</var>, and optional <var>default value</var> (default: null). 
    <ol>
     <li data-md>
      <p>Let <var>context</var> be <var>window</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context" id="ref-for-browsing-context⑥">browsing context</a>.</p>
     <li data-md>
      <p>Let <var>context id</var> be the <a data-link-type="dfn" href="#browsing-context-id" id="ref-for-browsing-context-id⑧">browsing context id</a> for <var>context</var>.</p>
     <li data-md>
      <p>Let <var>params</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map③⑥">map</a> matching the <code>browsingContext.UserPromptOpenedParameters</code> production with the <code>context</code> field set to <var>context id</var>, the <code>type</code> field
 set to <var>type</var>, the <code>message</code> field set to <var>message</var>, and the <code>defaultValue</code> field set to <var>default value</var> if <var>default value</var> is
 not null or omitted otherwise.</p>
     <li data-md>
      <p>Let <var>body</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map③⑦">map</a> matching the <code>browsingContext.UserPromptOpened</code> production, with the <code>params</code> field set to <var>params</var>.</p>
     <li data-md>
      <p>Let <var>related browsing contexts</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set②⑧">set</a> containing <var>context</var>.</p>
     <li data-md>
      <p>For each <var>session</var> in the <a data-link-type="dfn" href="#set-of-sessions-for-which-an-event-is-enabled" id="ref-for-set-of-sessions-for-which-an-event-is-enabled①⓪">set of sessions for which an event is enabled</a> given "<code>browsingContext.userPromptOpened</code>" and <var>related browsing contexts</var>:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="#emit-an-event" id="ref-for-emit-an-event①⓪">Emit an event</a> with <var>session</var> and <var>body</var>.</p>
      </ol>
    </ol>
   </div>
   <h3 class="heading settled" data-level="6.4" id="module-network"><span class="secno">6.4. </span><span class="content">The network Module</span><a class="self-link" href="#module-network"></a></h3>
   <p>The <dfn data-dfn-for="modules" data-dfn-type="dfn" data-export id="modules-network">network<a class="self-link" href="#modules-network"></a></dfn> module contains commands and events
relating to network requests.</p>
   <h4 class="heading settled" data-level="6.4.1" id="module-network-definition"><span class="secno">6.4.1. </span><span class="content">Definition</span><a class="self-link" href="#module-network-definition"></a></h4>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition①③">remote end definition</a></p>
<pre class="cddl remote-cddl">NetworkCommand = (
  network.AddIntercept //
  network.ContinueRequest //
  network.ContinueResponse //
  network.ContinueWithAuth //
  network.FailRequest //
  network.ProvideResponse //
  network.RemoveIntercept
)

</pre>
   <p><a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition①⑧">local end definition</a></p>
<pre class="cddl local-cddl">NetworkResult = (
   network.AddInterceptResult
)

NetworkEvent = (
    network.AuthRequired //
    network.BeforeRequestSent //
    network.FetchError //
    network.ResponseCompleted //
    network.ResponseStarted
)

</pre>
   <p>A <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-ends" id="ref-for-dfn-remote-ends①⑨">remote end</a> has a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="before-request-sent-map">before request sent map</dfn> which is initially an
empty map.  It’s used to track the network events for which a <code>network.beforeRequestSent</code> event has already been sent.</p>
   <h4 class="heading settled" data-level="6.4.2" id="network-intercepts"><span class="secno">6.4.2. </span><span class="content">Network Intercepts</span><a class="self-link" href="#network-intercepts"></a></h4>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="network-intercept">network intercept</dfn> is a mechanism to allow remote ends to intercept
and modify network requests and responses.</p>
   <p>A <a data-link-type="dfn" href="#bidi-session" id="ref-for-bidi-session①③">BiDi session</a> has an <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="intercept-map">intercept map</dfn> which is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map③⑧">map</a> between
intercept id and a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct" id="ref-for-struct">struct</a> with fields <code>url patterns</code> and <code>phases</code> that define the properties of active network intercepts. It
is initially empty.</p>
   <p>A <a data-link-type="dfn" href="#bidi-session" id="ref-for-bidi-session①④">BiDi session</a> has a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="blocked-request-map">blocked request map</dfn>, used to track the
requests which are actively being blocked. It is an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map③⑨">map</a> between <a data-link-type="dfn" href="#request-id" id="ref-for-request-id">request id</a> and a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct" id="ref-for-struct①">struct</a> with fields <code>request</code>, <code>phase</code>, and <code>response</code>. It is initially empty.</p>
   <div class="algorithm" data-algorithm="get the network intercepts">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="get-the-network-intercepts">get the network intercepts</dfn> given <var>session</var>, <var>event</var>, and <var>request</var>:</p>
    <ol>
     <li data-md>
      <p>Let <var>session intercepts</var> be <var>session</var>’s <a data-link-type="dfn" href="#intercept-map" id="ref-for-intercept-map">intercept map</a>.</p>
     <li data-md>
      <p>Let <var>intercepts</var> be an empty list.</p>
     <li data-md>
      <p>Run the steps under the first matching condition:</p>
      <dl>
       <dt><var>event</var> is "<code>network.beforeRequestSent</code>" 
       <dd>Set <var>phase</var> to the "<code>beforeRequestSent</code>". 
       <dt><var>event</var> is "<code>network.responseStarted</code>" 
       <dd>Set <var>phase</var> to "<code>responseStarted</code>". 
       <dt><var>event</var> is "<code>network.authRequired</code>" 
       <dd>Set <var>phase</var> to "<code>authRequired</code>". 
       <dt><var>event</var> is "<code>network.responseCompleted</code>" 
       <dd>Return <var>intercepts</var>. 
      </dl>
     <li data-md>
      <p>Let <var>url</var> be the result of running the <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-serializer" id="ref-for-concept-url-serializer⑤">URL serializer</a> with <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-url" id="ref-for-concept-request-url">URL</a>.</p>
     <li data-md>
      <p>For each <var>intercept id</var> → <var>intercept</var> of <var>session intercepts</var>:</p>
      <ol>
       <li data-md>
        <p>If <var>intercept</var>’s <code>phases</code> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-contain" id="ref-for-list-contain④">contains</a> <var>phase</var>:</p>
        <ol>
         <li data-md>
          <p>Let <var>url patterns</var> be <var>intercept</var>’s <code>url patterns</code>.</p>
         <li data-md>
          <p>If <var>url patterns</var> is <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty" id="ref-for-list-empty③">empty</a>:</p>
          <ol>
           <li data-md>
            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append">Append</a> <var>intercept id</var> to <var>intercepts</var>.</p>
           <li data-md>
            <p>Continue.</p>
          </ol>
         <li data-md>
          <p>For each <var>url pattern</var> in <var>url patterns</var>:</p>
          <ol>
           <li data-md>
            <p>If <a data-link-type="dfn" href="#match-url-pattern" id="ref-for-match-url-pattern">match URL pattern</a> with <var>url pattern</var> and <var>url</var>:</p>
            <ol>
             <li data-md>
              <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append①">Append</a> <var>intercept id</var> to <var>intercepts</var>.</p>
             <li data-md>
              <p>Continue.</p>
            </ol>
          </ol>
        </ol>
      </ol>
     <li data-md>
      <p>Return <var>intercepts</var>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="6.4.3" id="module-network-types"><span class="secno">6.4.3. </span><span class="content">Types</span><a class="self-link" href="#module-network-types"></a></h4>
   <h5 class="heading settled" data-level="6.4.3.1" id="type-network-AuthChallenge"><span class="secno">6.4.3.1. </span><span class="content">The network.AuthChallenge Type</span><a class="self-link" href="#type-network-AuthChallenge"></a></h5>
<pre class="cddl local-cddl">network.AuthChallenge = {
  scheme: text,
  realm: text,
}
</pre>
   <div class="algorithm" data-algorithm="extract challenges">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="extract-challenges">extract challenges</dfn> given <var>response</var>:</p>
    <p class="issue" id="issue-f2aa8157"><a class="self-link" href="#issue-f2aa8157"></a> Should we include parameters other than realm?</p>
    <ol>
     <li data-md>
      <p>If <var>response</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-status" id="ref-for-concept-response-status">status</a> is 401, let <var>header name</var> be
 `<code>WWW-Authenticate</code>`. Otherwise if <var>response</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-status" id="ref-for-concept-response-status①">status</a> is 407, let <var>header name</var> be `<code>Proxy-Authenticate</code>`. Otherwise return null.</p>
     <li data-md>
      <p>Let <var>challenges</var> be a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list⑤">list</a>.</p>
     <li data-md>
      <p>For each (<var>name</var>, <var>value</var>) in <var>response</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-header-list" id="ref-for-concept-response-header-list">header list</a>:</p>
      <p class="issue" id="issue-fb11fbae"><a class="self-link" href="#issue-fb11fbae"></a> as in Fetch it’s unclear if this is the right way to handle multiple
 headers, parsing issues, etc.</p>
      <ol>
       <li data-md>
        <p>If <var>name</var> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-case-insensitive" id="ref-for-byte-case-insensitive">byte-case-insensitive</a> match for <var>header name</var>:</p>
        <ol>
         <li data-md>
          <p>Let <var>header challenges</var> be the result of parsing <var>value</var> into a list of
 challenges, each consisting of a scheme and a list of parameters, each of
 which is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#tuple" id="ref-for-tuple">tuple</a> (name, value), according to the rules of <a data-link-type="biblio" href="#biblio-rfc9110" title="HTTP Semantics">[RFC9110]</a>.</p>
         <li data-md>
          <p>For each <var>header challenge</var> in <var>header challenges</var>:</p>
          <ol>
           <li data-md>
            <p>Let <var>scheme</var> be <var>header challenge</var>’s scheme.</p>
           <li data-md>
            <p>Let <var>realm</var> be the empty string.</p>
           <li data-md>
            <p>For each (<var>param name</var>, <var>param value</var>) in <var>header challenge</var>’s
 parameters:</p>
            <ol>
             <li data-md>
              <p>If <var>param name</var> equals `<code>realm</code>` let <var>realm</var> be <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8-decode" id="ref-for-utf-8-decode">UTF-8 decode</a> <var>param value</var>.</p>
            </ol>
           <li data-md>
            <p>Let <var>challenge</var> be a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map④⓪">map</a> matching the <code>network.AuthChallenge</code> production, with the <code>scheme</code> field set to <var>scheme</var> and the <code>realm</code> field set to <var>realm</var>.</p>
          </ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append②">Append</a> <var>challenge</var> to <var>challenges</var>.</p>
        </ol>
      </ol>
     <li data-md>
      <p>Return <var>challenges</var>.</p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.4.3.2" id="type-network-AuthCredentials"><span class="secno">6.4.3.2. </span><span class="content">The network.AuthCredentials Type</span><a class="self-link" href="#type-network-AuthCredentials"></a></h5>
<pre class="cddl remote-cddl">network.AuthCredentials = {
  type: "password",
  username: text,
  password: text,
}
</pre>
   <p>The <code>network.AuthCredentials</code> type represents the response to a
request for authorization credentials.</p>
   <h5 class="heading settled" data-level="6.4.3.3" id="type-network-BaseParameters"><span class="secno">6.4.3.3. </span><span class="content">The network.BaseParameters Type</span><a class="self-link" href="#type-network-BaseParameters"></a></h5>
<pre class="cddl local-cddl">network.BaseParameters = (
    context: browsingContext.BrowsingContext / null,
    isBlocked: bool,
    navigation: browsingContext.Navigation / null,
    redirectCount: js-uint,
    request: network.RequestData,
    timestamp: js-uint,
    ? intercepts: [+network.Intercept]
)
</pre>
   <p>The <code>network.BaseParameters</code> type is an abstract type representing
the data that’s common to all network events.</p>
   <p class="issue" id="issue-f8347230"><a class="self-link" href="#issue-f8347230"></a> Consider including the `sharedId` of the document node that initiated the
request in addition to the context.</p>
   <div class="algorithm" data-algorithm="process a network event">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="process-a-network-event">process a network event</dfn> given <var>session</var>, <var>event</var>, and <var>request</var>: 
    <ol>
     <li data-md>
      <p>Let <var>intercepts</var> be the result of <a data-link-type="dfn" href="#get-the-network-intercepts" id="ref-for-get-the-network-intercepts">get the network intercepts</a> with <var>session</var>, <var>event</var>, and <var>request</var>.</p>
     <li data-md>
      <p>Let <var>request data</var> be the result of <a data-link-type="dfn" href="#get-the-request-data" id="ref-for-get-the-request-data">get the request data</a> with <var>request</var>.</p>
     <li data-md>
      <p>Let <var>navigation</var> be <var>request</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigation-id" id="ref-for-navigation-id②">navigation id</a>.</p>
     <li data-md>
      <p>Let <var>context id</var> be null.</p>
     <li data-md>
      <p>If <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-window" id="ref-for-concept-request-window">window</a> is an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object①">environment settings object</a>:</p>
      <ol>
       <li data-md>
        <p>Let <var>environment settings</var> be <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-window" id="ref-for-concept-request-window①">window</a></p>
       <li data-md>
        <p>If there is a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context" id="ref-for-browsing-context⑦">browsing context</a> whose <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#active-window" id="ref-for-active-window①">active window</a> is <var>environment
 settings</var>’ <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-global" id="ref-for-concept-settings-object-global">global object</a>, let <var>context id</var> be the <a data-link-type="dfn" href="#browsing-context-id" id="ref-for-browsing-context-id⑨">browsing context id</a> for that context.</p>
      </ol>
     <li data-md>
      <p>Let <var>redirect count</var> be <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-redirect-count" id="ref-for-concept-request-redirect-count">redirect count</a>.</p>
     <li data-md>
      <p>Let <var>timestamp</var> be a <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-time-values-and-time-range" id="ref-for-sec-time-values-and-time-range①">time value</a> representing the current date and time in UTC.</p>
     <li data-md>
      <p>If <var>intercepts</var> is not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty" id="ref-for-list-empty④">empty</a>, let <var>is blocked</var> be true, otherwise
 let <var>is blocked</var> be false.</p>
     <li data-md>
      <p>Let <var>params</var> be <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map④①">map</a> matching the <code>network.BaseParameters</code> production, with the <code>request</code> field set to <var>request data</var>, the <var>navigation</var> field set to <code>navigation</code>, the <code>context</code> field set to <var>context id</var>, the <code>timestamp</code> field set to <var>timestamp</var>, the <code>redirectCount</code> field set to <var>redirect count</var>, the <code>isBlocked</code> field set to <var>is blocked</var>, and <code>intercepts</code> field set to <var>intercepts</var> if <var>is blocked</var> is true, or omitted otherwise.</p>
     <li data-md>
      <p>Return <var>params</var></p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.4.3.4" id="type-network-BytesValue"><span class="secno">6.4.3.4. </span><span class="content">The network.BytesValue Type</span><a class="self-link" href="#type-network-BytesValue"></a></h5>
<pre class="cddl local-cddl remote-cddl">network.BytesValue = network.StringValue / network.Base64Value;

network.StringValue = {
  type: "string",
  value: text,
}

network.Base64Value = {
  type: "base64",
  value: text,
}
</pre>
   <p>The <code>network.BytesValue</code> type represents binary data sent over the
network. Valid UTF-8 is represented with the <code>network.StringValue</code> type, any other data is represented in Base64-encoded form as <code>network.Base64Value</code>.</p>
   <div class="algorithm" data-algorithm="deserialize protocol bytes">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="deserialize-protocol-bytes">deserialize protocol bytes</dfn> given <var>protocol bytes</var>: 
    <p class="note" role="note"><span class="marker">Note:</span> this takes bytes encoded as a <code>network.BytesValue</code> and returns
a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence">byte sequence</a>.</p>
    <ol>
     <li data-md>
      <p>If <var>protocol bytes</var> matches the <code>network.StringValue</code> production,
 let <var>bytes</var> be <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8-encode" id="ref-for-utf-8-encode">UTF-8 encode</a> <var>protocol bytes</var>["<code>value</code>"].</p>
     <li data-md>
      <p>Otherwise if <var>protocol bytes</var> matches the <code>network.Base64Value</code> production. Let <var>bytes</var> be <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#forgiving-base64-decode" id="ref-for-forgiving-base64-decode">forgiving-base64 decode</a> <var>protocol
 bytes</var>["<code>value</code>"].</p>
     <li data-md>
      <p>Return <var>bytes</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="serialize protocol bytes">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="serialize-protocol-bytes">serialize protocol bytes</dfn> given <var>bytes</var>: 
    <p class="note" role="note"><span class="marker">Note:</span> this takes a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence①">byte sequence</a> and returns a <code>network.BytesValue</code>.</p>
    <ol>
     <li data-md>
      <p>Let <var>text</var> be <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8-decode-without-bom-or-fail" id="ref-for-utf-8-decode-without-bom-or-fail">UTF-8 decode without BOM or fail</a> <var>bytes</var>.</p>
     <li data-md>
      <p>If <var>text</var> is failure, return a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map④②">map</a> matching the <code>network.Base64Value</code> production, with <var>value</var> set to <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#forgiving-base64-encode" id="ref-for-forgiving-base64-encode">forgiving-base64 encode</a> <var>bytes</var>.</p>
     <li data-md>
      <p>Return a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map④③">map</a> matching the <code>network.StringValue</code> production,
 with <var>value</var> set to <var>text</var>.</p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.4.3.5" id="type-network-Cookie"><span class="secno">6.4.3.5. </span><span class="content">The network.Cookie Type</span><a class="self-link" href="#type-network-Cookie"></a></h5>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition①④">Remote end definition</a> and <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition①⑨">local end definition</a></p>
<pre class="cddl local-cddl remote-cddl">network.Cookie = {
    name: text,
    value: network.BytesValue,
    domain: text,
    path: text,
    size: js-uint,
    httpOnly: bool,
    secure: bool,
    sameSite: "strict" / "lax" / "none",
    ? expires: js-uint,
};
</pre>
   <p>The <code>network.Cookie</code> type represents a cookie.</p>
   <div class="algorithm" data-algorithm="serialize cookie">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="serialize-cookie">serialize cookie</dfn> given <var>stored cookie</var>: 
    <p class="note" role="note"><span class="marker">Note:</span> The definitions of <var>stored cookie</var>’s fields are from <a data-link-type="biblio" href="#biblio-cookies" title="HTTP State Management Mechanism">[COOKIES]</a>, except
samesite-flag, which is from <a data-link-type="biblio" href="#biblio-same-site-cookies" title="Same-Site Cookies">[SAME-SITE-COOKIES]</a>.</p>
    <ol>
     <li data-md>
      <p>Let <var>name</var> be the result of <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8-decode" id="ref-for-utf-8-decode①">UTF-8 decode</a> with <var>stored cookie</var>’s name field.</p>
     <li data-md>
      <p>Let <var>value</var> be <a data-link-type="dfn" href="#serialize-protocol-bytes" id="ref-for-serialize-protocol-bytes">serialize protocol bytes</a> with <var>stored cookie</var>’s value.</p>
     <li data-md>
      <p>Let <var>domain</var> be <var>stored cookie</var>’s domain field.</p>
     <li data-md>
      <p>Let <var>path</var> be <var>stored cookie</var>’s path field.</p>
     <li data-md>
      <p>Let <var>expires</var> be <var>stored cookie</var>’s expires field represented as a unix
 timestamp, if set, or null otherwise.</p>
     <li data-md>
      <p>Let <var>size</var> be the byte length of the result of serializing <var>stored cookie</var> as it would be represented in a <code>Cookie</code> header.</p>
     <li data-md>
      <p>Let <var>http only</var> be true if <var>stored cookie</var>’s http-only-flag is true, or false
 otherwise.</p>
     <li data-md>
      <p>Let <var>secure</var> be true if <var>stored cookie</var>’s secure-only-flag is true, or false
 otherwise.</p>
     <li data-md>
      <p>Let <var>same site</var> be "<code>none</code>" if <var>stored cookie</var>’s samesite-flag is
 "<code>None</code>", "<code>lax</code>" if it is "<code>Lax</code>", or
 "<code>strict</code>" if it is "<code>Strict</code>".</p>
     <li data-md>
      <p>Return a map matching the <code>network.Cookie</code> production,
 with the <code>name</code> field set to <var>name</var>, the <code>value</code> field
 set to <var>value</var>, the <code>domain</code> field set to <var>domain</var>, the <code>path</code> field set to <var>path</var>, the <code>expires</code> field set to <var>expires</var> if it’s not null, or omitted otherwise, the <code>size</code> field
 set to <var>size</var>, the <code>httpOnly</code> field set to <var>http only</var>, the <code>secure</code> field set to <var>secure</var>, and the <code>sameSite</code> field set to <var>same site</var>.</p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.4.3.6" id="type-network-CookieHeader"><span class="secno">6.4.3.6. </span><span class="content">The network.CookieHeader Type</span><a class="self-link" href="#type-network-CookieHeader"></a></h5>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition①⑤">Remote end definition</a></p>
<pre class="cddl remote-cddl">network.CookieHeader = {
    name: text,
    value: network.BytesValue,
};
</pre>
   <p>The <code>network.CookieHeader</code> type represents the subset of cookie data
that’s in a <code>Cookie</code> request header.</p>
   <div class="algorithm" data-algorithm="serialize cookie header">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="serialize-cookie-header">serialize cookie header</dfn> given <var>protocol cookie</var>: 
    <ol>
     <li data-md>
      <p>Let <var>name</var> be <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8-encode" id="ref-for-utf-8-encode①">UTF-8 encode</a> <var>protocol cookie</var>["<code>name</code>"].</p>
     <li data-md>
      <p>Let <var>value</var> be <a data-link-type="dfn" href="#deserialize-protocol-bytes" id="ref-for-deserialize-protocol-bytes">deserialize protocol bytes</a> with <var>protocol
 cookie</var>["<code>value</code>"].</p>
     <li data-md>
      <p>Let <var>header value</var> be the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence②">byte sequence</a> formed by concatenating <var>name</var>,
 `<code>=</code>`, and <var>value</var></p>
     <li data-md>
      <p>Return <var>header value</var>.</p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.4.3.7" id="type-network-FetchTimingInfo"><span class="secno">6.4.3.7. </span><span class="content">The network.FetchTimingInfo Type</span><a class="self-link" href="#type-network-FetchTimingInfo"></a></h5>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition①⑥">Remote end definition</a> and <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition②⓪">local end definition</a></p>
<pre class="cddl local-cddl">network.FetchTimingInfo = {
    timeOrigin: float,
    requestTime: float,
    redirectStart: float,
    redirectEnd: float,
    fetchStart: float,
    dnsStart: float,
    dnsEnd: float,
    connectStart: float,
    connectEnd: float,
    tlsStart: float,
    requestStart: float,
    responseStart: float,
    responseEnd: float,
};
</pre>
   <p>The <code>network.FetchTimingInfo</code> type represents the time of each part
of the request, relative to the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-time-origin" id="ref-for-concept-settings-object-time-origin">time origin</a> of the <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request" id="ref-for-concept-request③">request</a>'s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-client" id="ref-for-concept-request-client">client</a>.</p>
   <div class="algorithm" data-algorithm="get the fetch timings">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="get-the-fetch-timings">get the fetch timings</dfn> given <var>request</var>: 
    <ol>
     <li data-md>
      <p>Let <var>global</var> be <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-client" id="ref-for-concept-request-client①">client</a>.</p>
     <li data-md>
      <p>If <var>global</var> is null, return a map matching the <code>network.FetchTimingInfo</code> production, with all fields set to 0.</p>
     <li data-md>
      <p>Let <var>time origin</var> be <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-get-time-origin-timestamp" id="ref-for-dfn-get-time-origin-timestamp">get time origin timestamp</a> with <var>global</var>.</p>
     <li data-md>
      <p>Let <var>timings</var> be <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#fetch-timing-info" id="ref-for-fetch-timing-info">fetch timing info</a>.</p>
     <li data-md>
      <p>Let <var>connection timing</var> be <var>timings</var>’ <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#fetch-timing-info-final-connection-timing-info" id="ref-for-fetch-timing-info-final-connection-timing-info">final connection timing info</a> if
 it’s not null, or a new <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#connection-timing-info" id="ref-for-connection-timing-info">connection timing info</a> otherwise.</p>
     <li data-md>
      <p>Let <var>request time</var> be <a data-link-type="dfn" href="https://w3c.github.io/resource-timing/#dfn-convert-fetch-timestamp" id="ref-for-dfn-convert-fetch-timestamp">convert fetch timestamp</a> given <var>timings</var>’ <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#fetch-timing-info-start-time" id="ref-for-fetch-timing-info-start-time">start time</a> and <var>global</var>.</p>
     <li data-md>
      <p>Let <var>redirect start</var> be <a data-link-type="dfn" href="https://w3c.github.io/resource-timing/#dfn-convert-fetch-timestamp" id="ref-for-dfn-convert-fetch-timestamp①">convert fetch timestamp</a> given <var>timings</var>’ <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#fetch-timing-info-redirect-start-time" id="ref-for-fetch-timing-info-redirect-start-time">redirect start time</a> and <var>global</var>.</p>
     <li data-md>
      <p>Let <var>redirect end</var> be <a data-link-type="dfn" href="https://w3c.github.io/resource-timing/#dfn-convert-fetch-timestamp" id="ref-for-dfn-convert-fetch-timestamp②">convert fetch timestamp</a> given <var>timings</var>’ <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#fetch-timing-info-redirect-end-time" id="ref-for-fetch-timing-info-redirect-end-time">redirect
 end time</a> and <var>global</var>.</p>
     <li data-md>
      <p>Let <var>fetch start</var> be <a data-link-type="dfn" href="https://w3c.github.io/resource-timing/#dfn-convert-fetch-timestamp" id="ref-for-dfn-convert-fetch-timestamp③">convert fetch timestamp</a> given <var>timings</var>’ <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#fetch-timing-info-post-redirect-start-time" id="ref-for-fetch-timing-info-post-redirect-start-time">post-redirect start time</a> and <var>global</var>.</p>
     <li data-md>
      <p>Let <var>DNS start</var> be <a data-link-type="dfn" href="https://w3c.github.io/resource-timing/#dfn-convert-fetch-timestamp" id="ref-for-dfn-convert-fetch-timestamp④">convert fetch timestamp</a> given <var>connection timing</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#connection-timing-info-domain-lookup-start-time" id="ref-for-connection-timing-info-domain-lookup-start-time">domain lookup start time</a> and <var>global</var>.</p>
     <li data-md>
      <p>Let <var>DNS end</var> be <a data-link-type="dfn" href="https://w3c.github.io/resource-timing/#dfn-convert-fetch-timestamp" id="ref-for-dfn-convert-fetch-timestamp⑤">convert fetch timestamp</a> given <var>connection timing</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#connection-timing-info-domain-lookup-end-time" id="ref-for-connection-timing-info-domain-lookup-end-time">domain lookup end time</a> and <var>global</var>.</p>
     <li data-md>
      <p>Let <var>TLS start</var> be <a data-link-type="dfn" href="https://w3c.github.io/resource-timing/#dfn-convert-fetch-timestamp" id="ref-for-dfn-convert-fetch-timestamp⑥">convert fetch timestamp</a> given <var>connection timing</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#connection-timing-info-secure-connection-start-time" id="ref-for-connection-timing-info-secure-connection-start-time">secure connection start time</a> and <var>global</var>.</p>
     <li data-md>
      <p>Let <var>connect start</var> be <a data-link-type="dfn" href="https://w3c.github.io/resource-timing/#dfn-convert-fetch-timestamp" id="ref-for-dfn-convert-fetch-timestamp⑦">convert fetch timestamp</a> given <var>connection
 timing</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#connection-timing-info-connection-start-time" id="ref-for-connection-timing-info-connection-start-time">connection start time</a> and <var>global</var>.</p>
     <li data-md>
      <p>Let <var>connect end</var> be <a data-link-type="dfn" href="https://w3c.github.io/resource-timing/#dfn-convert-fetch-timestamp" id="ref-for-dfn-convert-fetch-timestamp⑧">convert fetch timestamp</a> given <var>connection timing</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#connection-timing-info-connection-end-time" id="ref-for-connection-timing-info-connection-end-time">connection end time</a> and <var>global</var>.</p>
     <li data-md>
      <p>Let <var>request start</var> be <a data-link-type="dfn" href="https://w3c.github.io/resource-timing/#dfn-convert-fetch-timestamp" id="ref-for-dfn-convert-fetch-timestamp⑨">convert fetch timestamp</a> given <var>timings</var>’ <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#fetch-timing-info-final-network-request-start-time" id="ref-for-fetch-timing-info-final-network-request-start-time">final
 network-request start time</a> and <var>global</var>.</p>
     <li data-md>
      <p>Let <var>response start</var> be <a data-link-type="dfn" href="https://w3c.github.io/resource-timing/#dfn-convert-fetch-timestamp" id="ref-for-dfn-convert-fetch-timestamp①⓪">convert fetch timestamp</a> given <var>timings</var>’ <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#fetch-timing-info-final-network-response-start-time" id="ref-for-fetch-timing-info-final-network-response-start-time">final
 network-response start time</a> and <var>global</var>.</p>
     <li data-md>
      <p>Let <var>response end</var> be <a data-link-type="dfn" href="https://w3c.github.io/resource-timing/#dfn-convert-fetch-timestamp" id="ref-for-dfn-convert-fetch-timestamp①①">convert fetch timestamp</a> given <var>timings</var>’ <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#fetch-timing-info-end-time" id="ref-for-fetch-timing-info-end-time">end time</a> and <var>global</var>.</p>
     <li data-md>
      <p>Return a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map④④">map</a> matching the <code>network.FetchTimingInfo</code> production
  with the <code>timeOrigin</code> field set to <var>time origin</var>, the <code>requestTime</code> field set to <var>request time</var>, the <code>redirectStart</code> field set to <var>redirect start</var>, the <code>redirectEnd</code> field set to <var>redirect end</var>, the <code>fetchStart</code> field set to <var>fetch start</var>, the <code>dnsStart</code> field set to <var>DNS start</var>, the <code>dnsEnd</code> field set to <var>DNS end</var>, the <code>connectStart</code> field set to <var>connect
  start</var>, the <code>connectEnd</code> field set to <var>connect end</var>, the <code>tlsStart</code> field set to <var>TLS start</var>, the <code>requestStart</code> field set to <var>request start</var>, the <code>responseStart</code> field set to <var>response start</var>, and the <code>responseEnd</code> field set to <var>response end</var>.</p>
    </ol>
   </div>
   <p>TODO: Add service worker fields</p>
   <h5 class="heading settled" data-level="6.4.3.8" id="type-network-Header"><span class="secno">6.4.3.8. </span><span class="content">The network.Header Type</span><a class="self-link" href="#type-network-Header"></a></h5>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition①⑦">Remote end definition</a> and <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition②①">local end definition</a></p>
<pre class="cddl local-cddl remote-cddl">network.Header = {
  name: text,
  value: network.BytesValue,
}
</pre>
   <p>The <code>network.Header</code> type represents a single request header.</p>
   <div class="algorithm" data-algorithm="serialize header">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="serialize-header">serialize header</dfn> given <var>name bytes</var> and <var>value bytes</var>: 
    <ol>
     <li data-md>
      <p>Let <var>name</var> be the result of <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8-decode" id="ref-for-utf-8-decode②">UTF-8 decode</a> with <var>name bytes</var>.</p>
      <p class="assertion">Assert: Since header names are constrained to be ASCII-only this cannot fail.</p>
     <li data-md>
      <p>Let <var>value</var> be <a data-link-type="dfn" href="#serialize-protocol-bytes" id="ref-for-serialize-protocol-bytes①">serialize protocol bytes</a> with <var>value bytes</var>.</p>
     <li data-md>
      <p>Return a map matching the <code>network.Header</code> production, with the <code>name</code> field set to <var>name</var>, and the <code>value</code> field
 set to <var>value</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="deserialize header">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="deserialize-header">deserialize header</dfn> given <var>protocol header</var>: 
    <ol>
     <li data-md>
      <p>Let <var>name</var> be <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8-encode" id="ref-for-utf-8-encode②">UTF-8 encode</a> <var>protocol header</var>["<code>name</code>"].</p>
     <li data-md>
      <p>Let <var>value</var> be <a data-link-type="dfn" href="#deserialize-protocol-bytes" id="ref-for-deserialize-protocol-bytes①">deserialize protocol bytes</a> with <var>protocol
 header</var>["<code>value</code>"].</p>
     <li data-md>
      <p>Return a <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header" id="ref-for-concept-header">header</a> (<var>name</var>, <var>value</var>).</p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.4.3.9" id="type-network-Initiator"><span class="secno">6.4.3.9. </span><span class="content">The network.Initiator Type</span><a class="self-link" href="#type-network-Initiator"></a></h5>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition①⑧">Remote end definition</a> and <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition②②">local end definition</a></p>
<pre class="cddl local-cddl">network.Initiator = {
    type: "parser" / "script" / "preflight" / "other",
    ? columnNumber: js-uint,
    ? lineNumber: js-uint,
    ? stackTrace: script.StackTrace,
    ? request: network.Request
};
</pre>
   <p>The <code>network.Initiatior</code> type represents the source of a network
request.</p>
   <div class="algorithm" data-algorithm="get the initiator">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="get-the-initiator">get the initiator</dfn> given <var>request</var>: 
    <ol>
     <li data-md>
      <p>Let <var>request id</var> be <var>request</var>’s <a data-link-type="dfn" href="#request-id" id="ref-for-request-id①">request id</a>.</p>
     <li data-md>
      <p>Let <var>type</var> be "<code>other</code>".</p>
     <li data-md>
      <p>If <var>request</var> is a <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#cors-preflight-request" id="ref-for-cors-preflight-request">CORS-Preflight Request</a>, set <var>type</var> to
 "<code>preflight</code>".</p>
     <li data-md>
      <p>TODO: Get the <var>type</var>. It’s not quite clear how this ought to work; the CDP
 data depends on whether the navigation was kicked off by the parser or by
 script (so e.g. inserting an image from script causes the initiator to be
 "<code>script</code>"), but that doesn’t correspond to anything in Fetch.</p>
     <li data-md>
      <p>If <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#request-initiator-type" id="ref-for-request-initiator-type">initiator type</a> is "<code>fetch</code>" or
 "<code>xmlhttprequest</code>":</p>
      <ol>
       <li data-md>
        <p>Let <var>stack trace</var> be the <a data-link-type="dfn" href="#current-stack-trace" id="ref-for-current-stack-trace">current stack trace</a>.</p>
       <li data-md>
        <p>If <var>stack trace</var> has size of 1 or greater, let <var>line number</var> be value of the <code>lineNumber</code> field in <var>stack trace</var>[0], and let <var>column number</var> be
 the value of the <code>columnNumber</code> field <var>stack trace</var>[0]. Otherwise
 let <var>line number</var> and <var>column number</var> be 0.</p>
      </ol>
      <p>Otherwise, let <var>stack trace</var>, <var>column number</var>, and <var>line number</var> all be null.</p>
      <p>TODO: Chrome includes the current parser position as column number / line
number for parser-inserted resources.</p>
     <li data-md>
      <p>Return a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map④⑤">map</a> matching the <code>network.Initiator</code> production, with
 the <code>type</code> field set to <var>type</var>, the <code>columnNumber</code> field set to <var>column number</var> if it’s not null, or omitted otherwise, the <code>lineNumber</code> field set to <var>line number</var> if it’s not null, or
 omitted otherwise, the <code>stackTrace</code> field set to <var>stack trace</var> if
 it’s not null, or omitted otherwise, and the <code>request</code> field set
 to <var>request id</var>.</p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.4.3.10" id="type-network-Intercept"><span class="secno">6.4.3.10. </span><span class="content">The network.Intercept Type</span><a class="self-link" href="#type-network-Intercept"></a></h5>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition①⑨">Remote end definition</a> and <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition②③">local end definition</a></p>
<pre class="cddl local-cddl remote-cddl">network.Intercept = text
</pre>
   <p>The <code>network.Intercept</code> type represents the id of a <a data-link-type="dfn" href="#network-intercept" id="ref-for-network-intercept①">network intercept</a>.</p>
   <h5 class="heading settled" data-level="6.4.3.11" id="type-network-Request"><span class="secno">6.4.3.11. </span><span class="content">The network.Request Type</span><a class="self-link" href="#type-network-Request"></a></h5>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition②⓪">Remote end definition</a> and <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition②④">local end definition</a></p>
<pre class="cddl local-cddl remote-cddl">network.Request = text;
</pre>
   <p>Each network request has an associated <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="request-id">request id</dfn>, which is a
string uniquely identifying that request. The identifier for a request resulting from a
redirect matches that of the request that initiated it.</p>
   <h5 class="heading settled" data-level="6.4.3.12" id="type-network-RequestData"><span class="secno">6.4.3.12. </span><span class="content">The network.RequestData Type</span><a class="self-link" href="#type-network-RequestData"></a></h5>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition②①">Remote end definition</a> and <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition②⑤">local end definition</a></p>
<pre class="cddl local-cddl">network.RequestData = {
    request: network.Request,
    url: text,
    method: text,
    headers: [*network.Header],
    cookies: [*network.Cookie],
    headersSize: js-uint,
    bodySize: js-uint / null,
    timings: network.FetchTimingInfo,
};
</pre>
   <p>The <code>network.RequestData</code> type represents an ongoing network request.</p>
   <div class="algorithm" data-algorithm="get the request data">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="get-the-request-data">get the request data</dfn> given <var>request</var>:</p>
    <ol>
     <li data-md>
      <p>Let <var>request id</var> be request’s <a data-link-type="dfn" href="#request-id" id="ref-for-request-id②">request id</a>.</p>
     <li data-md>
      <p>Let <var>url</var> be the result of running the <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-serializer" id="ref-for-concept-url-serializer⑥">URL serializer</a> with <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-url" id="ref-for-concept-request-url①">URL</a>.</p>
     <li data-md>
      <p>Let <var>method</var> be <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-method" id="ref-for-concept-request-method">method</a>.</p>
     <li data-md>
      <p>Let <var>body size</var> be null.</p>
     <li data-md>
      <p>Let <var>body</var> be request’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-body" id="ref-for-concept-request-body">body</a>.</p>
     <li data-md>
      <p>If <var>body</var> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence③">byte sequence</a>, let <var>body size</var> be the length of that
 sequence. Otherwise, if <var>body</var> is a <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-body" id="ref-for-concept-body">body</a> then let <var>body size</var> be that
 body’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-body-total-bytes" id="ref-for-concept-body-total-bytes">length</a>.</p>
     <li data-md>
      <p>Let <var>headers size</var> be the size in bytes of <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-header-list" id="ref-for-concept-request-header-list">headers list</a> when
 serialized as mandated by <a data-link-type="biblio" href="#biblio-http11" title="HTTP/1.1">[HTTP11]</a>.</p>
      <p class="note" role="note"><span class="marker">Note:</span> For protocols which allow header compression, this is the compressed
 size of the headers, as sent over the network.</p>
     <li data-md>
      <p>Let <var>headers</var> be an empty list.</p>
     <li data-md>
      <p>Let <var>cookies</var> be an empty list.</p>
     <li data-md>
      <p>For each (<var>name</var>, <var>value</var>) in <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-header-list" id="ref-for-concept-request-header-list①">headers list</a>:</p>
      <ol>
       <li data-md>
        <p>Append the result of <a data-link-type="dfn" href="#serialize-header" id="ref-for-serialize-header">serialize header</a> with <var>name</var> and <var>value</var> to <var>headers</var>.</p>
       <li data-md>
        <p>If <var>name</var> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-case-insensitive" id="ref-for-byte-case-insensitive①">byte-case-insensitive</a> match for "<code>Cookie</code>" then:</p>
        <ol>
         <li data-md>
          <p>For each <var>cookie</var> in the user agent’s cookie store that are included in <var>request</var>:</p>
          <p class="note" role="note"><span class="marker">Note:</span> <a data-link-type="biblio" href="#biblio-cookies" title="HTTP State Management Mechanism">[COOKIES]</a> defines some baseline requirements for which cookies in
 the store can be included in a request, but user agents are free to
 impose additional constraints.</p>
          <ol>
           <li data-md>
            <p>Append the result of <a data-link-type="dfn" href="#serialize-cookie" id="ref-for-serialize-cookie">serialize cookie</a> given <var>cookie</var> to <var>cookies</var>.</p>
          </ol>
        </ol>
      </ol>
     <li data-md>
      <p>Let <var>timings</var> be <a data-link-type="dfn" href="#get-the-fetch-timings" id="ref-for-get-the-fetch-timings">get the fetch timings</a> with <var>request</var>.</p>
     <li data-md>
      <p>Return a map matching the <code>network.RequestData</code> production, with
 the <code>request</code> field set to <var>request id</var>, <code>url</code> field
 set to <var>url</var>, the <code>method</code> field set to <var>method</var>, the <code>headers</code> field set to <var>headers</var>, the <var>cookies</var> field set to <var>cookies</var>, and the <code>headersSize</code> field set to <var>headers size</var>,
 the <code>bodySize</code> field set to <var>body size</var>, and the <code>timings</code> field set to <var>timings</var>.</p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.4.3.13" id="type-network-ResponseContent"><span class="secno">6.4.3.13. </span><span class="content">The network.ResponseContent Type</span><a class="self-link" href="#type-network-ResponseContent"></a></h5>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition②②">Remote end definition</a> and <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition②⑥">local end definition</a></p>
<pre class="cddl local-cddl">network.ResponseContent = {
    size: js-uint
};
</pre>
   <p>The <code>network.ResponseContent</code> type represents the decoded response to
a network request.</p>
   <div class="algorithm" data-algorithm="get the response content info">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="get-the-response-content-info">get the response content info</dfn> given <var>response</var>. 
    <ol>
     <li data-md>
      <p>Return a new map matching the <code>network.ResponseContent</code> production, with the <code>size</code> field set to <var>response</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#response-body-info" id="ref-for-response-body-info">response body
 info</a>'s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#fetch-timing-info-decoded-body-size" id="ref-for-fetch-timing-info-decoded-body-size">decoded size</a></p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.4.3.14" id="type-network-ResponseData"><span class="secno">6.4.3.14. </span><span class="content">The network.ResponseData Type</span><a class="self-link" href="#type-network-ResponseData"></a></h5>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition②③">Remote end definition</a> and <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition②⑦">local end definition</a></p>
<pre class="cddl local-cddl">network.ResponseData = {
    url: text,
    protocol: text,
    status: js-uint,
    statusText: text,
    fromCache: bool,
    headers: [*network.Header],
    mimeType: text,
    bytesReceived: js-uint,
    headersSize: js-uint / null,
    bodySize: js-uint / null,
    content: network.ResponseContent,
    ?authChallenge: network.AuthChallenge,
};
</pre>
   <p>The <code>network.ResponseData</code> type represents the response to a network
request.</p>
   <div class="algorithm" data-algorithm="get the protocol">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="get-the-protocol">get the protocol</dfn> given <var>response</var>:</p>
    <ol>
     <li data-md>
      <p>Let <var>protocol</var> be the empty string.</p>
     <li data-md>
      <p>If <var>response</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#fetch-timing-info-final-connection-timing-info" id="ref-for-fetch-timing-info-final-connection-timing-info①">final connection timing info</a> is not null, set <var>protocol</var> to <var>response</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#fetch-timing-info-final-connection-timing-info" id="ref-for-fetch-timing-info-final-connection-timing-info②">final connection timing info</a>'s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#connection-timing-info-alpn-negotiated-protocol" id="ref-for-connection-timing-info-alpn-negotiated-protocol">ALPN negotiated
 protocol</a>.</p>
     <li data-md>
      <p>If <var>protocol</var> is the empty string, or is equal to "<code>unknown</code>":</p>
      <ol>
       <li data-md>
        <p>Set <var>protocol</var> to <var>response</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-url" id="ref-for-concept-response-url">url</a>'s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-scheme" id="ref-for-concept-url-scheme">scheme</a></p>
       <li data-md>
        <p>If <var>protocol</var> is equal to either "<code>http</code>" or
 "<code>https</code>" and <var>response</var> has an associated HTTP Response.</p>
        <p class="note" role="note"><span class="marker">Note:</span> <a data-link-type="biblio" href="#biblio-fetch" title="Fetch Standard">[FETCH]</a> isn’t clear about the relation between a HTTP network response and
 a response object.</p>
        <ol>
         <li data-md>
          <p>Let <var>http version</var> be the HTTP Response’s Status line’s HTTP-version <a data-link-type="biblio" href="#biblio-http11" title="HTTP/1.1">[HTTP11]</a>.</p>
         <li data-md>
          <p>If <var>http version</var> starts with "<code>HTTP/</code>":</p>
          <ol>
           <li data-md>
            <p>Let <var>version</var> be the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#code-unit-substring" id="ref-for-code-unit-substring">code unit substring</a> of <var>http version</var> from 5
 to <var>http version</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-length" id="ref-for-string-length">length</a>.</p>
           <li data-md>
            <p>If <var>version</var> is "<code>0.9</code>", set <var>protocol</var> to
 "<code>http/0.9</code>", otherwise if <var>version</var> is "<code>1.0</code>",
 set <var>protocol</var> to "<code>http/1.0</code>", otherwise if <var>version</var> is
 "<code>1.1</code>", set <var>protocol</var> to "<code>http/1.1</code>".</p>
          </ol>
        </ol>
      </ol>
     <li data-md>
      <p>Return <var>protocol</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="get the response data">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="get-the-response-data">get the response data</dfn> given <var>response</var>: 
    <ol>
     <li data-md>
      <p>Let <var>url</var> be the result of running the <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-serializer" id="ref-for-concept-url-serializer⑦">URL serializer</a> with <var>response</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-url" id="ref-for-concept-response-url①">URL</a>.</p>
     <li data-md>
      <p>Set <var>protocol</var> to <a data-link-type="dfn" href="#get-the-protocol" id="ref-for-get-the-protocol">get the protocol</a> given <var>response</var>.</p>
     <li data-md>
      <p>Let <var>status</var> be <var>response</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-status" id="ref-for-concept-response-status②">status</a>.</p>
     <li data-md>
      <p>Let <var>status text</var> be <var>response</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-status-message" id="ref-for-concept-response-status-message">status message</a>.</p>
     <li data-md>
      <p>If <var>response</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-cache-state" id="ref-for-concept-response-cache-state">cache state</a> is "<code>local</code>", let <var>from cache</var> be
 true, otherwise let it be false.</p>
     <li data-md>
      <p>Let <var>headers</var> be an empty list.</p>
     <li data-md>
      <p>Let <var>mime type</var> be the <a data-link-type="dfn" href="https://mimesniff.spec.whatwg.org/#mime-type-essence" id="ref-for-mime-type-essence">essence</a> of the <a data-link-type="dfn" href="https://mimesniff.spec.whatwg.org/#computed-mime-type" id="ref-for-computed-mime-type">computed mime type</a> for <var>response</var>.</p>
      <p class="note" role="note"><span class="marker">Note:</span> this is whatever MIME type the browser is actually using, even if it
 isn’t following the exact algorithm in the <a data-link-type="biblio" href="#biblio-mimesniff" title="MIME Sniffing Standard">[MIMESNIFF]</a> specification.</p>
     <li data-md>
      <p>For each (<var>name</var>, <var>value</var>) in <var>response</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-header-list" id="ref-for-concept-response-header-list①">headers list</a>:</p>
      <ol>
       <li data-md>
        <p>Append the result of <a data-link-type="dfn" href="#serialize-header" id="ref-for-serialize-header①">serialize header</a> with <var>name</var> and <var>value</var> to <var>headers</var>.</p>
      </ol>
     <li data-md>
      <p>Let <var>bytes received</var> be the total number of bytes transmitted as part of the
 HTTP response associated with <var>response</var>.</p>
     <li data-md>
      <p>Let <var>headers size</var> be the number of bytes transmitted as part of the header
 fields section of the HTTP response.</p>
     <li data-md>
      <p>Let <var>body size</var> be <var>response</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#response-body-info" id="ref-for-response-body-info①">response body info</a>'s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#fetch-timing-info-encoded-body-size" id="ref-for-fetch-timing-info-encoded-body-size">encoded size</a>.</p>
     <li data-md>
      <p>Let <var>content</var> be the result of <a data-link-type="dfn" href="#get-the-response-content-info" id="ref-for-get-the-response-content-info">get the response content info</a> with <var>response</var>.</p>
     <li data-md>
      <p>Let <var>auth challenges</var> be the result of <a data-link-type="dfn" href="#extract-challenges" id="ref-for-extract-challenges">extract challenges</a> with <var>response</var>.</p>
     <li data-md>
      <p>Return a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map④⑥">map</a> matching the <code>network.ResponseData</code> production,
 with the <code>url</code> field set to <var>url</var>, the <code>protocol</code> field
 set to <var>protocol</var>, the <code>status</code> field set to <var>status</var>, the <code>statusText</code> field set to <var>status text</var>, the <code>fromCache</code> field set to <var>from cache</var>, the <code>headers</code> field set to <var>headers</var>, the <code>mimeType</code> field set to <var>mime type</var>, the <code>bytesReceived</code> field set to <var>bytes received</var>, the <code>headersSize</code> field set to <var>headers size</var>, the <code>bodySize</code> field set to <var>body size</var>, <code>content</code> field set to <var>content</var>, and the <code>authChallenges</code> field set to <var>auth challenges</var> if it’s not null, or omitted otherwise.</p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.4.3.15" id="type-network-SetCookieHeader"><span class="secno">6.4.3.15. </span><span class="content">The network.SetCookieHeader Type</span><a class="self-link" href="#type-network-SetCookieHeader"></a></h5>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition②④">Remote end definition</a></p>
<pre class="cddl remote-cddl">network.SetCookieHeader = {
    name: text,
    value: network.BytesValue,
    ? domain: text,
    ? httpOnly: bool,
    ? expires: text,
    ? maxAge: js-int,
    ? path: text,
    ? sameSite: "strict" / "lax" / "none",
    ? secure: bool,
}
</pre>
   <p>The <code>network.SetCookieHeader</code> represents the data in a <code>Set-Cookie</code> response header.</p>
   <div class="algorithm" data-algorithm="serialize an integer">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="serialize-an-integer">serialize an integer</dfn> given <var>input</var> that is an integer: 
    <p class="note" role="note"><span class="marker">Note:</span> This produces the shortest representation of <var>input</var> as a string of
decimal digits.</p>
    <ol>
     <li data-md>
      <p>Let <var>serialized</var> be an empty string.</p>
     <li data-md>
      <p>Let <var>value</var> be <var>input</var>.</p>
     <li data-md>
      <p>While <var>value</var> is greater than 0:</p>
      <ol>
       <li data-md>
        <p>Let <var>x</var> be <var>value</var> divided by 10.</p>
       <li data-md>
        <p>Let <var>most significant digits</var> be the integer part of <var>x</var>.</p>
       <li data-md>
        <p>Let <var>y</var> be <var>most significant digits</var> multiplied by 10.</p>
       <li data-md>
        <p>Let <var>least significant digit</var> be <var>value</var> - <var>y</var>.</p>
       <li data-md>
        <p class="assertion">Assert: <var>least significant digit</var> is an integer in the range 0 to 9,
 inclusive.</p>
       <li data-md>
        <p>Let <var>codepoint</var> be the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#code-point" id="ref-for-code-point">code point</a> whose <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#code-point-value" id="ref-for-code-point-value">value</a> is U+0030
 DIGIT ZERO’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#code-point-value" id="ref-for-code-point-value①">value</a> + <var>least significant digit</var>.</p>
       <li data-md>
        <p>Prepend <var>codepoint</var> to <var>serialized</var>.</p>
       <li data-md>
        <p>Let <var>value</var> be <var>most significant digits</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>serialized</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="serialize set-cookie header">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="serialize-set-cookie-header">serialize set-cookie header</dfn> given <var>protocol cookie</var>: 
    <ol>
     <li data-md>
      <p>Let <var>name</var> be <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8-encode" id="ref-for-utf-8-encode③">UTF-8 encode</a> <var>protocol cookie</var>["<code>name</code>"].</p>
     <li data-md>
      <p>Let <var>value</var> be <a data-link-type="dfn" href="#deserialize-protocol-bytes" id="ref-for-deserialize-protocol-bytes②">deserialize protocol bytes</a> with <var>protocol
 cookie</var>["<code>value</code>"].</p>
     <li data-md>
      <p>Let <var>header value</var> be the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence④">byte sequence</a> formed by concatenating <var>name</var>,
 `<code>=</code>`, and <var>value</var>.</p>
     <li data-md>
      <p>If <var>protocol cookie</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists③">contains</a> "<code>expires</code>:</p>
      <ol>
       <li data-md>
        <p>Let <var>attribute</var> be `<code>;Expires=</code>`</p>
       <li data-md>
        <p>Append <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8-encode" id="ref-for-utf-8-encode④">UTF-8 encode</a> <var>protocol cookie</var>["<code>expires</code>"] to <var>attribute</var>.</p>
       <li data-md>
        <p>Append <var>attribute</var> to <var>header value</var>.</p>
      </ol>
     <li data-md>
      <p>If <var>protocol cookie</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists④">contains</a> "<code>maxAge</code>:</p>
      <ol>
       <li data-md>
        <p>Let <var>attribute</var> be `<code>;Max-Age=</code>`</p>
       <li data-md>
        <p>Let <var>max age string</var> be <a data-link-type="dfn" href="#serialize-an-integer" id="ref-for-serialize-an-integer">serialize an integer</a> <var>protocol
cookie</var>["<code>maxAge</code>"].</p>
       <li data-md>
        <p>Append <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8-encode" id="ref-for-utf-8-encode⑤">UTF-8 encode</a> <var>max age string</var> to <var>attribute</var>.</p>
       <li data-md>
        <p>Append <var>attribute</var> to <var>header value</var>.</p>
      </ol>
     <li data-md>
      <p>If <var>protocol cookie</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists⑤">contains</a> "<code>domain</code>":</p>
      <ol>
       <li data-md>
        <p>Let <var>attribute</var> be `<code>;Domain=</code>`</p>
       <li data-md>
        <p>Append <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8-encode" id="ref-for-utf-8-encode⑥">UTF-8 encode</a> <var>protocol cookie</var>["<code>domain</code>"] to <var>attribute</var>.</p>
       <li data-md>
        <p>Append <var>attribute</var> to <var>header value</var>.</p>
      </ol>
     <li data-md>
      <p>If <var>protocol cookie</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists⑥">contains</a> "<code>path</code>":</p>
      <ol>
       <li data-md>
        <p>Let <var>attribute</var> be `<code>;Path=</code>`</p>
       <li data-md>
        <p>Append <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8-encode" id="ref-for-utf-8-encode⑦">UTF-8 encode</a> <var>protocol cookie</var>["<code>path</code>"] to <var>attribute</var>.</p>
       <li data-md>
        <p>Append <var>attribute</var> to <var>header value</var>.</p>
      </ol>
     <li data-md>
      <p>If <var>protocol cookie</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists⑦">contains</a> "<code>secure</code>" and <var>protocol
 cookie</var>["<code>secure</code>"] is true:</p>
      <ol>
       <li data-md>
        <p>Append `<code>;Secure</code>` to <var>header value</var>.</p>
      </ol>
     <li data-md>
      <p>If <var>protocol cookie</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists⑧">contains</a> "<code>httpOnly</code>" and <var>protocol
 cookie</var>["<code>httpOnly</code>"] is true:</p>
      <ol>
       <li data-md>
        <p>Append `<code>;HttpOnly</code>` to <var>header value</var>.</p>
      </ol>
     <li data-md>
      <p>If <var>protocol cookie</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists⑨">contains</a> "<code>sameSite</code>":</p>
      <ol>
       <li data-md>
        <p>Let <var>attribute</var> be `<code>;SameSite=</code>`</p>
       <li data-md>
        <p>Append <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8-encode" id="ref-for-utf-8-encode⑧">UTF-8 encode</a> <var>protocol cookie</var>["<code>sameSite</code>"] to <var>attribute</var>.</p>
       <li data-md>
        <p>Append <var>attribute</var> to <var>header value</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>header value</var>.</p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.4.3.16" id="type-network-UrlPattern"><span class="secno">6.4.3.16. </span><span class="content">The network.UrlPattern Type</span><a class="self-link" href="#type-network-UrlPattern"></a></h5>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition②⑤">Remote end definition</a></p>
<pre class="cddl remote-cddl">network.UrlPattern = (
  network.UrlPatternPattern /
  network.UrlPatternString
)

network.UrlPatternPattern = {
    type: "pattern",
    ?protocol: text,
    ?hostname: text,
    ?port: text,
    ?pathname: text,
    ?search: text,
}


network.UrlPatternString = {
    type: "string",
    pattern: text,
}

</pre>
   <p>A <code>network.UrlPattern</code> represents a pattern used for matching request
URLs for <a data-link-type="dfn" href="#network-intercept" id="ref-for-network-intercept②">network intercepts</a>.</p>
   <p>When URLs are matched against a <code>network.UrlPattern</code> the URL is
parsed, and each component is comapred for equality with the corresponding field
in the pattern, if present. Missing fields from the pattern always match.</p>
   <p class="note" role="note"><span class="marker">Note:</span> This syntax is designed with future extensibility in mind. In particular
the syntax forbids characters that are treated specially in the <a data-link-type="biblio" href="#biblio-urlpattern" title="URLPattern API">[URLPattern]</a> specification. These can be escaped by prefixing them with a U+005C (\) character.</p>
   <div class="algorithm" data-algorithm="unescape URL pattern">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="unescape-url-pattern">unescape URL pattern</dfn> given <var>pattern</var> 
    <ol>
     <li data-md>
      <p>Let <var>forbidden characters</var> be the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set②⑨">set</a> of codepoints «U+0028 ((), U+0029
 ()), U+002A (*), U+007B ({), U+007D (})»</p>
     <li data-md>
      <p>Let <var>result</var> be the empty string.</p>
     <li data-md>
      <p>Let <var>is escaped character</var> be false.</p>
     <li data-md>
      <p>For each <var>codepoint</var> in <var>pattern</var>:</p>
      <ol>
       <li data-md>
        <p>If <var>is escaped character</var> is false:</p>
        <ol>
         <li data-md>
          <p>If <var>forbidden characters</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-contain" id="ref-for-list-contain⑤">contains</a> <var>codepoint</var>, return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors②⑧">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code②④">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument①④">invalid argument</a>.</p>
         <li data-md>
          <p>If <var>codepoint</var> is U+005C (\):</p>
          <ol>
           <li data-md>
            <p>Set <var>is escaped character</var> to true.</p>
           <li data-md>
            <p>Continue.</p>
          </ol>
        </ol>
       <li data-md>
        <p>Append <var>codepoint</var> to result.</p>
       <li data-md>
        <p>Set <var>is escaped character</var> to false.</p>
      </ol>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success②⑥">success</a> with data <var>result</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="parse URL pattern">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="parse-url-pattern">parse URL pattern</dfn>, given <var>pattern</var>: 
    <ol>
     <li data-md>
      <p>Let <var>has protocol</var> be true.</p>
     <li data-md>
      <p>Let <var>has hostname</var> be true.</p>
     <li data-md>
      <p>If <var>pattern</var> matches the <code>network.UrlPatternPattern</code> production:</p>
      <ol>
       <li data-md>
        <p>Let <var>pattern url</var> be the empty string.</p>
       <li data-md>
        <p>If <var>pattern</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①⓪">contains</a> "<code>protocol</code>":</p>
        <ol>
         <li data-md>
          <p>If <var>pattern</var>["<code>protocol</code>"] is the empty string, return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors②⑨">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code②⑤">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument①⑤">invalid argument</a>.</p>
         <li data-md>
          <p>Let <var>protocol</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try①⑨">trying</a> to <a data-link-type="dfn" href="#unescape-url-pattern" id="ref-for-unescape-url-pattern">unescape
 URL Pattern</a> with <var>pattern</var>["<code>protocol</code>"].</p>
         <li data-md>
          <p>For each <var>codepoint</var> in <var>protocol</var>:</p>
          <ol>
           <li data-md>
            <p>If <var>codepoint</var> is not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-alphanumeric" id="ref-for-ascii-alphanumeric">ASCII alphanumeric</a> and «U+002B (+), U+002D
 (-), U+002E (.)» does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-contain" id="ref-for-list-contain⑥">contain</a> <var>codepoint</var>:</p>
            <ol>
             <li data-md>
              <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors③⓪">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code②⑥">error code</a> invalid argument.</p>
            </ol>
          </ol>
         <li data-md>
          <p>Append <var>protocol</var> to <var>pattern url</var>.</p>
        </ol>
       <li data-md>
        <p>Otherwise:</p>
        <ol>
         <li data-md>
          <p>Set <var>has protocol</var> to false.</p>
         <li data-md>
          <p>Append "<code>http</code>" to <var>pattern url</var>.</p>
        </ol>
       <li data-md>
        <p>Let <var>scheme</var> be <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-lowercase" id="ref-for-ascii-lowercase">ASCII lowercase</a> with <var>pattern url</var>.</p>
       <li data-md>
        <p>Append "<code>:</code>" to <var>pattern url</var>.</p>
       <li data-md>
        <p>If <var>scheme</var> <a data-link-type="dfn" href="https://url.spec.whatwg.org/#is-special" id="ref-for-is-special">is special</a>, append "<code>//</code>" to <var>pattern url</var>.</p>
       <li data-md>
        <p>If <var>pattern</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①①">contains</a> "<code>hostname</code>":</p>
        <ol>
         <li data-md>
          <p>If <var>pattern</var>["<code>hostname</code>"] is the empty string, return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors③①">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code②⑦">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument①⑥">invalid argument</a>.</p>
         <li data-md>
          <p>If <var>scheme</var> is "<code>file</code>" return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors③②">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code②⑧">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument①⑦">invalid argument</a>.</p>
         <li data-md>
          <p>Let <var>hostname</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try②⓪">trying</a> to <a data-link-type="dfn" href="#unescape-url-pattern" id="ref-for-unescape-url-pattern①">unescape
 URL Pattern</a> with <var>pattern</var>["<code>hostname</code>"].</p>
         <li data-md>
          <p>Let <var>inside brackets</var> be false.</p>
         <li data-md>
          <p>For each <var>codepoint</var> in <var>hostname</var>:</p>
          <ol>
           <li data-md>
            <p>If «U+002F (/), U+003F (?), U+0023 (#)» <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-contain" id="ref-for-list-contain⑦">contains</a> <var>codepoint</var>:</p>
            <ol>
             <li data-md>
              <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors③③">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code②⑨">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument①⑧">invalid argument</a>.</p>
            </ol>
           <li data-md>
            <p>If <var>inside brackets</var> is false and <var>codepoint</var> is U+003A (:):</p>
            <ol>
             <li data-md>
              <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors③④">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code③⓪">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument①⑨">invalid argument</a>.</p>
            </ol>
           <li data-md>
            <p>If <var>codepoint</var> is U+005B ([), set <var>inside brackets</var> to true.</p>
           <li data-md>
            <p>If <var>codepoint</var> is U+005D (]), set <var>inside brackets</var> to false.</p>
          </ol>
         <li data-md>
          <p>Append <var>hostname</var> to <var>pattern url</var>.</p>
        </ol>
       <li data-md>
        <p>Otherwise:</p>
        <ol>
         <li data-md>
          <p>If <var>scheme</var> is not "<code>file</code>", append "<code>placeholder</code>" to <var>pattern url</var>.</p>
         <li data-md>
          <p>Set <var>has hostname</var> to false.</p>
        </ol>
       <li data-md>
        <p>If <var>pattern</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①②">contains</a> "<code>port</code>":</p>
        <ol>
         <li data-md>
          <p>If <var>pattern</var>["<code>port</code>"] is the empty string, return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors③⑤">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code③①">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument②⓪">invalid argument</a>.</p>
         <li data-md>
          <p>Let <var>port</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try②①">trying</a> to <a data-link-type="dfn" href="#unescape-url-pattern" id="ref-for-unescape-url-pattern②">unescape
 URL Pattern</a> with <var>pattern</var>["<code>port</code>"].</p>
         <li data-md>
          <p>Append "<code>:</code>" to <var>pattern url</var>.</p>
         <li data-md>
          <p>For each <var>codepoint</var> in <var>port</var>:</p>
          <ol>
           <li data-md>
            <p>If <var>codepoint</var> is not an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-digit" id="ref-for-ascii-digit">ASCII digit</a>:</p>
            <ol>
             <li data-md>
              <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors③⑥">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code③②">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument②①">invalid argument</a>.</p>
            </ol>
          </ol>
         <li data-md>
          <p>Append <var>port</var> to <var>pattern url</var>.</p>
        </ol>
       <li data-md>
        <p>If <var>pattern</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①③">contains</a> "<code>pathname</code>":</p>
        <ol>
         <li data-md>
          <p>Let <var>pathname</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try②②">trying</a> to <a data-link-type="dfn" href="#unescape-url-pattern" id="ref-for-unescape-url-pattern③">unescape URL Pattern</a> with <var>pattern</var>["<code>pathname</code>"].</p>
         <li data-md>
          <p>If <var>pathname</var> does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-starts-with" id="ref-for-string-starts-with">start with</a> U+002F (/), then
 append "<code>/</code>" to pattern.</p>
         <li data-md>
          <p>For each <var>codepoint</var> in <var>pathname</var>:</p>
          <ol>
           <li data-md>
            <p>If «U+003F (?), U+0023 (#)» <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-contain" id="ref-for-list-contain⑧">contains</a> <var>codepoint</var>:</p>
            <ol>
             <li data-md>
              <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors③⑦">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code③③">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument②②">invalid argument</a>.</p>
            </ol>
          </ol>
         <li data-md>
          <p>Append <var>pathname</var> to <var>pattern url</var>.</p>
        </ol>
       <li data-md>
        <p>If <var>pattern</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①④">contains</a> "<code>search</code>":</p>
        <ol>
         <li data-md>
          <p>Let <var>search</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try②③">trying</a> to <a data-link-type="dfn" href="#unescape-url-pattern" id="ref-for-unescape-url-pattern④">unescape URL pattern</a> with <var>pattern</var>["<code>search</code>"].</p>
         <li data-md>
          <p>If <var>search</var> does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-starts-with" id="ref-for-string-starts-with①">start with</a> U+003F (?), then
 append "<code>?</code>" to <var>pattern url</var>.</p>
         <li data-md>
          <p>For each <var>codepoint</var> in <var>search</var>:</p>
          <ol>
           <li data-md>
            <p>If <var>codepoint</var> is U+0023 (#):</p>
            <ol>
             <li data-md>
              <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors③⑧">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code③④">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument②③">invalid argument</a>.</p>
            </ol>
          </ol>
         <li data-md>
          <p>Append <var>search</var> to <var>pattern url</var>.</p>
        </ol>
      </ol>
     <li data-md>
      <p>Otherwise, if <var>pattern</var> matches the <code>network.UrlPatternString</code> production:</p>
      <ol>
       <li data-md>
        <p>Let <var>pattern url</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try②④">trying</a> to <a data-link-type="dfn" href="#unescape-url-pattern" id="ref-for-unescape-url-pattern⑤">unescape URL
 pattern</a> with <var>pattern</var>["<code>pattern</code>"].</p>
      </ol>
     <li data-md>
      <p>Let <var>url</var> be the result of <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-parser" id="ref-for-concept-url-parser①">parsing</a> <var>pattern url</var>.</p>
     <li data-md>
      <p>If <var>url</var> is failure, return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors③⑨">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code③⑤">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument②④">invalid argument</a>.</p>
     <li data-md>
      <p>Let <var>parsed</var> be a struct with the following fields:</p>
      <dl>
       <dt>protocol 
       <dd><var>url</var>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-scheme" id="ref-for-concept-url-scheme①">scheme</a> if <var>has protocol</var> is true, or null otherwise. 
       <dt>hostname 
       <dd><var>url</var>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-host" id="ref-for-concept-url-host">host</a> if <var>has hostname</var> is true, or null otherwise. 
       <dt>port 
       <dd>
        <ol>
         <li data-md>
          <p>If <var>url</var>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-scheme" id="ref-for-concept-url-scheme②">scheme</a> <a data-link-type="dfn" href="https://url.spec.whatwg.org/#is-special" id="ref-for-is-special①">is special</a> and <var>url</var>’s</p>
        </ol>
         <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-scheme" id="ref-for-concept-url-scheme③">scheme</a>'s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#default-port" id="ref-for-default-port">default port</a> is not null, and <var>url</var>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-port" id="ref-for-concept-url-port">port</a> is
 null or is equal to <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-scheme" id="ref-for-concept-url-scheme④">scheme</a>'s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#default-port" id="ref-for-default-port①">default port</a>: 
        <ol>
         <li data-md>
          <p>The empty string.</p>
        </ol>
        <ol>
         <li data-md>
          <p>Otherwise, if <var>url</var>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-port" id="ref-for-concept-url-port①">port</a> is not null:</p>
          <ol>
           <li data-md>
            <p><a data-link-type="dfn" href="#serialize-an-integer" id="ref-for-serialize-an-integer①">Serialize an integer</a> with <var>url</var>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-port" id="ref-for-concept-url-port②">port</a>.</p>
          </ol>
         <li data-md>
          <p>Otherwise:</p>
          <ol>
           <li data-md>
            <p>null.</p>
          </ol>
        </ol>
       <dt>pathname 
       <dd>The result of running the <a data-link-type="dfn" href="https://url.spec.whatwg.org/#url-path-serializer" id="ref-for-url-path-serializer">URL path serializer</a> with <var>url</var>, if <var>url</var>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-path" id="ref-for-concept-url-path">path</a> is not the empty string and is not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty" id="ref-for-list-empty⑤">empty</a>,
       or null otherwise. 
       <dt>search 
       <dd><var>url</var>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-query" id="ref-for-concept-url-query">query</a>. 
      </dl>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success②⑦">success</a> with data <var>parsed</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="match URL pattern">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="match-url-pattern">match URL pattern</dfn> given <var>url pattern</var> and <var>url string</var>: 
    <ol>
     <li data-md>
      <p>Let <var>url</var> be the result of <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-parser" id="ref-for-concept-url-parser②">parsing</a> <var>url string</var>.</p>
     <li data-md>
      <p>If <var>url pattern</var>’s protocol is not null and is not equal to <var>url</var>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-scheme" id="ref-for-concept-url-scheme⑤">scheme</a>, return false.</p>
     <li data-md>
      <p>If <var>url pattern</var>’s hostname is not null and is not equal to <var>url</var>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-host" id="ref-for-concept-url-host①">host</a>, return false.</p>
     <li data-md>
      <p>If <var>url pattern</var>’s port is not null:</p>
      <ol>
       <li data-md>
        <p>Let <var>port</var> be null.</p>
       <li data-md>
        <p>If <var>url</var>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-scheme" id="ref-for-concept-url-scheme⑥">scheme</a> <a data-link-type="dfn" href="https://url.spec.whatwg.org/#is-special" id="ref-for-is-special②">is special</a> and <var>url</var>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-scheme" id="ref-for-concept-url-scheme⑦">scheme</a>'s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#default-port" id="ref-for-default-port②">default port</a> is not null, and <var>url</var>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-port" id="ref-for-concept-url-port③">port</a> is
  null or is equal to <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-scheme" id="ref-for-concept-url-scheme⑧">scheme</a>'s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#default-port" id="ref-for-default-port③">default port</a>:</p>
        <ol>
         <li data-md>
          <p>Set <var>port</var> to the empty string.</p>
        </ol>
       <li data-md>
        <p>Otherwise, if <var>url</var>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-port" id="ref-for-concept-url-port④">port</a>, is not null:</p>
        <ol>
         <li data-md>
          <p>Set <var>port</var> to <a data-link-type="dfn" href="#serialize-an-integer" id="ref-for-serialize-an-integer②">serialize an integer</a> with <var>url</var>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-port" id="ref-for-concept-url-port⑤">port</a>.</p>
        </ol>
       <li data-md>
        <p>If <var>url pattern</var>’s port is not equal to <var>port</var>, return false.</p>
      </ol>
     <li data-md>
      <p>If <var>url pattern</var>’s pathname is not null and is not equal to the result of
 running the <a data-link-type="dfn" href="https://url.spec.whatwg.org/#url-path-serializer" id="ref-for-url-path-serializer①">URL path serializer</a> with <var>url</var>, return false.</p>
     <li data-md>
      <p>If <var>url pattern</var>’s search is not null and is not equal to <var>url</var>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-query" id="ref-for-concept-url-query①">query</a>, return false.</p>
     <li data-md>
      <p>Return true.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="6.4.4" id="module-network-commands"><span class="secno">6.4.4. </span><span class="content">Commands</span><a class="self-link" href="#module-network-commands"></a></h4>
   <h5 class="heading settled" data-level="6.4.4.1" id="command-network-addIntercept"><span class="secno">6.4.4.1. </span><span class="content">The network.addIntercept Command</span><a class="self-link" href="#command-network-addIntercept"></a></h5>
   <p>The <dfn data-dfn-for="commands" data-dfn-type="dfn" data-export id="commands-networkaddintercept">network.addIntercept<a class="self-link" href="#commands-networkaddintercept"></a></dfn> command adds a <a data-link-type="dfn" href="#network-intercept" id="ref-for-network-intercept③">network intercept</a>.</p>
   <dl>
    <dt>Command Type
    <dd>
<pre class="cddl remote-cddl">network.AddIntercept = (
  method: "network.addIntercept",
  params: network.AddInterceptParameters
)

network.AddInterceptParameters = {
  phases: [+network.InterceptPhase],
  ? urlPatterns: [*network.UrlPattern],
}

network.InterceptPhase = "beforeRequestSent" / "responseStarted" /
                         "authRequired"
</pre>
    <dt>Return Type
    <dd>
<pre class="cddl local-cddl">network.AddInterceptResult = {
  intercept: network.Intercept
}
</pre>
   </dl>
   <div class="algorithm" data-algorithm="remote end steps for network.addRequestIntercept">
     The <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-end-steps" id="ref-for-dfn-remote-end-steps①⑧">remote end steps</a> given <var>session</var> and <var>command parameters</var> are: 
    <ol>
     <li data-md>
      <p>Let <var>intercept</var> be the string representation of a <a data-link-type="biblio" href="#biblio-rfc4122" title="A Universally Unique IDentifier (UUID) URN Namespace">UUID</a>.</p>
     <li data-md>
      <p>Let <var>url patterns</var> be the <code>urlPatterns</code> field of <var>command
 parameters</var> if present, or an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list⑥">list</a> otherwise.</p>
     <li data-md>
      <p>Let <var>intercept map</var> be <var>session</var>’s <a data-link-type="dfn" href="#intercept-map" id="ref-for-intercept-map①">intercept map</a>.</p>
     <li data-md>
      <p>Let <var>parsed patterns</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list⑦">list</a>.</p>
     <li data-md>
      <p>For each <var>url pattern</var> in <var>url patterns</var>:</p>
      <ol>
       <li data-md>
        <p>Let <var>parsed</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try②⑤">trying</a> to <a data-link-type="dfn" href="#parse-url-pattern" id="ref-for-parse-url-pattern">parse url pattern</a> with <var>url
 pattern</var>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append③">Append</a> <var>parsed</var> to <var>parsed patterns</var>.</p>
      </ol>
     <li data-md>
      <p>Set <var>intercept map</var>[<var>intercept</var>] to a struct with <code>url patterns</code> <var>parsed patterns</var> and <code>phases</code> <var>command parameters</var>["<code>phases</code>"].</p>
     <li data-md>
      <p>Return a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map④⑦">map</a> matching the <code>network.AddInterceptResult</code> production with the <code>intercept</code> field set to <var>intercept</var>.</p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.4.4.2" id="command-network-continueRequest"><span class="secno">6.4.4.2. </span><span class="content">The network.continueRequest Command</span><a class="self-link" href="#command-network-continueRequest"></a></h5>
   <p>The <dfn data-dfn-for="commands" data-dfn-type="dfn" data-export id="commands-networkcontinuerequest">network.continueRequest<a class="self-link" href="#commands-networkcontinuerequest"></a></dfn> command continues a request
that’s blocked by a <a data-link-type="dfn" href="#network-intercept" id="ref-for-network-intercept④">network intercept</a>.</p>
   <dl>
    <dt>Command Type
    <dd>
<pre class="cddl remote-cddl">network.ContinueRequest = (
  method: "network.continueRequest",
  params: network.ContinueRequestParameters
)

network.ContinueRequestParameters = {
  request: network.Request,
  ?body: network.BytesValue,
  ?cookies: [*network.CookieHeader],
  ?headers: [*network.Header],
  ?method: text,
  ?url: text,
}
</pre>
    <dt>Return Type
    <dd>
<pre class="cddl">EmptyResult
</pre>
   </dl>
   <div class="algorithm" data-algorithm="remote end steps for network.continueRequest">
     The <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-end-steps" id="ref-for-dfn-remote-end-steps①⑨">remote end steps</a> given <var>session</var> and <var>command parameters</var> are: 
    <ol>
     <li data-md>
      <p>Let <var>blocked requests</var> be <var>session</var>’s <a data-link-type="dfn" href="#blocked-request-map" id="ref-for-blocked-request-map">blocked request map</a>.</p>
     <li data-md>
      <p>Let <var>request id</var> be <var>command parameters</var>["<code>request</code>"].</p>
     <li data-md>
      <p>If <var>blocked requests</var> does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①⑤">contain</a> <var>request id</var> then return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors④⓪">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code③⑥">error code</a> <a data-link-type="dfn" href="#no-such-request" id="ref-for-no-such-request">no such request</a>.</p>
     <li data-md>
      <p>Let (<var>request</var>, <var>phase</var>, <var>response</var>) be <var>blocked requests</var>[<var>request id</var>].</p>
     <li data-md>
      <p>If <var>phase</var> is not "<code>beforeRequestSent</code>", then return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors④①">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code③⑦">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument②⑤">invalid argument</a>.</p>
      <p class="issue" id="issue-674c4ab4"><a class="self-link" href="#issue-674c4ab4"></a> consider a "<code>request already sent</code>" error.</p>
     <li data-md>
      <p>If <var>command parameters</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①⑥">contains</a> "<code>url</code>":</p>
      <ol>
       <li data-md>
        <p>Let <var>url record</var> be the result of applying the <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-parser" id="ref-for-concept-url-parser③">URL parser</a> to <var>command
 parameters</var>["<code>url</code>"], with <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-script-base-url" id="ref-for-concept-script-base-url②">base URL</a> null.</p>
       <li data-md>
        <p>If <var>url record</var> is failure, return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors④②">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code③⑧">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument②⑥">invalid
 argument</a>.</p>
        <p>TODO: Should we also resume here?</p>
       <li data-md>
        <p>Let <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-url" id="ref-for-concept-request-url②">url</a> be <var>url record</var>.</p>
      </ol>
     <li data-md>
      <p>If <var>command parameters</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①⑦">contains</a> "<code>method</code>":</p>
      <ol>
       <li data-md>
        <p>Let <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-method" id="ref-for-concept-request-method①">method</a> be <var>command
 parameters</var>["<code>method</code>"].</p>
      </ol>
     <li data-md>
      <p>If <var>command parameters</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①⑧">contains</a> "<code>headers</code>":</p>
      <ol>
       <li data-md>
        <p>Let <var>headers</var> be an empty <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header-list" id="ref-for-concept-header-list">header list</a>.</p>
       <li data-md>
        <p>For <var>header</var> in <var>command parameters</var>["<code>headers</code>"]:</p>
        <ol>
         <li data-md>
          <p>Append <a data-link-type="dfn" href="#deserialize-header" id="ref-for-deserialize-header">deserialize header</a> with <var>header</var> to <var>headers</var>.</p>
        </ol>
       <li data-md>
        <p>Set <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-header-list" id="ref-for-concept-request-header-list②">headers list</a> to <var>headers</var>.</p>
      </ol>
     <li data-md>
      <p>If <var>command parameters</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①⑨">contains</a> "<code>cookies</code>":</p>
      <ol>
       <li data-md>
        <p>Let <var>cookie header</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence⑤">byte sequence</a>.</p>
       <li data-md>
        <p>For each <var>cookie</var> in <var>command parameters</var>:</p>
        <ol>
         <li data-md>
          <p>If <var>cookie header</var> is not empty, append `<code>;</code>` to <var>cookie
 header</var>.</p>
         <li data-md>
          <p>Append <a data-link-type="dfn" href="#serialize-cookie-header" id="ref-for-serialize-cookie-header">serialize cookie header</a> with <var>cookie</var> to <var>cookie header</var>.</p>
        </ol>
       <li data-md>
        <p>Let <var>found cookie header</var> be false.</p>
       <li data-md>
        <p>For each <var>header</var> in <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-header-list" id="ref-for-concept-request-header-list③">headers list</a>:</p>
        <ol>
         <li data-md>
          <p>Let <var>name</var> be <var>header</var>’s name.</p>
         <li data-md>
          <p>If <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-lowercase" id="ref-for-byte-lowercase">byte-lowercase</a> <var>name</var> is `<code>cookie</code>`:</p>
          <ol>
           <li data-md>
            <p>Set <var>header</var>’s value to <var>cookie header</var>.</p>
           <li data-md>
            <p>Set <var>found cookie header</var> to true.</p>
           <li data-md>
            <p>Break.</p>
          </ol>
        </ol>
       <li data-md>
        <p>If <var>found cookie header</var> is false:</p>
        <ol>
         <li data-md>
          <p>Append the <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header" id="ref-for-concept-header①">header</a> (`<code>Cookie</code>`, <var>cookie header</var>) to <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-header-list" id="ref-for-concept-request-header-list④">headers list</a>.</p>
        </ol>
      </ol>
     <li data-md>
      <p>If <var>command parameters</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists②⓪">contains</a> "<code>body</code>":</p>
      <ol>
       <li data-md>
        <p>Let <var>body</var> be <a data-link-type="dfn" href="#deserialize-protocol-bytes" id="ref-for-deserialize-protocol-bytes③">deserialize protocol bytes</a> with <var>command
 parameters</var>["<code>body</code>"].</p>
       <li data-md>
        <p>Set <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-body" id="ref-for-concept-request-body①">body</a> to <var>body</var>.</p>
      </ol>
     <li data-md>
      <p><a data-link-type="dfn" href="#resume" id="ref-for-resume⑦">Resume</a> with "<code>continue request</code>", <var>request id</var>, and (null,
 "<code>incomplete</code>").</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success②⑧">success</a> with <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-cd-data" id="ref-for-concept-cd-data">data</a> null.</p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.4.4.3" id="command-network-continueResponse"><span class="secno">6.4.4.3. </span><span class="content">The network.continueResponse Command</span><a class="self-link" href="#command-network-continueResponse"></a></h5>
   <p>The <dfn data-dfn-for="commands" data-dfn-type="dfn" data-export id="commands-networkcontinueresponse">network.continueResponse<a class="self-link" href="#commands-networkcontinueresponse"></a></dfn> command continues a
response that’s blocked by a <a data-link-type="dfn" href="#network-intercept" id="ref-for-network-intercept⑤">network intercept</a>. It can be called in the <code>responseStarted</code> phase, to modify the status and headers of the
response, but still provide the network response body.</p>
   <dl>
    <dt>Command Type
    <dd>
<pre class="cddl remote-cddl">network.ContinueResponse = (
  method: "network.continueResponse",
  params: network.ContinueResponseParameters
)

network.ContinueResponseParameters = {
  request: network.Request,
  ?cookies: [*network.SetCookieHeader]
  ?credentials: network.AuthCredentials,
  ?headers: [*network.Header],
  ?reasonPhrase: text,
  ?statusCode: js-uint,
}
</pre>
    <dt>Return Type
    <dd>
<pre class="cddl">EmptyResult
</pre>
   </dl>
   <div class="algorithm" data-algorithm="update the response">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="update-the-response">update the response</dfn> given <var>session</var>, <var>command</var> and <var>command parameters</var>: 
    <ol>
     <li data-md>
      <p>Let <var>blocked requests</var> be <var>session</var>’s <a data-link-type="dfn" href="#blocked-request-map" id="ref-for-blocked-request-map①">blocked request map</a>.</p>
     <li data-md>
      <p>Let <var>request id</var> be <var>command parameters</var>["<code>request</code>"].</p>
     <li data-md>
      <p>If <var>blocked requests</var> does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists②①">contain</a> <var>request id</var> then return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors④③">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code③⑨">error code</a> <a data-link-type="dfn" href="#no-such-request" id="ref-for-no-such-request①">no such request</a>.</p>
     <li data-md>
      <p>Let (<var>request</var>, <var>phase</var>, <var>response</var>) be <var>blocked requests</var>[<var>request id</var>].</p>
     <li data-md>
      <p>If <var>phase</var> is "<code>beforeRequestSent</code>" and <var>command</var> is
 "<code>continueResponse</code>", return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors④④">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code④⓪">error code</a> "<code>invalid argument</code>".</p>
      <p>TODO: Consider a different error</p>
     <li data-md>
      <p>If <var>response</var> is null:</p>
      <ol>
       <li data-md>
        <p class="assertion">Assert: <var>phase</var> is "<code>beforeRequestSent</code>".</p>
       <li data-md>
        <p>Set <var>response</var> to a new <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response" id="ref-for-concept-response">response</a>.</p>
      </ol>
     <li data-md>
      <p>If <var>command parameters</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists②②">contains</a> "<code>statusCode</code>":</p>
      <ol>
       <li data-md>
        <p>Set <var>responses</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-status" id="ref-for-concept-response-status③">status</a> be <var>command
 parameters</var>["<code>statusCode</code>"].</p>
      </ol>
     <li data-md>
      <p>If <var>command parameters</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists②③">contains</a> "<code>reasonPhrase</code>":</p>
      <ol>
       <li data-md>
        <p>Set <var>responses</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-status-message" id="ref-for-concept-response-status-message①">status message</a> be <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8-encode" id="ref-for-utf-8-encode⑨">UTF-8 encode</a> with <var>command parameters</var>["<code>reasonPhrase</code>"].</p>
      </ol>
     <li data-md>
      <p>If <var>command parameters</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists②④">contains</a> "<code>headers</code>":</p>
      <ol>
       <li data-md>
        <p>Let <var>headers</var> be an empty <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header-list" id="ref-for-concept-header-list①">header list</a>.</p>
       <li data-md>
        <p>For <var>header</var> in <var>command parameters</var>["<code>headers</code>"]:</p>
        <ol>
         <li data-md>
          <p>Append <a data-link-type="dfn" href="#deserialize-header" id="ref-for-deserialize-header①">deserialize header</a> with <var>header</var> to <var>headers</var>.</p>
        </ol>
       <li data-md>
        <p>Set <var>response</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-header-list" id="ref-for-concept-response-header-list②">header list</a> to <var>headers</var>.</p>
      </ol>
     <li data-md>
      <p>If <var>command parameters</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists②⑤">contains</a> "<code>cookies</code>":</p>
      <ol>
       <li data-md>
        <p>If <var>command parameters</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists②⑥">contains</a> "<code>headers</code>", let <var>headers</var> be <var>response</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-header-list" id="ref-for-concept-response-header-list③">header list</a>.</p>
        <p>Otherwise:</p>
        <ol>
         <li data-md>
          <p>Let <var>headers</var> be an empty <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header-list" id="ref-for-concept-header-list②">header list</a>.</p>
         <li data-md>
          <p>For each <var>header</var> in <var>response</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-header-list" id="ref-for-concept-response-header-list④">headers list</a>:</p>
          <ol>
           <li data-md>
            <p>Let <var>name</var> be <var>header</var>’s name.</p>
           <li data-md>
            <p>If <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-lowercase" id="ref-for-byte-lowercase①">byte-lowercase</a> <var>name</var> is not `<code>set-cookie</code>`:</p>
            <ol>
             <li data-md>
              <p>Append <var>header</var> to <var>headers</var></p>
            </ol>
          </ol>
        </ol>
       <li data-md>
        <p>For <var>cookie</var> in <var>command parameters</var>["<code>cookies</code>"]:</p>
        <ol>
         <li data-md>
          <p>Let <var>header value</var> be <a data-link-type="dfn" href="#serialize-set-cookie-header" id="ref-for-serialize-set-cookie-header">serialize set-cookie header</a> with <var>cookie</var>.</p>
         <li data-md>
          <p>Append (`<code>Set-Cookie</code>`, <var>header value</var>) to <var>headers</var>.</p>
         <li data-md>
          <p>Set <var>response</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-header-list" id="ref-for-concept-response-header-list⑤">header list</a> to <var>headers</var>.</p>
        </ol>
      </ol>
     <li data-md>
      <p>If <var>command parameters</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists②⑦">contains</a> "<code>credentials</code>":</p>
      <p class="issue" id="issue-2a7f19c6"><a class="self-link" href="#issue-2a7f19c6"></a> This doesn’t have a way to cancel the auth.</p>
      <ol>
       <li data-md>
        <p>Let <var>credentials</var> be <var>command parameters</var>["<code>credentials</code>"].</p>
       <li data-md>
        <p class="assertion">Assert: <var>credentials</var>{"<code>type</code>"] is "<code>password</code>".</p>
       <li data-md>
        <p>Set <var>response</var>’s authentication credentials  to
  (<var>credentials</var>["<code>username</code>"], <var>credentials</var>["<code>password</code>"])</p>
      </ol>
     <li data-md>
      <p>Return <var>response</var></p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="remote end steps for network.continueResponse">
     The <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-end-steps" id="ref-for-dfn-remote-end-steps②⓪">remote end steps</a> given <var>session</var> and <var>command parameters</var> are: 
    <ol>
     <li data-md>
      <p>Let <var>request id</var> be <var>command parameters</var>["<code>request</code>"].</p>
     <li data-md>
      <p>Let <var>response</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try②⑥">trying</a> to <a data-link-type="dfn" href="#update-the-response" id="ref-for-update-the-response">update the response</a> with <var>session</var>, "<code>continueResponse</code>" and <var>command parameters</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="#resume" id="ref-for-resume⑧">Resume</a> with "<code>continue request</code>", <var>request id</var>, and
 (<var>response</var>, "<code>incomplete</code>").</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success②⑨">success</a> with <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-cd-data" id="ref-for-concept-cd-data①">data</a> null.</p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.4.4.4" id="command-network-continueWithAuth"><span class="secno">6.4.4.4. </span><span class="content">The network.continueWithAuth Command</span><a class="self-link" href="#command-network-continueWithAuth"></a></h5>
   <p>The <dfn data-dfn-for="commands" data-dfn-type="dfn" data-export id="commands-networkcontinuewithauth">network.continueWithAuth<a class="self-link" href="#commands-networkcontinuewithauth"></a></dfn> command continues a
response that’s blocked by a <a data-link-type="dfn" href="#network-intercept" id="ref-for-network-intercept⑥">network intercept</a> at the <code>authRequired</code> phase.</p>
   <dl>
    <dt>Command Type
    <dd>
<pre class="cddl remote-cddl">network.ContinueWithAuth = (
  method: "network.continueWithAuth",
  params: network.ContinueWithAuthParameters
)

network.ContinueWithAuthParameters = {
  request: network.Request,
  (network.ContinueWithAuthCredentials // network.ContinueWithAuthNoCredentials)
}

network.ContinueWithAuthCredentials = (
  action: "provideCredentials", 
  credentials: network.AuthCredentials
)

network.ContinueWithAuthNoCredentials = (
  action: "default" / "cancel"
)
</pre>
    <dt>Return Type
    <dd>
<pre class="cddl">EmptyResult
</pre>
   </dl>
   <div class="algorithm" data-algorithm="remote end steps for network.continueWithAuth">
     The <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-end-steps" id="ref-for-dfn-remote-end-steps②①">remote end steps</a> given <var>session</var> and <var>command parameters</var> are: 
    <ol>
     <li data-md>
      <p>Let <var>blocked requests</var> be <var>session</var>’s <a data-link-type="dfn" href="#blocked-request-map" id="ref-for-blocked-request-map②">blocked request map</a>.</p>
     <li data-md>
      <p>Let <var>request id</var> be <var>command parameters</var>["<code>request</code>"].</p>
     <li data-md>
      <p>If <var>blocked requests</var> does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists②⑧">contain</a> <var>request id</var> then return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors④⑤">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code④①">error code</a> <a data-link-type="dfn" href="#no-such-request" id="ref-for-no-such-request②">no such request</a>.</p>
     <li data-md>
      <p>Let (<var>request</var>, <var>phase</var>, <var>response</var>) be <var>blocked requests</var>[<var>request id</var>].</p>
     <li data-md>
      <p>If <var>phase</var> is not "<code>authRequired</code>", then return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors④⑥">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code④②">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument②⑦">invalid argument</a>.</p>
     <li data-md>
      <p>If <var>command parameters</var> "<code>action</code> is "<code>cancel</code>", set <var>response</var>’s authentication credentials  to
 "<code>cancelled</code>".</p>
     <li data-md>
      <p>If <var>command parameters</var> "<code>action</code>" is
 "<code>provideCredentials</code>":</p>
      <ol>
       <li data-md>
        <p>Let <var>credentials</var> be <var>command parameters</var>["<code>credentials</code>"].</p>
       <li data-md>
        <p class="assertion">Assert: <var>credentials</var>["<code>type</code>"] is "<code>password</code>".</p>
       <li data-md>
        <p>Set <var>response</var>’s authentication credentials  to
  (<var>credentials</var>["<code>username</code>"], <var>credentials</var>["<code>password</code>"])</p>
      </ol>
     <li data-md>
      <p><a data-link-type="dfn" href="#resume" id="ref-for-resume⑨">Resume</a> with "<code>continue request</code>", <var>request id</var>, and
 (<var>response</var>, "<code>incomplete</code>").</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success③⓪">success</a> with <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-cd-data" id="ref-for-concept-cd-data②">data</a> null.</p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.4.4.5" id="command-network-failRequest"><span class="secno">6.4.4.5. </span><span class="content">The network.failRequest Command</span><a class="self-link" href="#command-network-failRequest"></a></h5>
   <p>The <dfn data-dfn-for="commands" data-dfn-type="dfn" data-export id="commands-networkfailrequest">network.failRequest<a class="self-link" href="#commands-networkfailrequest"></a></dfn> command fails a
fetch that’s blocked by a <a data-link-type="dfn" href="#network-intercept" id="ref-for-network-intercept⑦">network intercept</a>.</p>
   <dl>
    <dt>Command Type
    <dd>
<pre class="cddl remote-cddl">network.FailRequest = (
  method: "network.failRequest",
  params: network.FailRequestParameters
)

network.FailRequestParameters = {
  request: network.Request,
}
</pre>
    <dt>Return Type
    <dd>
<pre class="cddl">EmptyResult
</pre>
   </dl>
   <div class="algorithm" data-algorithm="remote end steps for network.failRequest">
     The <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-end-steps" id="ref-for-dfn-remote-end-steps②②">remote end steps</a> given <var>session</var> and <var>command parameters</var> are: 
    <ol>
     <li data-md>
      <p>Let <var>blocked requests</var> be <var>session</var>’s <a data-link-type="dfn" href="#blocked-request-map" id="ref-for-blocked-request-map③">blocked request map</a>.</p>
     <li data-md>
      <p>Let <var>request id</var> be <var>command parameters</var>["<code>request</code>"].</p>
     <li data-md>
      <p>If <var>blocked requests</var> does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists②⑨">contain</a> <var>request id</var> then return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors④⑦">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code④③">error code</a> <a data-link-type="dfn" href="#no-such-request" id="ref-for-no-such-request③">no such request</a>.</p>
     <li data-md>
      <p>Let (<var>request</var>, <var>phase</var>, <var>response</var>) be <var>blocked requests</var>[<var>request id</var>].</p>
     <li data-md>
      <p>If <var>phase</var> is "<code>authRequired</code>", then return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors④⑧">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code④④">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument②⑧">invalid argument</a>.</p>
     <li data-md>
      <p>Let <var>response</var> be a new <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-network-error" id="ref-for-concept-network-error">network error</a>.</p>
      <p class="issue" id="issue-6015124b"><a class="self-link" href="#issue-6015124b"></a> Allow setting the precise kind of error <a href="https://github.com/w3c/webdriver-bidi/issues/508">[Issue #508]</a></p>
     <li data-md>
      <p><a data-link-type="dfn" href="#resume" id="ref-for-resume①⓪">Resume</a> with "<code>continue request</code>", <var>request id</var>, and
 (<var>response</var>, "<code>complete</code>").</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success③①">success</a> with data null.</p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.4.4.6" id="command-network-provideResponse"><span class="secno">6.4.4.6. </span><span class="content">The network.provideResponse Command</span><a class="self-link" href="#command-network-provideResponse"></a></h5>
   <p>The <dfn data-dfn-for="commands" data-dfn-type="dfn" data-export id="commands-networkprovideresponse">network.provideResponse<a class="self-link" href="#commands-networkprovideresponse"></a></dfn> command continues a
request that’s blocked by a <a data-link-type="dfn" href="#network-intercept" id="ref-for-network-intercept⑧">network intercept</a>, by providing a complete
response.</p>
   <p class="note" role="note"><span class="marker">Note:</span> This will not prevent the request going through the normal request
lifecycle, and therefore emitting other events as it progresses.</p>
   <dl>
    <dt>Command Type
    <dd>
<pre class="cddl remote-cddl">network.ProvideResponse = (
  method: "network.provideResponse",
  params: network.ProvideResponseParameters
)

network.ProvideResponseParameters = {
  request: network.Request,
  ?body: network.BytesValue,
  ?cookies: [*network.SetCookieHeader],
  ?headers: [*network.Header],
  ?reasonPhrase: text,
  ?statusCode: js-uint,
}
</pre>
    <dt>Return Type
    <dd>
<pre class="cddl">EmptyResult
</pre>
   </dl>
   <div class="algorithm" data-algorithm="remote end steps for network.provideResponse">
     The <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-end-steps" id="ref-for-dfn-remote-end-steps②③">remote end steps</a> given <var>session</var> and <var>command parameters</var> are: 
    <ol>
     <li data-md>
      <p>Let <var>request id</var> be <var>command parameters</var>["<code>request</code>"].</p>
     <li data-md>
      <p>Let <var>response</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try②⑦">trying</a> to <a data-link-type="dfn" href="#update-the-response" id="ref-for-update-the-response①">update the response</a> with <var>session</var>, "<code>provideResponse</code>", and <var>command parameters</var>.</p>
     <li data-md>
      <p>If <var>command parameters</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists③⓪">contains</a> "<code>body</code>":</p>
      <ol>
       <li data-md>
        <p>Let <var>body</var> be <a data-link-type="dfn" href="#deserialize-protocol-bytes" id="ref-for-deserialize-protocol-bytes④">deserialize protocol bytes</a> with <var>command
 parameters</var>["<code>body</code>"].</p>
       <li data-md>
        <p>Set <var>response</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-body" id="ref-for-concept-response-body">body</a> to <var>body</var> <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#byte-sequence-as-a-body" id="ref-for-byte-sequence-as-a-body">as a body</a>.</p>
      </ol>
     <li data-md>
      <p><a data-link-type="dfn" href="#resume" id="ref-for-resume①①">Resume</a> with "<code>continue request</code>", <var>request id</var>, and
 (<var>response</var>,"<code>complete</code>").</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success③②">success</a> with <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-cd-data" id="ref-for-concept-cd-data③">data</a> null.</p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.4.4.7" id="command-network-removeIntercept"><span class="secno">6.4.4.7. </span><span class="content">The network.removeIntercept Command</span><a class="self-link" href="#command-network-removeIntercept"></a></h5>
   <p>The <dfn data-dfn-for="commands" data-dfn-type="dfn" data-export id="commands-networkremoveintercept">network.removeIntercept<a class="self-link" href="#commands-networkremoveintercept"></a></dfn> command removes a <a data-link-type="dfn" href="#network-intercept" id="ref-for-network-intercept⑨">network intercept</a>.</p>
   <dl>
    <dt>Command Type
    <dd>
<pre class="cddl remote-cddl">network.RemoveIntercept = (
  method: "network.removeIntercept",
  params: network.RemoveInterceptParameters
)

network.RemoveInterceptParameters = {
  intercept: network.Intercept
}
</pre>
    <dt>Return Type
    <dd>
<pre class="cddl">EmptyResult
</pre>
   </dl>
   <div class="algorithm" data-algorithm="remote end steps for network.removeIntercept">
     The <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-end-steps" id="ref-for-dfn-remote-end-steps②④">remote end steps</a> given <var>session</var> and <var>command parameters</var> are: 
    <ol>
     <li data-md>
      <p>Let <var>intercept</var> be the value of the "<code>intercept</code>" field in <var>command
 parameters</var>.</p>
     <li data-md>
      <p>Let <var>intercept map</var> be <var>session</var>’s <a data-link-type="dfn" href="#intercept-map" id="ref-for-intercept-map②">intercept map</a>.</p>
     <li data-md>
      <p>If <var>intercept map</var> does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists③①">contain</a> <var>intercept</var>, return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors④⑨">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code④⑤">error code</a> <a data-link-type="dfn" href="#no-such-intercept" id="ref-for-no-such-intercept">no such intercept</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-remove" id="ref-for-map-remove">Remove</a> <var>intercept</var> from <var>intercept map</var>.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success③③">success</a> with data <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-null-value" id="ref-for-sec-null-value">null</a>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="6.4.5" id="module-network-event"><span class="secno">6.4.5. </span><span class="content">Events</span><a class="self-link" href="#module-network-event"></a></h4>
   <h5 class="heading settled" data-level="6.4.5.1" id="event-network-authRequired"><span class="secno">6.4.5.1. </span><span class="content">The network.authRequired Event</span><a class="self-link" href="#event-network-authRequired"></a></h5>
   <dl>
    <dt>Event Type
    <dd>
<pre class="cddl local-cddl">network.AuthRequired = (
  method: "network.authRequired",
  params: network.AuthRequiredParameters
)

network.AuthRequiredParameters = {
  network.BaseParameters,
  response: network.ResponseData
}
</pre>
    <dt>Return Type
    <dd>
<pre class="cddl">EmptyResult
</pre>
   </dl>
   <p>This event is emitted when the user agent is going to prompt for authorization
credentials.</p>
   <div class="algorithm" data-algorithm="WebDriver BiDi auth required">
     The <a data-link-type="dfn" href="#remote-end-event-trigger" id="ref-for-remote-end-event-trigger①①">remote end event trigger</a> is the <dfn data-dfn-type="dfn" data-export id="webdriver-bidi-auth-required">WebDriver BiDi auth required<a class="self-link" href="#webdriver-bidi-auth-required"></a></dfn> steps given <var>request</var> and <var>response</var>: 
    <ol>
     <li data-md>
      <p>Let <var>redirect count</var> be <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-redirect-count" id="ref-for-concept-request-redirect-count①">redirect count</a>.</p>
     <li data-md>
      <p class="assertion">Assert: <a data-link-type="dfn" href="#before-request-sent-map" id="ref-for-before-request-sent-map">before request sent map</a>[<var>request</var>] is equal to <var>redirect count</var>.</p>
      <p class="note" role="note"><span class="marker">Note:</span> This implies that every caller needs to ensure that the <a data-link-type="dfn" href="#webdriver-bidi-before-request-sent" id="ref-for-webdriver-bidi-before-request-sent">WebDriver BiDi
 before request sent</a> steps are invoked with <var>request</var> before these steps.</p>
     <li data-md>
      <p>If <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-client" id="ref-for-concept-request-client②">client</a> is not null, let <var>related browsing contexts</var> be the result of <a data-link-type="dfn" href="#get-related-browsing-contexts" id="ref-for-get-related-browsing-contexts">get related browsing contexts</a> with <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-client" id="ref-for-concept-request-client③">client</a>. Otherwise let <var>related browsing contexts</var> be an empty
 set.</p>
     <li data-md>
      <p>For each <var>session</var> in the <a data-link-type="dfn" href="#set-of-sessions-for-which-an-event-is-enabled" id="ref-for-set-of-sessions-for-which-an-event-is-enabled①①">set of sessions for which an event is enabled</a> given "<code>network.authRequired</code>" and <var>related browsing contexts</var>:</p>
      <ol>
       <li data-md>
        <p>Let <var>params</var> be the result of <a data-link-type="dfn" href="#process-a-network-event" id="ref-for-process-a-network-event">process a network event</a> with <var>session</var> "<code>network.authRequired</code>", and <var>request</var>.</p>
       <li data-md>
        <p>Let <var>response data</var> be the result of <a data-link-type="dfn" href="#get-the-response-data" id="ref-for-get-the-response-data">get the response data</a> with <var>response</var>.</p>
       <li data-md>
        <p class="assertion">Assert: <var>response data</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists③②">contains</a> "<code>authChallenge</code>".</p>
       <li data-md>
        <p>Set the <code>response</code> field of <var>params</var> to <var>response data</var>.</p>
       <li data-md>
        <p class="assertion">Assert: <var>params</var> matches the <code>network.AuthRequiredParameters</code> production.</p>
       <li data-md>
        <p>Let <var>body</var> be a map matching the <code>network.AuthRequired</code> production, with the <code>params</code> field set to <var>params</var>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="#emit-an-event" id="ref-for-emit-an-event①①">Emit an event</a> with <var>session</var> and <var>body</var>.</p>
       <li data-md>
        <p>If <var>params</var>["<code>isBlocked</code>"] is true:</p>
        <ol>
         <li data-md>
          <p>Let <var>blocked requests</var> be <var>session</var>’s <a data-link-type="dfn" href="#blocked-request-map" id="ref-for-blocked-request-map④">blocked request map</a>.</p>
         <li data-md>
          <p>Let <var>request id</var> be <var>request</var>’s <a data-link-type="dfn" href="#request-id" id="ref-for-request-id③">request id</a>.</p>
         <li data-md>
          <p>Set <var>blocked requests</var>[<var>request id</var>] to (<var>request</var>,
 "<code>authRequired</code>", <var>response</var>).</p>
         <li data-md>
          <p><a data-link-type="dfn" href="#awaits" id="ref-for-awaits③">Await</a> with «"<code>continue request</code>"», and <var>request id</var>.</p>
        </ol>
      </ol>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.4.5.2" id="event-network-beforeSendRequest"><span class="secno">6.4.5.2. </span><span class="content">The network.beforeRequestSent Event</span><a class="self-link" href="#event-network-beforeSendRequest"></a></h5>
   <dl>
    <dt>Event Type
    <dd>
<pre class="cddl local-cddl"> network.BeforeRequestSent = (
  method: "network.beforeRequestSent",
  params: network.BeforeRequestSentParameters
 )

network.BeforeRequestSentParameters = {
  network.BaseParameters,
  initiator: network.Initiator,
}
</pre>
   </dl>
   <p>This event is emitted before a request is sent (either over the network or
before it’s handled by a serviceworker or a local cache).</p>
   <div class="algorithm" data-algorithm="WebDriver BiDi before request sent">
     The <a data-link-type="dfn" href="#remote-end-event-trigger" id="ref-for-remote-end-event-trigger①②">remote end event trigger</a> is the <dfn class="dfn-paneled" data-dfn-type="dfn" data-export data-lt="WebDriver BiDi before request sent" id="webdriver-bidi-before-request-sent">WebDriver BiDi before
request sent</dfn> steps given <var>request</var>: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="#before-request-sent-map" id="ref-for-before-request-sent-map①">before request sent map</a> does not contain <var>request</var>, set <a data-link-type="dfn" href="#before-request-sent-map" id="ref-for-before-request-sent-map②">before
 request sent map</a>[<var>request</var>] to a new set.</p>
     <li data-md>
      <p>Let <var>redirect count</var> be <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-redirect-count" id="ref-for-concept-request-redirect-count②">redirect count</a>.</p>
     <li data-md>
      <p>Add <var>redirect count</var> to <a data-link-type="dfn" href="#before-request-sent-map" id="ref-for-before-request-sent-map③">before request sent map</a>[<var>request</var>].</p>
     <li data-md>
      <p>If <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-client" id="ref-for-concept-request-client④">client</a> is not null, let <var>related browsing contexts</var> be the result of <a data-link-type="dfn" href="#get-related-browsing-contexts" id="ref-for-get-related-browsing-contexts①">get related browsing contexts</a> with <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-client" id="ref-for-concept-request-client⑤">client</a>. Otherwise let <var>related browsing contexts</var> be an empty
 set.</p>
     <li data-md>
      <p>Let <var>response</var> be null.</p>
     <li data-md>
      <p>Let <var>response status</var> be "<code>incomplete</code>".</p>
     <li data-md>
      <p>For each <var>session</var> in the <a data-link-type="dfn" href="#set-of-sessions-for-which-an-event-is-enabled" id="ref-for-set-of-sessions-for-which-an-event-is-enabled①②">set of sessions for which an event is enabled</a> given "<code>network.beforeRequestSent</code>" and <var>related browsing contexts</var>:</p>
      <ol>
       <li data-md>
        <p>Let <var>params</var> be the result of <a data-link-type="dfn" href="#process-a-network-event" id="ref-for-process-a-network-event①">process a network event</a> with <var>session</var>,
 "<code>network.beforeRequestSent</code>", and <var>request</var>.</p>
       <li data-md>
        <p>If <var>params</var> is null then continue.</p>
       <li data-md>
        <p>Let <var>initiator</var> be the result of <a data-link-type="dfn" href="#get-the-initiator" id="ref-for-get-the-initiator">get the initiator</a> with <var>request</var>.</p>
       <li data-md>
        <p>Set the <code>initiator</code> field of <var>params</var> to <var>initiator</var>.</p>
       <li data-md>
        <p class="assertion">Assert: <var>params</var> matches the <code>network.BeforeRequestSentParameters</code> production.</p>
       <li data-md>
        <p>Let <var>body</var> be a map matching the <code>network.BeforeRequestSent</code> production, with the <code>params</code> field set to <var>params</var>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="#emit-an-event" id="ref-for-emit-an-event①②">Emit an event</a> with <var>session</var> and <var>body</var>.</p>
       <li data-md>
        <p>If <var>params</var>["<code>isBlocked</code>"] is true, then:</p>
        <ol>
         <li data-md>
          <p>Let <var>blocked requests</var> be <var>session</var>’s <a data-link-type="dfn" href="#blocked-request-map" id="ref-for-blocked-request-map⑤">blocked request map</a>.</p>
         <li data-md>
          <p>Let <var>request id</var> be <var>request</var>’s <a data-link-type="dfn" href="#request-id" id="ref-for-request-id④">request id</a>.</p>
         <li data-md>
          <p>Set <var>blocked requests</var>[<var>request id</var>] to (<var>request</var>,
 "<code>beforeRequestSent</code>", null).</p>
         <li data-md>
          <p>Let (<var>response</var>, <var>status</var>) be <a data-link-type="dfn" href="#awaits" id="ref-for-awaits④">await</a> with «"<code>continue
 request</code>"», and <var>request</var>’s <a data-link-type="dfn" href="#request-id" id="ref-for-request-id⑤">request id</a>.</p>
         <li data-md>
          <p>If <var>status</var> is "<code>complete</code>" set <var>response status</var> to <var>status</var>.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-remove" id="ref-for-map-remove①">Remove</a> <var>blocked requests</var>[<var>request id</var>].</p>
        </ol>
        <p class="note" role="note"><span class="marker">Note:</span> While waiting, no further processing of the request occurs.</p>
      </ol>
     <li data-md>
      <p>Return (<var>response</var>, <var>response status</var>).</p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.4.5.3" id="event-network-fetchError"><span class="secno">6.4.5.3. </span><span class="content">The network.fetchError Event</span><a class="self-link" href="#event-network-fetchError"></a></h5>
   <dl>
    <dt>Event Type
    <dd>
<pre class="cddl local-cddl"> network.FetchError = (
  method: "network.fetchError",
  params: network.FetchErrorParameters
 )

network.FetchErrorParameters = {
  network.BaseParameters,
  errorText: text,
}
</pre>
   </dl>
   <p>This event is emitted when a network request ends in an error.</p>
   <div class="algorithm" data-algorithm="WebDriver BiDi fetch error">
     The <a data-link-type="dfn" href="#remote-end-event-trigger" id="ref-for-remote-end-event-trigger①③">remote end event trigger</a> is the <dfn data-dfn-type="dfn" data-export data-lt="WebDriver BiDi fetch error" id="webdriver-bidi-fetch-error">WebDriver BiDi fetch
error<a class="self-link" href="#webdriver-bidi-fetch-error"></a></dfn> steps given <var>request</var>: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="#before-request-sent-map" id="ref-for-before-request-sent-map④">before request sent map</a>[<var>request</var>] does not contain <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-redirect-count" id="ref-for-concept-request-redirect-count③">redirect count</a>, then run the <a data-link-type="dfn" href="#webdriver-bidi-before-request-sent" id="ref-for-webdriver-bidi-before-request-sent①">WebDriver BiDi before request sent</a> steps
 with <var>request</var>.</p>
      <p class="note" role="note"><span class="marker">Note:</span> This ensures that a <code>network.beforeRequestSent</code> can
 always be emitted before a <code>network.fetchError</code>, without the
 caller needing to explicitly invoke the <a data-link-type="dfn" href="#webdriver-bidi-before-request-sent" id="ref-for-webdriver-bidi-before-request-sent②">WebDriver BiDi before request
 sent</a> steps on every error path.</p>
     <li data-md>
      <p>If <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-client" id="ref-for-concept-request-client⑥">client</a> is not null, let <var>related browsing contexts</var> be the result of <a data-link-type="dfn" href="#get-related-browsing-contexts" id="ref-for-get-related-browsing-contexts②">get related browsing contexts</a> with <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-client" id="ref-for-concept-request-client⑦">client</a>. Otherwise let <var>related browsing contexts</var> be an empty
 set.</p>
     <li data-md>
      <p>For each <var>session</var> in the <a data-link-type="dfn" href="#set-of-sessions-for-which-an-event-is-enabled" id="ref-for-set-of-sessions-for-which-an-event-is-enabled①③">set of sessions for which an event is enabled</a> given "<code>network.fetchError</code>" and <var>related browsing contexts</var>:</p>
      <ol>
       <li data-md>
        <p>Let <var>params</var> be the result of <a data-link-type="dfn" href="#process-a-network-event" id="ref-for-process-a-network-event②">process a network event</a> with <var>session</var> "<code>network.fetchError</code>", and <var>request</var>.</p>
       <li data-md>
        <p>TODO: Set the <code>errorText</code> field of <var>params</var>.</p>
       <li data-md>
        <p class="assertion">Assert: <var>params</var> matches the <code>network.FetchErrorParameters</code> production.</p>
       <li data-md>
        <p>Let <var>body</var> be a map matching the <code>network.FetchError</code> production, with the <code>params</code> field set to <var>params</var>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="#emit-an-event" id="ref-for-emit-an-event①③">Emit an event</a> with <var>session</var> and <var>body</var>.</p>
      </ol>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.4.5.4" id="event-network-responseCompleted"><span class="secno">6.4.5.4. </span><span class="content">The network.responseCompleted Event</span><a class="self-link" href="#event-network-responseCompleted"></a></h5>
   <dl>
    <dt>Event Type
    <dd>
<pre class="cddl local-cddl"> network.ResponseCompleted = (
  method: "network.responseCompleted",
  params: network.ResponseCompletedParameters
 )

network.ResponseCompletedParameters = {
  network.BaseParameters,
  response: network.ResponseData,
}
</pre>
   </dl>
   <p>This event is emitted after the full response body is received.</p>
   <div class="algorithm" data-algorithm="WebDriver BiDi response completed">
     The <a data-link-type="dfn" href="#remote-end-event-trigger" id="ref-for-remote-end-event-trigger①④">remote end event trigger</a> is the <dfn data-dfn-type="dfn" data-export data-lt="WebDriver BiDi response completed" id="webdriver-bidi-response-completed">WebDriver BiDi response
completed<a class="self-link" href="#webdriver-bidi-response-completed"></a></dfn> steps given <var>request</var> and <var>response</var>: 
    <ol>
     <li data-md>
      <p>Let <var>redirect count</var> be <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-redirect-count" id="ref-for-concept-request-redirect-count④">redirect count</a>.</p>
     <li data-md>
      <p class="assertion">Assert: <a data-link-type="dfn" href="#before-request-sent-map" id="ref-for-before-request-sent-map⑤">before request sent map</a>[<var>request</var>] contains <var>redirect count</var>.</p>
      <p class="note" role="note"><span class="marker">Note:</span> This implies that every caller needs to ensure that the <a data-link-type="dfn" href="#webdriver-bidi-before-request-sent" id="ref-for-webdriver-bidi-before-request-sent③">WebDriver BiDi
 before request sent</a> steps are invoked with <var>request</var> before these steps.</p>
     <li data-md>
      <p>If <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-client" id="ref-for-concept-request-client⑧">client</a> is not null, let <var>related browsing contexts</var> be the result of <a data-link-type="dfn" href="#get-related-browsing-contexts" id="ref-for-get-related-browsing-contexts③">get related browsing contexts</a> with <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-client" id="ref-for-concept-request-client⑨">client</a>. Otherwise let <var>related browsing contexts</var> be an empty
 set.</p>
     <li data-md>
      <p>For each <var>session</var> in the <a data-link-type="dfn" href="#set-of-sessions-for-which-an-event-is-enabled" id="ref-for-set-of-sessions-for-which-an-event-is-enabled①④">set of sessions for which an event is enabled</a> given "<code>network.responseCompleted</code>" and <var>related browsing contexts</var>:</p>
      <ol>
       <li data-md>
        <p>Let <var>params</var> be the result of <a data-link-type="dfn" href="#process-a-network-event" id="ref-for-process-a-network-event③">process a network event</a> with <var>session</var> "<code>network.responseCompleted</code>", and <var>request</var>.</p>
       <li data-md>
        <p class="assertion">Assert: <var>params</var>["<code>isBlocked</code>"] is false.</p>
       <li data-md>
        <p>Let <var>response data</var> be the result of <a data-link-type="dfn" href="#get-the-response-data" id="ref-for-get-the-response-data①">get the response data</a> with <var>response</var>.</p>
       <li data-md>
        <p>Set the <code>response</code> field of <var>params</var> to <var>response data</var>.</p>
       <li data-md>
        <p class="assertion">Assert: <var>params</var> matches the <code>network.ResponseCompletedParameters</code> production.</p>
       <li data-md>
        <p>Let <var>body</var> be a map matching the <code>network.ResponseCompleted</code> production, with the <code>params</code> field set to <var>params</var>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="#emit-an-event" id="ref-for-emit-an-event①④">Emit an event</a> with <var>session</var> and <var>body</var>.</p>
      </ol>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.4.5.5" id="event-network-responseStarted"><span class="secno">6.4.5.5. </span><span class="content">The network.responseStarted Event</span><a class="self-link" href="#event-network-responseStarted"></a></h5>
   <dl>
    <dt>Event Type
    <dd>
<pre class="cddl local-cddl"> network.ResponseStarted = (
  method: "network.responseStarted",
  params: network.ResponseStartedParameters
 )

network.ResponseStartedParameters = {
  network.BaseParameters,
  response: network.ResponseData,
}
</pre>
   </dl>
   <p>This event is emitted after the response headers are received but before the
body is complete.</p>
   <div class="algorithm" data-algorithm="WebDriver BiDi response started">
     The <a data-link-type="dfn" href="#remote-end-event-trigger" id="ref-for-remote-end-event-trigger①⑤">remote end event trigger</a> is the <dfn data-dfn-type="dfn" data-export data-lt="WebDriver BiDi response started" id="webdriver-bidi-response-started">WebDriver BiDi response
started<a class="self-link" href="#webdriver-bidi-response-started"></a></dfn> steps given <var>request</var> and <var>response</var>: 
    <ol>
     <li data-md>
      <p>Let <var>redirect count</var> be <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-redirect-count" id="ref-for-concept-request-redirect-count⑤">redirect count</a>.</p>
     <li data-md>
      <p class="assertion">Assert: <a data-link-type="dfn" href="#before-request-sent-map" id="ref-for-before-request-sent-map⑥">before request sent map</a>[<var>request</var>] is equal to <var>redirect count</var>.</p>
      <p class="note" role="note"><span class="marker">Note:</span> This implies that every caller needs to ensure that the <a data-link-type="dfn" href="#webdriver-bidi-before-request-sent" id="ref-for-webdriver-bidi-before-request-sent④">WebDriver BiDi
 before request sent</a> steps are invoked with <var>request</var> before these steps.</p>
     <li data-md>
      <p>If <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-client" id="ref-for-concept-request-client①⓪">client</a> is not null, let <var>related browsing contexts</var> be the result of <a data-link-type="dfn" href="#get-related-browsing-contexts" id="ref-for-get-related-browsing-contexts④">get related browsing contexts</a> with <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-client" id="ref-for-concept-request-client①①">client</a>. Otherwise let <var>related browsing contexts</var> be an empty
 set.</p>
     <li data-md>
      <p>Let <var>response status</var> be "<code>incomplete</code>".</p>
     <li data-md>
      <p>For each <var>session</var> in the <a data-link-type="dfn" href="#set-of-sessions-for-which-an-event-is-enabled" id="ref-for-set-of-sessions-for-which-an-event-is-enabled①⑤">set of sessions for which an event is enabled</a> given "<code>network.responseStarted</code>" and <var>related browsing contexts</var>:</p>
      <ol>
       <li data-md>
        <p>Let <var>params</var> be the result of <a data-link-type="dfn" href="#process-a-network-event" id="ref-for-process-a-network-event④">process a network event</a> with <var>session</var> "<code>network.responseStarted</code>", and <var>request</var>.</p>
       <li data-md>
        <p>Let <var>response data</var> be the result of <a data-link-type="dfn" href="#get-the-response-data" id="ref-for-get-the-response-data②">get the response data</a> with <var>response</var>.</p>
       <li data-md>
        <p>Set the <code>response</code> field of <var>params</var> to <var>response data</var>.</p>
       <li data-md>
        <p class="assertion">Assert: <var>params</var> matches the <code>network.ResponseStartedParameters</code> production.</p>
       <li data-md>
        <p>Let <var>body</var> be a map matching the <code>network.ResponseStarted</code> production, with the <code>params</code> field set to <var>params</var>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="#emit-an-event" id="ref-for-emit-an-event①⑤">Emit an event</a> with <var>session</var> and <var>body</var>.</p>
       <li data-md>
        <p>If <var>params</var>["<code>isBlocked</code>"] is true:</p>
        <ol>
         <li data-md>
          <p>Let <var>blocked requests</var> be <var>session</var>’s <a data-link-type="dfn" href="#blocked-request-map" id="ref-for-blocked-request-map⑥">blocked request map</a>.</p>
         <li data-md>
          <p>Let <var>request id</var> be <var>request</var>’s <a data-link-type="dfn" href="#request-id" id="ref-for-request-id⑥">request id</a>.</p>
         <li data-md>
          <p>Set <var>blocked requests</var>[<var>request id</var>] to (<var>request</var>,
 "<code>beforeRequestSent</code>", <var>response</var>).</p>
         <li data-md>
          <p>Let (<var>response</var>, <var>status</var>) be <a data-link-type="dfn" href="#awaits" id="ref-for-awaits⑤">await</a> with «"<code>continue request</code>"», and <var>request id</var>.</p>
         <li data-md>
          <p>If <var>status</var> is "<code>complete</code>", set <var>response status</var> to <var>status</var>.</p>
        </ol>
      </ol>
     <li data-md>
      <p>Return (<var>response</var>, <var>response status</var>).</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="6.5" id="module-script"><span class="secno">6.5. </span><span class="content">The script Module</span><a class="self-link" href="#module-script"></a></h3>
   <p>The <dfn data-dfn-for="modules" data-dfn-type="dfn" data-export id="modules-script">script<a class="self-link" href="#modules-script"></a></dfn> module contains commands and events
relating to script realms and execution.</p>
   <h4 class="heading settled" data-level="6.5.1" id="module-script-definition"><span class="secno">6.5.1. </span><span class="content">Definition</span><a class="self-link" href="#module-script-definition"></a></h4>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition②⑥">Remote end definition</a></p>
<pre class="cddl remote-cddl">ScriptCommand = (
  script.AddPreloadScript //
  script.CallFunction //
  script.Disown //
  script.Evaluate //
  script.GetRealms //
  script.RemovePreloadScript
)
</pre>
   <p><a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition②⑧">local end definition</a></p>
<pre class="cddl local-cddl">ScriptResult = (
  script.AddPreloadScriptResult /
  script.EvaluateResult /
  script.GetRealmsResult
)

ScriptEvent = (
  script.Message //
  script.RealmCreated //
  script.RealmDestroyed
)
</pre>
   <h4 class="heading settled" data-level="6.5.2" id="preload-scripts"><span class="secno">6.5.2. </span><span class="content">Preload Scripts</span><a class="self-link" href="#preload-scripts"></a></h4>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="preload-script">Preload script</dfn> is one which runs on creation of a new <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window⑤">Window</a></code>,
before any author-defined script have run.</p>
   <p>TODO: Extend this to scripts in other kinds of realms.</p>
   <p>A <a data-link-type="dfn" href="#bidi-session" id="ref-for-bidi-session①⑤">BiDi session</a> has a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="preload-script-map">preload script map</dfn> which is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map④⑧">map</a> in
which the keys are <a data-link-type="biblio" href="#biblio-rfc4122" title="A Universally Unique IDentifier (UUID) URN Namespace">UUID</a>s, and the values are <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct" id="ref-for-struct②">structs</a> with an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct-item" id="ref-for-struct-item">item</a> named <code>function declaration</code>, which is a string, <code>arguments</code>, <code>contexts</code>, which is a list or null, and an item named <code>sandbox</code> which is a string
or null.</p>
   <p class="note" role="note"><span class="marker">Note:</span> If executing a <a data-link-type="dfn" href="#preload-script" id="ref-for-preload-script①">preload script</a> fails, either due to a syntax error, or
a runtime exception, an <a data-link-type="biblio" href="#biblio-ecmascript" title="ECMAScript Language Specification">[ECMAScript]</a> exception is reported in the realm in
which it was being executed, and other preload scripts run as normal.</p>
   <div class="algorithm" data-algorithm="run WebDriver BiDi preload scripts">
     To <dfn data-dfn-type="dfn" data-export id="run-webdriver-bidi-preload-scripts">run WebDriver BiDi preload scripts<a class="self-link" href="#run-webdriver-bidi-preload-scripts"></a></dfn> given <var>environment settings</var>: 
    <ol>
     <li data-md>
      <p>Let <var>document</var> be <var>environment settings</var>’ <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global③">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window②">associated <code>Document</code></a>.</p>
     <li data-md>
      <p>Let <var>browsing context</var> be <var>document</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context" id="ref-for-browsing-context⑧">browsing context</a>.</p>
     <li data-md>
      <p>For each <var>session</var> in <a data-link-type="dfn" href="#active-bidi-sessions" id="ref-for-active-bidi-sessions①">active BiDi sessions</a>:</p>
      <ol>
       <li data-md>
        <p>For each <var>preload script</var> in <var>session</var>’s <a data-link-type="dfn" href="#preload-script-map" id="ref-for-preload-script-map">preload script map</a>'s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-getting-the-values" id="ref-for-map-getting-the-values①">values</a>:</p>
        <ol>
         <li data-md>
          <p>If <var>preload script</var>’s <code>contexts</code> is not null:</p>
          <ol>
           <li data-md>
            <p>Let <var>top level context</var> be <var>browsing context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context" id="ref-for-top-level-browsing-context①④">top-level browsing context</a>.</p>
           <li data-md>
            <p>Let <var>context id</var> be <var>top level context</var>’s id.</p>
           <li data-md>
            <p>If <code>contexts</code> does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-contain" id="ref-for-list-contain⑨">contain</a> <var>context id</var>, return.</p>
          </ol>
         <li data-md>
          <p>If <var>preload script</var>’s <code>sandbox</code> is not null, let <var>realm</var> be <a data-link-type="dfn" href="#get-or-create-a-sandbox-realm" id="ref-for-get-or-create-a-sandbox-realm">get
 or create a sandbox realm</a> with <var>preload script</var>’s <code>sandbox</code> and <var>browsing context</var>. Otherwise let <var>realm</var> be <var>environment settings</var>’ <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#realm-execution-context" id="ref-for-realm-execution-context①">realm execution context</a>'s Realm component.</p>
         <li data-md>
          <p>Let <var>arguments</var> be <var>preload script</var>’s <code>arguments</code>.</p>
         <li data-md>
          <p>Let <var>deserialized arguments</var> be an empty list.</p>
         <li data-md>
          <p>For each <var>argument</var> in <var>arguments</var>:</p>
          <ol>
           <li data-md>
            <p>Let <var>channel</var> be <a data-link-type="dfn" href="#create-a-channel" id="ref-for-create-a-channel">create a channel</a> with <var>session</var>, <var>realm</var> and <var>argument</var>.</p>
           <li data-md>
            <p>Append <var>channel</var> to <var>deserialized arguments</var>.</p>
          </ol>
         <li data-md>
          <p>Let <var>base URL</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#api-base-url" id="ref-for-api-base-url">API base URL</a> of <var>environment settings</var>.</p>
         <li data-md>
          <p>Let <var>options</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#default-classic-script-fetch-options" id="ref-for-default-classic-script-fetch-options">default classic script fetch options</a>.</p>
         <li data-md>
          <p>Let <var>function declaration</var> be <var>preload script</var>’s <code>function declaration</code>.</p>
         <li data-md>
          <p>Let (<var>script</var>, <var>function body evaluation status</var>) be the result of <a data-link-type="dfn" href="#evaluate-function-body" id="ref-for-evaluate-function-body">evaluate function body</a> with <var>function declaration</var>, <var>environment settings</var>, <var>base URL</var>, and <var>options</var>.</p>
         <li data-md>
          <p>If <var>function body evaluation status</var> is an <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-completion-record-specification-type" id="ref-for-sec-completion-record-specification-type">abrupt completion</a>, then <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#report-the-exception" id="ref-for-report-the-exception">report the exception</a> given by <var>function body evaluation status</var>.[[Value]]
 for <var>script</var>.</p>
         <li data-md>
          <p>Let <var>function object</var> be <var>function body evaluation status</var>.[[Value]].</p>
         <li data-md>
          <p>If <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-iscallable" id="ref-for-sec-iscallable">IsCallable</a>(<var>function object</var>) is <code>false</code>:</p>
          <ol>
           <li data-md>
            <p>Let <var>error</var> be a new <a class="idl-code" data-link-type="exception" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror">TypeError</a> object in <var>realm</var>.</p>
           <li data-md>
            <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#report-the-exception" id="ref-for-report-the-exception①">Report the exception</a> <var>error</var>.</p>
          </ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#prepare-to-run-script" id="ref-for-prepare-to-run-script">Prepare to run script</a> with <var>environment settings</var>.</p>
         <li data-md>
          <p>Set <var>evaluation status</var> to <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-call" id="ref-for-sec-call">Call</a>(<var>function object</var>, null, <var>deserialized arguments</var>).</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#clean-up-after-running-script" id="ref-for-clean-up-after-running-script">Clean up after running script</a> with <var>environment settings</var>.</p>
         <li data-md>
          <p>If <var>evaluation status</var> is an <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-completion-record-specification-type" id="ref-for-sec-completion-record-specification-type①">abrupt completion</a>, then <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#report-the-exception" id="ref-for-report-the-exception②">report the exception</a> given by <var>evaluation status</var>.[[Value]] for <var>script</var>.</p>
        </ol>
      </ol>
    </ol>
   </div>
   <h4 class="heading settled" data-level="6.5.3" id="module-script-types"><span class="secno">6.5.3. </span><span class="content">Types</span><a class="self-link" href="#module-script-types"></a></h4>
   <h5 class="heading settled" data-level="6.5.3.1" id="type-script-Channel"><span class="secno">6.5.3.1. </span><span class="content">The script.Channel Type</span><a class="self-link" href="#type-script-Channel"></a></h5>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition②⑦">Remote end definition</a> and <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition②⑨">local end definition</a></p>
<pre class="cddl local-cddl remote-cddl">script.Channel = text;
</pre>
   <p>The <code><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="scriptchannel">script.Channel</dfn></code> type represents the id of a specific channel
used to send custom messages from the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-ends" id="ref-for-dfn-remote-ends②⓪">remote end</a> to the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-local-ends" id="ref-for-dfn-local-ends①②">local end</a>.</p>
   <h5 class="heading settled" data-level="6.5.3.2" id="type-script-ChannelValue"><span class="secno">6.5.3.2. </span><span class="content">The script.ChannelValue Type</span><a class="self-link" href="#type-script-ChannelValue"></a></h5>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition②⑧">Remote end definition</a></p>
<pre class="cddl remote-cddl">script.ChannelValue = {
  type: "channel",
  value: script.ChannelProperties,
};

script.ChannelProperties = {
  channel: script.Channel,
  ? serializationOptions: script.SerializationOptions,
  ? ownership: script.ResultOwnership,
}
</pre>
   <p>The <code>script.ChannelValue</code> type represents an <code>ArgumentValue</code> that can be deserialized into a function that sends
messages from the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-ends" id="ref-for-dfn-remote-ends②①">remote end</a> to the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-local-ends" id="ref-for-dfn-local-ends①③">local end</a>.</p>
   <div class="algorithm" data-algorithm="create a channel">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="create-a-channel">create a channel</dfn> given <var>session</var>, <var>realm</var> and <var>protocol value</var>:</p>
    <ol>
     <li data-md>
      <p>Let <var>channel properties</var> be <var>protocol value</var>["<code>value</code>"].</p>
     <li data-md>
      <p>Let <var>steps</var> be the following steps given the argument <var>message</var>:</p>
      <ol>
       <li data-md>
        <p>Let <var>current realm</var> be the <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm" id="ref-for-current-realm">current Realm Record</a>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="#emit-a-script-message" id="ref-for-emit-a-script-message">Emit a script message</a> with <var>session</var>, <var>current realm</var>, <var>channel properties</var> and <var>message</var>.</p>
      </ol>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-createbuiltinfunction" id="ref-for-sec-createbuiltinfunction">CreateBuiltinFunction</a>(<var>steps</var>, 1, "", « », <var>realm</var>).</p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.5.3.3" id="type-script-EvaluateResult"><span class="secno">6.5.3.3. </span><span class="content">The script.EvaluateResult Type</span><a class="self-link" href="#type-script-EvaluateResult"></a></h5>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition②⑨">Remote end definition</a> and <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition③⓪">local end definition</a></p>
<pre class="cddl local-cddl remote-cddl">script.EvaluateResult = (
  script.EvaluateResultSuccess /
  script.EvaluateResultException
)

script.EvaluateResultSuccess = {
  type: "success",
  result: script.RemoteValue,
  realm: script.Realm
}

script.EvaluateResultException = {
  type: "exception",
  exceptionDetails: script.ExceptionDetails
  realm: script.Realm
}
</pre>
   <p>The <code>script.EvaluateResult</code> type indicates the return value of a command
that executes script. The <code>script.EvaluateResultSuccess</code> variant is used in
cases where the script completes normally and the <code>script.EvaluateResultException</code> variant is used in cases where the script
completes with a thrown exception.</p>
   <h5 class="heading settled" data-level="6.5.3.4" id="type-script-ExceptionDetails"><span class="secno">6.5.3.4. </span><span class="content">The script.ExceptionDetails Type</span><a class="self-link" href="#type-script-ExceptionDetails"></a></h5>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition③⓪">Remote end definition</a> and <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition③①">local end definition</a></p>
<pre class="cddl local-cddl remote-cddl">script.ExceptionDetails = {
  columnNumber: js-uint,
  exception: script.RemoteValue,
  lineNumber: js-uint,
  stackTrace: script.StackTrace,
  text: text,
};
</pre>
   <p>The <code>script.ExceptionDetails</code> type represents a JavaScript exception.</p>
   <div class="algorithm" data-algorithm="get exception details">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="get-exception-details">get exception details</dfn> given a <var>realm</var>, a <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-completion-record-specification-type" id="ref-for-sec-completion-record-specification-type②">completion record</a> <var>record</var>, an <var>ownership type</var> and a <var>session</var>:</p>
    <ol>
     <li data-md>
      <p class="assertion">Assert: <var>record</var>.[[Type]] is <code>throw</code>.</p>
     <li data-md>
      <p>Let <var>text</var> be an implementation-defined textual description of the error
 represented by <var>record</var>.</p>
      <p>TODO: Tighten up the requirements here; people will probably try to parse
 this data with regex or something equally bad.</p>
     <li data-md>
      <p>Let <var>serialization options</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map④⑨">map</a> matching the <code>script.SerializationOptions</code> production with the fields set to
 their default values.</p>
     <li data-md>
      <p>Let <var>exception</var> be the result of <a data-link-type="dfn" href="#serialize-as-a-remote-value" id="ref-for-serialize-as-a-remote-value">serialize as a remote value</a> with <var>record</var>.[[Value]], <var>serialization options</var>, <var>ownership type</var>,
 a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑤⓪">map</a> as serialization internal map, <var>realm</var> and <var>session</var>.</p>
     <li data-md>
      <p>Let <var>stack trace</var> be the <a data-link-type="dfn" href="#stack-trace-for-an-exception" id="ref-for-stack-trace-for-an-exception">stack trace for an exception</a> given <var>record</var>.</p>
     <li data-md>
      <p>If <var>stack trace</var> has size of 1 or greater, let <var>line number</var> be value of the <code>lineNumber</code> field in <var>stack trace</var>[0], and let <var>column number</var> be
 the value of the <code>columnNumber</code> field <var>stack trace</var>[0]. Otherwise
 let <var>line number</var> and <var>column number</var> be 0.</p>
     <li data-md>
      <p>Let <var>exception details</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑤①">map</a> matching the <code>script.ExceptionDetails</code> production, with the <code>text</code> field set to <var>text</var>, the <code>exception</code> field set to <var>exception</var>, the <code>lineNumber</code> field set to <var>line number</var>, the <code>columnNumber</code> field set to <var>column number</var>, and the <code>stackTrace</code> field set to <var>stack trace</var>.</p>
     <li data-md>
      <p>Return <var>exception details</var>.</p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.5.3.5" id="type-script-Handle"><span class="secno">6.5.3.5. </span><span class="content">The script.Handle Type</span><a class="self-link" href="#type-script-Handle"></a></h5>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition③①">Remote end definition</a> and <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition③②">local end definition</a></p>
<pre class="cddl local-cddl remote-cddl">script.Handle = text;
</pre>
   <p>The <code>script.Handle</code> type represents a handle to an object owned by
the ECMAScript runtime. The handle is only valid in a specific <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-code-realms" id="ref-for-sec-code-realms①">Realm</a>.</p>
   <p>Each ECMAScript <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-code-realms" id="ref-for-sec-code-realms②">Realm</a> has a corresponding <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="handle-object-map">handle object map</dfn>. This is a
strong <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑤②">map</a> from handle ids to their corresponding objects.</p>
   <h5 class="heading settled" data-level="6.5.3.6" id="type-script-LocalValue"><span class="secno">6.5.3.6. </span><span class="content">The script.LocalValue Type</span><a class="self-link" href="#type-script-LocalValue"></a></h5>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition③②">Remote end definition</a></p>
<pre class="cddl remote-cddl">script.LocalValue = (
  script.RemoteReference /
  script.PrimitiveProtocolValue /
  script.ChannelValue /
  script.ArrayLocalValue /
  script.DateLocalValue /
  script.MapLocalValue /
  script.ObjectLocalValue /
  script.RegExpLocalValue /
  script.SetLocalValue
)

script.ListLocalValue = [*script.LocalValue];

script.ArrayLocalValue = {
  type: "array",
  value: script.ListLocalValue,
}

script.DateLocalValue = {
  type: "date",
  value: text
}

script.MappingLocalValue = [*[(script.LocalValue / text), script.LocalValue]];

script.MapLocalValue = {
  type: "map",
  value: script.MappingLocalValue,
}

script.ObjectLocalValue = {
  type: "object",
  value: script.MappingLocalValue,
}

script.RegExpValue = {
  pattern: text,
  ? flags: text,
}

script.RegExpLocalValue = {
  type: "regexp",
  value: script.RegExpValue,
}

script.SetLocalValue = {
  type: "set",
  value: script.ListLocalValue,
}
</pre>
   <p>The <code><dfn data-dfn-type="dfn" data-export id="scriptlocalvalue">script.LocalValue<a class="self-link" href="#scriptlocalvalue"></a></dfn></code> type represents values which can be
deserialized into ECMAScript. This includes both primitive and non-primitive
values as well as <a data-link-type="dfn" href="#scriptremotereference" id="ref-for-scriptremotereference">remote references</a> and <a data-link-type="dfn" href="#scriptchannel" id="ref-for-scriptchannel">channels</a>.</p>
   <div class="algorithm" data-algorithm="deserialize key-value list">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="deserialize-key-value-list">deserialize key-value list</dfn> given <var>serialized key-value list</var>, <var>realm</var> and <var>session</var>:</p>
    <ol>
     <li data-md>
      <p>Let <var>deserialized key-value list</var> be a new list.</p>
     <li data-md>
      <p>For each <var>serialized key-value</var> in the <var>serialized key-value list</var>:</p>
      <ol>
       <li data-md>
        <p>If <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-size" id="ref-for-list-size">size</a> of <var>serialized key-value</var> is not 2,
  return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors⑤⓪">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code④⑥">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument②⑨">invalid argument</a>.</p>
       <li data-md>
        <p>Let <var>serialized key</var> be <var>serialized key-value</var>[0].</p>
       <li data-md>
        <p>If <var>serialized key</var> is a <code>string</code>,
  let <var>deserialized key</var> be <var>serialized key</var>.</p>
       <li data-md>
        <p>Otherwise let <var>deserialized key</var> be result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try②⑧">trying</a> to
  given <a data-link-type="dfn" href="#deserialize-local-value" id="ref-for-deserialize-local-value">deserialize local value</a> with <var>serialized key</var>, <var>realm</var> and <var>session</var>.</p>
       <li data-md>
        <p>Let <var>serialized value</var> be <var>serialized key-value</var>[1].</p>
       <li data-md>
        <p>Let <var>deserialized value</var> be result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try②⑨">trying</a> to <a data-link-type="dfn" href="#deserialize-local-value" id="ref-for-deserialize-local-value①">deserialize local value</a> given <var>serialized value</var>, <var>realm</var> and <var>session</var>.</p>
       <li data-md>
        <p>Append <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-createarrayfromlist" id="ref-for-sec-createarrayfromlist">CreateArrayFromList</a>(«<var>deserialized key</var>, <var>deserialized value</var>») to <var>deserialized key-value list</var>.</p>
      </ol>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success③④">success</a> with data <var>deserialized key-value list</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="deserialize value list">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="deserialize-value-list">deserialize value list</dfn> given <var>serialized value list</var>, <var>realm</var> and <var>session</var>:</p>
    <ol>
     <li data-md>
      <p>Let <var>deserialized values</var> be a new list.</p>
     <li data-md>
      <p>For each <var>serialized value</var> in the <var>serialized value list</var>:</p>
      <ol>
       <li data-md>
        <p>Let <var>deserialized value</var> be result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try③⓪">trying</a> to <a data-link-type="dfn" href="#deserialize-local-value" id="ref-for-deserialize-local-value②">deserialize local value</a> given <var>serialized value</var>, <var>realm</var> and <var>session</var>.</p>
       <li data-md>
        <p>Append <var>deserialized value</var> to <var>deserialized values</var>;</p>
      </ol>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success③⑤">success</a> with data <var>deserialized values</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="deserialize local value">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="deserialize-local-value">deserialize local value</dfn> given <var>local protocol value</var>, <var>realm</var> and <var>session</var>:</p>
    <ol>
     <li data-md>
      <p>If <var>local protocol value</var> matches the <a data-link-type="dfn" href="#scriptremotereference" id="ref-for-scriptremotereference①">script.RemoteReference</a> production, return <a data-link-type="dfn" href="#deserialize-remote-reference" id="ref-for-deserialize-remote-reference①">deserialize remote reference</a> of given <var>local protocol value</var>, <var>realm</var> and <var>session</var>.</p>
     <li data-md>
      <p>If <var>local protocol value</var> matches the <a data-link-type="dfn" href="#scriptprimitiveprotocolvalue" id="ref-for-scriptprimitiveprotocolvalue">script.PrimitiveProtocolValue</a> production, return <a data-link-type="dfn" href="#deserialize-primitive-protocol-value" id="ref-for-deserialize-primitive-protocol-value">deserialize primitive protocol value</a> with <var>local protocol value</var>.</p>
     <li data-md>
      <p>If <var>local protocol value</var> matches the <code>script.ChannelValue</code> production,
 return <a data-link-type="dfn" href="#create-a-channel" id="ref-for-create-a-channel①">create a channel</a> with <var>session</var>, <var>realm</var> and <var>local protocol value</var>.</p>
     <li data-md>
      <p>Let <var>type</var> be the value of the <code>type</code> field of <var>local protocol value</var> or undefined if
 no such a field.</p>
     <li data-md>
      <p>Let <var>value</var> be the value of the <code>value</code> field of <var>local protocol value</var> or undefined
 if no such a field.</p>
     <li data-md>
      <p>In the following list of conditions and associated steps, run the first set of steps for which
 the associated condition is true:</p>
      <dl>
       <dt><var>type</var> is the string "<code>array</code>" 
       <dd>
        <ol>
         <li data-md>
          <p>Let <var>deserialized value list</var> be a result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try③①">trying</a> to <a data-link-type="dfn" href="#deserialize-value-list" id="ref-for-deserialize-value-list">deserialize value list</a> given <var>value</var>, <var>realm</var> and <var>session</var>.</p>
         <li data-md>
          <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success③⑥">success</a> with data <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-createarrayfromlist" id="ref-for-sec-createarrayfromlist①">CreateArrayFromList</a>(<var>deserialized value list</var>).</p>
        </ol>
       <dt><var>type</var> is the string "<code>date</code>" 
       <dd>
        <ol>
         <li data-md>
          <p>If <var>value</var> does not match <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-date-time-string-format" id="ref-for-sec-date-time-string-format">Date Time String Format</a>, return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors⑤①">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code④⑦">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument③⓪">invalid argument</a>.</p>
         <li data-md>
          <p>Let <var>date result</var> be <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-construct" id="ref-for-sec-construct">Construct</a>(<a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-date-constructor" id="ref-for-sec-date-constructor">Date</a>, <var>value</var>).</p>
         <li data-md>
          <p class="assertion">Assert: <var>date result</var> is not an <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-completion-record-specification-type" id="ref-for-sec-completion-record-specification-type③">abrupt completion</a>.</p>
         <li data-md>
          <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success③⑦">success</a> with data <var>date result</var>.</p>
        </ol>
       <dt><var>type</var> is the string "<code>map</code>" 
       <dd>
        <ol>
         <li data-md>
          <p>Let <var>deserialized key-value list</var> be a result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try③②">trying</a> to <a data-link-type="dfn" href="#deserialize-key-value-list" id="ref-for-deserialize-key-value-list">deserialize key-value list</a> with <var>value</var>, <var>realm</var> and <var>session</var>.</p>
         <li data-md>
          <p>Let <var>iterable</var> be <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-createarrayfromlist" id="ref-for-sec-createarrayfromlist②">CreateArrayFromList</a>(<var>deserialized key-value list</var>)</p>
         <li data-md>
          <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success③⑧">success</a> with data <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-map-iterable" id="ref-for-sec-map-iterable">Map</a>(<var>iterable</var>).</p>
        </ol>
       <dt><var>type</var> is the string "<code>object</code>" 
       <dd>
        <ol>
         <li data-md>
          <p>Let <var>deserialized key-value list</var> be a result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try③③">trying</a> to <a data-link-type="dfn" href="#deserialize-key-value-list" id="ref-for-deserialize-key-value-list①">deserialize key-value list</a> with <var>value</var>, <var>realm</var> and <var>session</var>.</p>
         <li data-md>
          <p>Let <var>iterable</var> be <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-createarrayfromlist" id="ref-for-sec-createarrayfromlist③">CreateArrayFromList</a>(<var>deserialized key-value list</var>)</p>
         <li data-md>
          <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success③⑨">success</a> with data <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-object.fromentries" id="ref-for-sec-object.fromentries">Object.fromEntries</a>(<var>iterable</var>).</p>
        </ol>
       <dt><var>type</var> is the string "<code>regexp</code>" 
       <dd>
        <ol>
         <li data-md>
          <p>Let <var>pattern</var> be the value of the <code>pattern</code> field of <var>local protocol value</var>.</p>
         <li data-md>
          <p>Let <var>flags</var> be the value of the <code>flags</code> field of <var>local protocol value</var> or
 undefined if no such a field.</p>
         <li data-md>
          <p>Let <var>regex_result</var> be <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-regexp-pattern-flags" id="ref-for-sec-regexp-pattern-flags">Regexp</a>(<var>pattern</var>, <var>flags</var>). If this throws exception, return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors⑤②">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code④⑧">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument③①">invalid argument</a>.</p>
         <li data-md>
          <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success④⓪">success</a> with data <var>regex_result</var>.</p>
        </ol>
       <dt><var>type</var> is the string "<code>set</code>" 
       <dd>
        <ol>
         <li data-md>
          <p>Let <var>deserialized value list</var> be a result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try③④">trying</a> to <a data-link-type="dfn" href="#deserialize-value-list" id="ref-for-deserialize-value-list①">deserialize value list</a> given <var>value</var>, <var>realm</var> and <var>session</var>.</p>
         <li data-md>
          <p>Let <var>iterable</var> be <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-createarrayfromlist" id="ref-for-sec-createarrayfromlist④">CreateArrayFromList</a>(<var>deserialized key-value list</var>)</p>
         <li data-md>
          <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success④①">success</a> with data <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-set-objects" id="ref-for-sec-set-objects">Set object</a>(<var>iterable</var>).</p>
        </ol>
       <dt>otherwise 
       <dd>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors⑤③">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code④⑨">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument③②">invalid argument</a>. 
      </dl>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.5.3.7" id="type-script-PreloadScript"><span class="secno">6.5.3.7. </span><span class="content">The script.PreloadScript Type</span><a class="self-link" href="#type-script-PreloadScript"></a></h5>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition③③">Remote end definition</a> and <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition③③">local end definition</a></p>
<pre class="cddl local-cddl remote-cddl">script.PreloadScript = text;
</pre>
   <p>The <code>script.PreloadScript</code> type represents a handle to a script that will run
on realm creation.</p>
   <h5 class="heading settled" data-level="6.5.3.8" id="type-script-Realm"><span class="secno">6.5.3.8. </span><span class="content">The script.Realm Type</span><a class="self-link" href="#type-script-Realm"></a></h5>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition③④">Remote end definition</a> and <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition③④">local end definition</a></p>
<pre class="cddl local-cddl remote-cddl">script.Realm = text;
</pre>
   <p>Each <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-code-realms" id="ref-for-sec-code-realms③">realm</a> has an associated <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="realm-id">realm id</dfn>, which is a string
uniquely identifying that realm. This is implicitly set when the realm is
created.</p>
   <p>The <a data-link-type="dfn" href="#realm-id" id="ref-for-realm-id">realm id</a> for a realm is opaque and must not be derivable from the handle
id of the corresponding global object in the <a data-link-type="dfn" href="#handle-object-map" id="ref-for-handle-object-map">handle object map</a> or, where
relevant, from the <a data-link-type="dfn" href="#browsing-context-id" id="ref-for-browsing-context-id①⓪">browsing context id</a> of any <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context" id="ref-for-browsing-context⑨">browsing context</a>.</p>
   <p class="note" role="note"><span class="marker">Note:</span> this is to ensure that users do not rely on implementation-specific
relationships between different ids.</p>
   <div class="algorithm" data-algorithm="get a realm">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="get-a-realm">get a realm</dfn> given <var>realm id</var>: 
    <ol>
     <li data-md>
      <p>If <var>realm id</var> is null, return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success④②">success</a> with data null.</p>
     <li data-md>
      <p>If there is no <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-code-realms" id="ref-for-sec-code-realms④">realm</a> with <a data-link-type="dfn" href="#realm-id" id="ref-for-realm-id①">id</a> <var>realm id</var> return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors⑤④">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code⑤⓪">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-no-such-frame" id="ref-for-dfn-no-such-frame①">no such frame</a></p>
     <li data-md>
      <p>Let <var>realm</var> be the <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-code-realms" id="ref-for-sec-code-realms⑤">realm</a> with <a data-link-type="dfn" href="#realm-id" id="ref-for-realm-id②">id</a> <var>realm id</var>.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success④③">success</a> with data <var>realm</var></p>
    </ol>
    <p class="issue" id="issue-89e6b783"><a class="self-link" href="#issue-89e6b783"></a> This has the wrong error code</p>
   </div>
   <h5 class="heading settled" data-level="6.5.3.9" id="type-script-PrimitiveProtocolValue"><span class="secno">6.5.3.9. </span><span class="content">The script.PrimitiveProtocolValue Type</span><a class="self-link" href="#type-script-PrimitiveProtocolValue"></a></h5>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition③⑤">Remote end definition</a> and <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition③⑤">local end definition</a></p>
<pre class="cddl local-cddl remote-cddl">script.PrimitiveProtocolValue = (
  script.UndefinedValue /
  script.NullValue /
  script.StringValue /
  script.NumberValue /
  script.BooleanValue /
  script.BigIntValue
)

script.UndefinedValue = {
  type: "undefined",
}

script.NullValue = {
  type: "null",
}

script.StringValue = {
  type: "string",
  value: text,
}

script.SpecialNumber = "NaN" / "-0" / "Infinity" / "-Infinity";

script.NumberValue = {
  type: "number",
  value: number / script.SpecialNumber,
}

script.BooleanValue = {
  type: "boolean",
  value: bool,
}

script.BigIntValue = {
  type: "bigint",
  value: text,
}
</pre>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="scriptprimitiveprotocolvalue">script.PrimitiveProtocolValue</dfn> represents values which can only be
represented by value, never by reference.</p>
   <div class="algorithm" data-algorithm="serialize primitive protocol value">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="serialize-primitive-protocol-value">serialize primitive protocol value</dfn> given a <var>value</var>:</p>
    <ol>
     <li data-md>
      <p>Let <var>remote value</var> be undefined.</p>
     <li data-md>
      <p>In the following list of conditions and associated steps, run the first set
 of steps for which the associated condition is true, if any:</p>
      <dl>
       <dt><a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values" id="ref-for-sec-ecmascript-data-types-and-values">Type</a>(<var>value</var>) is undefined 
       <dd>Let <var>remote value</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑤③">map</a> matching the <code>script.UndefinedValue</code> production in the <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition③⑥">local end definition</a>. 
       <dt><a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values" id="ref-for-sec-ecmascript-data-types-and-values①">Type</a>(<var>value</var>) is Null 
       <dd>Let <var>remote value</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑤④">map</a> matching the <code>script.NullValue</code> production in the <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition③⑦">local end definition</a>. 
       <dt><a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values" id="ref-for-sec-ecmascript-data-types-and-values②">Type</a>(<var>value</var>) is String 
       <dd>
        Let <var>remote value</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑤⑤">map</a> matching the <code>script.StringValue</code> production in the <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition③⑧">local end definition</a>, with the <code>value</code> property set to <var>value</var>. 
        <p class="issue" id="issue-d33a79cf"><a class="self-link" href="#issue-d33a79cf"></a> This doesn’t handle lone surrogates</p>
       <dt><a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values" id="ref-for-sec-ecmascript-data-types-and-values③">Type</a>(<var>value</var>) is Number 
       <dd>
        <ol>
         <li data-md>
          <p>Switch on the value of <var>value</var>:</p>
          <dl>
           <dt>NaN 
           <dd>Let <var>serialized</var> be <code>"NaN"</code> 
           <dt>-0 
           <dd>Let <var>serialized</var> be <code>"-0"</code> 
           <dt>Infinity 
           <dd>Let <var>serialized</var> be <code>"Infinity"</code> 
           <dt>-Infinity 
           <dd>Let <var>serialized</var> be <code>"-Infinity"</code> 
           <dt>Otherwise: 
           <dd>Let <var>serialized</var> be <var>value</var> 
          </dl>
         <li data-md>
          <p>Let <var>remote value</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑤⑥">map</a> matching the <code>script.NumberValue</code> production in the <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition③⑨">local end definition</a>, with the <code>value</code> property set to <var>serialized</var>.</p>
        </ol>
       <dt><a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values" id="ref-for-sec-ecmascript-data-types-and-values④">Type</a>(<var>value</var>) is Boolean 
       <dd>Let <var>remote value</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑤⑦">map</a> matching the <code>script.BooleanValue</code> production in the <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition④⓪">local end definition</a>, with the <code>value</code> property set to <var>value</var>. 
       <dt><a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values" id="ref-for-sec-ecmascript-data-types-and-values⑤">Type</a>(<var>value</var>) is BigInt 
       <dd>Let <var>remote value</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑤⑧">map</a> matching the <code>script.BigIntValue</code> production in the <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition④①">local end definition</a>, with the <code>value</code> property set to the result of running the <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-tostring" id="ref-for-sec-tostring">ToString</a> operation on <var>value</var>. 
      </dl>
     <li data-md>
      <p>Return <var>remote value</var></p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="deserialize primitive protocol value">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="deserialize-primitive-protocol-value">deserialize primitive protocol value</dfn> given a <var>primitive protocol value</var>:</p>
    <ol>
     <li data-md>
      <p>Let <var>type</var> be the value of the <code>type</code> field of <var>primitive protocol value</var>.</p>
     <li data-md>
      <p>Let <var>value</var> be undefined.</p>
     <li data-md>
      <p>If <var>primitive protocol value</var> has field <code>value</code>:</p>
      <ol>
       <li data-md>
        <p>Let <var>value</var> be the value of the <code>value</code> field of <var>primitive protocol value</var>.</p>
      </ol>
     <li data-md>
      <p>In the following list of conditions and associated steps, run the first set of steps for which
 the associated condition is true:</p>
      <dl>
       <dt><var>type</var> is the string "<code>undefined</code>" 
       <dd>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success④④">success</a> with data <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-undefined-value" id="ref-for-sec-undefined-value">undefined</a>. 
       <dt><var>type</var> is the string "<code>null</code>" 
       <dd>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success④⑤">success</a> with data <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-null-value" id="ref-for-sec-null-value①">null</a>. 
       <dt><var>type</var> is the string "<code>string</code>" 
       <dd>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success④⑥">success</a> with data <var>value</var>. 
       <dt><var>type</var> is the string "<code>number</code>" 
       <dd>
        <ol>
         <li data-md>
          <p>If <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values" id="ref-for-sec-ecmascript-data-types-and-values⑥">Type</a>(<var>value</var>) is Number, return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success④⑦">success</a> with data <var>value</var>.</p>
         <li data-md>
          <p class="assertion">Assert: <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values" id="ref-for-sec-ecmascript-data-types-and-values⑦">Type</a>(<var>value</var>) is String.</p>
         <li data-md>
          <p>If <var>value</var> is the string "<code>NaN</code>", return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success④⑧">success</a> with
 data NaN.</p>
         <li data-md>
          <p>Let <var>number_result</var> be <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-stringtonumber" id="ref-for-sec-stringtonumber">StringToNumber</a>(<var>value</var>).</p>
         <li data-md>
          <p>If <var>number_result</var> is NaN, return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors⑤⑤">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code⑤①">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument③③">invalid argument</a></p>
         <li data-md>
          <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success④⑨">success</a> with data <var>number_result</var>.</p>
        </ol>
       <dt><var>type</var> is the string "<code>boolean</code>" 
       <dd>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success⑤⓪">success</a> with data <var>value</var>. 
       <dt><var>type</var> is the string "<code>bigint</code>" 
       <dd>
        <ol>
         <li data-md>
          <p>Let <var>bigint_result</var> be <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-stringtobigint" id="ref-for-sec-stringtobigint">StringToBigInt</a>(<var>value</var>).</p>
         <li data-md>
          <p>If <var>bigint_result</var> is undefined, return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors⑤⑥">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code⑤②">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument③④">invalid argument</a></p>
         <li data-md>
          <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success⑤①">success</a> with data <var>bigint_result</var>.</p>
        </ol>
      </dl>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors⑤⑦">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code⑤③">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument③⑤">invalid argument</a></p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.5.3.10" id="type-script-RealmInfo"><span class="secno">6.5.3.10. </span><span class="content">The script.RealmInfo Type</span><a class="self-link" href="#type-script-RealmInfo"></a></h5>
   <p><a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition④②">Local end definition</a></p>
<pre class="cddl local-cddl">script.RealmInfo = (
  script.WindowRealmInfo /
  script.DedicatedWorkerRealmInfo /
  script.SharedWorkerRealmInfo /
  script.ServiceWorkerRealmInfo /
  script.WorkerRealmInfo /
  script.PaintWorkletRealmInfo /
  script.AudioWorkletRealmInfo /
  script.WorkletRealmInfo
)

script.BaseRealmInfo = (
  realm: script.Realm,
  origin: text
)

script.WindowRealmInfo = {
  script.BaseRealmInfo,
  type: "window",
  context: browsingContext.BrowsingContext,
  ? sandbox: text
}

script.DedicatedWorkerRealmInfo = {
  script.BaseRealmInfo,
  type: "dedicated-worker"
}

script.SharedWorkerRealmInfo = {
  script.BaseRealmInfo,
  type: "shared-worker"
}

script.ServiceWorkerRealmInfo = {
  script.BaseRealmInfo,
  type: "service-worker"
}

script.WorkerRealmInfo = {
  script.BaseRealmInfo,
  type: "worker"
}

script.PaintWorkletRealmInfo = {
  script.BaseRealmInfo,
  type: "paint-worklet"
}

script.AudioWorkletRealmInfo = {
  script.BaseRealmInfo,
  type: "audio-worklet"
}

script.WorkletRealmInfo = {
  script.BaseRealmInfo,
  type: "worklet"
}
</pre>
   <p class="note" role="note"><span class="marker">Note:</span> there’s a 1:1 relationship between the <code>script.RealmInfo</code> variants and values of <code>script.RealmType</code>.</p>
   <p>The <code>script.RealmInfo</code> type represents the properties of a realm.</p>
   <div class="algorithm" data-algorithm="get the browsing context">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="get-the-browsing-context">get the browsing context</dfn> with given <var>realm</var>: 
    <ol>
     <li data-md>
      <p>Let <var>global object</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global②">global object</a> of the <var>realm</var>.</p>
     <li data-md>
      <p>Let <var>global object</var> be the <a data-link-type="dfn" href="#unwrapped" id="ref-for-unwrapped">unwrapped</a> <var>global object</var>.</p>
     <li data-md>
      <p>If <var>global object</var> is not a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window⑥">Window</a></code> object, return <code>null</code>.</p>
     <li data-md>
      <p>Let <var>document</var> be <var>global object</var>’s wrapped <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window⑦">Window</a></code>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window③">associated <code>Document</code></a>.</p>
     <li data-md>
      <p>Return <var>document</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context" id="ref-for-browsing-context①⓪">browsing context</a>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="get the realm info">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="get-the-realm-info">get the realm info</dfn> given <var>environment settings</var>: 
    <ol>
     <li data-md>
      <p>Let <var>realm</var> be <var>environment settings</var>’ <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#realm-execution-context" id="ref-for-realm-execution-context②">realm execution context</a>'s Realm component.</p>
     <li data-md>
      <p>Let <var>realm id</var> be the <a data-link-type="dfn" href="#realm-id" id="ref-for-realm-id③">realm id</a> for <var>realm</var>.</p>
     <li data-md>
      <p>Let <var>origin</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#ascii-serialisation-of-an-origin" id="ref-for-ascii-serialisation-of-an-origin">serialization of an origin</a> given <var>environment settings</var>’s <var>origin</var>.</p>
     <li data-md>
      <p>Let <var>global object</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global③">global object</a> specified by <var>environment settings</var></p>
     <li data-md>
      <p>Run the steps under the first matching condition:</p>
      <dl>
       <dt><var>global object</var> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window⑧">Window</a></code> object 
       <dd>
        <ol>
         <li data-md>
          <p>Let <var>document</var> be <var>environment settings</var>’ <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global④">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window④">associated <code>Document</code></a>.</p>
         <li data-md>
          <p>Let <var>browsing context</var> be <var>document</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context" id="ref-for-browsing-context①①">browsing context</a>.</p>
         <li data-md>
          <p>Let <var>context id</var> be the <a data-link-type="dfn" href="#browsing-context-id" id="ref-for-browsing-context-id①①">browsing context id</a> for <var>browsing context</var>.</p>
         <li data-md>
          <p>Let <var>realm info</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑤⑨">map</a> matching the <code>script.WindowRealmInfo</code> production,
 with the <code>realm</code> field set to <var>realm id</var>, the <code>origin</code> field set to <var>origin</var>, and the <code>context</code> field set to <var>context id</var>.</p>
        </ol>
       <dt><var>global object</var> is <code class="idl"><a data-link-type="idl" href="#sandboxwindowproxy" id="ref-for-sandboxwindowproxy③">SandboxWindowProxy</a></code> object 
       <dd>
         TODO: Unclear if this is the right formulation for handling sandboxes. 
        <ol>
         <li data-md>
          <p>Let <var>document</var> be <var>global object</var>’s wrapped <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window⑨">Window</a></code>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window⑤">associated <code>Document</code></a>.</p>
         <li data-md>
          <p>Let <var>browsing context</var> be <var>document</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context" id="ref-for-browsing-context①②">browsing context</a>.</p>
         <li data-md>
          <p>Let <var>context id</var> be the <a data-link-type="dfn" href="#browsing-context-id" id="ref-for-browsing-context-id①②">browsing context id</a> for <var>browsing context</var>.</p>
         <li data-md>
          <p>Let <var>sandbox name</var> be the result of <a data-link-type="dfn" href="#get-a-sandbox-name" id="ref-for-get-a-sandbox-name">get a sandbox name</a> given <var>realm</var>.</p>
         <li data-md>
          <p class="assertion">Assert: <var>sandbox name</var> is not null.</p>
         <li data-md>
          <p>Let <var>realm info</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑥⓪">map</a> matching the <code>script.WindowRealmInfo</code> production,
 with the <code>realm</code> field set to <var>realm id</var>, the <code>origin</code> field set to <var>origin</var>, the <code>context</code> field set to <var>context id</var>,
 and the <code>sandbox</code> field set to <var>sandbox name</var>.</p>
        </ol>
       <dt><var>global object</var> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope" id="ref-for-dedicatedworkerglobalscope">DedicatedWorkerGlobalScope</a></code> object 
       <dd>
        <ol>
         <li data-md>
          <p>Let <var>realm info</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑥①">map</a> matching the <code>script.DedicatedWorkerRealmInfo</code> production,
 with the <code>realm</code> field set to <var>realm id</var>, and the <code>origin</code> field
 set to <var>origin</var>.</p>
        </ol>
       <dt><var>global object</var> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/workers.html#sharedworkerglobalscope" id="ref-for-sharedworkerglobalscope">SharedWorkerGlobalScope</a></code> object 
       <dd>
        <ol>
         <li data-md>
          <p>Let <var>realm info</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑥②">map</a> matching the <code>script.SharedWorkerRealmInfo</code> production,
 with the <code>realm</code> field set to <var>realm id</var>, and the <code>origin</code> field set to <var>origin</var>.</p>
        </ol>
       <dt><var>global object</var> is a <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/ServiceWorker/#serviceworkerglobalscope" id="ref-for-serviceworkerglobalscope">ServiceWorkerGlobalScope</a></code> object 
       <dd>
        <ol>
         <li data-md>
          <p>Let <var>realm info</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑥③">map</a> matching the <code>script.ServiceWorkerRealmInfo</code> production,
 with the <code>realm</code> field set to <var>realm id</var>, and the <code>origin</code> field
 set to <var>origin</var>.</p>
        </ol>
       <dt><var>global object</var> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/workers.html#workerglobalscope" id="ref-for-workerglobalscope①">WorkerGlobalScope</a></code> object 
       <dd>
        <ol>
         <li data-md>
          <p>Let <var>realm info</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑥④">map</a> matching the <code>script.WorkerRealmInfo</code> production,
 with the <code>realm</code> field set to <var>realm id</var>, and the <code>origin</code> field set to <var>origin</var>.</p>
        </ol>
       <dt><var>global object</var> is a <code class="idl"><a data-link-type="idl" href="https://drafts.css-houdini.org/css-paint-api-1/#paintworkletglobalscope" id="ref-for-paintworkletglobalscope">PaintWorkletGlobalScope</a></code> object 
       <dd>
        <ol>
         <li data-md>
          <p>Let <var>realm info</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑥⑤">map</a> matching the <code>script.PaintWorkletRealmInfo</code> production,
 with the <code>realm</code> field set to <var>realm id</var>, and the <code>origin</code> field set to <var>origin</var>.</p>
        </ol>
       <dt><var>global object</var> is a <code class="idl"><a data-link-type="idl" href="https://webaudio.github.io/web-audio-api/#AudioWorkletGlobalScope" id="ref-for-AudioWorkletGlobalScope">AudioWorkletGlobalScope</a></code> object 
       <dd>
        <ol>
         <li data-md>
          <p>Let <var>realm info</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑥⑥">map</a> matching the <code>script.AudioWorkletRealmInfo</code> production,
 with the <code>realm</code> field set to <var>realm id</var>, and the <code>origin</code> field set to <var>origin</var>.</p>
        </ol>
       <dt><var>global object</var> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/worklets.html#workletglobalscope" id="ref-for-workletglobalscope">WorkletGlobalScope</a></code> object 
       <dd>
        <ol>
         <li data-md>
          <p>Let <var>realm info</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑥⑦">map</a> matching the <code>script.WorkletRealmInfo</code> production,
 with the <code>realm</code> field set to <var>realm id</var>, and the <code>origin</code> field set to <var>origin</var>.</p>
        </ol>
       <dt>Otherwise: 
       <dd>
        <ol>
         <li data-md>
          <p>Let <var>realm info</var> be null.</p>
        </ol>
      </dl>
     <li data-md>
      <p>Return <var>realm info</var></p>
    </ol>
    <p class="note" role="note"><span class="marker">Note:</span> Future variations of this specification will retain the invariant that
         the last component of the type name after splitting on "<code>-</code>"
         will always be "<code>worker</code>" for globals implementing <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/workers.html#workerglobalscope" id="ref-for-workerglobalscope②">WorkerGlobalScope</a></code>, and "<code>worklet</code>" for globals
         implementing <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/worklets.html#workletglobalscope" id="ref-for-workletglobalscope①">WorkletGlobalScope</a></code>.</p>
   </div>
   <h5 class="heading settled" data-level="6.5.3.11" id="type-script-RealmType"><span class="secno">6.5.3.11. </span><span class="content">The script.RealmType Type</span><a class="self-link" href="#type-script-RealmType"></a></h5>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition③⑥">Remote end definition</a> and <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition④③">local end definition</a></p>
<pre class="cddl local-cddl remote-cddl">script.RealmType = "window" / "dedicated-worker" / "shared-worker" / "service-worker" /
                   "worker" / "paint-worklet" / "audio-worklet" / "worklet"
</pre>
   <p>The <code>script.RealmType</code> type represents the different types of Realm.</p>
   <h5 class="heading settled" data-level="6.5.3.12" id="type-script-RemoteReference"><span class="secno">6.5.3.12. </span><span class="content">The script.RemoteReference Type</span><a class="self-link" href="#type-script-RemoteReference"></a></h5>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition③⑦">Remote end definition</a></p>
<pre class="cddl remote-cddl">script.RemoteReference = (
  script.SharedReference /
  script.RemoteObjectReference
)

script.SharedReference = {
   sharedId: script.SharedId
   ? handle: script.Handle,
   Extensible
}

script.RemoteObjectReference = {
   handle: script.Handle,
   ? sharedId: script.SharedId
   Extensible
}
</pre>
   <p>The <code><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="scriptremotereference">script.RemoteReference</dfn></code> type is either a <code>script.RemoteObjectReference</code> representing a remote reference to an
existing ECMAScript object in <a data-link-type="dfn" href="#handle-object-map" id="ref-for-handle-object-map①">handle object map</a> in the given <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-code-realms" id="ref-for-sec-code-realms⑥">Realm</a>, or
is a <code>script.SharedReference</code> representing a reference to a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#boundary-point-node" id="ref-for-boundary-point-node">node</a>.</p>
   <p class="issue" id="issue-718fbe53"><a class="self-link" href="#issue-718fbe53"></a> handle "stale object reference" case.</p>
   <p class="note" role="note"><span class="marker">Note:</span> if the provided reference has both <code>handle</code> and <code>sharedId</code>, the algorithm will ignore <code>handle</code> and respect
only <code>sharedId</code>.</p>
   <div class="algorithm" data-algorithm="deserialize remote reference">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="deserialize-remote-reference">deserialize remote reference</dfn> given <var>remote reference</var>, <var>realm</var> and <var>session</var>: 
    <ol>
     <li data-md>
      <p>Assert <var>remote reference</var> matches the <code>script.RemoteReference</code> production.</p>
     <li data-md>
      <p>If <var>remote reference</var> matches the <code>script.SharedReference</code> production, return <a data-link-type="dfn" href="#deserialize-shared-reference" id="ref-for-deserialize-shared-reference">deserialize shared reference</a> with <var>remote reference</var>, <var>realm</var> and <var>session</var>.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="#deserialize-remote-object-reference" id="ref-for-deserialize-remote-object-reference">deserialize remote object reference</a> with <var>remote reference</var> and <var>realm</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="deserialize remote object reference">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="deserialize-remote-object-reference">deserialize remote object reference</dfn> given <var>remote object reference</var> and <var>realm</var>: 
    <ol>
     <li data-md>
      <p>Let <var>handle id</var> be the value of the <code>handle</code> field of <var>remote object reference</var>.</p>
     <li data-md>
      <p>Let <var>handle map</var> be <var>realm</var>’s <a data-link-type="dfn" href="#handle-object-map" id="ref-for-handle-object-map②">handle object map</a></p>
     <li data-md>
      <p>If <var>handle map</var> does not contain <var>handle id</var>, then return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors⑤⑧">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code⑤④">error code</a> <a data-link-type="dfn" href="#no-such-handle" id="ref-for-no-such-handle">no such handle</a>.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success⑤②">success</a> with data <var>handle map</var>[<var>handle id</var>].</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="deserialize shared reference">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="deserialize-shared-reference">deserialize shared reference</dfn> given <var>shared reference</var>, <var>realm</var> and <var>session</var>: 
    <ol>
     <li data-md>
      <p>Assert <var>shared reference</var> matches the <code>script.SharedReference</code> production.</p>
     <li data-md>
      <p>Let <var>browsing context</var> be <a data-link-type="dfn" href="#get-the-browsing-context" id="ref-for-get-the-browsing-context">get the browsing context</a> with <var>realm</var>.</p>
     <li data-md>
      <p>If <var>browsing context</var> is <code>null</code>, return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors⑤⑨">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code⑤⑤">error code</a> <a data-link-type="dfn" href="#no-such-node" id="ref-for-no-such-node">no such node</a>.</p>
      <p class="note" role="note"><span class="marker">Note:</span> This happens when the realm isn’t a Window global.</p>
     <li data-md>
      <p>Let <var>shared id</var> be the value of the <code>sharedId</code> field of <var>shared reference</var>.</p>
     <li data-md>
      <p>Let <var>node</var> be result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try③⑤">trying</a> to <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-get-a-node" id="ref-for-dfn-get-a-node">get a node</a> with <var>session</var>, <var>browsing context</var> and <var>shared id</var>.</p>
     <li data-md>
      <p>If <var>node</var> is <code>null</code>, return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors⑥⓪">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code⑤⑥">error code</a> <a data-link-type="dfn" href="#no-such-node" id="ref-for-no-such-node①">no such node</a>.</p>
     <li data-md>
      <p>Let <var>environment settings</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object②">environment settings object</a> whose <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#realm-execution-context" id="ref-for-realm-execution-context③">realm execution context</a>'s Realm component is <var>realm</var>.</p>
     <li data-md>
      <p>If <var>node</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document①">node document</a>'s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-origin" id="ref-for-concept-document-origin">origin</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin-domain" id="ref-for-same-origin-domain">same origin
 domain</a> with <var>environment settings</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin">origin</a> then return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors⑥①">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code⑤⑦">error code</a> <a data-link-type="dfn" href="#no-such-node" id="ref-for-no-such-node②">no such node</a>.</p>
      <p class="note" role="note"><span class="marker">Note:</span> This ensures that WebDriver-BiDi can not be used to pass objects
 between realms that do not otherwise permit script access.</p>
     <li data-md>
      <p>Let <var>realm global object</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global④">global object</a> of the <var>realm</var>.</p>
     <li data-md>
      <p>If the <var>realm global object</var> is <code class="idl"><a data-link-type="idl" href="#sandboxwindowproxy" id="ref-for-sandboxwindowproxy④">SandboxWindowProxy</a></code> object, set <var>node</var> to the <code class="idl"><a data-link-type="idl" href="#sandboxproxy" id="ref-for-sandboxproxy⑤">SandboxProxy</a></code> wrapping <var>node</var> in the <var>realm</var>.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success⑤③">success</a> with data <var>node</var>.</p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.5.3.13" id="type-script-RemoteValue"><span class="secno">6.5.3.13. </span><span class="content">The script.RemoteValue Type</span><a class="self-link" href="#type-script-RemoteValue"></a></h5>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition③⑧">Remote end definition</a> and <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition④④">local end definition</a></p>
<pre class="cddl local-cddl remote-cddl">script.RemoteValue = (
  script.PrimitiveProtocolValue /
  script.SymbolRemoteValue /
  script.ArrayRemoteValue /
  script.ObjectRemoteValue /
  script.FunctionRemoteValue /
  script.RegExpRemoteValue /
  script.DateRemoteValue /
  script.MapRemoteValue /
  script.SetRemoteValue /
  script.WeakMapRemoteValue /
  script.WeakSetRemoteValue /
  script.IteratorRemoteValue /
  script.GeneratorRemoteValue /
  script.ErrorRemoteValue /
  script.ProxyRemoteValue /
  script.PromiseRemoteValue /
  script.TypedArrayRemoteValue /
  script.ArrayBufferRemoteValue /
  script.NodeListRemoteValue /
  script.HTMLCollectionRemoteValue /
  script.NodeRemoteValue /
  script.WindowProxyRemoteValue
)

script.InternalId = js-uint;

script.ListRemoteValue = [*script.RemoteValue];

script.MappingRemoteValue = [*[(script.RemoteValue / text), script.RemoteValue]];

script.SymbolRemoteValue = {
  type: "symbol",
  ? handle: script.Handle,
  ? internalId: script.InternalId,
}

script.ArrayRemoteValue = {
  type: "array",
  ? handle: script.Handle,
  ? internalId: script.InternalId,
  ? value: script.ListRemoteValue,
}

script.ObjectRemoteValue = {
  type: "object",
  ? handle: script.Handle,
  ? internalId: script.InternalId,
  ? value: script.MappingRemoteValue,
}

script.FunctionRemoteValue = {
  type: "function",
  ? handle: script.Handle,
  ? internalId: script.InternalId,
}

script.RegExpRemoteValue = {
  ? handle: script.Handle,
  ? internalId: script.InternalId,
} .and script.RegExpLocalValue

script.DateRemoteValue = {
  ? handle: script.Handle,
  ? internalId: script.InternalId,
} .and script.DateLocalValue

script.MapRemoteValue = {
  type: "map",
  ? handle: script.Handle,
  ? internalId: script.InternalId,
  ? value: script.MappingRemoteValue,
}

script.SetRemoteValue = {
  type: "set",
  ? handle: script.Handle,
  ? internalId: script.InternalId,
  ? value: script.ListRemoteValue
}

script.WeakMapRemoteValue = {
  type: "weakmap",
  ? handle: script.Handle,
  ? internalId: script.InternalId,
}

script.WeakSetRemoteValue = {
  type: "weakset",
  ? handle: script.Handle,
  ? internalId: script.InternalId,
}

script.IteratorRemoteValue = {
  type: "iterator",
  ? handle: script.Handle,
  ? internalId: script.InternalId,
}

script.GeneratorRemoteValue = {
  type: "generator",
  ? handle: script.Handle,
  ? internalId: script.InternalId,
}

script.ErrorRemoteValue = {
  type: "error",
  ? handle: script.Handle,
  ? internalId: script.InternalId,
}

script.ProxyRemoteValue = {
  type: "proxy",
  ? handle: script.Handle,
  ? internalId: script.InternalId,
}

script.PromiseRemoteValue = {
  type: "promise",
  ? handle: script.Handle,
  ? internalId: script.InternalId,
}

script.TypedArrayRemoteValue = {
  type: "typedarray",
  ? handle: script.Handle,
  ? internalId: script.InternalId,
}

script.ArrayBufferRemoteValue = {
  type: "arraybuffer",
  ? handle: script.Handle,
  ? internalId: script.InternalId,
}

script.NodeListRemoteValue = {
  type: "nodelist",
  ? handle: script.Handle,
  ? internalId: script.InternalId,
  ? value: script.ListRemoteValue,
}

script.HTMLCollectionRemoteValue = {
  type: "htmlcollection",
  ? handle: script.Handle,
  ? internalId: script.InternalId,
  ? value: script.ListRemoteValue,
}

script.NodeRemoteValue = {
  type: "node",
  ? sharedId: script.SharedId,
  ? handle: script.Handle,
  ? internalId: script.InternalId,
  ? value: script.NodeProperties,
}

script.NodeProperties = {
  nodeType: js-uint,
  childNodeCount: js-uint,
  ? attributes: {*text => text},
  ? children: [*script.NodeRemoteValue],
  ? localName: text,
  ? mode: "open" / "closed",
  ? namespaceURI: text,
  ? nodeValue: text,
  ? shadowRoot: script.NodeRemoteValue / null,
}

script.WindowProxyRemoteValue = {
  type: "window",
  value: script.WindowProxyProperties,
  ? handle: script.Handle,
  ? internalId: script.InternalId
}

script.WindowProxyProperties = {
  context: browsingContext.BrowsingContext
}
</pre>
   <p class="issue" id="issue-14921645"><a class="self-link" href="#issue-14921645"></a> Add WASM types?</p>
   <p class="issue" id="issue-ace5d7fc"><a class="self-link" href="#issue-ace5d7fc"></a> Should WindowProxy get attributes in a similar style to Node?</p>
   <p class="issue" id="issue-4eaad8c4"><a class="self-link" href="#issue-4eaad8c4"></a> Describe `script.IteratorRemoteValue` serialization.</p>
   <p class="issue" id="issue-ed5aeb4f"><a class="self-link" href="#issue-ed5aeb4f"></a> Describe `script.GeneratorRemoteValue` serialization.</p>
   <p class="issue" id="issue-d0f1d4bd"><a class="self-link" href="#issue-d0f1d4bd"></a> Describe `script.ProxyRemoteValue` serialization.</p>
   <p class="issue" id="issue-daee5863"><a class="self-link" href="#issue-daee5863"></a> handle String / Number / etc. wrapper objects specially?</p>
   <p>Values accessible from the ECMAScript runtime are represented by a mirror
object, specified as <code>script.RemoteValue</code>. The value’s type is
specified in the <code>type</code> property. In the case of JSON-representable
primitive values, this contains the value in the <code>value</code> property; in
the case of non-JSON-representable primitives, the <code>value</code> property
contains a string representation of the value.</p>
   <p>For non-primitive objects, the <code>handle</code> property, when present,
contains a unique string handle to the object. The handle is unique for each
serialization. The remote end will keep objects with a corresponding handle
alive until such a time that <code>script.disown</code> is called with that
handle, or the realm itself is to be discarded (e.g. due to navigation).</p>
   <p>For some non-primitive types, the <code>value</code> property contains a
representation of the data in the ECMAScript object; for container types this
can contain further <code>script.RemoteValue</code> instances. The <code>value</code> property can be null or omitted if there is a duplicate
object i.e. the object has already been serialized in the current <code>script.RemoteValue</code>, perhaps as part of a cycle, or otherwise when
the maximum serialization depth is reached.</p>
   <p>In case of duplicated objects in the same <code>script.RemoteValue</code>, the
value is provided only for one of the remote values, while the
unique-per-ECMAScript-object <code>internalId</code> is provided for all the
duplicated objects for a given serialization.</p>
   <p><a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node" id="ref-for-concept-node">Nodes</a> are also represented by <code>script.RemoteValue</code> instances. These have a partial serialization of the node in the value property.</p>
   <p class="issue" id="issue-c8a585bd"><a class="self-link" href="#issue-c8a585bd"></a> reconsider mirror objects' lifecycle.</p>
   <p class="note" role="note"><span class="marker">Note:</span> mirror objects do not keep the original object alive in the runtime. If an
object is discarded in the runtime, subsequent attempts to access it via the
protocol will result in an error.</p>
   <div class="algorithm" data-algorithm="handle for an object">
     To get the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="handle-for-an-object">handle for an object</dfn> given <var>realm</var>, <var>ownership type</var> and <var>object</var>: 
    <ol>
     <li data-md>
      <p>If <var>ownership type</var> is equal "<code>none</code>", return <code>null</code>.</p>
     <li data-md>
      <p>Let <var>handle id</var> be a new, unique, string handle for <var>object</var>.</p>
     <li data-md>
      <p>Let <var>handle map</var> be <var>realm</var>’s <a data-link-type="dfn" href="#handle-object-map" id="ref-for-handle-object-map③">handle object map</a></p>
     <li data-md>
      <p>Set <var>handle map</var>[<var>handle id</var>] to <var>object</var>.</p>
     <li data-md>
      <p>Return <var>handle id</var> as a result.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="get shared id for a node">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="get-shared-id-for-a-node">get shared id for a node</dfn> given <var>node</var>, and <var>session</var>: 
    <ol>
     <li data-md>
      <p>Let <var>node</var> be <a data-link-type="dfn" href="#unwrapped" id="ref-for-unwrapped①">unwrapped</a> <var>node</var>.</p>
     <li data-md>
      <p>If <var>node</var> does not implement <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#node" id="ref-for-node">Node</a></code>, return null.</p>
     <li data-md>
      <p>Let <var>browsing context</var> be <var>node</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document②">node document</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#concept-document-bc" id="ref-for-concept-document-bc②">browsing context</a>.</p>
     <li data-md>
      <p>If <var>browsing context</var> is null, return null.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-get-or-create-a-node-reference" id="ref-for-dfn-get-or-create-a-node-reference">get or create a node reference</a> with <var>session</var>, <var>browsing context</var> and <var>node</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="set internal ids if needed">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="set-internal-ids-if-needed">set internal ids if needed</dfn> given <var>serialization internal map</var>, <var>remote value</var> and <var>object</var>: 
    <ol>
     <li data-md>
      <p>If the <var>serialization internal map</var> does not contain <var>object</var>, set <var>serialization internal map</var>[<var>object</var>] to <var>remote value</var>.</p>
     <li data-md>
      <p>Otherwise, run the following steps:</p>
      <ol>
       <li data-md>
        <p>Let <var>previously serialized remote value</var> be <var>serialization internal map</var>[<var>object</var>].</p>
       <li data-md>
        <p>If <var>previously serialized remote value</var> does not have a field <code>internalId</code>, run the following steps:</p>
        <ol>
         <li data-md>
          <p>Let <var>internal id</var> be a unique across the <code>internalId</code> fields of
 the values of <var>serialization internal map</var> integer.</p>
         <li data-md>
          <p>Set the <code>internalId</code> field of <var>previously serialized remote value</var> to <var>internal id</var>.</p>
        </ol>
       <li data-md>
        <p>Set the <code>internalId</code> field of <var>remote value</var> to a field <code>internalId</code> in <var>previously serialized remote value</var>.</p>
      </ol>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="serialize as a remote value">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="serialize-as-a-remote-value">serialize as a remote value</dfn> given <var>value</var>, <var>serialization options</var>,
an <var>ownership type</var>, a <var>serialization internal map</var>, a <var>realm</var> and a <var>session</var>:</p>
    <ol>
     <li data-md>
      <p>Let <var>remote value</var> be a result of <a data-link-type="dfn" href="#serialize-primitive-protocol-value" id="ref-for-serialize-primitive-protocol-value">serialize primitive protocol value</a> given a <var>value</var>.</p>
     <li data-md>
      <p>If <var>remote value</var> is not undefined, return <var>remote value</var>.</p>
     <li data-md>
      <p>In the following list of conditions and associated steps, run the first set
 of steps for which the associated condition is true:</p>
     <li data-md>
      <p>Let <var>handle id</var> be the <a data-link-type="dfn" href="#handle-for-an-object" id="ref-for-handle-for-an-object">handle for an object</a> with <var>realm</var>, <var>ownership type</var> and <var>value</var>.</p>
     <li data-md>
      <p>Set <var>ownership type</var> to "<code>none</code>".</p>
     <li data-md>
      <p>Let <var>known object</var> be <code>true</code>, if <var>value</var> is in the <var>serialization internal map</var>, otherwise <code>false</code>.</p>
      <dl>
       <dt><a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values" id="ref-for-sec-ecmascript-data-types-and-values⑧">Type</a>(<var>value</var>) is Symbol 
       <dd>Let <var>remote value</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑥⑧">map</a> matching the <code>script.SymbolRemoteValue</code> production in the <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition④⑤">local end definition</a>, with the <code>handle</code> property set to <var>handle id</var> if it’s not null, or omitted otherwise. 
       <dt><a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-isarray" id="ref-for-sec-isarray">IsArray</a>(<var>value</var>) 
       <dd>Let <var>remote value</var> be <a data-link-type="dfn" href="#serialize-an-array-like" id="ref-for-serialize-an-array-like">serialize an Array-like</a> with <var>session</var>, <code>script.ArrayRemoteValue</code>, <var>handle id</var>, <var>known object</var>, <var>value</var>, <var>serialization options</var>, <var>ownership type</var>, <var>serialization internal map</var>, <var>realm</var>, and <var>session</var>. 
       <dt><a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-isregexp" id="ref-for-sec-isregexp">IsRegExp</a>(<var>value</var>) 
       <dd>
        <ol>
         <li data-md>
          <p>Let <var>pattern</var> be <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-tostring" id="ref-for-sec-tostring①">ToString</a>(<a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-get" id="ref-for-sec-get">Get</a>(<var>value</var>, "source")).</p>
         <li data-md>
          <p>Let <var>flags</var> be <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-tostring" id="ref-for-sec-tostring②">ToString</a>(<a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-get" id="ref-for-sec-get①">Get</a>(<var>value</var>, "flags")).</p>
         <li data-md>
          <p>Let <var>serialized</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑥⑨">map</a> matching the <code>script.RegExpValue</code> production in the <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition④⑥">local end definition</a>, with the <code>pattern</code> property set to the <var>pattern</var> and the the <code>flags</code> property set to the <var>flags</var>.</p>
         <li data-md>
          <p>Let <var>remote value</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑦⓪">map</a> matching the <code>script.RegExpRemoteValue</code> production in the <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition④⑦">local end definition</a>, with the <code>handle</code> property set to <var>handle id</var> if it’s not null, or omitted otherwise, and
 the <code>value</code> property set to <var>serialized</var>.</p>
        </ol>
       <dt><var>value</var> has a [[DateValue]] <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-object-internal-methods-and-internal-slots" id="ref-for-sec-object-internal-methods-and-internal-slots">internal slot</a>. 
       <dd>
        <ol>
         <li data-md>
          <p>Set <var>serialized</var> to <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-call" id="ref-for-sec-call①">Call</a>(<a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-date.prototype.toisostring" id="ref-for-sec-date.prototype.toisostring">Date.prototype.toISOString</a>, <var>value</var>).</p>
         <li data-md>
          <p class="assertion">Assert: <var>serialized</var> is not a <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-completion-record-specification-type" id="ref-for-sec-completion-record-specification-type④">throw completion</a>.</p>
         <li data-md>
          <p>Let <var>remote value</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑦①">map</a> matching the <code>script.DateRemoteValue</code> production in the <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition④⑧">local end definition</a>, with the <code>handle</code> property set to <var>handle id</var> if it’s not null, or omitted otherwise, and the
 value set to <var>serialized</var>.</p>
        </ol>
       <dt><var>value</var> has a [[MapData]] <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-object-internal-methods-and-internal-slots" id="ref-for-sec-object-internal-methods-and-internal-slots①">internal slot</a> 
       <dd>
        <ol>
         <li data-md>
          <p>Let <var>remote value</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑦②">map</a> matching the <code>script.MapRemoteValue</code> production in the <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition④⑨">local end definition</a>, with the <code>handle</code> property set to <var>handle id</var> if it’s not null, or omitted
 otherwise.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="#set-internal-ids-if-needed" id="ref-for-set-internal-ids-if-needed">Set internal ids if needed</a> with <var>serialization internal map</var>, <var>remote value</var> and <var>value</var>.</p>
         <li data-md>
          <p>Let <var>serialized</var> be null.</p>
         <li data-md>
          <p>If <var>known object</var> is <code>false</code>, and <var>serialization
 options</var>["<code>maxObjectDepth</code>"] is not 0, run the following
 steps:</p>
          <ol>
           <li data-md>
            <p>Let <var>serialized</var> be the result of <a data-link-type="dfn" href="#serialize-as-a-mapping" id="ref-for-serialize-as-a-mapping">serialize as a mapping</a> with <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-createmapiterator" id="ref-for-sec-createmapiterator">CreateMapIterator</a>(<var>value</var>, key+value), <var>serialization options</var>, <var>ownership type</var>, <var>serialization internal map</var>, <var>realm</var>, and <var>session</var>.</p>
          </ol>
         <li data-md>
          <p>If <var>serialized</var> is not null, set field <code>value</code> of <var>remote value</var> to <var>serialized</var>.</p>
        </ol>
       <dt><var>value</var> has a [[SetData]] <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-object-internal-methods-and-internal-slots" id="ref-for-sec-object-internal-methods-and-internal-slots②">internal slot</a> 
       <dd>
        <ol>
         <li data-md>
          <p>Let <var>remote value</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑦③">map</a> matching the <code>script.SetRemoteValue</code> production in the <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition⑤⓪">local end definition</a>, with the <code>handle</code> property set to <var>handle id</var> if it’s not null, or omitted
 otherwise.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="#set-internal-ids-if-needed" id="ref-for-set-internal-ids-if-needed①">Set internal ids if needed</a> with <var>serialization internal map</var>, <var>remote value</var> and <var>value</var>.</p>
         <li data-md>
          <p>Let <var>serialized</var> be null.</p>
         <li data-md>
          <p>If <var>known object</var> is <code>false</code>, and <var>serialization
 options</var>["<code>maxObjectDepth</code>"] is not 0, run the following
 steps:</p>
          <ol>
           <li data-md>
            <p>Let <var>serialized</var> be the result of <a data-link-type="dfn" href="#serialize-as-a-list" id="ref-for-serialize-as-a-list">serialize as a list</a> with <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-createsetiterator" id="ref-for-sec-createsetiterator">CreateSetIterator</a>(<var>value</var>, value), <var>serialization options</var>, <var>ownership type</var>, <var>serialization internal map</var>, <var>realm</var>, and <var>session</var>.</p>
          </ol>
         <li data-md>
          <p>If <var>serialized</var> is not null, set field <code>value</code> of <var>remote value</var> to <var>serialized</var>.</p>
        </ol>
       <dt><var>value</var> has a [[WeakMapData]] <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-object-internal-methods-and-internal-slots" id="ref-for-sec-object-internal-methods-and-internal-slots③">internal slot</a> 
       <dd>Let <var>remote value</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑦④">map</a> matching the <code>script.WeakMapRemoteValue</code> production in the <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition⑤①">local end definition</a>, with the <code>handle</code> property set to <var>handle id</var> if it’s not null, or omitted otherwise. 
       <dt><var>value</var> has a [[WeakSetData]] <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-object-internal-methods-and-internal-slots" id="ref-for-sec-object-internal-methods-and-internal-slots④">internal slot</a> 
       <dd>Let <var>remote value</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑦⑤">map</a> matching the <code>script.WeakSetRemoteValue</code> production in the <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition⑤②">local end definition</a>, with the <code>handle</code> property set to <var>handle id</var> if it’s not null, or omitted otherwise. 
       <dt><var>value</var> has an [[ErrorData]] <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-object-internal-methods-and-internal-slots" id="ref-for-sec-object-internal-methods-and-internal-slots⑤">internal slot</a> 
       <dd>Let <var>remote value</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑦⑥">map</a> matching the <code>script.ErrorRemoteValue</code> production in the <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition⑤③">local end definition</a>, with the <code>handle</code> property set to <var>handle id</var> if it’s not null, or omitted otherwise. 
       <dt><a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-ispromise" id="ref-for-sec-ispromise">IsPromise</a>(<var>value</var>) 
       <dd>Let <var>remote value</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑦⑦">map</a> matching the <code>script.PromiseRemoteValue</code> production in the <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition⑤④">local end definition</a>, with the <code>handle</code> property set to <var>handle id</var> if it’s not null, or omitted otherwise. 
       <dt><var>value</var> has a [[TypedArrayName]] <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-object-internal-methods-and-internal-slots" id="ref-for-sec-object-internal-methods-and-internal-slots⑥">internal slot</a> 
       <dd>Let <var>remote value</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑦⑧">map</a> matching the <code>script.TypedArrayRemoteValue</code> production in the <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition⑤⑤">local end definition</a>, with the <code>handle</code> property set to <var>handle id</var> if it’s not null, or omitted otherwise. 
       <dt><var>value</var> has an [[ArrayBufferData]] <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-object-internal-methods-and-internal-slots" id="ref-for-sec-object-internal-methods-and-internal-slots⑦">internal slot</a> 
       <dd>Let <var>remote value</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑦⑨">map</a> matching the <code>script.ArrayBufferRemoteValue</code> production in the <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition⑤⑥">local end definition</a>, with the <code>handle</code> property set to <var>handle id</var> if it’s not null, or omitted otherwise. 
       <dt><var>value</var> is a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-platform-object" id="ref-for-dfn-platform-object">platform object</a> that implements <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#nodelist" id="ref-for-nodelist">NodeList</a></code> 
       <dd>Let <var>remote value</var> be <a data-link-type="dfn" href="#serialize-an-array-like" id="ref-for-serialize-an-array-like①">serialize an Array-like</a> with <code>script.NodeListRemoteValue</code>,<var>handle id</var>, <var>known object</var>, <var>value</var>, <var>serialization options</var>, <var>ownership type</var>, <var>serialization internal map</var>, <var>realm</var>, and <var>session</var>. 
       <dt><var>value</var> is a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-platform-object" id="ref-for-dfn-platform-object①">platform object</a> that implements <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#htmlcollection" id="ref-for-htmlcollection">HTMLCollection</a></code> 
       <dd>Let <var>remote value</var> be <a data-link-type="dfn" href="#serialize-an-array-like" id="ref-for-serialize-an-array-like②">serialize an Array-like</a> with <code>script.HTMLCollectionRemoteValue</code>, <var>handle id</var>, <var>known object</var>, <var>value</var>, <var>serialization options</var>, <var>ownership type</var>, <var>known object</var>, <var>serialization internal map</var>, <var>realm</var>, and <var>session</var>. 
       <dt><var>value</var> is a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-platform-object" id="ref-for-dfn-platform-object②">platform object</a> that implements <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#node" id="ref-for-node①">Node</a></code> 
       <dd>
        <ol>
         <li data-md>
          <p>Let <var>shared id</var> be <a data-link-type="dfn" href="#get-shared-id-for-a-node" id="ref-for-get-shared-id-for-a-node">get shared id for a node</a> with <var>value</var> and <var>session</var>.</p>
         <li data-md>
          <p>Let <var>remote value</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑧⓪">map</a> matching the <code>script.NodeRemoteValue</code> production in the <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition⑤⑦">local end definition</a>, with the <code>sharedId</code> property set to <var>shared id</var> if it’s not null, or omitted otherwise, and the <code>handle</code> property set to <var>handle id</var> if it’s not null, or omitted
 otherwise.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="#set-internal-ids-if-needed" id="ref-for-set-internal-ids-if-needed②">Set internal ids if needed</a> with <var>serialization internal map</var>, <var>remote value</var> and <var>value</var>.</p>
         <li data-md>
          <p>Let <var>serialized</var> be null.</p>
         <li data-md>
          <p>If <var>known object</var> is <code>false</code>, run the following steps:</p>
          <ol>
           <li data-md>
            <p>Let <var>serialized</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑧①">map</a>.</p>
           <li data-md>
            <p>Set <var>serialized</var>["<code>nodeType</code>"] to <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-get" id="ref-for-sec-get②">Get</a>(<var>value</var>, "nodeType").</p>
           <li data-md>
            <p>Set <var>node value</var> to <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-get" id="ref-for-sec-get③">Get</a>(<var>value</var>, "nodeValue").</p>
           <li data-md>
            <p>If <var>node value</var> is not null set <var>serialized</var>["<code>nodeValue</code>"] to <var>node value</var>.</p>
           <li data-md>
            <p>If <var>value</var> implements <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element①">Element</a></code> or <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#attr" id="ref-for-attr">Attr</a></code>:</p>
            <ol>
             <li data-md>
              <p>Set <var>serialized</var>["<code>localName</code>"] to <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-get" id="ref-for-sec-get④">Get</a>(<var>value</var>, "localName").</p>
             <li data-md>
              <p>Set <var>serialized</var>["<code>namespaceURI</code>"] to <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-get" id="ref-for-sec-get⑤">Get</a>(<var>value</var>, "namespaceURI")</p>
            </ol>
           <li data-md>
            <p>Let <var>child node count</var> be the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-size" id="ref-for-list-size①">size</a> of <var>value</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-child" id="ref-for-concept-tree-child">children</a>.</p>
           <li data-md>
            <p>Set <var>serialized</var>["<code>childNodeCount</code>"] to <var>child node count</var>.</p>
           <li data-md>
            <p>If <var>serialization options</var>["<code>maxDomDepth</code>"] is equal to
 0, or if <var>value</var> implements <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#shadowroot" id="ref-for-shadowroot">ShadowRoot</a></code> and <var>serialization
 options</var>["<code>includeShadowTree</code>"] is "<code>none</code>",
 or if <var>serialization options</var>["<code>includeShadowTree</code>"] is
 "<code>open</code>" and <var>value</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#shadowroot-mode" id="ref-for-shadowroot-mode">mode</a> is
 "<code>closed</code>", let <var>children</var> be null.</p>
            <p>Otherwise, let <var>children</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list⑧">list</a> and, for each node <var>child</var> in the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-tree-child" id="ref-for-concept-tree-child①">children</a> of <var>value</var>:</p>
            <ol>
             <li data-md>
              <p>Let <var>child serialization options</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-clone" id="ref-for-map-clone">clone</a> of <var>serialization options</var>.</p>
             <li data-md>
              <p>If <var>child serialization options</var>["<code>maxDomDepth</code>"] is
 not null, set <var>child serialization
 options</var>["<code>maxDomDepth</code>"] to <var>child serialization
 options</var>["<code>maxDomDepth</code>"] - 1.</p>
             <li data-md>
              <p>Let <var>serialized</var> be the result of <a data-link-type="dfn" href="#serialize-as-a-remote-value" id="ref-for-serialize-as-a-remote-value①">serialize as a remote value</a> with <var>child</var>, <var>child serialization options</var>, <var>ownership type</var>, <var>serialization internal map</var>, <var>realm</var>, and <var>session</var>.</p>
             <li data-md>
              <p>Append <var>serialized</var> to <var>children</var>.</p>
            </ol>
           <li data-md>
            <p>If <var>children</var> is not null, set <var>serialized</var>["<code>children</code>"] to <var>children</var>.</p>
           <li data-md>
            <p>If <var>value</var> implements <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element②">Element</a></code>:</p>
            <ol>
             <li data-md>
              <p>Let <var>attributes</var> be a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑧②">map</a>.</p>
             <li data-md>
              <p>For each <var>attribute</var> in <var>value</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element-attribute" id="ref-for-concept-element-attribute">attribute list</a>:</p>
              <ol>
               <li data-md>
                <p>Let <var>name</var> be <var>attribute</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-attribute-qualified-name" id="ref-for-concept-attribute-qualified-name">qualified name</a></p>
               <li data-md>
                <p>Let <var>value</var> be <var>attribute</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-attribute-value" id="ref-for-concept-attribute-value">value</a>.</p>
               <li data-md>
                <p>Set <var>attributes</var>[<var>name</var>] to <var>value</var></p>
              </ol>
             <li data-md>
              <p>Set <var>serialized</var>["<code>attributes</code>"] to <var>attributes</var>.</p>
             <li data-md>
              <p>Let <var>shadow root</var> be <var>value</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-element-shadow-root" id="ref-for-concept-element-shadow-root">shadow root</a>.</p>
             <li data-md>
              <p>If <var>shadow root</var> is null, let <var>serialized shadow</var> be null.
  Otherwise run the following substeps:</p>
              <ol>
               <li data-md>
                <p>Let <var>serialized shadow</var> be the result of <a data-link-type="dfn" href="#serialize-as-a-remote-value" id="ref-for-serialize-as-a-remote-value②">serialize as a remote value</a> with <var>shadow root</var>, <var>serialization options</var>, <var>ownership type</var>, <var>serialization internal map</var>, <var>realm</var>, and <var>session</var>.</p>
              </ol>
             <li data-md>
              <p>Set <var>serialized</var>["<code>shadowRoot</code>"] to <var>serialized shadow</var>.</p>
            </ol>
           <li data-md>
            <p>If <var>value</var> implements <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#shadowroot" id="ref-for-shadowroot①">ShadowRoot</a></code>, set <var>serialized</var>["<code>mode</code>"]
 to <var>value</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#shadowroot-mode" id="ref-for-shadowroot-mode①">mode</a>.</p>
          </ol>
         <li data-md>
          <p>If <var>serialized</var> is not null, set field <code>value</code> of <var>remote value</var> to <var>serialized</var>.</p>
        </ol>
       <dt><var>value</var> is a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-platform-object" id="ref-for-dfn-platform-object③">platform object</a> that implements <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#windowproxy" id="ref-for-windowproxy">WindowProxy</a></code> 
       <dd>
        <ol>
         <li data-md>
          <p>Let <var>window</var> be the value of <var>value</var>’s [[WindowProxy]] <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-object-internal-methods-and-internal-slots" id="ref-for-sec-object-internal-methods-and-internal-slots⑧">internal
 slot</a>.</p>
         <li data-md>
          <p>Let <var>browsing context</var> be <var>window</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc" id="ref-for-window-bc">browsing context</a>.</p>
         <li data-md>
          <p>Let <var>context id</var> be the <a data-link-type="dfn" href="#browsing-context-id" id="ref-for-browsing-context-id①③">browsing context id</a> for <var>browsing context</var>.</p>
         <li data-md>
          <p>Let <var>serialized</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑧③">map</a> matching the <code>script.WindowProxyProperties</code> production in the <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition⑤⑧">local end
 definition</a> with the <code>context</code> property set to <var>context id</var>.</p>
         <li data-md>
          <p>Let <var>remote value</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑧④">map</a> matching the <code>script.WindowProxyRemoteValue</code> production in the <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition⑤⑨">local end definition</a>, with the <code>handle</code> property set to <var>handle id</var> if it’s not null, or omitted otherwise, and
 the <code>value</code> property set to <var>serialized</var>.</p>
        </ol>
       <dt><var>value</var> is a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-platform-object" id="ref-for-dfn-platform-object④">platform object</a> 
       <dd>1. Let <var>remote value</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑧⑤">map</a> matching the <code>script.ObjectRemoteValue</code> production in the <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition⑥⓪">local end definition</a>, with the <code>handle</code> property set to <var>handle id</var> if it’s not null, or omitted otherwise. 
       <dt><a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-iscallable" id="ref-for-sec-iscallable①">IsCallable</a>(<var>value</var>) 
       <dd>Let <var>remote value</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑧⑥">map</a> matching the <code>script.FunctionRemoteValue</code> production in the <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition⑥①">local end definition</a>, with the <code>handle</code> property set to <var>handle id</var> if it’s not null, or omitted otherwise. 
       <dt>Otherwise: 
       <dd>
        <ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert③">Assert</a>: <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values" id="ref-for-sec-ecmascript-data-types-and-values⑨">type</a>(<var>value</var>) is Object</p>
         <li data-md>
          <p>Let <var>remote value</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑧⑦">map</a> matching the <code>script.ObjectRemoteValue</code> production
 in the <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition⑥②">local end definition</a>, with the <code>handle</code> property set
 to <var>handle id</var> if it’s not null, or omitted otherwise.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="#set-internal-ids-if-needed" id="ref-for-set-internal-ids-if-needed③">Set internal ids if needed</a> with <var>serialization internal map</var>, <var>remote value</var> and <var>value</var>.</p>
         <li data-md>
          <p>Let <var>serialized</var> be null.</p>
         <li data-md>
          <p>If <var>known object</var> is <code>false</code>, and <var>serialization
 options</var>["<code>maxObjectDepth</code>"] is not 0, run the following
 steps:</p>
          <ol>
           <li data-md>
            <p>Let <var>serialized</var> be the result of <a data-link-type="dfn" href="#serialize-as-a-mapping" id="ref-for-serialize-as-a-mapping①">serialize as a mapping</a> with <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-enumerableownpropertynames" id="ref-for-sec-enumerableownpropertynames">EnumerableOwnPropertyNames</a>(<var>value</var>, key+value), <var>serialization options</var>, <var>ownership type</var>, <var>serialization internal map</var>, <var>realm</var>, and <var>session</var>.</p>
          </ol>
         <li data-md>
          <p>If <var>serialized</var> is not null, set field <code>value</code> of <var>remote value</var> to <var>serialized</var>.</p>
        </ol>
      </dl>
     <li data-md>
      <p>Return <var>remote value</var></p>
    </ol>
    <p class="issue" id="issue-4a5a93fc"><a class="self-link" href="#issue-4a5a93fc"></a> <var>children</var> and child nodes are different things. Either <code>childNodeCount</code> should
reference to <code>childNodes</code>, or it should be renamed to <code>childrenCount</code>.</p>
   </div>
   <div class="algorithm" data-algorithm="serialize an Array-like">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="serialize-an-array-like">serialize an Array-like</dfn> given <var>production</var>, <var>handle id</var>, <var>known object</var>, <var>value</var>, <var>serialization options</var>, <var>ownership type</var>, <var>serialization internal map</var>, <var>realm</var>,
and <var>session</var>: 
    <ol>
     <li data-md>
      <p>Let <var>remote value</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑧⑧">map</a> matching <var>production</var>, with the <code>handle</code> property set to <var>handle id</var> if it’s not null, or omitted
 otherwise.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="#set-internal-ids-if-needed" id="ref-for-set-internal-ids-if-needed④">Set internal ids if needed</a> with <var>serialization internal map</var>, <var>remote value</var> and <var>value</var>.</p>
     <li data-md>
      <p>If <var>known object</var> is <code>false</code>, and <var>serialization
 options</var>["<code>maxObjectDepth</code>"]| is not 0:</p>
      <ol>
       <li data-md>
        <p>Let <var>serialized</var> be the result of <a data-link-type="dfn" href="#serialize-as-a-list" id="ref-for-serialize-as-a-list①">serialize as a list</a> with <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-createarrayiterator" id="ref-for-sec-createarrayiterator">CreateArrayIterator</a>(<var>value</var>, value), <var>serialization options</var>, <var>ownership type</var>, <var>serialization internal map</var>, <var>realm</var>, and <var>session</var>.</p>
       <li data-md>
        <p>If <var>serialized</var> is not null, set field <code>value</code> of <var>remote value</var> to <var>serialized</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>remote value</var></p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="serialize as a list">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="serialize-as-a-list">serialize as a list</dfn> given <var>iterable</var>, <var>serialization options</var>, <var>ownership type</var>, <var>serialization internal map</var>, <var>realm</var>, and <var>session</var>: 
    <ol>
     <li data-md>
      <p>If <var>serialization options</var>["<code>maxObjectDepth</code>"] is not null,
 assert: <var>serialization options</var>["<code>maxObjectDepth</code>"] is
 greater than 0.</p>
     <li data-md>
      <p>Let <var>serialized</var> be a new list.</p>
     <li data-md>
      <p>For each <var>child value</var> in <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-iteratortolist" id="ref-for-sec-iteratortolist">IteratorToList</a>(<a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-getiterator" id="ref-for-sec-getiterator">GetIterator</a>(<var>iterable</var>, sync)):</p>
      <ol>
       <li data-md>
        <p>Let <var>child serialization options</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-clone" id="ref-for-map-clone①">clone</a> of <var>serialization options</var>.</p>
       <li data-md>
        <p>If <var>child serialization options</var>["<code>maxObjectDepth</code>"] is
 not null, set <var>child serialization
 options</var>["<code>maxObjectDepth</code>"] to <var>child serialization
 options</var>["<code>maxObjectDepth</code>"] - 1.</p>
       <li data-md>
        <p>Let <var>serialized child</var> be the result of <a data-link-type="dfn" href="#serialize-as-a-remote-value" id="ref-for-serialize-as-a-remote-value③">serialize as a remote value</a> with <var>child value</var>, <var>child serialization options</var>, <var>ownership type</var>, <var>serialization internal map</var>, <var>realm</var>, and <var>session</var>.</p>
       <li data-md>
        <p>Append <var>serialized child</var> to <var>serialized</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>serialized</var></p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="serialize as a mapping">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="serialize-as-a-mapping">serialize as a mapping</dfn> given <var>iterable</var>, <var>serialization options</var>, <var>ownership type</var>, <var>serialization internal map</var>, <var>realm</var>, and <var>session</var>:</p>
    <ol>
     <li data-md>
      <p>If <var>serialization options</var>["<code>maxObjectDepth</code>"] is not null,
 assert: <var>serialization options</var>["<code>maxObjectDepth</code>"] is
 greater than 0.</p>
     <li data-md>
      <p>Let <var>serialized</var> be a new list.</p>
     <li data-md>
      <p>For <var>item</var> in <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-iteratortolist" id="ref-for-sec-iteratortolist①">IteratorToList</a>(<a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-getiterator" id="ref-for-sec-getiterator①">GetIterator</a>(<var>iterable</var>, sync)):</p>
      <ol>
       <li data-md>
        <p class="assertion">Assert: <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-isarray" id="ref-for-sec-isarray①">IsArray</a>(<var>item</var>)</p>
       <li data-md>
        <p>Let <var>property</var> be <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-createlistfromarraylike" id="ref-for-sec-createlistfromarraylike">CreateListFromArrayLike</a>(<var>item</var>)</p>
       <li data-md>
        <p class="assertion">Assert: <var>property</var> is a list of <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-size" id="ref-for-list-size②">size</a> 2</p>
       <li data-md>
        <p>Let <var>key</var> be <var>property</var>[0] and let <var>value</var> be <var>property</var>[1]</p>
       <li data-md>
        <p>Let <var>child serialization options</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-clone" id="ref-for-map-clone②">clone</a> of <var>serialization options</var>.</p>
       <li data-md>
        <p>If <var>child serialization options</var>["<code>maxObjectDepth</code>"] is
 not null, set <var>child serialization
 options</var>["<code>maxObjectDepth</code>"] to <var>child serialization
 options</var>["<code>maxObjectDepth</code>"] - 1.</p>
       <li data-md>
        <p>If <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values" id="ref-for-sec-ecmascript-data-types-and-values①⓪">Type</a>(<var>key</var>) is String, let <var>serialized key</var> be <var>child key</var>,
 otherwise let <var>serialized key</var> be the result of <a data-link-type="dfn" href="#serialize-as-a-remote-value" id="ref-for-serialize-as-a-remote-value④">serialize as a remote value</a> with <var>child key</var>, <var>child serialization options</var>, <var>ownership type</var>, <var>serialization internal map</var>, <var>realm</var>, and <var>session</var>.</p>
       <li data-md>
        <p>Let <var>serialized value</var> be the result of <a data-link-type="dfn" href="#serialize-as-a-remote-value" id="ref-for-serialize-as-a-remote-value⑤">serialize as a remote value</a> with <var>value</var>, <var>child serialization options</var>, <var>ownership type</var>, <var>serialization internal map</var>, <var>realm</var>, and <var>session</var>.</p>
       <li data-md>
        <p>Let <var>serialized child</var> be («<var>serialized key</var>, <var>serialized value</var>»).</p>
       <li data-md>
        <p>Append <var>serialized child</var> to <var>serialized</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>serialized</var></p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.5.3.14" id="type-script-ResultOwnership"><span class="secno">6.5.3.14. </span><span class="content">The script.ResultOwnership Type</span><a class="self-link" href="#type-script-ResultOwnership"></a></h5>
<pre class="cddl local-cddl remote-cddl">script.ResultOwnership = "root" / "none"
</pre>
   <p>The <code>script.ResultOwnership</code> specifies how the serialized value
ownership will be treated.</p>
   <h5 class="heading settled" data-level="6.5.3.15" id="type-script-SerializationOptions"><span class="secno">6.5.3.15. </span><span class="content">The script.SerializationOptions Type</span><a class="self-link" href="#type-script-SerializationOptions"></a></h5>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition③⑨">Remote end definition</a></p>
<pre class="cddl remote-cddl">script.SerializationOptions = {
  ? maxDomDepth: (js-uint / null) .default 0,
  ? maxObjectDepth: (js-uint / null) .default null,
  ? includeShadowTree: ("none" / "open" / "all") .default "none",
}
</pre>
   <p>The <code>script.SerializationOptions</code> allows specifying how ECMAScript
objects will be serialized.</p>
   <h5 class="heading settled" data-level="6.5.3.16" id="type-script-SharedId"><span class="secno">6.5.3.16. </span><span class="content">The script.SharedId Type</span><a class="self-link" href="#type-script-SharedId"></a></h5>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition④⓪">Remote end definition</a> and <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition⑥③">local end definition</a></p>
<pre class="cddl local-cddl remote-cddl">script.SharedId = text;
</pre>
   <p>The <code>script.SharedId</code> type represents a reference to a DOM <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#node" id="ref-for-node②">Node</a></code> that
is usable in any realm (including <a href="#sandbox-realm">Sandbox Realms</a>).</p>
   <h5 class="heading settled" data-level="6.5.3.17" id="type-script-StackFrame"><span class="secno">6.5.3.17. </span><span class="content">The script.StackFrame Type</span><a class="self-link" href="#type-script-StackFrame"></a></h5>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition④①">Remote end definition</a> and <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition⑥④">local end definition</a></p>
<pre class="cddl local-cddl remote-cddl">script.StackFrame = {
  columnNumber: js-uint,
  functionName: text,
  lineNumber: js-uint,
  url: text,
}
</pre>
   <p>A frame in a stack trace is represented by a <code>StackFrame</code> object. This has a <code>url</code> property, which represents the URL of the
script, a <code>functionName</code> property which represents the name of the
executing function, and <code>lineNumber</code> and <code>columnNumber</code> properties, which represent the line and column number of the executed code.</p>
   <h5 class="heading settled" data-level="6.5.3.18" id="type-script-StackTrace"><span class="secno">6.5.3.18. </span><span class="content">The script.StackTrace Type</span><a class="self-link" href="#type-script-StackTrace"></a></h5>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition④②">Remote end definition</a> and <a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition⑥⑤">local end definition</a></p>
<pre class="cddl local-cddl remote-cddl">script.StackTrace = {
  callFrames: [*script.StackFrame],
}
</pre>
   <p>The <code>script.StackTrace</code> type represents the javascript stack at a point in
script execution.</p>
   <p class="note" role="note"><span class="marker">Note:</span> The details of how to get a list of stack frames, and the properties of
that list are underspecified, and therefore the details here are implementation
defined.</p>
   <p>It is assumed that an implementation is able to generate a <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="list of stack frames" data-noexport id="list-of-stack-frames">list of stack
frames</dfn>, which is a list with one entry for each item in the javascript
call stack, starting from the most recent. Each entry is a single <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="stack frame" data-noexport id="stack-frame">stack
frame</dfn> corresponding to execution of a statement or expression in a script <var>script</var>, which contains the following fields:</p>
   <dl>
    <dt><dfn class="dfn-paneled" data-dfn-for="stackframe" data-dfn-type="dfn" data-noexport id="stackframe-script-url">script url</dfn> 
    <dd>The url of the resource containing <var>script</var> 
    <dt><dfn class="dfn-paneled" data-dfn-for="stackframe" data-dfn-type="dfn" data-noexport id="stackframe-function">function</dfn> 
    <dd>The name of the function being executed 
    <dt><dfn class="dfn-paneled" data-dfn-for="stackframe" data-dfn-type="dfn" data-noexport id="stackframe-line-number">line number</dfn> 
    <dd>The zero-based line number of the executed code, relative to the top
 of the resource containing <var>script</var>. 
    <dt><dfn class="dfn-paneled" data-dfn-for="stackframe" data-dfn-type="dfn" data-noexport id="stackframe-column-number">column number</dfn> 
    <dd>The zero-based column number of the executed code, relative to the start of
 the line in the resource containing <var>script</var>. 
   </dl>
   <div class="algorithm" data-algorithm="construct a stack trace">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="construct-a-stack-trace">construct a stack trace</dfn>, with a list of stack frames <var>stack</var>:</p>
    <ol>
     <li data-md>
      <p>Let <var>call frames</var> be a new list.</p>
     <li data-md>
      <p>For each <a data-link-type="dfn" href="#stack-frame" id="ref-for-stack-frame">stack frame</a> <var>frame</var> in <var>stack</var>,
 starting from the most recently executed frame, run the following steps:</p>
      <ol>
       <li data-md>
        <p>Let <var>url</var> be the result of running the <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-serializer" id="ref-for-concept-url-serializer⑧">URL serializer</a>, given
  the <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url">URL</a> of <var>frame</var>’s <a data-link-type="dfn" href="#stackframe-script-url" id="ref-for-stackframe-script-url">script url</a>.</p>
       <li data-md>
        <p>Let <var>frame info</var> be a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑧⑨">map</a> matching the <code>script.StackFrame</code> production, with the <code>url</code> field set to <var>url</var>, the <code>functionName</code> field set to <var>frame</var>’s <a data-link-type="dfn" href="#stackframe-function" id="ref-for-stackframe-function">function</a>,
  the <code>lineNumber</code> field set to <var>frame</var>’s <a data-link-type="dfn" href="#stackframe-line-number" id="ref-for-stackframe-line-number">line
  number</a> and the <code>columnNumber</code> field set to <var>frame</var>’s <a data-link-type="dfn" href="#stackframe-column-number" id="ref-for-stackframe-column-number">column number</a>.</p>
      </ol>
     <li data-md>
      <p>Append <var>frame info</var> to <var>call frames</var>.</p>
     <li data-md>
      <p>Let <var>stack trace</var> be a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑨⓪">map</a> matching the <code>script.StackTrace</code> production, with the <code>callFrames</code> property set to <var>call frames</var>.</p>
     <li data-md>
      <p>Return <var>stack trace</var>.</p>
    </ol>
   </div>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="current-stack-trace">current stack trace</dfn> is the result of <a data-link-type="dfn" href="#construct-a-stack-trace" id="ref-for-construct-a-stack-trace">construct a stack trace</a> given a <a data-link-type="dfn" href="#list-of-stack-frames" id="ref-for-list-of-stack-frames">list of stack frames</a> representing the callstack of the <a data-link-type="dfn" href="https://tc39.es/ecma262/#running-execution-context" id="ref-for-running-execution-context">running
execution context</a>.</p>
   <div class="algorithm" data-algorithm="stack trace for an exception">
    <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="stack-trace-for-an-exception">stack trace for an exception</dfn> with an exception, or a <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-completion-record-specification-type" id="ref-for-sec-completion-record-specification-type⑤">Completion
Record</a> of type <code>throw</code>, <var>exception</var>, is given by:</p>
    <ol>
     <li data-md>
      <p>If <var>exception</var> is a value that has been thrown as an exception, let <var>record</var> be the <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-completion-record-specification-type" id="ref-for-sec-completion-record-specification-type⑥">Completion Record</a> created to throw <var>exception</var>. Otherwise let <var>record</var> be <var>exception</var>.</p>
     <li data-md>
      <p>Let <var>stack</var> be the <a data-link-type="dfn" href="#list-of-stack-frames" id="ref-for-list-of-stack-frames①">list of stack frames</a> corresponding to execution at the
 point <var>record</var> was created.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="#construct-a-stack-trace" id="ref-for-construct-a-stack-trace①">construct a stack trace</a> given <var>stack</var>.</p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.5.3.19" id="type-script-Source"><span class="secno">6.5.3.19. </span><span class="content">The script.Source Type</span><a class="self-link" href="#type-script-Source"></a></h5>
   <p><a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition⑥⑥">Local end definition</a></p>
<pre class="cddl local-cddl">script.Source = {
  realm: script.Realm,
  ? context: browsingContext.BrowsingContext
}
</pre>
   <p>The <code>script.Source</code> type represents a <code>script.Realm</code> with
an optional <code>browsingContext.BrowsingContext</code> in which a
script related event occurred.</p>
   <div class="algorithm" data-algorithm="get the source">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="get-the-source">get the source</dfn> given <var>source realm</var>: 
    <ol>
     <li data-md>
      <p>Let <var>realm</var> be the <a data-link-type="dfn" href="#realm-id" id="ref-for-realm-id④">realm id</a> for <var>source realm</var>.</p>
     <li data-md>
      <p>Let <var>environment settings</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object③">environment settings object</a> whose <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#realm-execution-context" id="ref-for-realm-execution-context④">realm execution context</a>'s Realm component is <var>source realm</var>.</p>
     <li data-md>
      <p>If <var>environment settings</var> has a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window⑥">associated <code>Document</code></a>:</p>
      <ol>
       <li data-md>
        <p>Let <var>document</var> be environment settings’ <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window⑦">associated <code>Document</code></a>.</p>
       <li data-md>
        <p>Let <var>browsing context</var> be <var>document</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#concept-document-bc" id="ref-for-concept-document-bc③">browsing context</a>.</p>
       <li data-md>
        <p>Let <var>context id</var> be the <a data-link-type="dfn" href="#browsing-context-id" id="ref-for-browsing-context-id①④">browsing context id</a> for <var>browsing context</var>.</p>
      </ol>
      <p>Otherwise let <var>browsing context</var> be null.</p>
     <li data-md>
      <p>Let <var>source</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑨①">map</a> matching the <code>script.Source</code> production with the <code>realm</code> field set to <var>realm</var>, and the <code>context</code> field set
 to <var>context id</var> if <var>browsing context</var> is not null, or unset otherwise.</p>
     <li data-md>
      <p>Return <var>source</var>.</p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.5.3.20" id="type-script-Target"><span class="secno">6.5.3.20. </span><span class="content">The script.Target Type</span><a class="self-link" href="#type-script-Target"></a></h5>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition④③">Remote end definition</a></p>
<pre class="cddl remote-cddl">script.RealmTarget = {
  realm: script.Realm
};

script.ContextTarget = {
  context: browsingContext.BrowsingContext,
  ? sandbox: text
}

script.Target = (
  script.RealmTarget /
  script.ContextTarget
);
</pre>
   <p>The <code>script.Target</code> type represents a value that is either a <code>script.Realm</code> or a <code>browsingContext.BrowsingContext</code>.
This is useful in cases where a context identifier can stand in for the realm
associated with the context’s active document.</p>
   <div class="algorithm" data-algorithm="get a realm from a target">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="get-a-realm-from-a-target">get a realm from a target</dfn> given <var>target</var>: 
    <ol>
     <li data-md>
      <p>If <var>target</var> matches the <code>script.ContextTarget</code> production:</p>
      <ol>
       <li data-md>
        <p>Let <var>context</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try③⑥">trying</a> to <a data-link-type="dfn" href="#get-a-browsing-context" id="ref-for-get-a-browsing-context①①">get a browsing context</a> with <var>target</var>["<code>context</code>"].</p>
       <li data-md>
        <p>If <var>target</var> does not contain a field named "<code>sandbox</code>", or <var>target</var>["<code>sandbox</code>"] is an empty string:</p>
        <ol>
         <li data-md>
          <p>Let <var>document</var> be <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#active-document" id="ref-for-active-document①⓪">active document</a>.</p>
         <li data-md>
          <p>Let <var>environment settings</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object④">environment settings object</a> whose <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global⑤">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window⑧">associated <code>Document</code></a> is <var>document</var>.</p>
         <li data-md>
          <p>Let <var>realm</var> be <var>environment settings</var>’ <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#realm-execution-context" id="ref-for-realm-execution-context⑤">realm execution context</a>'s
 Realm component.</p>
        </ol>
       <li data-md>
        <p>Otherwise: let <var>realm</var> be result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try③⑦">trying</a> to <a data-link-type="dfn" href="#get-or-create-a-sandbox-realm" id="ref-for-get-or-create-a-sandbox-realm①">get or create a sandbox realm</a> given <var>target</var>["<code>sandbox</code>"] and <var>context</var>.</p>
      </ol>
     <li data-md>
      <p>Otherwise:</p>
      <ol>
       <li data-md>
        <p class="assertion">Assert: <var>target</var> matches the <code>script.RealmTarget</code> production.</p>
       <li data-md>
        <p>Let <var>realm id</var> be the value of the <code>realm</code> field of <var>target</var>.</p>
       <li data-md>
        <p>Let <var>realm</var> be <a data-link-type="dfn" href="#get-a-realm" id="ref-for-get-a-realm">get a realm</a> given <var>realm id</var>.</p>
      </ol>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success⑤④">success</a> with data <var>realm</var></p>
    </ol>
    <p class="issue" id="issue-89e6b783①"><a class="self-link" href="#issue-89e6b783①"></a> This has the wrong error code</p>
   </div>
   <h4 class="heading settled" data-level="6.5.4" id="module-script-commands"><span class="secno">6.5.4. </span><span class="content">Commands</span><a class="self-link" href="#module-script-commands"></a></h4>
   <h5 class="heading settled" data-level="6.5.4.1" id="command-script-addPreloadScript"><span class="secno">6.5.4.1. </span><span class="content">The script.addPreloadScript Command</span><a class="self-link" href="#command-script-addPreloadScript"></a></h5>
   <p>The <dfn data-dfn-for="commands" data-dfn-type="dfn" data-export id="commands-scriptaddpreloadscript">script.addPreloadScript<a class="self-link" href="#commands-scriptaddpreloadscript"></a></dfn> command adds a <a data-link-type="dfn" href="#preload-script" id="ref-for-preload-script②">preload
script</a>.</p>
   <dl>
    <dt>Command Type
    <dd>
<pre class="cddl remote-cddl">script.AddPreloadScript = (
  method: "script.addPreloadScript",
  params: script.AddPreloadScriptParameters
)

script.AddPreloadScriptParameters = {
  functionDeclaration: text,
  ? arguments: [*script.ChannelValue],
  ? contexts: [*browsingContext.BrowsingContext],
  ? sandbox: text
}
</pre>
    <dt>Return Type
    <dd>
<pre class="cddl local-cddl">script.AddPreloadScriptResult = {
  script: script.PreloadScript
}
</pre>
   </dl>
   <div class="algorithm" data-algorithm="remote end steps for script.addPreloadScript">
     The <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-end-steps" id="ref-for-dfn-remote-end-steps②⑤">remote end steps</a> given <var>session</var> and <var>command parameters</var> are: 
    <ol>
     <li data-md>
      <p>Let <var>function declaration</var> be the <code>functionDeclaration</code> field of <var>command
 parameters</var>.</p>
     <li data-md>
      <p>Let <var>arguments</var> be the <code>arguments</code> field of <var>command
 parameters</var> if present, or an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list⑨">list</a> otherwise.</p>
     <li data-md>
      <p>Let the <var>contexts</var> be the value of the <code>contexts</code> field of <var>command parameters</var> if it is present or null if it isn’t.</p>
     <li data-md>
      <p>If <var>contexts</var> is not null:</p>
      <ol>
       <li data-md>
        <p>For each <var>context id</var> of <var>contexts</var>:</p>
        <ol>
         <li data-md>
          <p>Let <var>context</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try③⑧">trying</a> to <a data-link-type="dfn" href="#get-a-browsing-context" id="ref-for-get-a-browsing-context①②">get a browsing context</a> with <var>context id</var>.</p>
         <li data-md>
          <p>If <var>context</var> is not a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context" id="ref-for-top-level-browsing-context①⑤">top-level browsing context</a>, return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors⑥②">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code⑤⑧">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument③⑥">invalid argument</a>.</p>
        </ol>
      </ol>
     <li data-md>
      <p>Let <var>sandbox</var> be the value of the "<code>sandbox</code>" field in <var>command
 parameters</var>, if present, or null otherwise.</p>
     <li data-md>
      <p>Let <var>script</var> be the string representation of a <a data-link-type="biblio" href="#biblio-rfc4122" title="A Universally Unique IDentifier (UUID) URN Namespace">UUID</a>.</p>
     <li data-md>
      <p>Let <var>preload script map</var> be <var>session</var>’s <a data-link-type="dfn" href="#preload-script-map" id="ref-for-preload-script-map①">preload script map</a>.</p>
     <li data-md>
      <p>Set <var>preload script map</var>[<var>script</var>] to a struct with <code>function
 declaration</code> <var>function declaration</var>, <code>arguments</code> <var>arguments</var>, <code>contexts</code> <var>contexts</var>, and <code>sandbox</code> <var>sandbox</var>.</p>
     <li data-md>
      <p>Return a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑨②">map</a> matching the <code>script.AddPreloadScriptResult</code> with the <code>script</code> field set to <var>script</var>.</p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.5.4.2" id="command-script-disown"><span class="secno">6.5.4.2. </span><span class="content">The script.disown Command</span><a class="self-link" href="#command-script-disown"></a></h5>
   <p>The <dfn data-dfn-for="commands" data-dfn-type="dfn" data-export id="commands-scriptdisown">script.disown<a class="self-link" href="#commands-scriptdisown"></a></dfn> command disowns the given handles.
This does not guarantee the handled object will be garbage collected, as there can be
other handles or strong ECMAScript references.</p>
   <dl>
    <dt>Command Type
    <dd>
<pre class="cddl remote-cddl">script.Disown = (
  method: "script.disown",
  params: script.DisownParameters
)

script.DisownParameters = {
  handles: [*script.Handle]
  target: script.Target;
}
</pre>
    <dt>Return Type
    <dd>
<pre class="cddl">EmptyResult
</pre>
   </dl>
   <div class="algorithm" data-algorithm="remote end steps for script.disown">
     The <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-end-steps" id="ref-for-dfn-remote-end-steps②⑥">remote end steps</a> with <var>command parameters</var> are: 
    <ol>
     <li data-md>
      <p>Let <var>realm</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try③⑨">trying</a> to <a data-link-type="dfn" href="#get-a-realm-from-a-target" id="ref-for-get-a-realm-from-a-target">get a realm from a target</a> given the value of the <code>target</code> field of <var>command parameters</var>.</p>
     <li data-md>
      <p>Let <var>handles</var> the value of the <code>handles</code> field of <var>command parameters</var>.</p>
     <li data-md>
      <p>For each <var>handle id</var> of <var>handles</var>:</p>
      <ol>
       <li data-md>
        <p>Let <var>handle map</var> be <var>realm</var>’s <a data-link-type="dfn" href="#handle-object-map" id="ref-for-handle-object-map④">handle object map</a></p>
       <li data-md>
        <p>If <var>handle map</var> contains <var>handle id</var>, remove <var>handle id</var> from the <var>handle map</var>.</p>
      </ol>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success⑤⑤">success</a> with data null.</p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.5.4.3" id="command-script-callFunction"><span class="secno">6.5.4.3. </span><span class="content">The script.callFunction Command</span><a class="self-link" href="#command-script-callFunction"></a></h5>
   <p>The <dfn data-dfn-for="commands" data-dfn-type="dfn" data-export id="commands-scriptcallfunction">script.callFunction<a class="self-link" href="#commands-scriptcallfunction"></a></dfn> command calls a provided
function with given arguments in a given realm.</p>
   <p><code>RealmInfo</code> can be either a realm or a browsing context.</p>
   <p class="note" role="note"><span class="marker">Note:</span> In case of an arrow function in <code>functionDeclaration</code>, the <code>this</code> argument doesn’t affect function’s <code>this</code> binding.</p>
   <dl>
    <dt>Command Type
    <dd>
<pre class="cddl remote-cddl">script.CallFunction = (
  method: "script.callFunction",
  params: script.CallFunctionParameters
)

script.CallFunctionParameters = {
  functionDeclaration: text,
  awaitPromise: bool,
  target: script.Target,
  ? arguments: [*script.LocalValue],
  ? resultOwnership: script.ResultOwnership,
  ? serializationOptions: script.SerializationOptions,
  ? this: script.LocalValue,
  ? userActivation: bool .default false,
}
</pre>
    <dt>Result Type
    <dd>
<pre class="cddl">script.EvaluateResult
</pre>
   </dl>
   <p class="issue" id="issue-6eade172"><a class="self-link" href="#issue-6eade172"></a> TODO: Add timeout argument as described in the script.evaluate.</p>
   <div class="algorithm" data-algorithm="deserialize arguments">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="deserialize-arguments">deserialize arguments</dfn> with given <var>realm</var>, <var>serialized arguments list</var> and <var>session</var>:</p>
    <ol>
     <li data-md>
      <p>Let <var>deserialized arguments list</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list①⓪">list</a>.</p>
     <li data-md>
      <p>For each <var>serialized argument</var> of <var>serialized arguments list</var>:</p>
      <ol>
       <li data-md>
        <p>Let <var>deserialized argument</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try④⓪">trying</a> to <a data-link-type="dfn" href="#deserialize-local-value" id="ref-for-deserialize-local-value③">deserialize local value</a> given <var>serialized argument</var>, <var>realm</var> and <var>session</var>.</p>
       <li data-md>
        <p>Append <var>deserialized argument</var> to the <var>deserialized arguments list</var>.</p>
      </ol>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success⑤⑥">success</a> with data <var>deserialized arguments list</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="evaluate function body">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="evaluate-function-body">evaluate function body</dfn> given <var>function declaration</var>, <var>environment settings</var>, <var>base URL</var>, and <var>options</var>: 
    <p class="note" role="note"><span class="marker">Note:</span> the <var>function declaration</var> is parenthesized and evaluated.</p>
    <ol>
     <li data-md>
      <p>Let <var>parenthesized function declaration</var> be <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-concatenate" id="ref-for-string-concatenate">concatenate</a> «"<code>(</code>", <var>function declaration</var>, "<code>)</code>"»</p>
     <li data-md>
      <p>Let <var>function script</var> be the result of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#creating-a-classic-script" id="ref-for-creating-a-classic-script">create a classic script</a> with <var>parenthesized function declaration</var>, <var>environment settings</var>, <var>base URL</var>, and <var>options</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#prepare-to-run-script" id="ref-for-prepare-to-run-script①">Prepare to run script</a> with <var>environment settings</var>.</p>
     <li data-md>
      <p>Let <var>function body evaluation status</var> be <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-runtime-semantics-scriptevaluation" id="ref-for-sec-runtime-semantics-scriptevaluation">ScriptEvaluation</a>(<var>function script</var>’s record).</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#clean-up-after-running-script" id="ref-for-clean-up-after-running-script①">Clean up after running script</a> with <var>environment settings</var>.</p>
     <li data-md>
      <p>Return (<var>function script</var>, <var>function body evaluation status</var>).</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="remote end steps for script.callFunction">
    <p>The <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-end-steps" id="ref-for-dfn-remote-end-steps②⑦">remote end steps</a> with <var>session</var> and <var>command parameters</var> are:</p>
    <ol>
     <li data-md>
      <p>Let <var>realm</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try④①">trying</a> to <a data-link-type="dfn" href="#get-a-realm-from-a-target" id="ref-for-get-a-realm-from-a-target①">get a realm from a target</a> given the value of the <code>target</code> field of <var>command parameters</var>.</p>
     <li data-md>
      <p>Let <var>realm id</var> be <var>realm</var>’s <a data-link-type="dfn" href="#realm-id" id="ref-for-realm-id⑤">realm id</a>.</p>
     <li data-md>
      <p>Let <var>environment settings</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object⑤">environment settings object</a> whose <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#realm-execution-context" id="ref-for-realm-execution-context⑥">realm execution context</a>'s Realm component is <var>realm</var>.</p>
     <li data-md>
      <p>Let <var>command arguments</var> be the value of the <code>arguments</code> field
 of <var>command parameters</var>.</p>
     <li data-md>
      <p>Let <var>deserialized arguments</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list①①">list</a>.</p>
     <li data-md>
      <p>If <var>command arguments</var> is not null, set <var>deserialized arguments</var> to the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try④②">trying</a> to <a data-link-type="dfn" href="#deserialize-arguments" id="ref-for-deserialize-arguments">deserialize arguments</a> given <var>realm</var>, <var>command arguments</var> and <var>session</var>.</p>
     <li data-md>
      <p>Let <var>this parameter</var> be the value of the <code>this</code> field
 of <var>command parameters</var>.</p>
     <li data-md>
      <p>Let <var>this object</var> be null.</p>
     <li data-md>
      <p>If <var>this parameter</var> is not null, set <var>this object</var> to the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try④③">trying</a> to <a data-link-type="dfn" href="#deserialize-local-value" id="ref-for-deserialize-local-value④">deserialize local value</a> given <var>this parameter</var>, <var>realm</var> and <var>session</var>.</p>
     <li data-md>
      <p>Let <var>function declaration</var> be the value of the <code>functionDeclaration</code> field of <var>command parameters</var>.</p>
     <li data-md>
      <p>Let <var>await promise</var> be the value of the <code>awaitPromise</code> field of <var>command parameters</var>.</p>
     <li data-md>
      <p>Let <var>serialization options</var> be the value of the <code>serializationOptions</code> field of <var>command parameters</var>, if present,
 or otherwise a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑨③">map</a> matching the <code>script.SerializationOptions</code> production with the fields set to their default values.</p>
     <li data-md>
      <p>Let <var>result ownership</var> be the value of the <code>resultOwnership</code> field of <var>command parameters</var>, if present, or <code>none</code> otherwise.</p>
     <li data-md>
      <p>Let <var>base URL</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#api-base-url" id="ref-for-api-base-url①">API base URL</a> of <var>environment settings</var>.</p>
     <li data-md>
      <p>Let <var>options</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#default-classic-script-fetch-options" id="ref-for-default-classic-script-fetch-options①">default classic script fetch options</a>.</p>
     <li data-md>
      <p>Let (<var>script</var>, <var>function body evaluation status</var>) be the
 result of <a data-link-type="dfn" href="#evaluate-function-body" id="ref-for-evaluate-function-body①">evaluate function body</a> with <var>function declaration</var>, <var>environment settings</var>, <var>base URL</var>, and <var>options</var>.</p>
     <li data-md>
      <p>If <var>function body evaluation status</var>.[[Type]] is <code>throw</code>:</p>
      <ol>
       <li data-md>
        <p>Let <var>exception details</var> be the result of <a data-link-type="dfn" href="#get-exception-details" id="ref-for-get-exception-details">get exception details</a> given <var>realm</var>, <var>function body evaluation status</var>, <var>result ownership</var> and <var>session</var>.</p>
       <li data-md>
        <p>Return a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑨④">map</a> matching the <code>script.EvaluateResultException</code> production, with the <code>exceptionDetails</code> field set to <var>exception details</var>.</p>
      </ol>
     <li data-md>
      <p>Let <var>function object</var> be <var>function body evaluation status</var>.[[Value]].</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-iscallable" id="ref-for-sec-iscallable②">IsCallable</a>(<var>function object</var>) is <code>false</code>:</p>
      <ol>
       <li data-md>
        <p>Return an <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors⑥③">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code⑤⑨">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-invalid-argument" id="ref-for-dfn-invalid-argument③⑦">invalid argument</a></p>
      </ol>
     <li data-md>
      <p>If <var>command parameters</var>["<code>userActivation</code>"] is true, run <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#activation-notification" id="ref-for-activation-notification">activation notification</a> steps.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#prepare-to-run-script" id="ref-for-prepare-to-run-script②">Prepare to run script</a> with <var>environment settings</var>.</p>
     <li data-md>
      <p>Set <var>evaluation status</var> to <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-call" id="ref-for-sec-call②">Call</a>(<var>function object</var>, <var>this object</var>, <var>deserialized arguments</var>).</p>
     <li data-md>
      <p>If <var>evaluation status</var>.[[Type]] is <code>normal</code>, and <var>await promise</var> is <code>true</code>, and <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-ispromise" id="ref-for-sec-ispromise①">IsPromise</a>(<var>evaluation status</var>.[[Value]]):</p>
      <ol>
       <li data-md>
        <p>Set <var>evaluation status</var> to <a data-link-type="dfn" href="https://tc39.es/ecma262/#await" id="ref-for-await">Await</a>(<var>evaluation status</var>.[[Value]]).</p>
      </ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#clean-up-after-running-script" id="ref-for-clean-up-after-running-script②">Clean up after running script</a> with <var>environment settings</var>.</p>
     <li data-md>
      <p>If <var>evaluation status</var>.[[Type]] is <code>throw</code>:</p>
      <ol>
       <li data-md>
        <p>Let <var>exception details</var> be the result of <a data-link-type="dfn" href="#get-exception-details" id="ref-for-get-exception-details①">get exception details</a> given <var>realm</var>, <var>evaluation status</var>, <var>result ownership</var> and <var>session</var>.</p>
       <li data-md>
        <p>Return a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑨⑤">map</a> matching the <code>script.EvaluateResultException</code> production, with the <code>exceptionDetails</code> field set to <var>exception details</var>.</p>
      </ol>
     <li data-md>
      <p class="assertion">Assert: <var>evaluation status</var>.[[Type]] is <code>normal</code>.</p>
     <li data-md>
      <p>Let <var>result</var> be the result of <a data-link-type="dfn" href="#serialize-as-a-remote-value" id="ref-for-serialize-as-a-remote-value⑥">serialize as a remote value</a> with <var>evaluation status</var>.[[Value]], <var>serialization options</var>, <var>result ownership</var>,
 a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑨⑥">map</a> as serialization internal map, <var>realm</var> and <var>session</var>.</p>
     <li data-md>
      <p>Return a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑨⑦">map</a> matching the <code>script.EvaluateResultSuccess</code> production, with the <code>realm</code> field set to <var>realm id</var>,
 and the <code>result</code> field set to <var>result</var>.</p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.5.4.4" id="command-script-evaluate"><span class="secno">6.5.4.4. </span><span class="content">The script.evaluate Command</span><a class="self-link" href="#command-script-evaluate"></a></h5>
   <p>The <dfn data-dfn-for="commands" data-dfn-type="dfn" data-export id="commands-scriptevaluate">script.evaluate<a class="self-link" href="#commands-scriptevaluate"></a></dfn> command evaluates a provided
script in a given realm. For convenience a browsing context can be provided in
place of a realm, in which case the realm used is the realm of the browsing
context’s active document.</p>
   <p>The method returns the value of executing the provided script, unless it returns
a promise and <code>awaitPromise</code> is true, in which case the resolved value of
the promise is returned.</p>
   <dl>
    <dt>Command Type
    <dd>
<pre class="cddl remote-cddl">script.Evaluate = (
  method: "script.evaluate",
  params: script.EvaluateParameters
)

script.EvaluateParameters = {
  expression: text,
  target: script.Target,
  awaitPromise: bool,
  ? resultOwnership: script.ResultOwnership,
  ? serializationOptions: script.SerializationOptions,
  ? userActivation: bool .default false,
}
</pre>
    <dt>Result Type
    <dd>
<pre class="cddl">script.EvaluateResult
</pre>
   </dl>
   <p>TODO: Add timeout argument. It’s not totally clear how this ought to work; in
Chrome it seems like the timeout doesn’t apply to the promise resolve step, but
that likely isn’t what clients want.</p>
   <div class="algorithm" data-algorithm="remote end steps for script.evaluate">
    <p>The <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-end-steps" id="ref-for-dfn-remote-end-steps②⑧">remote end steps</a> given <var>session</var> and <var>command parameters</var> are:</p>
    <ol>
     <li data-md>
      <p>Let <var>realm</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try④④">trying</a> to <a data-link-type="dfn" href="#get-a-realm-from-a-target" id="ref-for-get-a-realm-from-a-target②">get a realm from a target</a> given the value of the <code>target</code> field of <var>command parameters</var>.</p>
     <li data-md>
      <p>Let <var>realm id</var> be <var>realm</var>’s <a data-link-type="dfn" href="#realm-id" id="ref-for-realm-id⑥">realm id</a>.</p>
     <li data-md>
      <p>Let <var>environment settings</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object⑥">environment settings object</a> whose <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#realm-execution-context" id="ref-for-realm-execution-context⑦">realm execution context</a>'s Realm component is <var>realm</var>.</p>
     <li data-md>
      <p>Let <var>source</var> be the value of the <code>expression</code> field of <var>command
 parameters</var>.</p>
     <li data-md>
      <p>Let <var>await promise</var> be the value of the <code>awaitPromise</code> field of <var>command parameters</var>.</p>
     <li data-md>
      <p>Let <var>serialization options</var> be the value of the <code>serializationOptions</code> field of <var>command parameters</var>, if present,
 or otherwise a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑨⑧">map</a> matching the <code>script.SerializationOptions</code> production with the fields set to their default values.</p>
     <li data-md>
      <p>Let <var>result ownership</var> be the value of the <code>resultOwnership</code> field of <var>command parameters</var>, if present, or <code>none</code> otherwise.</p>
     <li data-md>
      <p>Let <var>options</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#default-classic-script-fetch-options" id="ref-for-default-classic-script-fetch-options②">default classic script fetch options</a>.</p>
     <li data-md>
      <p>Let <var>base URL</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#api-base-url" id="ref-for-api-base-url②">API base URL</a> of <var>environment settings</var>.</p>
     <li data-md>
      <p>Let <var>script</var> be the result of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#creating-a-classic-script" id="ref-for-creating-a-classic-script①">create a classic script</a> with <var>source</var>, <var>environment settings</var>, <var>base URL</var>, and <var>options</var>.</p>
     <li data-md>
      <p>If <var>command parameters</var>["<code>userActivation</code>"] is true, run <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#activation-notification" id="ref-for-activation-notification①">activation notification</a> steps.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#prepare-to-run-script" id="ref-for-prepare-to-run-script③">Prepare to run script</a> with <var>environment settings</var>.</p>
     <li data-md>
      <p>Set <var>evaluation status</var> to <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-runtime-semantics-scriptevaluation" id="ref-for-sec-runtime-semantics-scriptevaluation①">ScriptEvaluation</a>(<var>script</var>’s record).</p>
     <li data-md>
      <p>If <var>evaluation status</var>.[[Type]] is <code>normal</code>, <var>await promise</var> is
 true, and <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-ispromise" id="ref-for-sec-ispromise②">IsPromise</a>(<var>evaluation status</var>.[[Value]]):</p>
      <ol>
       <li data-md>
        <p>Set <var>evaluation status</var> to <a data-link-type="dfn" href="https://tc39.es/ecma262/#await" id="ref-for-await①">Await</a>(<var>evaluation status</var>.[[Value]]).</p>
      </ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#clean-up-after-running-script" id="ref-for-clean-up-after-running-script③">Clean up after running script</a> with <var>environment settings</var>.</p>
     <li data-md>
      <p>If <var>evaluation status</var>.[[Type]] is <code>throw</code>:</p>
      <ol>
       <li data-md>
        <p>Let <var>exception details</var> be the result of <a data-link-type="dfn" href="#get-exception-details" id="ref-for-get-exception-details②">get exception details</a> with <var>realm</var>, <var>evaluation status</var>, <var>result ownership</var> and <var>session</var>.</p>
       <li data-md>
        <p>Return a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑨⑨">map</a> matching the <code>script.EvaluateResultException</code> production, with the <code>realm</code> field set to <var>realm id</var>, and the <code>exceptionDetails</code> field set to <var>exception details</var>.</p>
      </ol>
     <li data-md>
      <p class="assertion">Assert: <var>evaluation status</var>.[[Type]] is <code>normal</code>.</p>
     <li data-md>
      <p>Let <var>result</var> be the result of <a data-link-type="dfn" href="#serialize-as-a-remote-value" id="ref-for-serialize-as-a-remote-value⑦">serialize as a remote value</a> with <var>evaluation status</var>.[[Value]], <var>serialization options</var>, <var>result ownership</var>,
 a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①⓪⓪">map</a> as serialization internal map, <var>realm</var> and <var>session</var>.</p>
     <li data-md>
      <p>Return a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①⓪①">map</a> matching the <code>script.EvaluateResultSuccess</code> production, with the with the <code>realm</code> field set to <var>realm id</var>, and
 the <code>result</code> field set to <var>result</var>.</p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.5.4.5" id="command-script-getRealms"><span class="secno">6.5.4.5. </span><span class="content">The script.getRealms Command</span><a class="self-link" href="#command-script-getRealms"></a></h5>
   <p>The <dfn data-dfn-for="commands" data-dfn-type="dfn" data-export id="commands-scriptgetrealms">script.getRealms<a class="self-link" href="#commands-scriptgetrealms"></a></dfn> command returns a list of
all realms, optionally filtered to <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-code-realms" id="ref-for-sec-code-realms⑦">realms</a> of a specific type, or to the
realm associated with the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document①">document</a> currently loaded in a specified <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context" id="ref-for-browsing-context①③">browsing context</a>.</p>
   <dl>
    <dt>Command Type
    <dd>
<pre class="cddl remote-cddl">script.GetRealms = (
  method: "script.getRealms",
  params: script.GetRealmsParameters
)

script.GetRealmsParameters = {
  ? context: browsingContext.BrowsingContext,
  ? type: script.RealmType,
}
</pre>
    <dt>Result Type
    <dd>
<pre class="cddl local-cddl">script.GetRealmsResult = {
  realms: [*script.RealmInfo]
}
</pre>
   </dl>
   <div class="algorithm" data-algorithm="remote end steps for script.getRealms">
     The <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-end-steps" id="ref-for-dfn-remote-end-steps②⑨">remote end steps</a> with <var>session</var> and <var>command parameters</var> are: 
    <ol>
     <li data-md>
      <p>Let <var>environment settings</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list①②">list</a> of all the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object⑦">environment settings objects</a> that have their <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-execution-ready-flag" id="ref-for-concept-environment-execution-ready-flag">execution ready flag</a> set.</p>
     <li data-md>
      <p>If <var>command parameters</var> contains <code>context</code>:</p>
      <ol>
       <li data-md>
        <p>Let <var>context</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try④⑤">trying</a> to <a data-link-type="dfn" href="#get-a-browsing-context" id="ref-for-get-a-browsing-context①③">get a browsing context</a> with <var>command parameters</var>["<code>context</code>"].</p>
       <li data-md>
        <p>Let <var>document</var> be <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#active-document" id="ref-for-active-document①①">active document</a>.</p>
       <li data-md>
        <p>Let <var>context environment settings</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list①③">list</a>.</p>
       <li data-md>
        <p>For each <var>settings</var> of <var>environment settings</var>:</p>
        <ol>
         <li data-md>
          <p>If any of the following conditions hold:</p>
          <ul>
           <li data-md>
            <p>The <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window⑨">associated <code>Document</code></a> of <var>settings</var>’ <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global⑥">relevant global object</a> is <var>document</var></p>
           <li data-md>
            <p>The <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global⑤">global object</a> specified by <var>settings</var> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/workers.html#workerglobalscope" id="ref-for-workerglobalscope③">WorkerGlobalScope</a></code> with <var>document</var> in its <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/workers.html#concept-WorkerGlobalScope-owner-set" id="ref-for-concept-WorkerGlobalScope-owner-set①">owner set</a></p>
          </ul>
          <p>Append <var>settings</var> to <var>context environment settings</var>.</p>
        </ol>
       <li data-md>
        <p>Set <var>environment settings</var> to <var>context environment settings</var>.</p>
      </ol>
     <li data-md>
      <p>Let <var>realms</var> be a list.</p>
     <li data-md>
      <p>For each <var>settings</var> of <var>environment settings</var>:</p>
      <ol>
       <li data-md>
        <p>Let <var>realm info</var> be the result of <a data-link-type="dfn" href="#get-the-realm-info" id="ref-for-get-the-realm-info">get the realm info</a> given <var>settings</var></p>
       <li data-md>
        <p>If <var>command parameters</var> contains <code>type</code> and <var>realm
 info</var>["<code>type</code>"] is not equal to <var>command
 parameters</var>["<code>type</code>"] then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-continue" id="ref-for-iteration-continue">continue</a>.</p>
       <li data-md>
        <p>If <var>realm info</var> is not null, append <var>realm info</var> to <var>realms</var>.</p>
      </ol>
     <li data-md>
      <p>Let <var>body</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①⓪②">map</a> matching the <code>script.GetRealmsResult</code> production,
 with the <code>realms</code> field set to <var>realms</var>.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success⑤⑦">success</a> with data <var>body</var>.</p>
    </ol>
    <p class="issue" id="issue-ac9113ee"><a class="self-link" href="#issue-ac9113ee"></a> Extend this to also allow realm parents e.g. for nested workers? Or get all ancestor workers.</p>
    <p class="issue" id="issue-b6525c5d"><a class="self-link" href="#issue-b6525c5d"></a> We might want to have a more sophisticated filter system than just a
       literal match.</p>
   </div>
   <h5 class="heading settled" data-level="6.5.4.6" id="command-script-removePreloadScript"><span class="secno">6.5.4.6. </span><span class="content">The script.removePreloadScript Command</span><a class="self-link" href="#command-script-removePreloadScript"></a></h5>
   <p>The <dfn data-dfn-for="commands" data-dfn-type="dfn" data-export id="commands-scriptremovepreloadscript">script.removePreloadScript<a class="self-link" href="#commands-scriptremovepreloadscript"></a></dfn> command removes a <a data-link-type="dfn" href="#preload-script" id="ref-for-preload-script③">preload script</a>.</p>
   <dl>
    <dt>Command Type
    <dd>
<pre class="cddl remote-cddl">script.RemovePreloadScript = (
  method: "script.removePreloadScript",
  params: script.RemovePreloadScriptParameters
)

script.RemovePreloadScriptParameters = {
  script: script.PreloadScript
}
</pre>
    <dt>Return Type
    <dd>
<pre class="cddl">EmptyResult
</pre>
   </dl>
   <div class="algorithm" data-algorithm="remote end steps for script.removePreloadScript">
     The <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-end-steps" id="ref-for-dfn-remote-end-steps③⓪">remote end steps</a> given <var>session</var> and <var>command parameters</var> are: 
    <ol>
     <li data-md>
      <p>Let <var>script</var> be the value of the "<code>script</code>" field in <var>command
 parameters</var>.</p>
     <li data-md>
      <p>Let <var>preload script map</var> be <var>session</var>’s <a data-link-type="dfn" href="#preload-script-map" id="ref-for-preload-script-map②">preload script map</a>.</p>
     <li data-md>
      <p>If <var>preload script map</var> does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists③③">contain</a> <var>script</var>, return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors⑥④">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code⑥⓪">error code</a> <a data-link-type="dfn" href="#no-such-script" id="ref-for-no-such-script">no such script</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-remove" id="ref-for-list-remove①">Remove</a> <var>script</var> from <var>preload script map</var>.</p>
     <li data-md>
      <p>Return null</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="6.5.5" id="module-script-events"><span class="secno">6.5.5. </span><span class="content">Events</span><a class="self-link" href="#module-script-events"></a></h4>
   <h5 class="heading settled" data-level="6.5.5.1" id="event-script-message"><span class="secno">6.5.5.1. </span><span class="content">The script.message Event</span><a class="self-link" href="#event-script-message"></a></h5>
   <dl>
    <dt>Event Type
    <dd>
<pre class="cddl local-cddl"> script.Message = (
  method: "script.message",
  params: script.MessageParameters
 )

script.MessageParameters = {
  channel: script.Channel,
  data: script.RemoteValue,
  source: script.Source,
}
</pre>
   </dl>
   <div class="algorithm" data-algorithm="remote end event trigger for script.message">
     The <a data-link-type="dfn" href="#remote-end-event-trigger" id="ref-for-remote-end-event-trigger①⑥">remote end event trigger</a> is the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="emit-a-script-message">emit a script message</dfn> steps,
given <var>session</var>, <var>realm</var>, <var>channel properties</var>, and <var>message</var>: 
    <ol>
     <li data-md>
      <p>Let <var>environment settings</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object⑧">environment settings object</a> whose <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#realm-execution-context" id="ref-for-realm-execution-context⑧">realm execution context</a>'s Realm component is <var>realm</var>.</p>
     <li data-md>
      <p>Let <var>related browsing contexts</var> be the result of <a data-link-type="dfn" href="#get-related-browsing-contexts" id="ref-for-get-related-browsing-contexts⑤">get related browsing
 contexts</a> given <var>environment settings</var>.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="#event-is-enabled" id="ref-for-event-is-enabled①">event is enabled</a> given <var>session</var>, "<code>script.message</code>"
 and <var>related browsing contexts</var>:</p>
      <ol>
       <li data-md>
        <p>If <var>channel properties</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists③④">contains</a> "<code>serializationOptions</code>", let <var>serialization options</var> be the
 value of the <code>serializationOptions</code> field of <var>channel
 properties</var>. Otherwise let <var>serialization options</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①⓪③">map</a> matching the <code>script.SerializationOptions</code> production with the
 fields set to their default values.</p>
       <li data-md>
        <p>Let if <var>channel properties</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists③⑤">contains</a> "<code>ownership</code>", let <var>ownership type</var> be <var>channel properties</var>["<code>ownership</code>"]. Otherwise let <var>ownership type</var> be "<code>none</code>".</p>
       <li data-md>
        <p>Let <var>data</var> be the result of <a data-link-type="dfn" href="#serialize-as-a-remote-value" id="ref-for-serialize-as-a-remote-value⑧">serialize as a remote value</a> given <var>message</var>, <var>serialization options</var>, <var>ownership type</var>, a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①⓪④">map</a> as serialization
 internal map and <var>realm</var>.</p>
       <li data-md>
        <p>Let <var>source</var> be the <a data-link-type="dfn" href="#get-the-source" id="ref-for-get-the-source">get the source</a> with <var>realm</var>.</p>
       <li data-md>
        <p>Let <var>params</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①⓪⑤">map</a> matching the <code>script.MessageParameters</code> production, with the <code>channel</code> field set to <var>channel properties</var>["<code>channel</code>"],
 the <code>data</code> field set to <var>data</var>, and the <code>source</code> field set to <var>source</var>.</p>
       <li data-md>
        <p>Let <var>body</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①⓪⑥">map</a> matching the <code>script.Message</code> production, with the <code>params</code> field set to <var>params</var>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="#emit-an-event" id="ref-for-emit-an-event①⑥">Emit an event</a> with <var>session</var> and <var>body</var>.</p>
      </ol>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.5.5.2" id="event-script-realmCreated"><span class="secno">6.5.5.2. </span><span class="content">The script.realmCreated Event</span><a class="self-link" href="#event-script-realmCreated"></a></h5>
   <dl>
    <dt>Event Type
    <dd>
<pre class="cddl local-cddl">script.RealmCreated = (
 method: "script.realmCreated",
 params: script.RealmInfo
)
</pre>
   </dl>
    The <a data-link-type="dfn" href="#remote-end-event-trigger" id="ref-for-remote-end-event-trigger①⑦">remote end event trigger</a> is: 
   <div class="algorithm" data-algorithm="remote end event trigger for script.realmCreated">
    <p>When any of the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#set-up-a-window-environment-settings-object" id="ref-for-set-up-a-window-environment-settings-object">set up a window environment settings object</a>, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/workers.html#set-up-a-worker-environment-settings-object" id="ref-for-set-up-a-worker-environment-settings-object">set up a
worker environment settings object</a> or <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/worklets.html#set-up-a-worklet-environment-settings-object" id="ref-for-set-up-a-worklet-environment-settings-object">set up a worklet environment settings
object</a> algorithms are invoked, immediately prior to returning the settings
object:</p>
    <ol>
     <li data-md>
      <p>Let <var>environment settings</var> be the newly created <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object⑨">environment settings
 object</a>.</p>
     <li data-md>
      <p>Let <var>realm info</var> be the result of <a data-link-type="dfn" href="#get-the-realm-info" id="ref-for-get-the-realm-info①">get the realm info</a> given <var>environment settings</var>.</p>
     <li data-md>
      <p>If <var>realm info</var> is null, return.</p>
     <li data-md>
      <p>Let <var>related browsing contexts</var> be the result of <a data-link-type="dfn" href="#get-related-browsing-contexts" id="ref-for-get-related-browsing-contexts⑥">get related browsing
 contexts</a> given <var>environment settings</var>.</p>
     <li data-md>
      <p>Let <var>body</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①⓪⑦">map</a> matching the <code>script.RealmCreated</code> production, with the <code>params</code> field set to <var>realm info</var>.</p>
     <li data-md>
      <p>For each <var>session</var> in the <a data-link-type="dfn" href="#set-of-sessions-for-which-an-event-is-enabled" id="ref-for-set-of-sessions-for-which-an-event-is-enabled①⑥">set of sessions for which an event is enabled</a> given "<code>script.realmCreated</code>" and <var>related browsing contexts</var>:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="#emit-an-event" id="ref-for-emit-an-event①⑦">Emit an event</a> with <var>session</var> and <var>body</var>.</p>
      </ol>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="remote end subscribe steps for script.realmCreated">
    <p>The <a data-link-type="dfn" href="#remote-end-subscribe-steps" id="ref-for-remote-end-subscribe-steps③">remote end subscribe steps</a> with <a data-link-type="dfn" href="#subscribe-priority" id="ref-for-subscribe-priority②">subscribe priority</a> 2, given <var>session</var>, <var>contexts</var> and <var>include global</var> are:</p>
    <ol>
     <li data-md>
      <p>Let <var>environment settings</var> be a list of all the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object①⓪">environment settings objects</a> that have their <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-execution-ready-flag" id="ref-for-concept-environment-execution-ready-flag①">execution ready flag</a> set.</p>
     <li data-md>
      <p>For each <var>settings</var> of <var>environment settings</var>:</p>
      <ol>
       <li data-md>
        <p>Let <var>related browsing contexts</var> be a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set③⓪">set</a>.</p>
       <li data-md>
        <p>If the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window①⓪">associated <code>Document</code></a> of <var>settings</var>’ <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global⑦">relevant global object</a> is a <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document②">Document</a>:</p>
        <ol>
         <li data-md>
          <p>Let <var>context</var> be <var>settings</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global⑧">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window①①">associated <code>Document</code></a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#concept-document-bc" id="ref-for-concept-document-bc④">browsing context</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context" id="ref-for-top-level-browsing-context①⑥">top-level browsing context</a>.</p>
         <li data-md>
          <p>If <var>context</var> is not in <var>contexts</var>, continue.</p>
         <li data-md>
          <p>Append <var>context</var> to <var>related browsing contexts</var>.</p>
        </ol>
        <p>Otherwise, if <var>include global</var> is false, continue.</p>
       <li data-md>
        <p>Let <var>realm info</var> be the result of <a data-link-type="dfn" href="#get-the-realm-info" id="ref-for-get-the-realm-info②">get the realm info</a> given <var>settings</var></p>
       <li data-md>
        <p>Let <var>body</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①⓪⑧">map</a> matching the <code>script.RealmCreated</code> production, with the <code>params</code> field set to <var>realm info</var>.</p>
       <li data-md>
        <p>If <a data-link-type="dfn" href="#event-is-enabled" id="ref-for-event-is-enabled②">event is enabled</a> given <var>session</var>,
 "<code>script.realmCreated</code>" and <var>related browsing contexts</var>:</p>
        <ol>
         <li data-md>
          <p><a data-link-type="dfn" href="#emit-an-event" id="ref-for-emit-an-event①⑧">Emit an event</a> with <var>session</var> and <var>body</var>.</p>
        </ol>
      </ol>
    </ol>
    <p class="issue" id="issue-74a40be3"><a class="self-link" href="#issue-74a40be3"></a> Should the order here be better defined?</p>
   </div>
   <h5 class="heading settled" data-level="6.5.5.3" id="event-script-realmDestroyed"><span class="secno">6.5.5.3. </span><span class="content">The script.realmDestroyed Event</span><a class="self-link" href="#event-script-realmDestroyed"></a></h5>
   <dl>
    <dt>Event Type
    <dd>
<pre class="cddl local-cddl">script.RealmDestroyed = (
  method: "script.realmDestroyed",
  params: script.RealmDestroyedParameters
)

script.RealmDestroyedParameters = {
  realm: script.Realm
}

</pre>
   </dl>
    The <a data-link-type="dfn" href="#remote-end-event-trigger" id="ref-for-remote-end-event-trigger①⑧">remote end event trigger</a> is: 
   <div class="algorithm" data-algorithm="remote end event trigger for script.realmDestroyed">
     Define the following <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-lifecycle.html#unloading-document-cleanup-steps" id="ref-for-unloading-document-cleanup-steps">unloading document cleanup steps</a> with <var>document</var>: 
    <ol>
     <li data-md>
      <p>Let <var>related browsing contexts</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set③①">set</a>.</p>
     <li data-md>
      <p>Append <var>document</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#concept-document-bc" id="ref-for-concept-document-bc⑤">browsing context</a> to <var>related browsing
 contexts</var>.</p>
     <li data-md>
      <p>For each <var>worklet global scope</var> in <var>document</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/worklets.html#concept-document-worklet-global-scopes" id="ref-for-concept-document-worklet-global-scopes">worklet global scopes</a>:</p>
      <ol>
       <li data-md>
        <p>Let <var>realm</var> be <var>worklet global scope</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm">relevant Realm</a>.</p>
       <li data-md>
        <p>Let <var>realm id</var> be the <a data-link-type="dfn" href="#realm-id" id="ref-for-realm-id⑦">realm id</a> for <var>realm</var>.</p>
       <li data-md>
        <p>Let <var>params</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①⓪⑨">map</a> matching the <code>script.RealmDestroyedParameters</code> production, with the <code>realm</code> field set of <var>realm id</var>.</p>
       <li data-md>
        <p>Let <var>body</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①①⓪">map</a> matching the <code>script.RealmDestroyed</code> production, with the <code>params</code> field set to <var>params</var>.</p>
       <li data-md>
        <p>For each <var>session</var> in the <a data-link-type="dfn" href="#set-of-sessions-for-which-an-event-is-enabled" id="ref-for-set-of-sessions-for-which-an-event-is-enabled①⑦">set of sessions for which an event is enabled</a> given "<code>script.realmDestroyed</code>" and <var>related browsing contexts</var>:</p>
        <ol>
         <li data-md>
          <p><a data-link-type="dfn" href="#emit-an-event" id="ref-for-emit-an-event①⑨">Emit an event</a> with <var>session</var> and <var>body</var>.</p>
        </ol>
      </ol>
     <li data-md>
      <p>Let <var>environment settings</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object①①">environment settings object</a> whose <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global⑨">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window①②">associated <code>Document</code></a> is <var>document</var>.</p>
     <li data-md>
      <p>Let <var>realm</var> be <var>environment settings</var>’ <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#realm-execution-context" id="ref-for-realm-execution-context⑨">realm execution context</a>'s Realm component.</p>
     <li data-md>
      <p>Let <var>realm id</var> be the <a data-link-type="dfn" href="#realm-id" id="ref-for-realm-id⑧">realm id</a> for <var>realm</var>.</p>
     <li data-md>
      <p>Let <var>params</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①①①">map</a> matching the <code>script.RealmDestroyedParameters</code> production, with the <code>realm</code> field set to <var>realm id</var>.</p>
     <li data-md>
      <p>Let <var>body</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①①②">map</a> matching the <code>script.RealmDestroyed</code> production, with the <code>params</code> field set to <var>params</var>.</p>
     <li data-md>
      <p>For each <var>session</var> in the <a data-link-type="dfn" href="#set-of-sessions-for-which-an-event-is-enabled" id="ref-for-set-of-sessions-for-which-an-event-is-enabled①⑧">set of sessions for which an event is enabled</a> given "<code>script.realmDestroyed</code>" and <var>related browsing contexts</var>:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="#emit-an-event" id="ref-for-emit-an-event②⓪">Emit an event</a> with <var>session</var> and <var>body</var>.</p>
      </ol>
    </ol>
    <p>Whenever a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#worker-event-loop-2" id="ref-for-worker-event-loop-2">worker event loop</a> <var>event loop</var> is destroyed, either because the
worker comes to the end of its lifecycle, or prematurely via the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/workers.html#terminate-a-worker" id="ref-for-terminate-a-worker">terminate a
worker</a> algorithm:</p>
    <ol>
     <li data-md>
      <p>Let <var>environment settings</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object①②">environment settings object</a> for which <var>event loop</var> is the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#responsible-event-loop" id="ref-for-responsible-event-loop">responsible event loop</a>.</p>
     <li data-md>
      <p>Let <var>related browsing contexts</var> be the result of <a data-link-type="dfn" href="#get-related-browsing-contexts" id="ref-for-get-related-browsing-contexts⑦">get related browsing
 contexts</a> given <var>environment settings</var>.</p>
     <li data-md>
      <p>Let <var>realm</var> be <var>environment settings</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object&apos;s-realm" id="ref-for-environment-settings-object&apos;s-realm">environment settings object’s Realm</a>.</p>
     <li data-md>
      <p>Let <var>realm id</var> be the <a data-link-type="dfn" href="#realm-id" id="ref-for-realm-id⑨">realm id</a> for <var>realm</var>.</p>
     <li data-md>
      <p>Let <var>params</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①①③">map</a> matching the <code>script.RealmDestroyedParameters</code> production, with the <code>realm</code> field set of <var>realm id</var>.</p>
     <li data-md>
      <p>Let <var>body</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①①④">map</a> matching the <code>script.RealmDestroyed</code> production, with the <code>params</code> field set to <var>params</var>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="6.6" id="module-log"><span class="secno">6.6. </span><span class="content">The log Module</span><a class="self-link" href="#module-log"></a></h3>
   <p>The <dfn data-dfn-for="modules" data-dfn-type="dfn" data-export id="modules-log">log<a class="self-link" href="#modules-log"></a></dfn> module contains functionality and events
related to logging.</p>
   <p>A <a data-link-type="dfn" href="#bidi-session" id="ref-for-bidi-session①⑥">BiDi Session</a> has a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="log-event-buffer">log event buffer</dfn> which is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①①⑤">map</a> from <a data-link-type="dfn" href="#browsing-context-id" id="ref-for-browsing-context-id①⑤">browsing context id</a> to a list of log events for that context that have not
been emitted. User agents may impose a maximum size on this buffer, subject to
the condition that if events A and B happen in the same context with A occurring
before B, and both are added to the buffer, the entry for B must not be removed
before the entry for A.</p>
   <div class="algorithm" data-algorithm="buffer a log event">
    <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="buffer-a-log-event">buffer a log event</dfn> given <var>session</var>, <var>contexts</var> and <var>event</var>:</p>
    <ol>
     <li data-md>
      <p>Let <var>buffer</var> be <var>session</var>’s <a data-link-type="dfn" href="#log-event-buffer" id="ref-for-log-event-buffer">log event buffer</a>.</p>
     <li data-md>
      <p>Let <var>context ids</var> be a new list.</p>
     <li data-md>
      <p>For each <var>context</var> of <var>contexts</var>:</p>
      <ol>
       <li data-md>
        <p>Append the <a data-link-type="dfn" href="#browsing-context-id" id="ref-for-browsing-context-id①⑥">browsing context id</a> for <var>context</var> to <var>context ids</var>.</p>
      </ol>
     <li data-md>
      <p>For each <var>context id</var> in <var>context ids</var>:</p>
      <ol>
       <li data-md>
        <p>Let <var>other contexts</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list①④">list</a></p>
       <li data-md>
        <p>For each <var>other id</var> in <var>context ids</var>:</p>
       <li data-md>
        <p>If <var>other id</var> is not equal to <var>context id</var>, append <var>other id</var> to <var>other
  contexts</var>.</p>
       <li data-md>
        <p>If <var>buffer</var> does not contain <var>context id</var>, let <var>buffer</var>[<var>context id</var>] be a
 new list.</p>
       <li data-md>
        <p>Append (<var>event</var>, <var>other contexts</var>) to <var>buffer</var>[<var>context id</var>].</p>
      </ol>
    </ol>
    <p class="note" role="note"><span class="marker">Note:</span> we store the other contexts here so that each event is only emitted
once. In practice this is only relevant for workers that can be associated with
multiple browsing contexts.</p>
    <p class="issue" id="issue-d20b5797"><a class="self-link" href="#issue-d20b5797"></a> Do we want to key this on browsing context or top-level browsing context?
The difference is in what happens if an event occurs in a frame and that frame
is then navigated before the local end subscribes to log events for the top
level context.</p>
   </div>
   <h4 class="heading settled" data-level="6.6.1" id="module-log-definition"><span class="secno">6.6.1. </span><span class="content">Definition</span><a class="self-link" href="#module-log-definition"></a></h4>
   <p><a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition⑥⑦">Local end definition</a></p>
<pre class="cddl local-cddl">LogEvent = (
  log.EntryAdded
)
</pre>
   <h4 class="heading settled" data-level="6.6.2" id="module-log-types"><span class="secno">6.6.2. </span><span class="content">Types</span><a class="self-link" href="#module-log-types"></a></h4>
   <h5 class="heading settled" data-level="6.6.2.1" id="types-log-logentry"><span class="secno">6.6.2.1. </span><span class="content">log.LogEntry</span><a class="self-link" href="#types-log-logentry"></a></h5>
   <p><a data-link-type="dfn" href="#local-end-definition" id="ref-for-local-end-definition⑥⑧">Local end definition</a></p>
<pre class="cddl local-cddl">log.Level = "debug" / "info" / "warn" / "error"

log.Entry = (
  log.GenericLogEntry /
  log.ConsoleLogEntry /
  log.JavascriptLogEntry
)

log.BaseLogEntry = (
  level: log.Level,
  source: script.Source,
  text: text / null,
  timestamp: js-uint,
  ? stackTrace: script.StackTrace,
)

log.GenericLogEntry = {
  log.BaseLogEntry,
  type: text,
}

log.ConsoleLogEntry = {
  log.BaseLogEntry,
  type: "console",
  method: text,
  args: [*script.RemoteValue],
}

log.JavascriptLogEntry = {
  log.BaseLogEntry,
  type: "javascript",
}
</pre>
   <p>Each log event is represented by a <code>log.Entry</code> object. This has a <code>type</code> property which represents the type of log entry added, a <code>level</code> property representing severity, a <code>source</code> property representing the origin of the log entry, a <code>text</code> property
with the log message string itself, and a <code>timestamp</code> property
corresponding to the time the log entry was generated. Specific variants of the <code>log.Entry</code> are used to represent logs from different sources, and
provide additional fields specific to the entry type.</p>
   <h4 class="heading settled" data-level="6.6.3" id="module-log-events"><span class="secno">6.6.3. </span><span class="content">Events</span><a class="self-link" href="#module-log-events"></a></h4>
   <h5 class="heading settled" data-level="6.6.3.1" id="event-log-entryAdded"><span class="secno">6.6.3.1. </span><span class="content">The log.entryAdded Event</span><a class="self-link" href="#event-log-entryAdded"></a></h5>
   <dl>
    <dt>Event Type
    <dd>
<pre class="cddl local-cddl">log.EntryAdded = (
 method: "log.entryAdded",
 params: log.Entry,
)
</pre>
   </dl>
   <p>The <a data-link-type="dfn" href="#remote-end-event-trigger" id="ref-for-remote-end-event-trigger①⑨">remote end event trigger</a> is:</p>
   <div class="algorithm" data-algorithm="remote end event trigger for log.entryAdded">
    <p>Define the following <a data-link-type="dfn" href="#console-steps" id="ref-for-console-steps">console steps</a> with <var>method</var>, <var>args</var>, and <var>options</var>:</p>
    <ol>
     <li data-md>
      <p>For each <var>session</var> in <a data-link-type="dfn" href="#active-bidi-sessions" id="ref-for-active-bidi-sessions②">active BiDI sessions</a>:</p>
      <ol>
       <li data-md>
        <p>If <var>method</var> is "<code>error</code>" or "<code>assert</code>", let <var>level</var> be
 "<code>error</code>". If <var>method</var> is "<code>debug</code>" or "<code>trace</code>"
 let <var>level</var> be "<code>debug</code>". If <var>method</var> is "<code>warn</code>", let <var>level</var> be "<code>warn</code>". Otherwise let <var>level</var> be "<code>info</code>".</p>
       <li data-md>
        <p>Let <var>timestamp</var> be a <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-time-values-and-time-range" id="ref-for-sec-time-values-and-time-range②">time value</a> representing the current date and time in UTC.</p>
       <li data-md>
        <p>Let <var>text</var> be an empty string.</p>
       <li data-md>
        <p>If <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values" id="ref-for-sec-ecmascript-data-types-and-values①①">Type</a>(<var>args</var>[0]) is String, and <var>args</var>[0] contains a <a data-link-type="dfn" href="https://console.spec.whatwg.org#formatting-specifiers" id="ref-for-formatting-specifiers">formatting specifier</a>, let <var>formatted args</var> be <a data-link-type="dfn" href="https://console.spec.whatwg.org#formatter" id="ref-for-formatter">Formatter</a>(<var>args</var>). Otherwise
 let <var>formatted args</var> be <var>args</var>.</p>
        <p class="note" role="note"><span class="marker">Note:</span> The formatter operation is underdefined in the console specification,
 formatting can be inconsistent between different implementations.</p>
       <li data-md>
        <p>For each <var>arg</var> in <var>formatted args</var>:</p>
        <ol>
         <li data-md>
          <p>If <var>arg</var> is not the first entry in <var>args</var>, append a U+0020 SPACE to <var>text</var>.</p>
         <li data-md>
          <p>If <var>arg</var> is a <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-primitive-value" id="ref-for-sec-primitive-value">primitive ECMAScript value</a>, append <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-tostring" id="ref-for-sec-tostring③">ToString</a>(<var>arg</var>) to <var>text</var>. Otherwise append an implementation-defined string to <var>text</var>.</p>
        </ol>
       <li data-md>
        <p>Let <var>realm</var> be the <a data-link-type="dfn" href="#realm-id" id="ref-for-realm-id①⓪">realm id</a> of the <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm" id="ref-for-current-realm①">current Realm Record</a>.</p>
       <li data-md>
        <p>Let <var>serialized args</var> be a new list.</p>
       <li data-md>
        <p>Let <var>serialization options</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①①⑥">map</a> matching the <code>script.SerializationOptions</code> production with the fields set to
 their default values.</p>
       <li data-md>
        <p>For each <var>arg</var> of <var>args</var>:</p>
        <ol>
         <li data-md>
          <p>Let <var>serialized arg</var> be the result of <a data-link-type="dfn" href="#serialize-as-a-remote-value" id="ref-for-serialize-as-a-remote-value⑨">serialize as a remote value</a> with <var>arg</var> as value, <var>serialization options</var>, <code>none</code> as
  ownership type, a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①①⑦">map</a> as serialization internal map, <var>realm</var> and <var>session</var>.</p>
         <li data-md>
          <p>Add <var>serialized arg</var> to <var>serialized args</var>.</p>
        </ol>
       <li data-md>
        <p>Let <var>source</var> be the result of <a data-link-type="dfn" href="#get-the-source" id="ref-for-get-the-source①">get the source</a> given <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm" id="ref-for-current-realm②">current Realm Record</a>.</p>
       <li data-md>
        <p>If <var>method</var> is "<code>assert</code>", "<code>error</code>",
 "<code>trace</code>", or "<code>warn</code>", let <var>stack</var> be the <a data-link-type="dfn" href="#current-stack-trace" id="ref-for-current-stack-trace①">current
 stack trace</a>. Otherwise let <var>stack</var> be null.</p>
       <li data-md>
        <p>Let <var>entry</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①①⑧">map</a> matching the <code>log.ConsoleLogEntry</code> production,
 with the the <code>level</code> field set to <var>level</var>, the <code>text</code> field set to <var>text</var>, the <code>timestamp</code> field set to <var>timestamp</var>, the <code>stackTrace</code> field set to <var>stack</var> if <var>stack</var> is not null, or
 omitted otherwise, the <var>method</var> field set to <var>method</var>, the <code>source</code> field set to <var>source</var> and the <code>args</code> field set to <var>serialized
 args</var>.</p>
       <li data-md>
        <p>Let <var>body</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①①⑨">map</a> matching the <code>log.EntryAdded</code> production, with
 the <code>params</code> field set to <var>entry</var>.</p>
       <li data-md>
        <p>Let <var>settings</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object" id="ref-for-current-settings-object">current settings object</a></p>
       <li data-md>
        <p>Let <var>related browsing contexts</var> be the result of <a data-link-type="dfn" href="#get-related-browsing-contexts" id="ref-for-get-related-browsing-contexts⑧">get related browsing
 contexts</a> given <var>settings</var>.</p>
       <li data-md>
        <p>If <a data-link-type="dfn" href="#event-is-enabled" id="ref-for-event-is-enabled③">event is enabled</a> with <var>session</var>, "<code>log.entryAdded</code>" and <var>related browsing contexts</var>, <a data-link-type="dfn" href="#emit-an-event" id="ref-for-emit-an-event②①">emit an event</a> with <var>session</var> and <var>body</var>.</p>
        <p>Otherwise, <a data-link-type="dfn" href="#buffer-a-log-event" id="ref-for-buffer-a-log-event">buffer a log event</a> with <var>session</var>, <var>related browsing
 contexts</var>, and <var>body</var>.</p>
      </ol>
    </ol>
    <p>Define the following <a data-link-type="dfn" href="#error-reporting-steps" id="ref-for-error-reporting-steps">error reporting steps</a> with arguments <var>script</var>, <var>line number</var>, <var>column number</var>, <var>message</var> and <var>handled</var>:</p>
    <ol>
     <li data-md>
      <p>If <var>handled</var> is true return.</p>
     <li data-md>
      <p>Let <var>settings</var> be <var>script</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#settings-object" id="ref-for-settings-object①">settings object</a>.</p>
     <li data-md>
      <p>Let <var>stack</var> be the <a data-link-type="dfn" href="#stack-trace-for-an-exception" id="ref-for-stack-trace-for-an-exception①">stack trace for an exception</a> with the exception
 corresponding to the error being reported.</p>
     <li data-md>
      <p>Let <var>source</var> be the result of <a data-link-type="dfn" href="#get-the-source" id="ref-for-get-the-source②">get the source</a> given <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm" id="ref-for-current-realm③">current Realm Record</a>.</p>
     <li data-md>
      <p>Let <var>entry</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①②⓪">map</a> matching the <code>log.JavascriptLogEntry</code> production,
 with <code>level</code> set to "<code>error</code>", <code>text</code> set to <var>message</var>, <code>source</code> set to <var>source</var>, and the <code>timestamp</code> field set to <var>timestamp</var>.</p>
     <li data-md>
      <p>Let <var>related browsing contexts</var> be the result of <a data-link-type="dfn" href="#get-related-browsing-contexts" id="ref-for-get-related-browsing-contexts⑨">get related browsing
 contexts</a> given <var>settings</var>.</p>
     <li data-md>
      <p>For each <var>session</var> in <a data-link-type="dfn" href="#active-bidi-sessions" id="ref-for-active-bidi-sessions③">active BiDi sessions</a>:</p>
      <ol>
       <li data-md>
        <p>If <a data-link-type="dfn" href="#event-is-enabled" id="ref-for-event-is-enabled④">event is enabled</a> with <var>session</var>, "<code>log.entryAdded</code>" and <var>related browsing contexts</var>, <a data-link-type="dfn" href="#emit-an-event" id="ref-for-emit-an-event②②">emit an event</a> with <var>session</var> and <var>body</var>.</p>
        <p>Otherwise, <a data-link-type="dfn" href="#buffer-a-log-event" id="ref-for-buffer-a-log-event①">buffer a log event</a> with <var>session</var>, <var>related browsing
 contexts</var>, and <var>body</var>.</p>
      </ol>
    </ol>
    <p class="issue" id="issue-d863e230"><a class="self-link" href="#issue-d863e230"></a> Lots more things require logging. CDP has LogEntryAdded types xml,
javascript, network, storage, appcache, rendering, security, deprecation,
worker, violation, intervention, recommendation, other. These are in addition to
the js exception and console API types that are represented by different methods.</p>
    <p class="issue" id="issue-365f0ed7"><a class="self-link" href="#issue-365f0ed7"></a> Allow implementation-defined log types</p>
   </div>
   <div class="algorithm" data-algorithm="remote end subscribe steps for log.entryAdded">
    <p>The <a data-link-type="dfn" href="#remote-end-subscribe-steps" id="ref-for-remote-end-subscribe-steps④">remote end subscribe steps</a>, with <a data-link-type="dfn" href="#subscribe-priority" id="ref-for-subscribe-priority③">subscribe priority</a> 10, given <var>session</var>, <var>contexts</var> and <var>include global</var> are:</p>
    <ol>
     <li data-md>
      <p>For each <var>context id</var> → <var>events</var> in <var>session</var>’s <a data-link-type="dfn" href="#log-event-buffer" id="ref-for-log-event-buffer①">log event buffer</a>:</p>
      <ol>
       <li data-md>
        <p>Let <var>maybe context</var> be the result of <a data-link-type="dfn" href="#get-a-browsing-context" id="ref-for-get-a-browsing-context①④">getting a browsing context</a> given <var>context id</var>.</p>
       <li data-md>
        <p>If <var>maybe context</var> is an <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors⑥⑤">error</a>, remove <var>context id</var> from <a data-link-type="dfn" href="#log-event-buffer" id="ref-for-log-event-buffer②">log event
 buffer</a> and continue.</p>
       <li data-md>
        <p>Let <var>context</var> be <var>maybe context</var>’s data</p>
       <li data-md>
        <p>Let <var>top level context</var> be <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context" id="ref-for-top-level-browsing-context①⑦">top-level browsing context</a>.</p>
       <li data-md>
        <p>If <var>include global</var> is true and <var>top level context</var> is not in <var>contexts</var>,
 or if <var>include global</var> is false and <var>top level context</var> is in <var>contexts</var>:</p>
        <ol>
         <li data-md>
          <p>For each (<var>event</var>, <var>other contexts</var>) in <var>events</var>:</p>
          <ol>
           <li data-md>
            <p><a data-link-type="dfn" href="#emit-an-event" id="ref-for-emit-an-event②③">Emit an event</a> with <var>session</var> and <var>event</var>.</p>
           <li data-md>
            <p>For each <var>other context id</var> in <var>other contexts</var>:</p>
            <ol>
             <li data-md>
              <p>If <a data-link-type="dfn" href="#log-event-buffer" id="ref-for-log-event-buffer③">log event buffer</a> contains <var>other context id</var>, remove <var>event</var> from <a data-link-type="dfn" href="#log-event-buffer" id="ref-for-log-event-buffer④">log event buffer</a>[<var>other context id</var>].</p>
            </ol>
          </ol>
        </ol>
      </ol>
    </ol>
   </div>
   <h3 class="heading settled" data-level="6.7" id="module-input"><span class="secno">6.7. </span><span class="content">The Input Module</span><a class="self-link" href="#module-input"></a></h3>
   <p>The <dfn data-dfn-for="modules" data-dfn-type="dfn" data-export id="modules-input">input<a class="self-link" href="#modules-input"></a></dfn> module contains functionality for
simulated user input.</p>
   <h4 class="heading settled" data-level="6.7.1" id="module-input-definition"><span class="secno">6.7.1. </span><span class="content">Definition</span><a class="self-link" href="#module-input-definition"></a></h4>
   <p><a data-link-type="dfn" href="#remote-end-definition" id="ref-for-remote-end-definition④④">remote end definition</a></p>
<pre class="cddl remote-cddl">InputCommand = (
  input.PerformActions //
  input.ReleaseActions
)
</pre>
   <h4 class="heading settled" data-level="6.7.2" id="module-input-types"><span class="secno">6.7.2. </span><span class="content">Types</span><a class="self-link" href="#module-input-types"></a></h4>
   <h5 class="heading settled" data-level="6.7.2.1" id="type-input-origin"><span class="secno">6.7.2.1. </span><span class="content">input.ElementOrigin</span><a class="self-link" href="#type-input-origin"></a></h5>
   <p>The <code>input.ElementOrigin</code> type represents an <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element③">Element</a></code> that will
be used as a coordinate origin.</p>
<pre class="cddl remote-cddl">input.ElementOrigin = {
  type: "element",
  element: script.SharedReference
}
</pre>
   <div class="algorithm" data-algorithm="is input.ElementOrigin">
     The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="is-inputelementorigin">is <code>input.ElementOrigin</code></dfn> steps given <var>object</var> are: 
    <ol>
     <li data-md>
      <p>If <var>object</var> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①②①">map</a> matching the <code>input.ElementOrigin</code> production, return true.</p>
     <li data-md>
      <p>Return false.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="get Element from input.ElementOrigin steps">
    To <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="get Element from input.ElementOrigin steps" data-noexport id="get-element-from-inputelementorigin-steps">get Element from <code>input.ElementOrigin</code> steps</dfn> given <var>session</var>: 
    <ol>
     <li data-md>
      <p>Return the following steps, given <var>origin</var> and <var>context</var>:</p>
      <ol>
       <li data-md>
        <p class="assertion">Assert: <var>origin</var> matches <code>input.ElementOrigin</code>.</p>
       <li data-md>
        <p>Let <var>document</var> be <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#active-document" id="ref-for-active-document①②">active document</a>.</p>
       <li data-md>
        <p>Let <var>reference</var> be <var>origin</var>["<code>element</code>"]</p>
       <li data-md>
        <p>Let <var>environment settings</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object①③">environment settings object</a> whose <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①⓪">relevant global object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window①③">associated <code>Document</code></a> is <var>document</var>.</p>
       <li data-md>
        <p>Let <var>realm</var> be <var>environment settings</var>’ <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#realm-execution-context" id="ref-for-realm-execution-context①⓪">realm execution context</a>'s
 Realm component.</p>
       <li data-md>
        <p>Let <var>element</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try④⑥">trying</a> to <a data-link-type="dfn" href="#deserialize-remote-reference" id="ref-for-deserialize-remote-reference②">deserialize remote reference</a> with <var>reference</var>, <var>realm</var>, and <var>session</var>.</p>
       <li data-md>
        <p>If <var>element</var> doesn’t implement <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#element" id="ref-for-element④">Element</a></code> return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-errors" id="ref-for-dfn-errors⑥⑥">error</a> with <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-error-code" id="ref-for-dfn-error-code⑥①">error code</a> <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-no-such-element" id="ref-for-dfn-no-such-element②">no such element</a>.</p>
       <li data-md>
        <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success⑤⑧">success</a> with data <var>element</var>.</p>
      </ol>
    </ol>
   </div>
   <h4 class="heading settled" data-level="6.7.3" id="module-input-commands"><span class="secno">6.7.3. </span><span class="content">Commands</span><a class="self-link" href="#module-input-commands"></a></h4>
   <h5 class="heading settled" data-level="6.7.3.1" id="command-input-performActions"><span class="secno">6.7.3.1. </span><span class="content">The input.performActions Command</span><a class="self-link" href="#command-input-performActions"></a></h5>
   <p>The <dfn data-dfn-for="commands" data-dfn-type="dfn" data-export id="commands-inputperformactions">input.performActions<a class="self-link" href="#commands-inputperformactions"></a></dfn> command performs a
specified sequence of user input actions.</p>
   <dl>
    <dt>Command Type
    <dd>
<pre class="cddl remote-cddl">input.PerformActions = (
  method: "input.performActions",
  params: input.PerformActionsParameters
)

input.PerformActionsParameters = {
  context: browsingContext.BrowsingContext,
  actions: [*input.SourceActions]
}

input.SourceActions = (
  input.NoneSourceActions /
  input.KeySourceActions /
  input.PointerSourceActions /
  input.WheelSourceActions
)

input.NoneSourceActions = {
  type: "none",
  id: text,
  actions: [*input.NoneSourceAction]
}

input.NoneSourceAction = input.PauseAction

input.KeySourceActions = {
  type: "key",
  id: text,
  actions: [*input.KeySourceAction]
}

input.KeySourceAction = (
  input.PauseAction /
  input.KeyDownAction /
  input.KeyUpAction
)

input.PointerSourceActions = {
  type: "pointer",
  id: text,
  ? parameters: input.PointerParameters,
  actions: [*input.PointerSourceAction]
}

input.PointerType = "mouse" / "pen" / "touch"

input.PointerParameters = {
  ? pointerType: input.PointerType .default "mouse"
}

input.PointerSourceAction = (
  input.PauseAction /
  input.PointerDownAction /
  input.PointerUpAction /
  input.PointerMoveAction
)

input.WheelSourceActions = {
  type: "wheel",
  id: text,
  actions: [*input.WheelSourceAction]
}

input.WheelSourceAction = (
  input.PauseAction /
  input.WheelScrollAction
)

input.PauseAction = {
  type: "pause",
  ? duration: js-uint
}

input.KeyDownAction = {
  type: "keyDown",
  value: text
}

input.KeyUpAction = {
  type: "keyUp",
  value: text
}

input.PointerUpAction = {
  type: "pointerUp",
  button: js-uint,
  input.PointerCommonProperties
}

input.PointerDownAction = {
  type: "pointerDown",
  button: js-uint,
  input.PointerCommonProperties
}

input.PointerMoveAction = {
  type: "pointerMove",
  x: js-int,
  y: js-int,
  ? duration: js-uint,
  ? origin: input.Origin,
  input.PointerCommonProperties
}

input.WheelScrollAction = {
  type: "scroll",
  x: js-int,
  y: js-int,
  deltaX: js-int,
  deltaY: js-int,
  ? duration: js-uint,
  ? origin: input.Origin .default "viewport",
}

input.PointerCommonProperties = (
  ? width: js-uint .default 1,
  ? height: js-uint .default 1,
  ? pressure: float .default 0.0,
  ? tangentialPressure: float .default 0.0,
  ? twist: (0..359) .default 0,
  (input.TiltProperties // input.AngleProperties)
)

input.AngleProperties = (
  ? altitudeAngle: float .default 0.0,
  ? azimuthAngle: float .default 0.0,
)

input.TiltProperties = (
  ? tiltX: (-90..90) .default 0,
  ? tiltY: (-90..90) .default 0,
)

input.Origin = "viewport" / "pointer" / input.ElementOrigin
</pre>
    <dt>Return Type
    <dd>
<pre class="cddl">EmptyResult
</pre>
   </dl>
   <div class="algorithm" data-algorithm="remote end steps for input.performActions">
    <p>The <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-end-steps" id="ref-for-dfn-remote-end-steps③①">remote end steps</a> with <var>session</var> and <var>command parameters</var> are:</p>
    <ol>
     <li data-md>
      <p>Let <var>context id</var> be the value of the <code>context</code> field of <var>command parameters</var>.</p>
     <li data-md>
      <p>Let <var>context</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try④⑦">trying</a> to <a data-link-type="dfn" href="#get-a-browsing-context" id="ref-for-get-a-browsing-context①⑤">get a browsing context</a> with <var>context id</var>.</p>
     <li data-md>
      <p>Let <var>input state</var> be <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-get-the-input-state" id="ref-for-dfn-get-the-input-state">get the input state</a> with <var>session</var> and <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context" id="ref-for-top-level-browsing-context①⑧">top-level browsing context</a>.</p>
     <li data-md>
      <p>Let <var>actions options</var> be a new <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-actions-options" id="ref-for-dfn-actions-options">actions options</a> with the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-is-element-origin" id="ref-for-dfn-is-element-origin">is element
 origin</a> steps set to <a data-link-type="dfn" href="#is-inputelementorigin" id="ref-for-is-inputelementorigin">is input.ElementOrigin</a>, and the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-get-element-origin" id="ref-for-dfn-get-element-origin">get element origin</a> steps set to the result of <a data-link-type="dfn" href="#get-element-from-inputelementorigin-steps" id="ref-for-get-element-from-inputelementorigin-steps">get Element from
 input.ElementOrigin steps</a> given <var>session</var>.</p>
     <li data-md>
      <p>Let <var>actions by tick</var> be the result of trying to <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-extract-an-action-sequence" id="ref-for-dfn-extract-an-action-sequence">extract an action
 sequence</a> with <var>input state</var>, <var>command parameters</var>, and <var>actions options</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try④⑧">Try</a> to <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-dispatch-actions" id="ref-for-dfn-dispatch-actions">dispatch actions</a> with <var>input state</var>, <var>actions by tick</var>, <var>context</var>, and <var>actions options</var>.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success⑤⑨">success</a> with data null.</p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="6.7.3.2" id="command-input-releaseActions"><span class="secno">6.7.3.2. </span><span class="content">The input.releaseActions Command</span><a class="self-link" href="#command-input-releaseActions"></a></h5>
   <p>The <dfn data-dfn-for="commands" data-dfn-type="dfn" data-export id="commands-inputreleaseactions">input.releaseActions<a class="self-link" href="#commands-inputreleaseactions"></a></dfn> command resets the input
state associated with the current session.</p>
   <dl>
    <dt>Command Type
    <dd>
<pre class="cddl remote-cddl">input.ReleaseActions = (
  method: "input.releaseActions",
  params: input.ReleaseActionsParameters
)

input.ReleaseActionsParameters = {
  context: browsingContext.BrowsingContext,
}
</pre>
    <dt>Return Type
    <dd>
<pre class="cddl">EmptyResult
</pre>
   </dl>
   <div class="algorithm" data-algorithm="remote end steps for input.releaseActions">
    <p>The <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-remote-end-steps" id="ref-for-dfn-remote-end-steps③②">remote end steps</a> given <var>session</var>, and <var>command parameters</var> are:</p>
    <ol>
     <li data-md>
      <p>Let <var>context id</var> be the value of the <code>context</code> field of <var>command parameters</var>.</p>
     <li data-md>
      <p>Let <var>context</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try④⑨">trying</a> to <a data-link-type="dfn" href="#get-a-browsing-context" id="ref-for-get-a-browsing-context①⑥">get a browsing context</a> with <var>context id</var>.</p>
     <li data-md>
      <p>Let <var>top-level context</var> be <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context" id="ref-for-top-level-browsing-context①⑨">top-level browsing context</a>.</p>
     <li data-md>
      <p>Let <var>input state</var> be <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-get-the-input-state" id="ref-for-dfn-get-the-input-state①">get the input state</a> with <var>session</var> and <var>top-level context</var>.</p>
     <li data-md>
      <p>Let <var>actions options</var> be a new <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-actions-options" id="ref-for-dfn-actions-options①">actions options</a> with the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-is-element-origin" id="ref-for-dfn-is-element-origin①">is element
 origin</a> steps set to <a data-link-type="dfn" href="#is-inputelementorigin" id="ref-for-is-inputelementorigin①">is input.ElementOrigin</a>, and the <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-get-element-origin" id="ref-for-dfn-get-element-origin①">get element origin</a> steps set to <a data-link-type="dfn" href="#get-element-from-inputelementorigin-steps" id="ref-for-get-element-from-inputelementorigin-steps①">get Element from
 input.ElementOrigin steps</a> given <var>session</var>.</p>
     <li data-md>
      <p>Let <var>undo actions</var> be <var>input state</var>’s <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-input-cancel-list" id="ref-for-dfn-input-cancel-list">input cancel list</a> in reverse order.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-try" id="ref-for-dfn-try⑤⓪">Try</a> to <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-dispatch-tick-actions" id="ref-for-dfn-dispatch-tick-actions">dispatch tick actions</a> with <var>undo actions</var>, 0, <var>context</var>, and <var>actions options</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-reset-the-input-state" id="ref-for-dfn-reset-the-input-state">Reset the input state</a> with <var>session</var> and <var>top-level context</var>.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://w3c.github.io/webdriver/#dfn-success" id="ref-for-dfn-success⑥⓪">success</a> with data null.</p>
    </ol>
   </div>
   <h2 class="heading settled" data-level="7" id="patches"><span class="secno">7. </span><span class="content">Patches to Other Specifications</span><a class="self-link" href="#patches"></a></h2>
   <p>This specification requires some changes to external specifications to provide the necessary
integration points. It is assumed that these patches will be committed to the other specifications
as part of the standards process.</p>
   <h3 class="heading settled" data-level="7.1" id="patches-html"><span class="secno">7.1. </span><span class="content">HTML</span><a class="self-link" href="#patches-html"></a></h3>
   <p>The <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/window-object.html#a-browsing-context-is-discarded" id="ref-for-a-browsing-context-is-discarded">a browsing context is discarded</a> algorithm is modified to read as follows:</p>
   <div class="algorithm" data-algorithm="browsing context tree discarded">
     To discard a browsing context <var>browsingContext</var>, run these steps: 
    <ol>
     <li data-md>
      <p>If this is not a recursive invocation of this algorithm, call any <dfn class="dfn-paneled" data-dfn-type="dfn" data-export data-lt="browsing context tree discarded" id="browsing-context-tree-discarded">browsing context
 tree discarded</dfn> steps defined in other applicable specifications with <var>browsingContext</var>.</p>
     <li data-md>
      <p>Discard all <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①">Document</a></code> objects for all the entries in <var>browsingContext</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/history.html#session-history" id="ref-for-session-history">session
 history</a>.</p>
     <li data-md>
      <p>If <var>browsingContext</var> is a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context" id="ref-for-top-level-browsing-context②⓪">top-level browsing context</a>, then <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#bcg-remove" id="ref-for-bcg-remove">remove a browsing context</a> <var>browsingContext</var>.</p>
    </ol>
   </div>
   <p class="issue" id="issue-b664c1e3"><a class="self-link" href="#issue-b664c1e3"></a> The actual patch might be better to split the algorithm into an outer algorithm that is
called by external callers and an inner algorithm that’s used for recursive calls. That’s quite hard
to express as a patch to the specification since it requires changing multiple parts.</p>
   <p>The <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#report-the-error" id="ref-for-report-the-error">report an error</a> algorithm is modified with an additional step at the
end:</p>
   <div class="algorithm" data-algorithm="error reporting steps">
    <ol>
     <li data-md>
      <p>Call any <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="error-reporting-steps">error reporting steps</dfn> defined in external specifications
 with <var>script</var>, <var>line</var>, <var>col</var>, <var>message</var>, and true if the error is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-error-handled" id="ref-for-concept-error-handled">handled</a>, or false otherwise.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="7.2" id="patches-console"><span class="secno">7.2. </span><span class="content">Console</span><a class="self-link" href="#patches-console"></a></h3>
   <p>Other specifications can define <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="console-steps">console steps</dfn>. When any method of the <code class="idl"><a data-link-type="idl" href="https://console.spec.whatwg.org/#namespacedef-console" id="ref-for-namespacedef-console">console</a></code> interface is called, with method name <var>method</var> and argument <var>args</var>:</p>
   <ol>
    <li data-md>
     <p>If that method does not call the <a data-link-type="dfn" href="https://console.spec.whatwg.org#printer" id="ref-for-printer">Printer</a> operation, call any <a data-link-type="dfn" href="#console-steps" id="ref-for-console-steps①">console
 steps</a> defined in external specification with arguments <var>method</var>, <var>args</var>, and undefined.</p>
     <p>Otherwise, at the point when the <a data-link-type="dfn" href="https://console.spec.whatwg.org#printer" id="ref-for-printer①">Printer</a> operation is called with
 arguments <var>name</var>, <var>printerArgs</var> and <var>options</var> (which is undefined if the
 argument is not provided), call any <a data-link-type="dfn" href="#console-steps" id="ref-for-console-steps②">console steps</a> defined in
 external specification with arguments <var>name</var>, <var>printerArgs</var>, and <var>options</var>.</p>
   </ol>
  </main>
<script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#activate-a-context">activate a context</a><span>, in § 6.3.3.1</span>
   <li><a href="#active-bidi-sessions">active BiDi sessions</a><span>, in § 3.2</span>
   <li><a href="#active-listeners">active listeners</a><span>, in § 4</span>
   <li><a href="#associated-with-connection">associated with connection</a><span>, in § 4</span>
   <li><a href="#await-a-navigation">await a navigation</a><span>, in § 6.3.2.2</span>
   <li><a href="#awaits">awaits</a><span>, in § 2</span>
   <li><a href="#before-request-sent-map">before request sent map</a><span>, in § 6.4.1</span>
   <li><a href="#bidi-flag">BiDi flag</a><span>, in § 3.2</span>
   <li><a href="#bidi-session">BiDi session</a><span>, in § 3.2</span>
   <li><a href="#blocked-request-map">blocked request map</a><span>, in § 6.4.2</span>
   <li><a href="#modules-browser">browser</a><span>, in § 6.2</span>
   <li><a href="#commands-browserclose">browser.close</a><span>, in § 6.2.2.1</span>
   <li><a href="#modules-browsingcontext">browsingContext</a><span>, in § 6.3</span>
   <li><a href="#commands-browsingcontextactivate">browsingContext.activate</a><span>, in § 6.3.3.1</span>
   <li><a href="#commands-browsingcontextcapturescreenshot">browsingContext.captureScreenshot</a><span>, in § 6.3.3.2</span>
   <li><a href="#commands-browsingcontextclose">browsingContext.close</a><span>, in § 6.3.3.3</span>
   <li><a href="#commands-browsingcontextcreate">browsingContext.create</a><span>, in § 6.3.3.4</span>
   <li><a href="#event-browsing-context-event-map">browsing context event map</a><span>, in § 3.6</span>
   <li><a href="#commands-browsingcontextgettree">browsingContext.getTree</a><span>, in § 6.3.3.5</span>
   <li><a href="#commands-browsingcontexthandleuserprompt">browsingContext.handleUserPrompt</a><span>, in § 6.3.3.6</span>
   <li><a href="#browsing-context-id">browsing context id</a><span>, in § 6.3.2.1</span>
   <li><a href="#commands-browsingcontextnavigate">browsingContext.navigate</a><span>, in § 6.3.3.7</span>
   <li><a href="#commands-browsingcontextprint">browsingContext.print</a><span>, in § 6.3.3.8</span>
   <li><a href="#commands-browsingcontextreload">browsingContext.reload</a><span>, in § 6.3.3.9</span>
   <li><a href="#commands-browsingcontextsetviewport">browsingContext.setViewport</a><span>, in § 6.3.3.10</span>
   <li><a href="#browsing-context-tree-discarded">browsing context tree discarded</a><span>, in § 7.1</span>
   <li><a href="#buffer-a-log-event">buffer a log event</a><span>, in § 6.6</span>
   <li><a href="#navigation-status-canceled">canceled</a><span>, in § 6.3</span>
   <li><a href="#cleanup-the-session">cleanup the session</a><span>, in § 6.1.1</span>
   <li><a href="#close-the-websocket-connections">close the WebSocket connections</a><span>, in § 4</span>
   <li><a href="#stackframe-column-number">column number</a><span>, in § 6.5.3.18</span>
   <li><a href="#command">command</a><span>, in § 3.4</span>
   <li><a href="#command-command-name">command name</a><span>, in § 3.4</span>
   <li><a href="#command-command-parameters">command parameters</a><span>, in § 3.4</span>
   <li><a href="#command-command-type">command type</a><span>, in § 3.4</span>
   <li><a href="#navigation-status-complete">complete</a><span>, in § 6.3</span>
   <li><a href="#console-steps">console steps</a><span>, in § 7.2</span>
   <li><a href="#construct-a-stack-trace">construct a stack trace</a><span>, in § 6.5.3.18</span>
   <li><a href="#construct-a-websocket-resource-name">construct a WebSocket resource name</a><span>, in § 4</span>
   <li><a href="#construct-a-websocket-url">construct a WebSocket URL</a><span>, in § 4</span>
   <li><a href="#construct-a-websocket-resource-name">constructing a WebSocket resource name</a><span>, in § 4</span>
   <li><a href="#construct-a-websocket-url">constructing a WebSocket URL</a><span>, in § 4</span>
   <li><a href="#create-a-channel">create a channel</a><span>, in § 6.5.3.2</span>
   <li><a href="#create-a-sandbox-realm">create a sandbox realm</a><span>, in § 5.1</span>
   <li><a href="#current-stack-trace">current stack trace</a><span>, in § 6.5.3.18</span>
   <li><a href="#deserialize-arguments">deserialize arguments</a><span>, in § 6.5.4.3</span>
   <li><a href="#deserialize-header">deserialize header</a><span>, in § 6.4.3.8</span>
   <li><a href="#deserialize-key-value-list">deserialize key-value list</a><span>, in § 6.5.3.6</span>
   <li><a href="#deserialize-local-value">deserialize local value</a><span>, in § 6.5.3.6</span>
   <li><a href="#deserialize-primitive-protocol-value">deserialize primitive protocol value</a><span>, in § 6.5.3.9</span>
   <li><a href="#deserialize-protocol-bytes">deserialize protocol bytes</a><span>, in § 6.4.3.4</span>
   <li><a href="#deserialize-remote-object-reference">deserialize remote object reference</a><span>, in § 6.5.3.12</span>
   <li><a href="#deserialize-remote-reference">deserialize remote reference</a><span>, in § 6.5.3.12</span>
   <li><a href="#deserialize-shared-reference">deserialize shared reference</a><span>, in § 6.5.3.12</span>
   <li><a href="#deserialize-value-list">deserialize value list</a><span>, in § 6.5.3.6</span>
   <li><a href="#emit-a-context-created-event">Emit a context created event</a><span>, in § 6.3.4.1</span>
   <li><a href="#emit-an-event">emit an event</a><span>, in § 4</span>
   <li><a href="#emit-a-script-message">emit a script message</a><span>, in § 6.5.5.1</span>
   <li><a href="#end-the-session">end the session</a><span>, in § 6.1.1</span>
   <li><a href="#error-reporting-steps">error reporting steps</a><span>, in § 7.1</span>
   <li><a href="#evaluate-function-body">evaluate function body</a><span>, in § 6.5.4.3</span>
   <li><a href="#event">event</a><span>, in § 3.6</span>
   <li><a href="#event-enabled-browsing-contexts">event enabled browsing contexts</a><span>, in § 3.6</span>
   <li><a href="#event-is-enabled">event is enabled</a><span>, in § 3.6</span>
   <li><a href="#event-event-name">event name</a><span>, in § 3.6</span>
   <li><a href="#command-event-parameters">event parameters.</a><span>, in § 3.6</span>
   <li><a href="#event-event-type">event type</a><span>, in § 3.6</span>
   <li><a href="#extension-modules">extension modules</a><span>, in § 3.3</span>
   <li><a href="#extract-challenges">extract challenges</a><span>, in § 6.4.3.1</span>
   <li><a href="#stackframe-function">function</a><span>, in § 6.5.3.18</span>
   <li><a href="#get-a-browsing-context">get a browsing context</a><span>, in § 6.3.2.1</span>
   <li><a href="#get-a-realm">get a realm</a><span>, in § 6.5.3.8</span>
   <li><a href="#get-a-realm-from-a-target">get a realm from a target</a><span>, in § 6.5.3.20</span>
   <li><a href="#get-a-sandbox-name">get a sandbox name</a><span>, in § 5.1</span>
   <li><a href="#get-a-session-id-for-a-websocket-resource">get a session ID for a WebSocket resource</a><span>, in § 4</span>
   <li><a href="#get-element-from-inputelementorigin-steps">get Element from input.ElementOrigin steps</a><span>, in § 6.7.2.1</span>
   <li><a href="#get-exception-details">get exception details</a><span>, in § 6.5.3.4</span>
   <li><a href="#get-or-create-a-sandbox-realm">get or create a sandbox realm</a><span>, in § 5.1</span>
   <li><a href="#get-related-browsing-contexts">get related browsing contexts</a><span>, in § 4</span>
   <li><a href="#get-shared-id-for-a-node">get shared id for a node</a><span>, in § 6.5.3.13</span>
   <li><a href="#get-the-browsing-context">get the browsing context</a><span>, in § 6.5.3.10</span>
   <li><a href="#get-the-browsing-context-info">get the browsing context info</a><span>, in § 6.3.2.2</span>
   <li><a href="#get-the-child-browsing-contexts">get the child browsing contexts</a><span>, in § 6.3.2.2</span>
   <li><a href="#get-the-fetch-timings">get the fetch timings</a><span>, in § 6.4.3.7</span>
   <li><a href="#get-the-initiator">get the initiator</a><span>, in § 6.4.3.9</span>
   <li><a href="#get-the-navigation-info">get the navigation info</a><span>, in § 6.3.2.4</span>
   <li><a href="#get-the-network-intercepts">get the network intercepts</a><span>, in § 6.4.2</span>
   <li><a href="#get-the-parent-browsing-context">get the parent browsing context</a><span>, in § 6.3.2.2</span>
   <li><a href="#get-the-protocol">get the protocol</a><span>, in § 6.4.3.14</span>
   <li><a href="#get-the-realm-info">get the realm info</a><span>, in § 6.5.3.10</span>
   <li><a href="#get-the-request-data">get the request data</a><span>, in § 6.4.3.12</span>
   <li><a href="#get-the-response-content-info">get the response content info</a><span>, in § 6.4.3.13</span>
   <li><a href="#get-the-response-data">get the response data</a><span>, in § 6.4.3.14</span>
   <li><a href="#get-the-source">get the source</a><span>, in § 6.5.3.19</span>
   <li><a href="#event-global-event-set">global event set</a><span>, in § 3.6</span>
   <li><a href="#handle-a-connection-closing">handle a connection closing</a><span>, in § 4</span>
   <li><a href="#handle-an-incoming-message">handle an incoming message</a><span>, in § 4</span>
   <li><a href="#handle-for-an-object">handle for an object</a><span>, in § 6.5.3.13</span>
   <li><a href="#handle-object-map">handle object map</a><span>, in § 6.5.3.5</span>
   <li><a href="#listener-host">host</a><span>, in § 4</span>
   <li><a href="#navigation-status-id">id</a><span>, in § 6.3</span>
   <li><a href="#modules-input">input</a><span>, in § 6.7</span>
   <li><a href="#commands-inputperformactions">input.performActions</a><span>, in § 6.7.3.1</span>
   <li><a href="#commands-inputreleaseactions">input.releaseActions</a><span>, in § 6.7.3.2</span>
   <li><a href="#intercept-map">intercept map</a><span>, in § 6.4.2</span>
   <li><a href="#event-in-the-default-event-set">in the default event set</a><span>, in § 3.6</span>
   <li><a href="#is-inputelementorigin">is input.ElementOrigin</a><span>, in § 6.7.2.1</span>
   <li><a href="#stackframe-line-number">line number</a><span>, in § 6.5.3.18</span>
   <li><a href="#list-of-stack-frames">list of stack frames</a><span>, in § 6.5.3.18</span>
   <li><a href="#list-of-websocket-resources">list of WebSocket resources</a><span>, in § 4</span>
   <li><a href="#local-end-definition">local end definition</a><span>, in § 3</span>
   <li><a href="#modules-log">log</a><span>, in § 6.6</span>
   <li><a href="#log-event-buffer">log event buffer</a><span>, in § 6.6</span>
   <li><a href="#match-url-pattern">match URL pattern</a><span>, in § 6.4.3.16</span>
   <li><a href="#module">module</a><span>, in § 3.3</span>
   <li><a href="#module-name">module name</a><span>, in § 3.3</span>
   <li><a href="#modules-network">network</a><span>, in § 6.4</span>
   <li><a href="#commands-networkaddintercept">network.addIntercept</a><span>, in § 6.4.4.1</span>
   <li><a href="#commands-networkcontinuerequest">network.continueRequest</a><span>, in § 6.4.4.2</span>
   <li><a href="#commands-networkcontinueresponse">network.continueResponse</a><span>, in § 6.4.4.3</span>
   <li><a href="#commands-networkcontinuewithauth">network.continueWithAuth</a><span>, in § 6.4.4.4</span>
   <li><a href="#commands-networkfailrequest">network.failRequest</a><span>, in § 6.4.4.5</span>
   <li><a href="#network-intercept">network intercept</a><span>, in § 6.4.2</span>
   <li><a href="#commands-networkprovideresponse">network.provideResponse</a><span>, in § 6.4.4.6</span>
   <li><a href="#commands-networkremoveintercept">network.removeIntercept</a><span>, in § 6.4.4.7</span>
   <li><a href="#normalize-rect">normalize rect</a><span>, in § 6.3.3.2</span>
   <li><a href="#no-such-handle">no such handle</a><span>, in § 3.5</span>
   <li><a href="#no-such-intercept">no such intercept</a><span>, in § 3.5</span>
   <li><a href="#no-such-node">no such node</a><span>, in § 3.5</span>
   <li><a href="#no-such-request">no such request</a><span>, in § 3.5</span>
   <li><a href="#no-such-script">no such script</a><span>, in § 3.5</span>
   <li><a href="#obtain-a-set-of-event-names">obtain a set of event names</a><span>, in § 3.6</span>
   <li><a href="#parse-url-pattern">parse URL pattern</a><span>, in § 6.4.3.16</span>
   <li><a href="#navigation-status-pending">pending</a><span>, in § 6.3</span>
   <li><a href="#listener-port">port</a><span>, in § 4</span>
   <li><a href="#preload-script">Preload script</a><span>, in § 6.5.2</span>
   <li><a href="#preload-script-map">preload script map</a><span>, in § 6.5.2</span>
   <li><a href="#process-a-network-event">process a network event</a><span>, in § 6.4.3.3</span>
   <li><a href="#realm-id">realm id</a><span>, in § 6.5.3.8</span>
   <li><a href="#rectangle-intersection">rectangle intersection</a><span>, in § 6.3.3.2</span>
   <li><a href="#recursively-emit-context-created-events">Recursively emit context created events</a><span>, in § 6.3.4.1</span>
   <li><a href="#remote-end-definition">remote end definition</a><span>, in § 3</span>
   <li><a href="#remote-end-event-trigger">remote end event trigger</a><span>, in § 3.6</span>
   <li><a href="#remote-end-subscribe-steps">remote end subscribe steps</a><span>, in § 3.6</span>
   <li><a href="#render-viewport-to-a-canvas">render viewport to a canvas</a><span>, in § 6.3.3.2</span>
   <li><a href="#request-id">request id</a><span>, in § 6.4.3.11</span>
   <li><a href="#command-result-type">result type</a><span>, in § 3.4</span>
   <li><a href="#resume">resume</a><span>, in § 2</span>
   <li><a href="#run-webdriver-bidi-preload-scripts">run WebDriver BiDi preload scripts</a><span>, in § 6.5.2</span>
   <li><a href="#sandbox-map">sandbox map</a><span>, in § 5</span>
   <li><a href="#sandboxproxy">SandboxProxy</a><span>, in § 5.2</span>
   <li><a href="#sandboxwindowproxy">SandboxWindowProxy</a><span>, in § 5.3</span>
   <li><a href="#modules-script">script</a><span>, in § 6.5</span>
   <li><a href="#commands-scriptaddpreloadscript">script.addPreloadScript</a><span>, in § 6.5.4.1</span>
   <li><a href="#commands-scriptcallfunction">script.callFunction</a><span>, in § 6.5.4.3</span>
   <li><a href="#scriptchannel">script.Channel</a><span>, in § 6.5.3.1</span>
   <li><a href="#commands-scriptdisown">script.disown</a><span>, in § 6.5.4.2</span>
   <li><a href="#commands-scriptevaluate">script.evaluate</a><span>, in § 6.5.4.4</span>
   <li><a href="#commands-scriptgetrealms">script.getRealms</a><span>, in § 6.5.4.5</span>
   <li><a href="#scriptlocalvalue">script.LocalValue</a><span>, in § 6.5.3.6</span>
   <li><a href="#scriptprimitiveprotocolvalue">script.PrimitiveProtocolValue</a><span>, in § 6.5.3.9</span>
   <li><a href="#scriptremotereference">script.RemoteReference</a><span>, in § 6.5.3.12</span>
   <li><a href="#commands-scriptremovepreloadscript">script.removePreloadScript</a><span>, in § 6.5.4.6</span>
   <li><a href="#stackframe-script-url">script url</a><span>, in § 6.5.3.18</span>
   <li><a href="#listener-secure-flag">secure flag</a><span>, in § 4</span>
   <li><a href="#send-an-error-response">send an error response</a><span>, in § 4</span>
   <li><a href="#serialize-an-array-like">serialize an Array-like</a><span>, in § 6.5.3.13</span>
   <li><a href="#serialize-an-integer">serialize an integer</a><span>, in § 6.4.3.15</span>
   <li><a href="#serialize-as-a-list">serialize as a list</a><span>, in § 6.5.3.13</span>
   <li><a href="#serialize-as-a-mapping">serialize as a mapping</a><span>, in § 6.5.3.13</span>
   <li><a href="#serialize-as-a-remote-value">serialize as a remote value</a><span>, in § 6.5.3.13</span>
   <li><a href="#serialize-cookie">serialize cookie</a><span>, in § 6.4.3.5</span>
   <li><a href="#serialize-cookie-header">serialize cookie header</a><span>, in § 6.4.3.6</span>
   <li><a href="#serialize-header">serialize header</a><span>, in § 6.4.3.8</span>
   <li><a href="#serialize-primitive-protocol-value">serialize primitive protocol value</a><span>, in § 6.5.3.9</span>
   <li><a href="#serialize-protocol-bytes">serialize protocol bytes</a><span>, in § 6.4.3.4</span>
   <li><a href="#serialize-set-cookie-header">serialize set-cookie header</a><span>, in § 6.4.3.15</span>
   <li><a href="#modules-session">session</a><span>, in § 6.1</span>
   <li><a href="#commands-sessionend">session.end</a><span>, in § 6.1.3.3</span>
   <li><a href="#commands-sessionnew">session.new</a><span>, in § 6.1.3.2</span>
   <li><a href="#commands-sessionstatus">session.status</a><span>, in § 6.1.3.1</span>
   <li><a href="#commands-sessionsubscribe">session.subscribe</a><span>, in § 6.1.3.4</span>
   <li><a href="#commands-sessionunsubscribe">session.unsubscribe</a><span>, in § 6.1.3.5</span>
   <li><a href="#session-websocket-connections">session WebSocket connections</a><span>, in § 4</span>
   <li><a href="#set-internal-ids-if-needed">set internal ids if needed</a><span>, in § 6.5.3.13</span>
   <li><a href="#command-set-of-all-command-names">set of all command names</a><span>, in § 3.4</span>
   <li><a href="#set-of-sessions-for-which-an-event-is-enabled">set of sessions for which an event is enabled</a><span>, in § 3.6</span>
   <li><a href="#stack-frame">stack frame</a><span>, in § 6.5.3.18</span>
   <li><a href="#stack-trace-for-an-exception">stack trace for an exception</a><span>, in § 6.5.3.18</span>
   <li><a href="#start-listening-for-a-websocket-connection">start listening for a WebSocket connection</a><span>, in § 4</span>
   <li><a href="#static-command">static command</a><span>, in § 3.4</span>
   <li><a href="#navigation-status-status">status</a><span>, in § 6.3</span>
   <li><a href="#subscribe-priority">subscribe priority</a><span>, in § 3.6</span>
   <li><a href="#supports-bidi-only-sessions">supports BiDi-only sessions</a><span>, in § 4.1</span>
   <li><a href="#unable-to-close-browser">unable to close browser</a><span>, in § 3.5</span>
   <li><a href="#unescape-url-pattern">unescape URL pattern</a><span>, in § 6.4.3.16</span>
   <li><a href="#unwrapped">unwrapped</a><span>, in § 5.2</span>
   <li><a href="#update-the-event-map">update the event map</a><span>, in § 6.1.1</span>
   <li><a href="#update-the-response">update the response</a><span>, in § 6.4.4.3</span>
   <li><a href="#navigation-status-url">url</a><span>, in § 6.3</span>
   <li><a href="#wait-queue">wait queue</a><span>, in § 2</span>
   <li><a href="#webdriver-bidi-auth-required">WebDriver BiDi auth required</a><span>, in § 6.4.5.1</span>
   <li><a href="#webdriver-bidi-before-request-sent">WebDriver BiDi before request sent</a><span>, in § 6.4.5.2</span>
   <li><a href="#webdriver-bidi-dom-content-loaded">WebDriver BiDi DOM content loaded</a><span>, in § 6.3.4.5</span>
   <li><a href="#webdriver-bidi-download-started">WebDriver BiDi download started</a><span>, in § 6.3.4.7</span>
   <li><a href="#webdriver-bidi-fetch-error">WebDriver BiDi fetch error</a><span>, in § 6.4.5.3</span>
   <li><a href="#webdriver-bidi-fragment-navigated">WebDriver BiDi fragment navigated</a><span>, in § 6.3.4.4</span>
   <li><a href="#webdriver-bidi-load-complete">WebDriver BiDi load complete</a><span>, in § 6.3.4.6</span>
   <li><a href="#webdriver-bidi-navigation-aborted">WebDriver BiDi navigation aborted</a><span>, in § 6.3.4.8</span>
   <li><a href="#webdriver-bidi-navigation-failed">WebDriver BiDi navigation failed</a><span>, in § 6.3.4.9</span>
   <li><a href="#webdriver-bidi-navigation-started">WebDriver BiDi navigation started</a><span>, in § 6.3.4.3</span>
   <li><a href="#webdriver-bidi-response-completed">WebDriver BiDi response completed</a><span>, in § 6.4.5.4</span>
   <li><a href="#webdriver-bidi-response-started">WebDriver BiDi response started</a><span>, in § 6.4.5.5</span>
   <li><a href="#webdriver-bidi-user-prompt-closed">WebDriver BiDi user prompt closed</a><span>, in § 6.3.4.10</span>
   <li><a href="#webdriver-bidi-user-prompt-opened">WebDriver BiDi user prompt opened</a><span>, in § 6.3.4.11</span>
   <li><a href="#webdriver-navigation-status">WebDriver navigation status</a><span>, in § 6.3</span>
   <li><a href="#websocket-connection">WebSocket connection</a><span>, in § 4</span>
   <li><a href="#websocket-connections-not-associated-with-a-session">WebSocket connections not associated with a session</a><span>, in § 4</span>
   <li><a href="#websocket-listener">WebSocket listener</a><span>, in § 4</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[CONSOLE]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="7b1760b0">console</span>
     <li><span class="dfn-paneled" id="8ef06ef9">formatter</span>
     <li><span class="dfn-paneled" id="40a66c6b">formatting specifier</span>
     <li><span class="dfn-paneled" id="09fc63ab">printer</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-PAINT-API-1]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="6b7fd43d">PaintWorkletGlobalScope</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS-VALUES-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="52a5360f">absolute lengths</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSS21]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="2a2f1579">canvas</span>
    </ul>
   <li>
    <a data-link-type="biblio">[CSSOM-VIEW-1]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="5a8644fc">determine the device pixel ratio</span>
     <li><span class="dfn-paneled" id="04e2fe80">get the bounding box</span>
     <li><span class="dfn-paneled" id="62a0057d">visual viewport</span>
    </ul>
   <li>
    <a data-link-type="biblio">[DOM]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="99573380">Attr</span>
     <li><span class="dfn-paneled" id="85394472">Document</span>
     <li><span class="dfn-paneled" id="296f3551">Element</span>
     <li><span class="dfn-paneled" id="9714d594">HTMLCollection</span>
     <li><span class="dfn-paneled" id="96c16e60">Node</span>
     <li><span class="dfn-paneled" id="aa414f4c">NodeList</span>
     <li><span class="dfn-paneled" id="1cd7ff31">ShadowRoot</span>
     <li><span class="dfn-paneled" id="77211728">attribute list</span>
     <li><span class="dfn-paneled" id="92b2d7da">children</span>
     <li><span class="dfn-paneled" id="212ee1f7">data</span>
     <li><span class="dfn-paneled" id="a973e0fe">document</span>
     <li><span class="dfn-paneled" id="73b0c924">mode</span>
     <li><span class="dfn-paneled" id="d462b34f">node</span>
     <li><span class="dfn-paneled" id="5216e1a0">node document</span>
     <li><span class="dfn-paneled" id="2ef14d2e">nodes</span>
     <li><span class="dfn-paneled" id="c62cd7cf">origin</span>
     <li><span class="dfn-paneled" id="4d437809">qualified name</span>
     <li><span class="dfn-paneled" id="ce720392">shadow root</span>
     <li><span class="dfn-paneled" id="347e8fe9">url</span>
     <li><span class="dfn-paneled" id="3b681a11">value</span>
    </ul>
   <li>
    <a data-link-type="biblio">[ECMAScript]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="61266bdb">abrupt completion</span>
     <li><span class="dfn-paneled" id="44dc083c">await</span>
     <li><span class="dfn-paneled" id="f1d11a13">call</span>
     <li><span class="dfn-paneled" id="d4873ea0">completion record</span>
     <li><span class="dfn-paneled" id="134d399c">construct</span>
     <li><span class="dfn-paneled" id="8c337abd">createarrayfromlist</span>
     <li><span class="dfn-paneled" id="34e1a2c9">createarrayiterator</span>
     <li><span class="dfn-paneled" id="bd2650e6">createbuiltinfunction</span>
     <li><span class="dfn-paneled" id="b44c8bda">createlistfromarraylike</span>
     <li><span class="dfn-paneled" id="2b83b63d">createmapiterator</span>
     <li><span class="dfn-paneled" id="ec4bb300">createsetiterator</span>
     <li><span class="dfn-paneled" id="5582c476">current realm record</span>
     <li><span class="dfn-paneled" id="f8d00511">date</span>
     <li><span class="dfn-paneled" id="9d6036ea">date time string format</span>
     <li><span class="dfn-paneled" id="fa3cd201">date.prototype.toisostring</span>
     <li><span class="dfn-paneled" id="7ef0edbd">enumerableownpropertynames</span>
     <li><span class="dfn-paneled" id="47eb8c57">get</span>
     <li><span class="dfn-paneled" id="99403468">getiterator</span>
     <li><span class="dfn-paneled" id="900ce14b">internal slot</span>
     <li><span class="dfn-paneled" id="8f3fa597">isarray</span>
     <li><span class="dfn-paneled" id="1754fd49">iscallable</span>
     <li><span class="dfn-paneled" id="7728ef75">ispromise</span>
     <li><span class="dfn-paneled" id="a60df0fb">isregexp</span>
     <li><span class="dfn-paneled" id="b7d560f9">iteratortolist</span>
     <li><span class="dfn-paneled" id="e0160a7c">map</span>
     <li><span class="dfn-paneled" id="f74eadef">null</span>
     <li><span class="dfn-paneled" id="832894ed">object.fromentries</span>
     <li><span class="dfn-paneled" id="d6e9496a">primitive ecmascript value</span>
     <li><span class="dfn-paneled" id="704f9119">realm</span>
     <li><span class="dfn-paneled" id="821a5611">regexp</span>
     <li><span class="dfn-paneled" id="a4739eca">running execution context</span>
     <li><span class="dfn-paneled" id="75574bed">scriptevaluation</span>
     <li><span class="dfn-paneled" id="a88453e8">set object</span>
     <li><span class="dfn-paneled" id="69f07995">stringtobigint</span>
     <li><span class="dfn-paneled" id="01ffad58">stringtonumber</span>
     <li><span class="dfn-paneled" id="8a0f541d">throw completion</span>
     <li><span class="dfn-paneled" id="bba0f383">time value</span>
     <li><span class="dfn-paneled" id="51f1a168">tostring</span>
     <li><span class="dfn-paneled" id="b7212a68">type</span>
     <li><span class="dfn-paneled" id="ced1a660">undefined</span>
    </ul>
   <li>
    <a data-link-type="biblio">[ENCODING]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="b0fcb8d7">utf-8 decode</span>
     <li><span class="dfn-paneled" id="f256859a">utf-8 decode without bom or fail</span>
     <li><span class="dfn-paneled" id="0303e8e5">utf-8 encode</span>
    </ul>
   <li>
    <a data-link-type="biblio">[FETCH]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="dc126c10">alpn negotiated protocol</span>
     <li><span class="dfn-paneled" id="4a2cfa3a">as a body</span>
     <li><span class="dfn-paneled" id="644cb530">body</span>
     <li><span class="dfn-paneled" id="8e9945a0">body <small>(for request)</small></span>
     <li><span class="dfn-paneled" id="81a76425">body <small>(for response)</small></span>
     <li><span class="dfn-paneled" id="e6defb69">cache state</span>
     <li><span class="dfn-paneled" id="857d5516">client</span>
     <li><span class="dfn-paneled" id="983dc57c">connection end time</span>
     <li><span class="dfn-paneled" id="006a831c">connection start time</span>
     <li><span class="dfn-paneled" id="7ed2c230">connection timing info</span>
     <li><span class="dfn-paneled" id="4d7b724c">cors-preflight request</span>
     <li><span class="dfn-paneled" id="7aab3a36">decoded size</span>
     <li><span class="dfn-paneled" id="88bac656">domain lookup end time</span>
     <li><span class="dfn-paneled" id="4ef92270">domain lookup start time</span>
     <li><span class="dfn-paneled" id="a0fdc68e">encoded size</span>
     <li><span class="dfn-paneled" id="3bed2793">end time</span>
     <li><span class="dfn-paneled" id="33ebb34d">fetch timing info</span>
     <li><span class="dfn-paneled" id="7d9064d0">final connection timing info</span>
     <li><span class="dfn-paneled" id="fd8ed7d1">final network-request start time</span>
     <li><span class="dfn-paneled" id="a4361c75">final network-response start time</span>
     <li><span class="dfn-paneled" id="c9e7c11a">header</span>
     <li><span class="dfn-paneled" id="d85a6c84">header list</span>
     <li><span class="dfn-paneled" id="6ee0eab1">header list <small>(for request)</small></span>
     <li><span class="dfn-paneled" id="f7b00a8b">header list <small>(for response)</small></span>
     <li><span class="dfn-paneled" id="7b0b4fa0">initiator type</span>
     <li><span class="dfn-paneled" id="7acd5143">length</span>
     <li><span class="dfn-paneled" id="50b05fad">method</span>
     <li><span class="dfn-paneled" id="eb1b1af3">network error</span>
     <li><span class="dfn-paneled" id="3c61d9cd">post-redirect start time</span>
     <li><span class="dfn-paneled" id="8c3deeef">redirect count</span>
     <li><span class="dfn-paneled" id="a8ffe756">redirect end time</span>
     <li><span class="dfn-paneled" id="a4341052">redirect start time</span>
     <li><span class="dfn-paneled" id="55213b5b">request</span>
     <li><span class="dfn-paneled" id="ee7bba09">response</span>
     <li><span class="dfn-paneled" id="366a7ed3">response body info</span>
     <li><span class="dfn-paneled" id="21347267">secure connection start time</span>
     <li><span class="dfn-paneled" id="b42e14e0">start time</span>
     <li><span class="dfn-paneled" id="a1d47575">status</span>
     <li><span class="dfn-paneled" id="24afcdf2">status message</span>
     <li><span class="dfn-paneled" id="dc1cd39b">url <small>(for request)</small></span>
     <li><span class="dfn-paneled" id="3268a8eb">url <small>(for response)</small></span>
     <li><span class="dfn-paneled" id="1ab127d6">window</span>
    </ul>
   <li>
    <a data-link-type="biblio">[GEOMETRY]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="927f9c6b">height dimension</span>
     <li><span class="dfn-paneled" id="759027a7">width dimension</span>
     <li><span class="dfn-paneled" id="f20eafbd">x coordinate</span>
     <li><span class="dfn-paneled" id="f45987c0">y coordinate</span>
    </ul>
   <li>
    <a data-link-type="biblio">[GEOMETRY-1]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="fdd2dd4e">DOMRectReadOnly</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HR-TIME-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="b281322d">get time origin timestamp</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="b4ade816">2d</span>
     <li><span class="dfn-paneled" id="73daca45">2d context creation algorithm</span>
     <li><span class="dfn-paneled" id="b8308563">DedicatedWorkerGlobalScope</span>
     <li><span class="dfn-paneled" id="5b13c537">HTMLCanvasElement</span>
     <li><span class="dfn-paneled" id="165b73c9">SharedWorkerGlobalScope</span>
     <li><span class="dfn-paneled" id="5d7209e9">Window</span>
     <li><span class="dfn-paneled" id="94039a0c">WindowProxy</span>
     <li><span class="dfn-paneled" id="83c59a3a">WorkerGlobalScope</span>
     <li><span class="dfn-paneled" id="0c9b0d3c">WorkletGlobalScope</span>
     <li><span class="dfn-paneled" id="05d21d03">a browsing context is discarded</span>
     <li><span class="dfn-paneled" id="36d15a6d">activation notification</span>
     <li><span class="dfn-paneled" id="55a6b830">active browsing context</span>
     <li><span class="dfn-paneled" id="26513a72">active document <small>(for browsing context)</small></span>
     <li><span class="dfn-paneled" id="35972864">active document <small>(for navigable)</small></span>
     <li><span class="dfn-paneled" id="97c347af">active window</span>
     <li><span class="dfn-paneled" id="235ddea5">alert</span>
     <li><span class="dfn-paneled" id="1b5b1c0c">api base url</span>
     <li><span class="dfn-paneled" id="3349d69f">associated document</span>
     <li><span class="dfn-paneled" id="3b0ee7a3">base url</span>
     <li><span class="dfn-paneled" id="0d0390b4">browsing context</span>
     <li><span class="dfn-paneled" id="3b2ff63e">browsing context <small>(for Document)</small></span>
     <li><span class="dfn-paneled" id="6d88ab2e">browsing context <small>(for Window)</small></span>
     <li><span class="dfn-paneled" id="f23dc013">child navigable</span>
     <li><span class="dfn-paneled" id="b6a1ae3f">clean up after running script</span>
     <li><span class="dfn-paneled" id="b273f87a">close</span>
     <li><span class="dfn-paneled" id="3752e9b0">confirm</span>
     <li><span class="dfn-paneled" id="9d2630e3">context mode</span>
     <li><span class="dfn-paneled" id="860a2f31">create a classic script</span>
     <li><span class="dfn-paneled" id="4a23b63a">create a new browsing context</span>
     <li><span class="dfn-paneled" id="12b8dfc0">current settings object</span>
     <li><span class="dfn-paneled" id="180e7028">default classic script fetch options</span>
     <li><span class="dfn-paneled" id="3e12e042">environment settings object</span>
     <li><span class="dfn-paneled" id="10ae7dd2">environment settings object's realm</span>
     <li><span class="dfn-paneled" id="f5265332">execution ready flag</span>
     <li><span class="dfn-paneled" id="6b68adb6">focused area of the document</span>
     <li><span class="dfn-paneled" id="fe07e8b2">focusing steps</span>
     <li><span class="dfn-paneled" id="8a30477b">global object <small>(for environment settings object)</small></span>
     <li><span class="dfn-paneled" id="168f1b6e">global object <small>(for realm)</small></span>
     <li><span class="dfn-paneled" id="d6817f23">handled</span>
     <li><span class="dfn-paneled" id="45e3552a">height</span>
     <li><span class="dfn-paneled" id="f449f7f7">hidden</span>
     <li><span class="dfn-paneled" id="bbdbe8e2">history handling behavior</span>
     <li><span class="dfn-paneled" id="a72449dd">in parallel</span>
     <li><span class="dfn-paneled" id="1cd8aace">navigables</span>
     <li><span class="dfn-paneled" id="2594e562">navigate</span>
     <li><span class="dfn-paneled" id="6454d3fd">navigation id</span>
     <li><span class="dfn-paneled" id="43ac8374">origin</span>
     <li><span class="dfn-paneled" id="dc248371">owner set</span>
     <li><span class="dfn-paneled" id="1bba3db7">parent</span>
     <li><span class="dfn-paneled" id="c2359c09">prepare to run script</span>
     <li><span class="dfn-paneled" id="17555c59">prompt</span>
     <li><span class="dfn-paneled" id="5bec656b">prompt to unload</span>
     <li><span class="dfn-paneled" id="ce15d5dc">realm execution context</span>
     <li><span class="dfn-paneled" id="e99bd18e">relevant global object</span>
     <li><span class="dfn-paneled" id="5991ccfb">relevant realm</span>
     <li><span class="dfn-paneled" id="4a0606cc">remove a browsing context</span>
     <li><span class="dfn-paneled" id="d908b2b2">report an error</span>
     <li><span class="dfn-paneled" id="04e154c5">report the exception</span>
     <li><span class="dfn-paneled" id="e3288657">responsible event loop</span>
     <li><span class="dfn-paneled" id="385fbb31">run the animation frame callbacks</span>
     <li><span class="dfn-paneled" id="94b4d250">same origin domain</span>
     <li><span class="dfn-paneled" id="dae0bfde">serialization of an origin</span>
     <li><span class="dfn-paneled" id="48093925">session history</span>
     <li><span class="dfn-paneled" id="7ecc7f3d">set up a window environment settings object</span>
     <li><span class="dfn-paneled" id="bbb5f6df">set up a worker environment settings object</span>
     <li><span class="dfn-paneled" id="1cc25024">set up a worklet environment settings object</span>
     <li><span class="dfn-paneled" id="f1eccc95">settings object</span>
     <li><span class="dfn-paneled" id="995692ee">shared worker</span>
     <li><span class="dfn-paneled" id="124a994b">system focus</span>
     <li><span class="dfn-paneled" id="ecf857b3">system visibility state</span>
     <li><span class="dfn-paneled" id="a41b1317">terminate a worker</span>
     <li><span class="dfn-paneled" id="e9c58cef">time origin</span>
     <li><span class="dfn-paneled" id="ae2a6342">top-level browsing context</span>
     <li><span class="dfn-paneled" id="d0c1b934">traversable navigable</span>
     <li><span class="dfn-paneled" id="4411082c">unloading document cleanup steps</span>
     <li><span class="dfn-paneled" id="f245d73f">visible</span>
     <li><span class="dfn-paneled" id="5474e1ba">width</span>
     <li><span class="dfn-paneled" id="f7061546">window open steps</span>
     <li><span class="dfn-paneled" id="aaaa2760">worker event loop</span>
     <li><span class="dfn-paneled" id="18e19756">worklet global scopes</span>
    </ul>
   <li>
    <a data-link-type="biblio">[INFRA]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="53275e46">append <small>(for list)</small></span>
     <li><span class="dfn-paneled" id="a3b18719">append <small>(for set)</small></span>
     <li><span class="dfn-paneled" id="f43d6978">ascii alphanumeric</span>
     <li><span class="dfn-paneled" id="3b38c2fe">ascii digit</span>
     <li><span class="dfn-paneled" id="6f2dfa22">ascii lowercase</span>
     <li><span class="dfn-paneled" id="77b4c09a">assert</span>
     <li><span class="dfn-paneled" id="3de9e659">byte sequence</span>
     <li><span class="dfn-paneled" id="970896d2">byte-case-insensitive</span>
     <li><span class="dfn-paneled" id="7838e1c1">byte-lowercase</span>
     <li><span class="dfn-paneled" id="027e3e49">clone <small>(for list)</small></span>
     <li><span class="dfn-paneled" id="ab3919d2">clone <small>(for map)</small></span>
     <li><span class="dfn-paneled" id="915aff5e">code point</span>
     <li><span class="dfn-paneled" id="951b74c1">code unit substring</span>
     <li><span class="dfn-paneled" id="4a3bf5fb">concatenate</span>
     <li><span class="dfn-paneled" id="ae8def21">contain <small>(for list)</small></span>
     <li><span class="dfn-paneled" id="a326add7">contain <small>(for map)</small></span>
     <li><span class="dfn-paneled" id="f937b7b6">continue</span>
     <li><span class="dfn-paneled" id="03afaf9c">empty</span>
     <li><span class="dfn-paneled" id="16d07e10">for each</span>
     <li><span class="dfn-paneled" id="73e75483">forgiving-base64 decode</span>
     <li><span class="dfn-paneled" id="b012ccb2">forgiving-base64 encode</span>
     <li><span class="dfn-paneled" id="32dd7834">get the values</span>
     <li><span class="dfn-paneled" id="860300d4">implementation-defined</span>
     <li><span class="dfn-paneled" id="c88f3887">item</span>
     <li><span class="dfn-paneled" id="0fa357c3">length</span>
     <li><span class="dfn-paneled" id="649608b9">list</span>
     <li><span class="dfn-paneled" id="3fca5a9e">map</span>
     <li><span class="dfn-paneled" id="8e8decb4">parse json into infra values</span>
     <li><span class="dfn-paneled" id="99c988d6">remove <small>(for list)</small></span>
     <li><span class="dfn-paneled" id="7d4424b2">remove <small>(for map)</small></span>
     <li><span class="dfn-paneled" id="762869d3">scalar value string</span>
     <li><span class="dfn-paneled" id="4c07280e">serialize an infra value to json bytes</span>
     <li><span class="dfn-paneled" id="15e48c39">set</span>
     <li><span class="dfn-paneled" id="0204d188">size <small>(for list)</small></span>
     <li><span class="dfn-paneled" id="653d0848">size <small>(for map)</small></span>
     <li><span class="dfn-paneled" id="fe28f7a2">sort in ascending order</span>
     <li><span class="dfn-paneled" id="54627f47">starts with</span>
     <li><span class="dfn-paneled" id="984221ca">struct</span>
     <li><span class="dfn-paneled" id="0e8de730">tuple</span>
     <li><span class="dfn-paneled" id="bb049306">value</span>
     <li><span class="dfn-paneled" id="12d6b9a8">values</span>
    </ul>
   <li>
    <a data-link-type="biblio">[MEDIAQUERIES-5]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="c93b716b">media type</span>
    </ul>
   <li>
    <a data-link-type="biblio">[MIMESNIFF]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="4e30844a">computed mime type</span>
     <li><span class="dfn-paneled" id="7c195f8b">essence</span>
    </ul>
   <li>
    <a data-link-type="biblio">[RESOURCE-TIMING-2]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="188c72fd">convert fetch timestamp</span>
    </ul>
   <li>
    <a data-link-type="biblio">[RFC4648]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="6d9bf486">base64 encode</span>
    </ul>
   <li>
    <a data-link-type="biblio">[RFC6455]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="7162eb1a">%x1 denotes a text frame</span>
     <li><span class="dfn-paneled" id="1065054c">a websocket message has been received</span>
     <li><span class="dfn-paneled" id="1e855c18">establishes a websocket connection</span>
     <li><span class="dfn-paneled" id="a0f3a43b">fail the websocket connection</span>
     <li><span class="dfn-paneled" id="2499ae2a">handling errors in utf-8-encoded data</span>
     <li><span class="dfn-paneled" id="e4c5f264">reading the client's opening handshake</span>
     <li><span class="dfn-paneled" id="b7ad9913">send a websocket message</span>
     <li><span class="dfn-paneled" id="31afd3ea">server-side requirements</span>
     <li><span class="dfn-paneled" id="69f831e0">start the websocket closing handshake</span>
     <li><span class="dfn-paneled" id="5644bb38">status codes</span>
     <li><span class="dfn-paneled" id="adc2b755">the websocket closing handshake is started</span>
     <li><span class="dfn-paneled" id="36f1b87f">the websocket connection is closed</span>
     <li><span class="dfn-paneled" id="7fdc1cbb">websocket uri</span>
    </ul>
   <li>
    <a data-link-type="biblio">[SERVICE-WORKERS]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="86d2a717">ServiceWorkerGlobalScope</span>
    </ul>
   <li>
    <a data-link-type="biblio">[URL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="12553145">default port</span>
     <li><span class="dfn-paneled" id="b85ee3be">host</span>
     <li><span class="dfn-paneled" id="60d30068">is special</span>
     <li><span class="dfn-paneled" id="c0868016">path</span>
     <li><span class="dfn-paneled" id="852ada56">port</span>
     <li><span class="dfn-paneled" id="3ab2ec8b">query</span>
     <li><span class="dfn-paneled" id="3a711be7">scheme</span>
     <li><span class="dfn-paneled" id="dcffbccd">url</span>
     <li><span class="dfn-paneled" id="ca3ca4ae">url parser</span>
     <li><span class="dfn-paneled" id="40a40eb4">url path serializer</span>
     <li><span class="dfn-paneled" id="5442ea33">url serializer</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBAUDIO]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="8fe058df">AudioWorkletGlobalScope</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBDRIVER]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="36828a3b">actions options</span>
     <li><span class="dfn-paneled" id="49bb0560">active sessions</span>
     <li><span class="dfn-paneled" id="3555dec9">additional capability deserialization algorithm</span>
     <li><span class="dfn-paneled" id="189cc7e1">additional webdriver capability</span>
     <li><span class="dfn-paneled" id="36acc234">capability name</span>
     <li><span class="dfn-paneled" id="14549aa9">create a session</span>
     <li><span class="dfn-paneled" id="136bda97">dispatch actions</span>
     <li><span class="dfn-paneled" id="94219729">dispatch tick actions</span>
     <li><span class="dfn-paneled" id="809cf459">encode a canvas as base64</span>
     <li><span class="dfn-paneled" id="ee843963">endpoint node</span>
     <li><span class="dfn-paneled" id="a4c28706">error</span>
     <li><span class="dfn-paneled" id="c8ff8493">error code</span>
     <li><span class="dfn-paneled" id="a6b7422e">extract an action sequence</span>
     <li><span class="dfn-paneled" id="01bb51cf">get a node</span>
     <li><span class="dfn-paneled" id="3b685aa8">get element origin</span>
     <li><span class="dfn-paneled" id="80d3509a">get or create a node reference</span>
     <li><span class="dfn-paneled" id="9ca7d4a1">get the input state</span>
     <li><span class="dfn-paneled" id="814d830a">getting a property</span>
     <li><span class="dfn-paneled" id="87bc2e00">http session</span>
     <li><span class="dfn-paneled" id="a4cd9a97">input cancel list</span>
     <li><span class="dfn-paneled" id="93f9e904">intermediary node</span>
     <li><span class="dfn-paneled" id="8da4d1e3">invalid argument</span>
     <li><span class="dfn-paneled" id="900d0fcf">invalid session id</span>
     <li><span class="dfn-paneled" id="47ddb771">is element origin</span>
     <li><span class="dfn-paneled" id="9a707b42">local end</span>
     <li><span class="dfn-paneled" id="a192e236">matched capability serialization algorithm</span>
     <li><span class="dfn-paneled" id="3d4e20bd">no such alert</span>
     <li><span class="dfn-paneled" id="38951aff">no such element</span>
     <li><span class="dfn-paneled" id="0d868320">no such frame</span>
     <li><span class="dfn-paneled" id="b88752f4">parse a page range</span>
     <li><span class="dfn-paneled" id="bfaaa9a6">process capabilities</span>
     <li><span class="dfn-paneled" id="a49a724d">readiness state</span>
     <li><span class="dfn-paneled" id="35d404ee">remote end</span>
     <li><span class="dfn-paneled" id="82c23298">remote end steps</span>
     <li><span class="dfn-paneled" id="4cca2ed0">reset the input state</span>
     <li><span class="dfn-paneled" id="d4bcfb3f">scroll into view</span>
     <li><span class="dfn-paneled" id="79d221ec">session</span>
     <li><span class="dfn-paneled" id="4fc3ddf9">session id</span>
     <li><span class="dfn-paneled" id="4c001258">session not created</span>
     <li><span class="dfn-paneled" id="cb9acc83">set a property</span>
     <li><span class="dfn-paneled" id="4be6272b">success</span>
     <li><span class="dfn-paneled" id="e7c89135">try</span>
     <li><span class="dfn-paneled" id="7aa9c8e0">trying</span>
     <li><span class="dfn-paneled" id="914911f0">unable to capture screen</span>
     <li><span class="dfn-paneled" id="8b8836ef">unknown command</span>
     <li><span class="dfn-paneled" id="6945cc54">unknown error</span>
     <li><span class="dfn-paneled" id="a869e769">unsupported operation</span>
     <li><span class="dfn-paneled" id="a795f739">webdriver new session algorithm</span>
     <li><span class="dfn-paneled" id="db8fb765">webdriver-active flag</span>
     <li><span class="dfn-paneled" id="660a1a43">window handle</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBIDL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="82ca3efc">TypeError</span>
     <li><span class="dfn-paneled" id="6728fdee">platform object</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-console">[CONSOLE]
   <dd>Dominic Farolino; Robert Kowalski; Terin Stock. <a href="https://console.spec.whatwg.org/"><cite>Console Standard</cite></a>. Living Standard. URL: <a href="https://console.spec.whatwg.org/">https://console.spec.whatwg.org/</a>
   <dt id="biblio-css-paint-api-1">[CSS-PAINT-API-1]
   <dd>Ian Kilpatrick; Dean Jackson. <a href="https://drafts.css-houdini.org/css-paint-api-1/"><cite>CSS Painting API Level 1</cite></a>. URL: <a href="https://drafts.css-houdini.org/css-paint-api-1/">https://drafts.css-houdini.org/css-paint-api-1/</a>
   <dt id="biblio-css21">[CSS21]
   <dd>Bert Bos; et al. <a href="https://drafts.csswg.org/css2/"><cite>Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification</cite></a>. URL: <a href="https://drafts.csswg.org/css2/">https://drafts.csswg.org/css2/</a>
   <dt id="biblio-cssom-view-1">[CSSOM-VIEW-1]
   <dd>Simon Pieters. <a href="https://drafts.csswg.org/cssom-view/"><cite>CSSOM View Module</cite></a>. URL: <a href="https://drafts.csswg.org/cssom-view/">https://drafts.csswg.org/cssom-view/</a>
   <dt id="biblio-dom">[DOM]
   <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
   <dt id="biblio-ecmascript">[ECMAScript]
   <dd><a href="https://tc39.es/ecma262/multipage/"><cite>ECMAScript Language Specification</cite></a>. URL: <a href="https://tc39.es/ecma262/multipage/">https://tc39.es/ecma262/multipage/</a>
   <dt id="biblio-encoding">[ENCODING]
   <dd>Anne van Kesteren. <a href="https://encoding.spec.whatwg.org/"><cite>Encoding Standard</cite></a>. Living Standard. URL: <a href="https://encoding.spec.whatwg.org/">https://encoding.spec.whatwg.org/</a>
   <dt id="biblio-fetch">[FETCH]
   <dd>Anne van Kesteren. <a href="https://fetch.spec.whatwg.org/"><cite>Fetch Standard</cite></a>. Living Standard. URL: <a href="https://fetch.spec.whatwg.org/">https://fetch.spec.whatwg.org/</a>
   <dt id="biblio-geometry-1">[GEOMETRY-1]
   <dd>Simon Pieters; Chris Harrelson. <a href="https://drafts.fxtf.org/geometry/"><cite>Geometry Interfaces Module Level 1</cite></a>. URL: <a href="https://drafts.fxtf.org/geometry/">https://drafts.fxtf.org/geometry/</a>
   <dt id="biblio-hr-time-3">[HR-TIME-3]
   <dd>Yoav Weiss. <a href="https://w3c.github.io/hr-time/"><cite>High Resolution Time</cite></a>. URL: <a href="https://w3c.github.io/hr-time/">https://w3c.github.io/hr-time/</a>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-infra">[INFRA]
   <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Living Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
   <dt id="biblio-mediaqueries-5">[MEDIAQUERIES-5]
   <dd>Dean Jackson; et al. <a href="https://drafts.csswg.org/mediaqueries-5/"><cite>Media Queries Level 5</cite></a>. URL: <a href="https://drafts.csswg.org/mediaqueries-5/">https://drafts.csswg.org/mediaqueries-5/</a>
   <dt id="biblio-mimesniff">[MIMESNIFF]
   <dd>Gordon P. Hemsley. <a href="https://mimesniff.spec.whatwg.org/"><cite>MIME Sniffing Standard</cite></a>. Living Standard. URL: <a href="https://mimesniff.spec.whatwg.org/">https://mimesniff.spec.whatwg.org/</a>
   <dt id="biblio-resource-timing-2">[RESOURCE-TIMING-2]
   <dd>Yoav Weiss; Noam Rosenthal. <a href="https://w3c.github.io/resource-timing/"><cite>Resource Timing</cite></a>. URL: <a href="https://w3c.github.io/resource-timing/">https://w3c.github.io/resource-timing/</a>
   <dt id="biblio-rfc4122">[RFC4122]
   <dd>P. Leach; M. Mealling; R. Salz. <a href="https://www.rfc-editor.org/rfc/rfc4122"><cite>A Universally Unique IDentifier (UUID) URN Namespace</cite></a>. July 2005. Proposed Standard. URL: <a href="https://www.rfc-editor.org/rfc/rfc4122">https://www.rfc-editor.org/rfc/rfc4122</a>
   <dt id="biblio-rfc4648">[RFC4648]
   <dd>S. Josefsson. <a href="https://www.rfc-editor.org/rfc/rfc4648"><cite>The Base16, Base32, and Base64 Data Encodings</cite></a>. October 2006. Proposed Standard. URL: <a href="https://www.rfc-editor.org/rfc/rfc4648">https://www.rfc-editor.org/rfc/rfc4648</a>
   <dt id="biblio-rfc6455">[RFC6455]
   <dd>I. Fette; A. Melnikov. <a href="https://www.rfc-editor.org/rfc/rfc6455"><cite>The WebSocket Protocol</cite></a>. December 2011. Proposed Standard. URL: <a href="https://www.rfc-editor.org/rfc/rfc6455">https://www.rfc-editor.org/rfc/rfc6455</a>
   <dt id="biblio-rfc8610">[RFC8610]
   <dd>H. Birkholz; C. Vigano; C. Bormann. <a href="https://www.rfc-editor.org/rfc/rfc8610"><cite>Concise Data Definition Language (CDDL): A Notational Convention to Express Concise Binary Object Representation (CBOR) and JSON Data Structures</cite></a>. June 2019. Proposed Standard. URL: <a href="https://www.rfc-editor.org/rfc/rfc8610">https://www.rfc-editor.org/rfc/rfc8610</a>
   <dt id="biblio-rfc9110">[RFC9110]
   <dd>R. Fielding, Ed.; M. Nottingham, Ed.; J. Reschke, Ed.. <a href="https://www.rfc-editor.org/rfc/rfc9110"><cite>HTTP Semantics</cite></a>. June 2022. Internet Standard. URL: <a href="https://www.rfc-editor.org/rfc/rfc9110">https://www.rfc-editor.org/rfc/rfc9110</a>
   <dt id="biblio-service-workers">[SERVICE-WORKERS]
   <dd>Jake Archibald; Marijn Kruisselbrink. <a href="https://w3c.github.io/ServiceWorker/"><cite>Service Workers</cite></a>. URL: <a href="https://w3c.github.io/ServiceWorker/">https://w3c.github.io/ServiceWorker/</a>
   <dt id="biblio-url">[URL]
   <dd>Anne van Kesteren. <a href="https://url.spec.whatwg.org/"><cite>URL Standard</cite></a>. Living Standard. URL: <a href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a>
   <dt id="biblio-webaudio">[WEBAUDIO]
   <dd>Paul Adenot; Hongchan Choi. <a href="https://webaudio.github.io/web-audio-api/"><cite>Web Audio API</cite></a>. URL: <a href="https://webaudio.github.io/web-audio-api/">https://webaudio.github.io/web-audio-api/</a>
   <dt id="biblio-webdriver">[WEBDRIVER]
   <dd>Simon Stewart; David Burns. <a href="https://w3c.github.io/webdriver/"><cite>WebDriver</cite></a>. URL: <a href="https://w3c.github.io/webdriver/">https://w3c.github.io/webdriver/</a>
   <dt id="biblio-webidl">[WEBIDL]
   <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Living Standard. URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-cookies">[COOKIES]
   <dd>A. Barth. <a href="https://httpwg.org/specs/rfc6265.html"><cite>HTTP State Management Mechanism</cite></a>. April 2011. Proposed Standard. URL: <a href="https://httpwg.org/specs/rfc6265.html">https://httpwg.org/specs/rfc6265.html</a>
   <dt id="biblio-css-values-3">[CSS-VALUES-3]
   <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://drafts.csswg.org/css-values-3/"><cite>CSS Values and Units Module Level 3</cite></a>. URL: <a href="https://drafts.csswg.org/css-values-3/">https://drafts.csswg.org/css-values-3/</a>
   <dt id="biblio-http11">[HTTP11]
   <dd>R. Fielding, Ed.; M. Nottingham, Ed.; J. Reschke, Ed.. <a href="https://www.rfc-editor.org/rfc/rfc9112"><cite>HTTP/1.1</cite></a>. June 2022. Internet Standard. URL: <a href="https://www.rfc-editor.org/rfc/rfc9112">https://www.rfc-editor.org/rfc/rfc9112</a>
   <dt id="biblio-json-rpc">[JSON-RPC]
   <dd>JSON-RPC Working Group. <a href="https://www.jsonrpc.org/specification"><cite>JSON-RPC 2.0 Specification</cite></a>. 4 January 2013. URL: <a href="https://www.jsonrpc.org/specification">https://www.jsonrpc.org/specification</a>
   <dt id="biblio-same-site-cookies">[SAME-SITE-COOKIES]
   <dd>Mike West; Mark Goodwin. <a href="https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-cookie-same-site"><cite>Same-Site Cookies</cite></a>. URL: <a href="https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-cookie-same-site">https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-cookie-same-site</a>
   <dt id="biblio-urlpattern">[URLPattern]
   <dd><a href="https://wicg.github.io/urlpattern/"><cite>URLPattern API</cite></a>. Draft Community Group Report. URL: <a href="https://wicg.github.io/urlpattern/">https://wicg.github.io/urlpattern/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue"> Surely there’s a better mechanism for doing this "wait for an event" thing. <a class="issue-return" href="#issue-555cee0f" title="Jump to section">↵</a></div>
   <div class="issue"> Should we have something like microtasks to ensure this runs
 before any other tasks on the event loop? <a class="issue-return" href="#issue-540e1580" title="Jump to section">↵</a></div>
   <div class="issue"> Should this be an appendix? <a class="issue-return" href="#issue-40ad1db0" title="Jump to section">↵</a></div>
   <div class="issue"> Do we support > 1 connection for a single session? <a class="issue-return" href="#issue-0dc5e7b6" title="Jump to section">↵</a></div>
   <div class="issue"> Nothing seems to define what <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc6455#section-7.4">status code</a> is used for UTF-8 errors. <a class="issue-return" href="#issue-449f8f30" title="Jump to section">↵</a></div>
   <div class="issue"> Need to hook in to the session ending to allow the UA to close
the listener if it wants. <a class="issue-return" href="#issue-9f7aff26" title="Jump to section">↵</a></div>
   <div class="issue"> Define creation of sandbox realm. This is going to return a <code class="idl"><a data-link-type="idl" href="#sandboxwindowproxy">SandboxWindowProxy</a></code> wrapping <var>window</var>. <a class="issue-return" href="#issue-cd353b2b" title="Jump to section">↵</a></div>
   <div class="issue"> Define in detail how <code class="idl"><a data-link-type="idl" href="#sandboxproxy">SandboxProxy</a></code> works <a class="issue-return" href="#issue-de7468b6" title="Jump to section">↵</a></div>
   <div class="issue"> Define how this works. <a class="issue-return" href="#issue-5dc87d67" title="Jump to section">↵</a></div>
   <div class="issue"> this is rather imprecise language, but hopefully it’s clear that the
 intent is that we send the response to the command before starting shutdown
 of the connections. <a class="issue-return" href="#issue-c10fe58d" title="Jump to section">↵</a></div>
   <div class="issue"> This needs to be generalized to work with realms too <a class="issue-return" href="#issue-77ae0f57" title="Jump to section">↵</a></div>
   <div class="issue"> This needs to be generalised to work with realms too <a class="issue-return" href="#issue-851a021c" title="Jump to section">↵</a></div>
   <div class="issue"> property specify how the <var>ignore cache</var> flag works. This needs to
 consider whether only the first load of a resource bypasses the cache
 (i.e. whether this is like initially clearing the cache and proceeding like
 normal), or whether resources not directly loaded by the HTML parser
 (e.g. loads initiated by scripts or stylesheets) also bypass the cache. <a class="issue-return" href="#issue-40db6a3c" title="Jump to section">↵</a></div>
   <div class="issue"> Are we surfacing enough information about what failed and why with
 an error here? What error code do we want? Is there going to be a problem
 where local ends parse the implementation-defined strings to figure out
 what actually went wrong? <a class="issue-return" href="#issue-ceba1469" title="Jump to section">↵</a></div>
   <div class="issue"> This ought to be integrated into the update rendering algorithm
 in some more explicit way. <a class="issue-return" href="#issue-b2b83ca0" title="Jump to section">↵</a></div>
   <div class="issue"> There is an open discussion about the behavior
when closing the last <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context">top-level browsing context</a>. We could expect to close
the browser, close the session or leave this up to the implementation. <a href="https://github.com/w3c/webdriver-bidi/issues/170">[Issue #w3c/webdriver-bidi#170]</a> <a class="issue-return" href="#issue-bd9840d8" title="Jump to section">↵</a></div>
   <div class="issue"> This ought to be integrated into the update rendering algorithm
 in some more explicit way. <a class="issue-return" href="#issue-b2b83ca0①" title="Jump to section">↵</a></div>
   <div class="issue"> the way this hooks into HTML feels very fragile. See https://github.com/whatwg/html/issues/6194 <a class="issue-return" href="#issue-7a4ace46" title="Jump to section">↵</a></div>
   <div class="issue"> It’s unclear if we ought to only fire this event for browsing
contexts that have active documents; navigation can also cause contexts to
become inaccessible but not yet get discarded because bfcache. <a class="issue-return" href="#issue-4e122e13" title="Jump to section">↵</a></div>
   <div class="issue"> Should we include parameters other than realm? <a class="issue-return" href="#issue-f2aa8157" title="Jump to section">↵</a></div>
   <div class="issue"> as in Fetch it’s unclear if this is the right way to handle multiple
 headers, parsing issues, etc. <a class="issue-return" href="#issue-fb11fbae" title="Jump to section">↵</a></div>
   <div class="issue"> Consider including the `sharedId` of the document node that initiated the
request in addition to the context. <a class="issue-return" href="#issue-f8347230" title="Jump to section">↵</a></div>
   <div class="issue"> consider a "<code>request already sent</code>" error. <a class="issue-return" href="#issue-674c4ab4" title="Jump to section">↵</a></div>
   <div class="issue"> This doesn’t have a way to cancel the auth. <a class="issue-return" href="#issue-2a7f19c6" title="Jump to section">↵</a></div>
   <div class="issue"> Allow setting the precise kind of error <a href="https://github.com/w3c/webdriver-bidi/issues/508">[Issue #508]</a> <a class="issue-return" href="#issue-6015124b" title="Jump to section">↵</a></div>
   <div class="issue"> This has the wrong error code <a class="issue-return" href="#issue-89e6b783" title="Jump to section">↵</a></div>
   <div class="issue"> This doesn’t handle lone surrogates <a class="issue-return" href="#issue-d33a79cf" title="Jump to section">↵</a></div>
   <div class="issue"> handle "stale object reference" case. <a class="issue-return" href="#issue-718fbe53" title="Jump to section">↵</a></div>
   <div class="issue"> Add WASM types? <a class="issue-return" href="#issue-14921645" title="Jump to section">↵</a></div>
   <div class="issue"> Should WindowProxy get attributes in a similar style to Node? <a class="issue-return" href="#issue-ace5d7fc" title="Jump to section">↵</a></div>
   <div class="issue"> Describe `script.IteratorRemoteValue` serialization. <a class="issue-return" href="#issue-4eaad8c4" title="Jump to section">↵</a></div>
   <div class="issue"> Describe `script.GeneratorRemoteValue` serialization. <a class="issue-return" href="#issue-ed5aeb4f" title="Jump to section">↵</a></div>
   <div class="issue"> Describe `script.ProxyRemoteValue` serialization. <a class="issue-return" href="#issue-d0f1d4bd" title="Jump to section">↵</a></div>
   <div class="issue"> handle String / Number / etc. wrapper objects specially? <a class="issue-return" href="#issue-daee5863" title="Jump to section">↵</a></div>
   <div class="issue"> reconsider mirror objects' lifecycle. <a class="issue-return" href="#issue-c8a585bd" title="Jump to section">↵</a></div>
   <div class="issue"> <var>children</var> and child nodes are different things. Either <code>childNodeCount</code> should
reference to <code>childNodes</code>, or it should be renamed to <code>childrenCount</code>. <a class="issue-return" href="#issue-4a5a93fc" title="Jump to section">↵</a></div>
   <div class="issue"> This has the wrong error code <a class="issue-return" href="#issue-89e6b783①" title="Jump to section">↵</a></div>
   <div class="issue"> TODO: Add timeout argument as described in the script.evaluate. <a class="issue-return" href="#issue-6eade172" title="Jump to section">↵</a></div>
   <div class="issue"> Extend this to also allow realm parents e.g. for nested workers? Or get all ancestor workers. <a class="issue-return" href="#issue-ac9113ee" title="Jump to section">↵</a></div>
   <div class="issue"> We might want to have a more sophisticated filter system than just a
       literal match. <a class="issue-return" href="#issue-b6525c5d" title="Jump to section">↵</a></div>
   <div class="issue"> Should the order here be better defined? <a class="issue-return" href="#issue-74a40be3" title="Jump to section">↵</a></div>
   <div class="issue"> Do we want to key this on browsing context or top-level browsing context?
The difference is in what happens if an event occurs in a frame and that frame
is then navigated before the local end subscribes to log events for the top
level context. <a class="issue-return" href="#issue-d20b5797" title="Jump to section">↵</a></div>
   <div class="issue"> Lots more things require logging. CDP has LogEntryAdded types xml,
javascript, network, storage, appcache, rendering, security, deprecation,
worker, violation, intervention, recommendation, other. These are in addition to
the js exception and console API types that are represented by different methods. <a class="issue-return" href="#issue-d863e230" title="Jump to section">↵</a></div>
   <div class="issue"> Allow implementation-defined log types <a class="issue-return" href="#issue-365f0ed7" title="Jump to section">↵</a></div>
   <div class="issue"> The actual patch might be better to split the algorithm into an outer algorithm that is
called by external callers and an inner algorithm that’s used for recursive calls. That’s quite hard
to express as a patch to the specification since it requires changing multiple parts. <a class="issue-return" href="#issue-b664c1e3" title="Jump to section">↵</a></div>
  </div>
<script>/* Boilerplate: script-dfn-panel */
"use strict";
{
    const dfnsJson = window.dfnsJson || {};

    function genDfnPanel({dfnID, url, dfnText, refSections, external}) {
        return mk.aside({
            class: "dfn-panel",
            id: `infopanel-for-${dfnID}`,
            "data-for": dfnID,
            "aria-labelled-by":`infopaneltitle-for-${dfnID}`,
            },
            mk.span({id:`infopaneltitle-for-${dfnID}`, style:"display:none"},
                `Info about the '${dfnText}' ${external?"external":""} reference.`),
            mk.a({href:url}, url),
            mk.b({}, "Referenced in:"),
            mk.ul({},
                ...refSections.map(section=>
                    mk.li({},
                        ...section.refs.map((ref, refI)=>
                            [
                                mk.a({
                                    href: `#${ref.id}`
                                    },
                                    (refI == 0) ? section.title : `(${refI + 1})`
                                ),
                                " ",
                            ]
                        ),
                    ),
                ),
            ),
        );
    }

    function genAllDfnPanels() {
        for(const panelData of Object.values(window.dfnpanelData)) {
            const dfnID = panelData.dfnID;
            const dfn = document.getElementById(dfnID);
            if(!dfn) {
                console.log(`Can't find dfn#${dfnID}.`, panelData);
            } else {
                const panel = genDfnPanel(panelData);
                append(document.body, panel);
                insertDfnPopupAction(dfn, panel)
            }
        }
    }

    document.addEventListener("DOMContentLoaded", ()=>{
        genAllDfnPanels();

        // Add popup behavior to all dfns to show the corresponding dfn-panel.
        var dfns = queryAll('.dfn-paneled');
        for(let dfn of dfns) { ; }

        document.body.addEventListener("click", (e) => {
            // If not handled already, just hide all dfn panels.
            hideAllDfnPanels();
        });
    })


    function hideAllDfnPanels() {
        // Turn off any currently "on" or "activated" panels.
        queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el=>hideDfnPanel(el));
    }

    function showDfnPanel(dfnPanel, dfn) {
        hideAllDfnPanels(); // Only display one at this time.
        dfn.setAttribute("aria-expanded", "true");
        dfnPanel.classList.add("on");
        dfnPanel.style.left = "5px";
        dfnPanel.style.top = "0px";
        const panelRect = dfnPanel.getBoundingClientRect();
        const panelWidth = panelRect.right - panelRect.left;
        if (panelRect.right > document.body.scrollWidth) {
            // Panel's overflowing the screen.
            // Just drop it below the dfn and flip it rightward instead.
            // This still wont' fix things if the screen is *really* wide,
            // but fixing that's a lot harder without 'anchor()'.
            dfnPanel.style.top = "1.5em";
            dfnPanel.style.left = "auto";
            dfnPanel.style.right = "0px";
        }
    }

    function pinDfnPanel(dfnPanel) {
        // Switch it to "activated" state, which pins it.
        dfnPanel.classList.add("activated");
        dfnPanel.style.left = null;
        dfnPanel.style.top = null;
    }

    function hideDfnPanel(dfnPanel, dfn) {
        if(!dfn) {
            dfn = document.getElementById(dfnPanel.getAttribute("data-for"));
        }
        dfn.setAttribute("aria-expanded", "false")
        dfnPanel.classList.remove("on");
        dfnPanel.classList.remove("activated");
    }

    function toggleDfnPanel(dfnPanel, dfn) {
        if(dfnPanel.classList.contains("on")) {
            hideDfnPanel(dfnPanel, dfn);
        } else {
            showDfnPanel(dfnPanel, dfn);
        }
    }

    function insertDfnPopupAction(dfn, dfnPanel) {
        // Find dfn panel
        const panelWrapper = document.createElement('span');
        panelWrapper.appendChild(dfnPanel);
        panelWrapper.style.position = "relative";
        panelWrapper.style.height = "0px";
        dfn.insertAdjacentElement("afterend", panelWrapper);
        dfn.setAttribute('role', 'button');
        dfn.setAttribute('aria-expanded', 'false')
        dfn.tabIndex = 0;
        dfn.classList.add('has-dfn-panel');
        dfn.addEventListener('click', (event) => {
            showDfnPanel(dfnPanel, dfn);
            event.stopPropagation();
        });
        dfn.addEventListener('keypress', (event) => {
            const kc = event.keyCode;
            // 32->Space, 13->Enter
            if(kc == 32 || kc == 13) {
                toggleDfnPanel(dfnPanel, dfn);
                event.stopPropagation();
                event.preventDefault();
            }
        });

        dfnPanel.addEventListener('click', (event) => {
            if (event.target.nodeName == 'A') {
                pinDfnPanel(dfnPanel);
            }
            event.stopPropagation();
        });

        dfnPanel.addEventListener('keydown', (event) => {
            if(event.keyCode == 27) { // Escape key
                hideDfnPanel(dfnPanel, dfn);
                event.stopPropagation();
                event.preventDefault();
            }
        })
    }
}
</script>
<script>/* Boilerplate: script-dfn-panel */
"use strict";
{
    const dfnsJson = window.dfnsJson || {};

    function genDfnPanel({dfnID, url, dfnText, refSections, external}) {
        return mk.aside({
            class: "dfn-panel",
            id: `infopanel-for-${dfnID}`,
            "data-for": dfnID,
            "aria-labelled-by":`infopaneltitle-for-${dfnID}`,
            },
            mk.span({id:`infopaneltitle-for-${dfnID}`, style:"display:none"},
                `Info about the '${dfnText}' ${external?"external":""} reference.`),
            mk.a({href:url}, url),
            mk.b({}, "Referenced in:"),
            mk.ul({},
                ...refSections.map(section=>
                    mk.li({},
                        ...section.refs.map((ref, refI)=>
                            [
                                mk.a({
                                    href: `#${ref.id}`
                                    },
                                    (refI == 0) ? section.title : `(${refI + 1})`
                                ),
                                " ",
                            ]
                        ),
                    ),
                ),
            ),
        );
    }

    function genAllDfnPanels() {
        for(const panelData of Object.values(window.dfnpanelData)) {
            const dfnID = panelData.dfnID;
            const dfn = document.getElementById(dfnID);
            if(!dfn) {
                console.log(`Can't find dfn#${dfnID}.`, panelData);
            } else {
                const panel = genDfnPanel(panelData);
                append(document.body, panel);
                insertDfnPopupAction(dfn, panel)
            }
        }
    }

    document.addEventListener("DOMContentLoaded", ()=>{
        genAllDfnPanels();

        // Add popup behavior to all dfns to show the corresponding dfn-panel.
        var dfns = queryAll('.dfn-paneled');
        for(let dfn of dfns) { ; }

        document.body.addEventListener("click", (e) => {
            // If not handled already, just hide all dfn panels.
            hideAllDfnPanels();
        });
    })


    function hideAllDfnPanels() {
        // Turn off any currently "on" or "activated" panels.
        queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el=>hideDfnPanel(el));
    }

    function showDfnPanel(dfnPanel, dfn) {
        hideAllDfnPanels(); // Only display one at this time.
        dfn.setAttribute("aria-expanded", "true");
        dfnPanel.classList.add("on");
        dfnPanel.style.left = "5px";
        dfnPanel.style.top = "0px";
        const panelRect = dfnPanel.getBoundingClientRect();
        const panelWidth = panelRect.right - panelRect.left;
        if (panelRect.right > document.body.scrollWidth) {
            // Panel's overflowing the screen.
            // Just drop it below the dfn and flip it rightward instead.
            // This still wont' fix things if the screen is *really* wide,
            // but fixing that's a lot harder without 'anchor()'.
            dfnPanel.style.top = "1.5em";
            dfnPanel.style.left = "auto";
            dfnPanel.style.right = "0px";
        }
    }

    function pinDfnPanel(dfnPanel) {
        // Switch it to "activated" state, which pins it.
        dfnPanel.classList.add("activated");
        dfnPanel.style.left = null;
        dfnPanel.style.top = null;
    }

    function hideDfnPanel(dfnPanel, dfn) {
        if(!dfn) {
            dfn = document.getElementById(dfnPanel.getAttribute("data-for"));
        }
        dfn.setAttribute("aria-expanded", "false")
        dfnPanel.classList.remove("on");
        dfnPanel.classList.remove("activated");
    }

    function toggleDfnPanel(dfnPanel, dfn) {
        if(dfnPanel.classList.contains("on")) {
            hideDfnPanel(dfnPanel, dfn);
        } else {
            showDfnPanel(dfnPanel, dfn);
        }
    }

    function insertDfnPopupAction(dfn, dfnPanel) {
        // Find dfn panel
        const panelWrapper = document.createElement('span');
        panelWrapper.appendChild(dfnPanel);
        panelWrapper.style.position = "relative";
        panelWrapper.style.height = "0px";
        dfn.insertAdjacentElement("afterend", panelWrapper);
        dfn.setAttribute('role', 'button');
        dfn.setAttribute('aria-expanded', 'false')
        dfn.tabIndex = 0;
        dfn.classList.add('has-dfn-panel');
        dfn.addEventListener('click', (event) => {
            showDfnPanel(dfnPanel, dfn);
            event.stopPropagation();
        });
        dfn.addEventListener('keypress', (event) => {
            const kc = event.keyCode;
            // 32->Space, 13->Enter
            if(kc == 32 || kc == 13) {
                toggleDfnPanel(dfnPanel, dfn);
                event.stopPropagation();
                event.preventDefault();
            }
        });

        dfnPanel.addEventListener('click', (event) => {
            if (event.target.nodeName == 'A') {
                pinDfnPanel(dfnPanel);
            }
            event.stopPropagation();
        });

        dfnPanel.addEventListener('keydown', (event) => {
            if(event.keyCode == 27) { // Escape key
                hideDfnPanel(dfnPanel, dfn);
                event.stopPropagation();
                event.preventDefault();
            }
        })
    }
}
</script>
<script>/* Boilerplate: script-dfn-panel-json */
window.dfnpanelData = {};
window.dfnpanelData['7b1760b0'] = {"dfnID": "7b1760b0", "url": "https://console.spec.whatwg.org/#namespacedef-console", "dfnText": "console", "refSections": [{"refs": [{"id": "ref-for-namespacedef-console"}], "title": "7.2. Console"}], "external": true};
window.dfnpanelData['8ef06ef9'] = {"dfnID": "8ef06ef9", "url": "https://console.spec.whatwg.org#formatter", "dfnText": "formatter", "refSections": [{"refs": [{"id": "ref-for-formatter"}], "title": "6.6.3.1. The log.entryAdded Event"}], "external": true};
window.dfnpanelData['40a66c6b'] = {"dfnID": "40a66c6b", "url": "https://console.spec.whatwg.org#formatting-specifiers", "dfnText": "formatting specifier", "refSections": [{"refs": [{"id": "ref-for-formatting-specifiers"}], "title": "6.6.3.1. The log.entryAdded Event"}], "external": true};
window.dfnpanelData['09fc63ab'] = {"dfnID": "09fc63ab", "url": "https://console.spec.whatwg.org#printer", "dfnText": "printer", "refSections": [{"refs": [{"id": "ref-for-printer"}, {"id": "ref-for-printer\u2460"}], "title": "7.2. Console"}], "external": true};
window.dfnpanelData['6b7fd43d'] = {"dfnID": "6b7fd43d", "url": "https://drafts.css-houdini.org/css-paint-api-1/#paintworkletglobalscope", "dfnText": "PaintWorkletGlobalScope", "refSections": [{"refs": [{"id": "ref-for-paintworkletglobalscope"}], "title": "6.5.3.10. The script.RealmInfo Type"}], "external": true};
window.dfnpanelData['52a5360f'] = {"dfnID": "52a5360f", "url": "https://drafts.csswg.org/css-values-3/#absolute-lengths", "dfnText": "absolute lengths", "refSections": [{"refs": [{"id": "ref-for-absolute-lengths"}], "title": "6.3.3.8. The browsingContext.print Command"}], "external": true};
window.dfnpanelData['2a2f1579'] = {"dfnID": "2a2f1579", "url": "https://www.w3.org/TR/CSS21/intro.html#canvas", "dfnText": "canvas", "refSections": [{"refs": [{"id": "ref-for-canvas"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}], "external": true};
window.dfnpanelData['5a8644fc'] = {"dfnID": "5a8644fc", "url": "https://drafts.csswg.org/cssom-view-1/#determine-the-device-pixel-ratio", "dfnText": "determine the device pixel ratio", "refSections": [{"refs": [{"id": "ref-for-determine-the-device-pixel-ratio"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}], "external": true};
window.dfnpanelData['04e2fe80'] = {"dfnID": "04e2fe80", "url": "https://drafts.csswg.org/cssom-view-1/#element-get-the-bounding-box", "dfnText": "get the bounding box", "refSections": [{"refs": [{"id": "ref-for-element-get-the-bounding-box"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}], "external": true};
window.dfnpanelData['62a0057d'] = {"dfnID": "62a0057d", "url": "https://drafts.csswg.org/cssom-view/#visual-viewport", "dfnText": "visual viewport", "refSections": [{"refs": [{"id": "ref-for-visual-viewport"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}], "external": true};
window.dfnpanelData['99573380'] = {"dfnID": "99573380", "url": "https://dom.spec.whatwg.org/#attr", "dfnText": "Attr", "refSections": [{"refs": [{"id": "ref-for-attr"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": true};
window.dfnpanelData['85394472'] = {"dfnID": "85394472", "url": "https://dom.spec.whatwg.org/#document", "dfnText": "Document", "refSections": [{"refs": [{"id": "ref-for-document"}], "title": "6.3.2.2. The browsingContext.Info Type"}, {"refs": [{"id": "ref-for-document\u2460"}], "title": "7.1. HTML"}], "external": true};
window.dfnpanelData['296f3551'] = {"dfnID": "296f3551", "url": "https://dom.spec.whatwg.org/#element", "dfnText": "Element", "refSections": [{"refs": [{"id": "ref-for-element"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}, {"refs": [{"id": "ref-for-element\u2460"}, {"id": "ref-for-element\u2461"}], "title": "6.5.3.13. The script.RemoteValue Type"}, {"refs": [{"id": "ref-for-element\u2462"}, {"id": "ref-for-element\u2463"}], "title": "6.7.2.1. input.ElementOrigin"}], "external": true};
window.dfnpanelData['9714d594'] = {"dfnID": "9714d594", "url": "https://dom.spec.whatwg.org/#htmlcollection", "dfnText": "HTMLCollection", "refSections": [{"refs": [{"id": "ref-for-htmlcollection"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": true};
window.dfnpanelData['96c16e60'] = {"dfnID": "96c16e60", "url": "https://dom.spec.whatwg.org/#node", "dfnText": "Node", "refSections": [{"refs": [{"id": "ref-for-node"}, {"id": "ref-for-node\u2460"}], "title": "6.5.3.13. The script.RemoteValue Type"}, {"refs": [{"id": "ref-for-node\u2461"}], "title": "6.5.3.16. The script.SharedId Type"}], "external": true};
window.dfnpanelData['aa414f4c'] = {"dfnID": "aa414f4c", "url": "https://dom.spec.whatwg.org/#nodelist", "dfnText": "NodeList", "refSections": [{"refs": [{"id": "ref-for-nodelist"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": true};
window.dfnpanelData['1cd7ff31'] = {"dfnID": "1cd7ff31", "url": "https://dom.spec.whatwg.org/#shadowroot", "dfnText": "ShadowRoot", "refSections": [{"refs": [{"id": "ref-for-shadowroot"}, {"id": "ref-for-shadowroot\u2460"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": true};
window.dfnpanelData['77211728'] = {"dfnID": "77211728", "url": "https://dom.spec.whatwg.org/#concept-element-attribute", "dfnText": "attribute list", "refSections": [{"refs": [{"id": "ref-for-concept-element-attribute"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": true};
window.dfnpanelData['92b2d7da'] = {"dfnID": "92b2d7da", "url": "https://dom.spec.whatwg.org/#concept-tree-child", "dfnText": "children", "refSections": [{"refs": [{"id": "ref-for-concept-tree-child"}, {"id": "ref-for-concept-tree-child\u2460"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": true};
window.dfnpanelData['212ee1f7'] = {"dfnID": "212ee1f7", "url": "https://dom.spec.whatwg.org/#concept-cd-data", "dfnText": "data", "refSections": [{"refs": [{"id": "ref-for-concept-cd-data"}], "title": "6.4.4.2. The network.continueRequest Command"}, {"refs": [{"id": "ref-for-concept-cd-data\u2460"}], "title": "6.4.4.3. The network.continueResponse Command"}, {"refs": [{"id": "ref-for-concept-cd-data\u2461"}], "title": "6.4.4.4. The network.continueWithAuth Command"}, {"refs": [{"id": "ref-for-concept-cd-data\u2462"}], "title": "6.4.4.6. The network.provideResponse Command"}], "external": true};
window.dfnpanelData['a973e0fe'] = {"dfnID": "a973e0fe", "url": "https://dom.spec.whatwg.org/#concept-document", "dfnText": "document", "refSections": [{"refs": [{"id": "ref-for-concept-document"}], "title": "4. Transport"}, {"refs": [{"id": "ref-for-concept-document\u2460"}], "title": "6.5.4.5. The script.getRealms Command"}, {"refs": [{"id": "ref-for-concept-document\u2461"}], "title": "6.5.5.2. The script.realmCreated Event"}], "external": true};
window.dfnpanelData['73b0c924'] = {"dfnID": "73b0c924", "url": "https://dom.spec.whatwg.org/#shadowroot-mode", "dfnText": "mode", "refSections": [{"refs": [{"id": "ref-for-shadowroot-mode"}, {"id": "ref-for-shadowroot-mode\u2460"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": true};
window.dfnpanelData['d462b34f'] = {"dfnID": "d462b34f", "url": "https://dom.spec.whatwg.org/#boundary-point-node", "dfnText": "node", "refSections": [{"refs": [{"id": "ref-for-boundary-point-node"}], "title": "6.5.3.12. The script.RemoteReference Type"}], "external": true};
window.dfnpanelData['5216e1a0'] = {"dfnID": "5216e1a0", "url": "https://dom.spec.whatwg.org/#concept-node-document", "dfnText": "node document", "refSections": [{"refs": [{"id": "ref-for-concept-node-document"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}, {"refs": [{"id": "ref-for-concept-node-document\u2460"}], "title": "6.5.3.12. The script.RemoteReference Type"}, {"refs": [{"id": "ref-for-concept-node-document\u2461"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": true};
window.dfnpanelData['2ef14d2e'] = {"dfnID": "2ef14d2e", "url": "https://dom.spec.whatwg.org/#concept-node", "dfnText": "nodes", "refSections": [{"refs": [{"id": "ref-for-concept-node"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": true};
window.dfnpanelData['c62cd7cf'] = {"dfnID": "c62cd7cf", "url": "https://dom.spec.whatwg.org/#concept-document-origin", "dfnText": "origin", "refSections": [{"refs": [{"id": "ref-for-concept-document-origin"}], "title": "6.5.3.12. The script.RemoteReference Type"}], "external": true};
window.dfnpanelData['4d437809'] = {"dfnID": "4d437809", "url": "https://dom.spec.whatwg.org/#concept-attribute-qualified-name", "dfnText": "qualified name", "refSections": [{"refs": [{"id": "ref-for-concept-attribute-qualified-name"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": true};
window.dfnpanelData['ce720392'] = {"dfnID": "ce720392", "url": "https://dom.spec.whatwg.org/#concept-element-shadow-root", "dfnText": "shadow root", "refSections": [{"refs": [{"id": "ref-for-concept-element-shadow-root"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": true};
window.dfnpanelData['347e8fe9'] = {"dfnID": "347e8fe9", "url": "https://dom.spec.whatwg.org/#concept-document-url", "dfnText": "url", "refSections": [{"refs": [{"id": "ref-for-concept-document-url"}], "title": "6.3.2.2. The browsingContext.Info Type"}, {"refs": [{"id": "ref-for-concept-document-url\u2460"}], "title": "6.3.3.9. The browsingContext.reload Command"}], "external": true};
window.dfnpanelData['3b681a11'] = {"dfnID": "3b681a11", "url": "https://dom.spec.whatwg.org/#concept-attribute-value", "dfnText": "value", "refSections": [{"refs": [{"id": "ref-for-concept-attribute-value"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": true};
window.dfnpanelData['61266bdb'] = {"dfnID": "61266bdb", "url": "https://tc39.es/ecma262/#sec-completion-record-specification-type", "dfnText": "abrupt completion", "refSections": [{"refs": [{"id": "ref-for-sec-completion-record-specification-type"}, {"id": "ref-for-sec-completion-record-specification-type\u2460"}], "title": "6.5.2. Preload Scripts"}, {"refs": [{"id": "ref-for-sec-completion-record-specification-type\u2461"}], "title": "6.5.3.4. The script.ExceptionDetails Type"}, {"refs": [{"id": "ref-for-sec-completion-record-specification-type\u2462"}], "title": "6.5.3.6. The script.LocalValue Type"}, {"refs": [{"id": "ref-for-sec-completion-record-specification-type\u2463"}], "title": "6.5.3.13. The script.RemoteValue Type"}, {"refs": [{"id": "ref-for-sec-completion-record-specification-type\u2464"}, {"id": "ref-for-sec-completion-record-specification-type\u2465"}], "title": "6.5.3.18. The script.StackTrace Type"}], "external": true};
window.dfnpanelData['44dc083c'] = {"dfnID": "44dc083c", "url": "https://tc39.es/ecma262/#await", "dfnText": "await", "refSections": [{"refs": [{"id": "ref-for-await"}], "title": "6.5.4.3. The script.callFunction Command"}, {"refs": [{"id": "ref-for-await\u2460"}], "title": "6.5.4.4. The script.evaluate Command"}], "external": true};
window.dfnpanelData['f1d11a13'] = {"dfnID": "f1d11a13", "url": "https://tc39.es/ecma262/#sec-call", "dfnText": "call", "refSections": [{"refs": [{"id": "ref-for-sec-call"}], "title": "6.5.2. Preload Scripts"}, {"refs": [{"id": "ref-for-sec-call\u2460"}], "title": "6.5.3.13. The script.RemoteValue Type"}, {"refs": [{"id": "ref-for-sec-call\u2461"}], "title": "6.5.4.3. The script.callFunction Command"}], "external": true};
window.dfnpanelData['d4873ea0'] = {"dfnID": "d4873ea0", "url": "https://tc39.es/ecma262/#sec-completion-record-specification-type", "dfnText": "completion record", "refSections": [{"refs": [{"id": "ref-for-sec-completion-record-specification-type"}, {"id": "ref-for-sec-completion-record-specification-type\u2460"}], "title": "6.5.2. Preload Scripts"}, {"refs": [{"id": "ref-for-sec-completion-record-specification-type\u2461"}], "title": "6.5.3.4. The script.ExceptionDetails Type"}, {"refs": [{"id": "ref-for-sec-completion-record-specification-type\u2462"}], "title": "6.5.3.6. The script.LocalValue Type"}, {"refs": [{"id": "ref-for-sec-completion-record-specification-type\u2463"}], "title": "6.5.3.13. The script.RemoteValue Type"}, {"refs": [{"id": "ref-for-sec-completion-record-specification-type\u2464"}, {"id": "ref-for-sec-completion-record-specification-type\u2465"}], "title": "6.5.3.18. The script.StackTrace Type"}], "external": true};
window.dfnpanelData['134d399c'] = {"dfnID": "134d399c", "url": "https://tc39.es/ecma262/#sec-construct", "dfnText": "construct", "refSections": [{"refs": [{"id": "ref-for-sec-construct"}], "title": "6.5.3.6. The script.LocalValue Type"}], "external": true};
window.dfnpanelData['8c337abd'] = {"dfnID": "8c337abd", "url": "https://tc39.es/ecma262/#sec-createarrayfromlist", "dfnText": "createarrayfromlist", "refSections": [{"refs": [{"id": "ref-for-sec-createarrayfromlist"}, {"id": "ref-for-sec-createarrayfromlist\u2460"}, {"id": "ref-for-sec-createarrayfromlist\u2461"}, {"id": "ref-for-sec-createarrayfromlist\u2462"}, {"id": "ref-for-sec-createarrayfromlist\u2463"}], "title": "6.5.3.6. The script.LocalValue Type"}], "external": true};
window.dfnpanelData['34e1a2c9'] = {"dfnID": "34e1a2c9", "url": "https://tc39.es/ecma262/#sec-createarrayiterator", "dfnText": "createarrayiterator", "refSections": [{"refs": [{"id": "ref-for-sec-createarrayiterator"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": true};
window.dfnpanelData['bd2650e6'] = {"dfnID": "bd2650e6", "url": "https://tc39.es/ecma262/#sec-createbuiltinfunction", "dfnText": "createbuiltinfunction", "refSections": [{"refs": [{"id": "ref-for-sec-createbuiltinfunction"}], "title": "6.5.3.2. The script.ChannelValue Type"}], "external": true};
window.dfnpanelData['b44c8bda'] = {"dfnID": "b44c8bda", "url": "https://tc39.es/ecma262/#sec-createlistfromarraylike", "dfnText": "createlistfromarraylike", "refSections": [{"refs": [{"id": "ref-for-sec-createlistfromarraylike"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": true};
window.dfnpanelData['2b83b63d'] = {"dfnID": "2b83b63d", "url": "https://tc39.es/ecma262/#sec-createmapiterator", "dfnText": "createmapiterator", "refSections": [{"refs": [{"id": "ref-for-sec-createmapiterator"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": true};
window.dfnpanelData['ec4bb300'] = {"dfnID": "ec4bb300", "url": "https://tc39.es/ecma262/#sec-createsetiterator", "dfnText": "createsetiterator", "refSections": [{"refs": [{"id": "ref-for-sec-createsetiterator"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": true};
window.dfnpanelData['5582c476'] = {"dfnID": "5582c476", "url": "https://tc39.es/ecma262/#current-realm", "dfnText": "current realm record", "refSections": [{"refs": [{"id": "ref-for-current-realm"}], "title": "6.5.3.2. The script.ChannelValue Type"}, {"refs": [{"id": "ref-for-current-realm\u2460"}, {"id": "ref-for-current-realm\u2461"}, {"id": "ref-for-current-realm\u2462"}], "title": "6.6.3.1. The log.entryAdded Event"}], "external": true};
window.dfnpanelData['f8d00511'] = {"dfnID": "f8d00511", "url": "https://tc39.es/ecma262/#sec-date-constructor", "dfnText": "date", "refSections": [{"refs": [{"id": "ref-for-sec-date-constructor"}], "title": "6.5.3.6. The script.LocalValue Type"}], "external": true};
window.dfnpanelData['9d6036ea'] = {"dfnID": "9d6036ea", "url": "https://tc39.es/ecma262/#sec-date-time-string-format", "dfnText": "date time string format", "refSections": [{"refs": [{"id": "ref-for-sec-date-time-string-format"}], "title": "6.5.3.6. The script.LocalValue Type"}], "external": true};
window.dfnpanelData['fa3cd201'] = {"dfnID": "fa3cd201", "url": "https://tc39.es/ecma262/#sec-date.prototype.toisostring", "dfnText": "date.prototype.toisostring", "refSections": [{"refs": [{"id": "ref-for-sec-date.prototype.toisostring"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": true};
window.dfnpanelData['7ef0edbd'] = {"dfnID": "7ef0edbd", "url": "https://tc39.es/ecma262/#sec-enumerableownpropertynames", "dfnText": "enumerableownpropertynames", "refSections": [{"refs": [{"id": "ref-for-sec-enumerableownpropertynames"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": true};
window.dfnpanelData['47eb8c57'] = {"dfnID": "47eb8c57", "url": "https://tc39.es/ecma262/#sec-get", "dfnText": "get", "refSections": [{"refs": [{"id": "ref-for-sec-get"}, {"id": "ref-for-sec-get\u2460"}, {"id": "ref-for-sec-get\u2461"}, {"id": "ref-for-sec-get\u2462"}, {"id": "ref-for-sec-get\u2463"}, {"id": "ref-for-sec-get\u2464"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": true};
window.dfnpanelData['99403468'] = {"dfnID": "99403468", "url": "https://tc39.es/ecma262/#sec-getiterator", "dfnText": "getiterator", "refSections": [{"refs": [{"id": "ref-for-sec-getiterator"}, {"id": "ref-for-sec-getiterator\u2460"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": true};
window.dfnpanelData['900ce14b'] = {"dfnID": "900ce14b", "url": "https://tc39.es/ecma262/#sec-object-internal-methods-and-internal-slots", "dfnText": "internal slot", "refSections": [{"refs": [{"id": "ref-for-sec-object-internal-methods-and-internal-slots"}, {"id": "ref-for-sec-object-internal-methods-and-internal-slots\u2460"}, {"id": "ref-for-sec-object-internal-methods-and-internal-slots\u2461"}, {"id": "ref-for-sec-object-internal-methods-and-internal-slots\u2462"}, {"id": "ref-for-sec-object-internal-methods-and-internal-slots\u2463"}, {"id": "ref-for-sec-object-internal-methods-and-internal-slots\u2464"}, {"id": "ref-for-sec-object-internal-methods-and-internal-slots\u2465"}, {"id": "ref-for-sec-object-internal-methods-and-internal-slots\u2466"}, {"id": "ref-for-sec-object-internal-methods-and-internal-slots\u2467"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": true};
window.dfnpanelData['8f3fa597'] = {"dfnID": "8f3fa597", "url": "https://tc39.es/ecma262/#sec-isarray", "dfnText": "isarray", "refSections": [{"refs": [{"id": "ref-for-sec-isarray"}, {"id": "ref-for-sec-isarray\u2460"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": true};
window.dfnpanelData['1754fd49'] = {"dfnID": "1754fd49", "url": "https://tc39.es/ecma262/#sec-iscallable", "dfnText": "iscallable", "refSections": [{"refs": [{"id": "ref-for-sec-iscallable"}], "title": "6.5.2. Preload Scripts"}, {"refs": [{"id": "ref-for-sec-iscallable\u2460"}], "title": "6.5.3.13. The script.RemoteValue Type"}, {"refs": [{"id": "ref-for-sec-iscallable\u2461"}], "title": "6.5.4.3. The script.callFunction Command"}], "external": true};
window.dfnpanelData['7728ef75'] = {"dfnID": "7728ef75", "url": "https://tc39.es/ecma262/#sec-ispromise", "dfnText": "ispromise", "refSections": [{"refs": [{"id": "ref-for-sec-ispromise"}], "title": "6.5.3.13. The script.RemoteValue Type"}, {"refs": [{"id": "ref-for-sec-ispromise\u2460"}], "title": "6.5.4.3. The script.callFunction Command"}, {"refs": [{"id": "ref-for-sec-ispromise\u2461"}], "title": "6.5.4.4. The script.evaluate Command"}], "external": true};
window.dfnpanelData['a60df0fb'] = {"dfnID": "a60df0fb", "url": "https://tc39.es/ecma262/#sec-isregexp", "dfnText": "isregexp", "refSections": [{"refs": [{"id": "ref-for-sec-isregexp"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": true};
window.dfnpanelData['b7d560f9'] = {"dfnID": "b7d560f9", "url": "https://tc39.es/ecma262/#sec-iteratortolist", "dfnText": "iteratortolist", "refSections": [{"refs": [{"id": "ref-for-sec-iteratortolist"}, {"id": "ref-for-sec-iteratortolist\u2460"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": true};
window.dfnpanelData['e0160a7c'] = {"dfnID": "e0160a7c", "url": "https://tc39.es/ecma262/#sec-map-iterable", "dfnText": "map", "refSections": [{"refs": [{"id": "ref-for-sec-map-iterable"}], "title": "6.5.3.6. The script.LocalValue Type"}], "external": true};
window.dfnpanelData['f74eadef'] = {"dfnID": "f74eadef", "url": "https://tc39.es/ecma262/#sec-null-value", "dfnText": "null", "refSections": [{"refs": [{"id": "ref-for-sec-null-value"}], "title": "6.4.4.7. The network.removeIntercept Command"}, {"refs": [{"id": "ref-for-sec-null-value\u2460"}], "title": "6.5.3.9. The script.PrimitiveProtocolValue Type"}], "external": true};
window.dfnpanelData['832894ed'] = {"dfnID": "832894ed", "url": "https://tc39.es/ecma262/#sec-object.fromentries", "dfnText": "object.fromentries", "refSections": [{"refs": [{"id": "ref-for-sec-object.fromentries"}], "title": "6.5.3.6. The script.LocalValue Type"}], "external": true};
window.dfnpanelData['d6e9496a'] = {"dfnID": "d6e9496a", "url": "https://tc39.es/ecma262/#sec-primitive-value", "dfnText": "primitive ecmascript value", "refSections": [{"refs": [{"id": "ref-for-sec-primitive-value"}], "title": "6.6.3.1. The log.entryAdded Event"}], "external": true};
window.dfnpanelData['704f9119'] = {"dfnID": "704f9119", "url": "https://tc39.es/ecma262/#sec-code-realms", "dfnText": "realm", "refSections": [{"refs": [{"id": "ref-for-sec-code-realms"}], "title": "5.1. Sandbox Realms"}, {"refs": [{"id": "ref-for-sec-code-realms\u2460"}, {"id": "ref-for-sec-code-realms\u2461"}], "title": "6.5.3.5. The script.Handle Type"}, {"refs": [{"id": "ref-for-sec-code-realms\u2462"}, {"id": "ref-for-sec-code-realms\u2463"}, {"id": "ref-for-sec-code-realms\u2464"}], "title": "6.5.3.8. The script.Realm Type"}, {"refs": [{"id": "ref-for-sec-code-realms\u2465"}], "title": "6.5.3.12. The script.RemoteReference Type"}, {"refs": [{"id": "ref-for-sec-code-realms\u2466"}], "title": "6.5.4.5. The script.getRealms Command"}], "external": true};
window.dfnpanelData['821a5611'] = {"dfnID": "821a5611", "url": "https://tc39.es/ecma262/#sec-regexp-pattern-flags", "dfnText": "regexp", "refSections": [{"refs": [{"id": "ref-for-sec-regexp-pattern-flags"}], "title": "6.5.3.6. The script.LocalValue Type"}], "external": true};
window.dfnpanelData['a4739eca'] = {"dfnID": "a4739eca", "url": "https://tc39.es/ecma262/#running-execution-context", "dfnText": "running execution context", "refSections": [{"refs": [{"id": "ref-for-running-execution-context"}], "title": "6.5.3.18. The script.StackTrace Type"}], "external": true};
window.dfnpanelData['75574bed'] = {"dfnID": "75574bed", "url": "https://tc39.es/ecma262/#sec-runtime-semantics-scriptevaluation", "dfnText": "scriptevaluation", "refSections": [{"refs": [{"id": "ref-for-sec-runtime-semantics-scriptevaluation"}], "title": "6.5.4.3. The script.callFunction Command"}, {"refs": [{"id": "ref-for-sec-runtime-semantics-scriptevaluation\u2460"}], "title": "6.5.4.4. The script.evaluate Command"}], "external": true};
window.dfnpanelData['a88453e8'] = {"dfnID": "a88453e8", "url": "https://tc39.es/ecma262/#sec-set-objects", "dfnText": "set object", "refSections": [{"refs": [{"id": "ref-for-sec-set-objects"}], "title": "6.5.3.6. The script.LocalValue Type"}], "external": true};
window.dfnpanelData['69f07995'] = {"dfnID": "69f07995", "url": "https://tc39.es/ecma262/#sec-stringtobigint", "dfnText": "stringtobigint", "refSections": [{"refs": [{"id": "ref-for-sec-stringtobigint"}], "title": "6.5.3.9. The script.PrimitiveProtocolValue Type"}], "external": true};
window.dfnpanelData['01ffad58'] = {"dfnID": "01ffad58", "url": "https://tc39.es/ecma262/#sec-stringtonumber", "dfnText": "stringtonumber", "refSections": [{"refs": [{"id": "ref-for-sec-stringtonumber"}], "title": "6.5.3.9. The script.PrimitiveProtocolValue Type"}], "external": true};
window.dfnpanelData['8a0f541d'] = {"dfnID": "8a0f541d", "url": "https://tc39.es/ecma262/#sec-completion-record-specification-type", "dfnText": "throw completion", "refSections": [{"refs": [{"id": "ref-for-sec-completion-record-specification-type"}, {"id": "ref-for-sec-completion-record-specification-type\u2460"}], "title": "6.5.2. Preload Scripts"}, {"refs": [{"id": "ref-for-sec-completion-record-specification-type\u2461"}], "title": "6.5.3.4. The script.ExceptionDetails Type"}, {"refs": [{"id": "ref-for-sec-completion-record-specification-type\u2462"}], "title": "6.5.3.6. The script.LocalValue Type"}, {"refs": [{"id": "ref-for-sec-completion-record-specification-type\u2463"}], "title": "6.5.3.13. The script.RemoteValue Type"}, {"refs": [{"id": "ref-for-sec-completion-record-specification-type\u2464"}, {"id": "ref-for-sec-completion-record-specification-type\u2465"}], "title": "6.5.3.18. The script.StackTrace Type"}], "external": true};
window.dfnpanelData['bba0f383'] = {"dfnID": "bba0f383", "url": "https://tc39.es/ecma262/#sec-time-values-and-time-range", "dfnText": "time value", "refSections": [{"refs": [{"id": "ref-for-sec-time-values-and-time-range"}], "title": "6.3.2.4. The browsingContext.NavigationInfo Type"}, {"refs": [{"id": "ref-for-sec-time-values-and-time-range\u2460"}], "title": "6.4.3.3. The network.BaseParameters Type"}, {"refs": [{"id": "ref-for-sec-time-values-and-time-range\u2461"}], "title": "6.6.3.1. The log.entryAdded Event"}], "external": true};
window.dfnpanelData['51f1a168'] = {"dfnID": "51f1a168", "url": "https://tc39.es/ecma262/#sec-tostring", "dfnText": "tostring", "refSections": [{"refs": [{"id": "ref-for-sec-tostring"}], "title": "6.5.3.9. The script.PrimitiveProtocolValue Type"}, {"refs": [{"id": "ref-for-sec-tostring\u2460"}, {"id": "ref-for-sec-tostring\u2461"}], "title": "6.5.3.13. The script.RemoteValue Type"}, {"refs": [{"id": "ref-for-sec-tostring\u2462"}], "title": "6.6.3.1. The log.entryAdded Event"}], "external": true};
window.dfnpanelData['b7212a68'] = {"dfnID": "b7212a68", "url": "https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values", "dfnText": "type", "refSections": [{"refs": [{"id": "ref-for-sec-ecmascript-data-types-and-values"}, {"id": "ref-for-sec-ecmascript-data-types-and-values\u2460"}, {"id": "ref-for-sec-ecmascript-data-types-and-values\u2461"}, {"id": "ref-for-sec-ecmascript-data-types-and-values\u2462"}, {"id": "ref-for-sec-ecmascript-data-types-and-values\u2463"}, {"id": "ref-for-sec-ecmascript-data-types-and-values\u2464"}, {"id": "ref-for-sec-ecmascript-data-types-and-values\u2465"}, {"id": "ref-for-sec-ecmascript-data-types-and-values\u2466"}], "title": "6.5.3.9. The script.PrimitiveProtocolValue Type"}, {"refs": [{"id": "ref-for-sec-ecmascript-data-types-and-values\u2467"}, {"id": "ref-for-sec-ecmascript-data-types-and-values\u2468"}, {"id": "ref-for-sec-ecmascript-data-types-and-values\u2460\u24ea"}], "title": "6.5.3.13. The script.RemoteValue Type"}, {"refs": [{"id": "ref-for-sec-ecmascript-data-types-and-values\u2460\u2460"}], "title": "6.6.3.1. The log.entryAdded Event"}], "external": true};
window.dfnpanelData['ced1a660'] = {"dfnID": "ced1a660", "url": "https://tc39.es/ecma262/#sec-undefined-value", "dfnText": "undefined", "refSections": [{"refs": [{"id": "ref-for-sec-undefined-value"}], "title": "6.5.3.9. The script.PrimitiveProtocolValue Type"}], "external": true};
window.dfnpanelData['b0fcb8d7'] = {"dfnID": "b0fcb8d7", "url": "https://encoding.spec.whatwg.org/#utf-8-decode", "dfnText": "utf-8 decode", "refSections": [{"refs": [{"id": "ref-for-utf-8-decode"}], "title": "6.4.3.1. The network.AuthChallenge Type"}, {"refs": [{"id": "ref-for-utf-8-decode\u2460"}], "title": "6.4.3.5. The network.Cookie Type"}, {"refs": [{"id": "ref-for-utf-8-decode\u2461"}], "title": "6.4.3.8. The network.Header Type"}], "external": true};
window.dfnpanelData['f256859a'] = {"dfnID": "f256859a", "url": "https://encoding.spec.whatwg.org/#utf-8-decode-without-bom-or-fail", "dfnText": "utf-8 decode without bom or fail", "refSections": [{"refs": [{"id": "ref-for-utf-8-decode-without-bom-or-fail"}], "title": "6.4.3.4. The network.BytesValue Type"}], "external": true};
window.dfnpanelData['0303e8e5'] = {"dfnID": "0303e8e5", "url": "https://encoding.spec.whatwg.org/#utf-8-encode", "dfnText": "utf-8 encode", "refSections": [{"refs": [{"id": "ref-for-utf-8-encode"}], "title": "6.4.3.4. The network.BytesValue Type"}, {"refs": [{"id": "ref-for-utf-8-encode\u2460"}], "title": "6.4.3.6. The network.CookieHeader Type"}, {"refs": [{"id": "ref-for-utf-8-encode\u2461"}], "title": "6.4.3.8. The network.Header Type"}, {"refs": [{"id": "ref-for-utf-8-encode\u2462"}, {"id": "ref-for-utf-8-encode\u2463"}, {"id": "ref-for-utf-8-encode\u2464"}, {"id": "ref-for-utf-8-encode\u2465"}, {"id": "ref-for-utf-8-encode\u2466"}, {"id": "ref-for-utf-8-encode\u2467"}], "title": "6.4.3.15. The network.SetCookieHeader Type"}, {"refs": [{"id": "ref-for-utf-8-encode\u2468"}], "title": "6.4.4.3. The network.continueResponse Command"}], "external": true};
window.dfnpanelData['dc126c10'] = {"dfnID": "dc126c10", "url": "https://fetch.spec.whatwg.org/#connection-timing-info-alpn-negotiated-protocol", "dfnText": "alpn negotiated protocol", "refSections": [{"refs": [{"id": "ref-for-connection-timing-info-alpn-negotiated-protocol"}], "title": "6.4.3.14. The network.ResponseData Type"}], "external": true};
window.dfnpanelData['4a2cfa3a'] = {"dfnID": "4a2cfa3a", "url": "https://fetch.spec.whatwg.org/#byte-sequence-as-a-body", "dfnText": "as a body", "refSections": [{"refs": [{"id": "ref-for-byte-sequence-as-a-body"}], "title": "6.4.4.6. The network.provideResponse Command"}], "external": true};
window.dfnpanelData['644cb530'] = {"dfnID": "644cb530", "url": "https://fetch.spec.whatwg.org/#concept-body", "dfnText": "body", "refSections": [{"refs": [{"id": "ref-for-concept-body"}], "title": "6.4.3.12. The network.RequestData Type"}], "external": true};
window.dfnpanelData['8e9945a0'] = {"dfnID": "8e9945a0", "url": "https://fetch.spec.whatwg.org/#concept-request-body", "dfnText": "body (for request)", "refSections": [{"refs": [{"id": "ref-for-concept-request-body"}], "title": "6.4.3.12. The network.RequestData Type"}, {"refs": [{"id": "ref-for-concept-request-body\u2460"}], "title": "6.4.4.2. The network.continueRequest Command"}], "external": true};
window.dfnpanelData['81a76425'] = {"dfnID": "81a76425", "url": "https://fetch.spec.whatwg.org/#concept-response-body", "dfnText": "body (for response)", "refSections": [{"refs": [{"id": "ref-for-concept-response-body"}], "title": "6.4.4.6. The network.provideResponse Command"}], "external": true};
window.dfnpanelData['e6defb69'] = {"dfnID": "e6defb69", "url": "https://fetch.spec.whatwg.org/#concept-response-cache-state", "dfnText": "cache state", "refSections": [{"refs": [{"id": "ref-for-concept-response-cache-state"}], "title": "6.4.3.14. The network.ResponseData Type"}], "external": true};
window.dfnpanelData['857d5516'] = {"dfnID": "857d5516", "url": "https://fetch.spec.whatwg.org/#concept-request-client", "dfnText": "client", "refSections": [{"refs": [{"id": "ref-for-concept-request-client"}, {"id": "ref-for-concept-request-client\u2460"}], "title": "6.4.3.7. The network.FetchTimingInfo Type"}, {"refs": [{"id": "ref-for-concept-request-client\u2461"}, {"id": "ref-for-concept-request-client\u2462"}], "title": "6.4.5.1. The network.authRequired Event"}, {"refs": [{"id": "ref-for-concept-request-client\u2463"}, {"id": "ref-for-concept-request-client\u2464"}], "title": "6.4.5.2. The network.beforeRequestSent Event"}, {"refs": [{"id": "ref-for-concept-request-client\u2465"}, {"id": "ref-for-concept-request-client\u2466"}], "title": "6.4.5.3. The network.fetchError Event"}, {"refs": [{"id": "ref-for-concept-request-client\u2467"}, {"id": "ref-for-concept-request-client\u2468"}], "title": "6.4.5.4. The network.responseCompleted Event"}, {"refs": [{"id": "ref-for-concept-request-client\u2460\u24ea"}, {"id": "ref-for-concept-request-client\u2460\u2460"}], "title": "6.4.5.5. The network.responseStarted Event"}], "external": true};
window.dfnpanelData['983dc57c'] = {"dfnID": "983dc57c", "url": "https://fetch.spec.whatwg.org/#connection-timing-info-connection-end-time", "dfnText": "connection end time", "refSections": [{"refs": [{"id": "ref-for-connection-timing-info-connection-end-time"}], "title": "6.4.3.7. The network.FetchTimingInfo Type"}], "external": true};
window.dfnpanelData['006a831c'] = {"dfnID": "006a831c", "url": "https://fetch.spec.whatwg.org/#connection-timing-info-connection-start-time", "dfnText": "connection start time", "refSections": [{"refs": [{"id": "ref-for-connection-timing-info-connection-start-time"}], "title": "6.4.3.7. The network.FetchTimingInfo Type"}], "external": true};
window.dfnpanelData['7ed2c230'] = {"dfnID": "7ed2c230", "url": "https://fetch.spec.whatwg.org/#connection-timing-info", "dfnText": "connection timing info", "refSections": [{"refs": [{"id": "ref-for-connection-timing-info"}], "title": "6.4.3.7. The network.FetchTimingInfo Type"}], "external": true};
window.dfnpanelData['4d7b724c'] = {"dfnID": "4d7b724c", "url": "https://fetch.spec.whatwg.org/#cors-preflight-request", "dfnText": "cors-preflight request", "refSections": [{"refs": [{"id": "ref-for-cors-preflight-request"}], "title": "6.4.3.9. The network.Initiator Type"}], "external": true};
window.dfnpanelData['7aab3a36'] = {"dfnID": "7aab3a36", "url": "https://fetch.spec.whatwg.org/#fetch-timing-info-decoded-body-size", "dfnText": "decoded size", "refSections": [{"refs": [{"id": "ref-for-fetch-timing-info-decoded-body-size"}], "title": "6.4.3.13. The network.ResponseContent Type"}], "external": true};
window.dfnpanelData['88bac656'] = {"dfnID": "88bac656", "url": "https://fetch.spec.whatwg.org/#connection-timing-info-domain-lookup-end-time", "dfnText": "domain lookup end time", "refSections": [{"refs": [{"id": "ref-for-connection-timing-info-domain-lookup-end-time"}], "title": "6.4.3.7. The network.FetchTimingInfo Type"}], "external": true};
window.dfnpanelData['4ef92270'] = {"dfnID": "4ef92270", "url": "https://fetch.spec.whatwg.org/#connection-timing-info-domain-lookup-start-time", "dfnText": "domain lookup start time", "refSections": [{"refs": [{"id": "ref-for-connection-timing-info-domain-lookup-start-time"}], "title": "6.4.3.7. The network.FetchTimingInfo Type"}], "external": true};
window.dfnpanelData['a0fdc68e'] = {"dfnID": "a0fdc68e", "url": "https://fetch.spec.whatwg.org/#fetch-timing-info-encoded-body-size", "dfnText": "encoded size", "refSections": [{"refs": [{"id": "ref-for-fetch-timing-info-encoded-body-size"}], "title": "6.4.3.14. The network.ResponseData Type"}], "external": true};
window.dfnpanelData['3bed2793'] = {"dfnID": "3bed2793", "url": "https://fetch.spec.whatwg.org/#fetch-timing-info-end-time", "dfnText": "end time", "refSections": [{"refs": [{"id": "ref-for-fetch-timing-info-end-time"}], "title": "6.4.3.7. The network.FetchTimingInfo Type"}], "external": true};
window.dfnpanelData['33ebb34d'] = {"dfnID": "33ebb34d", "url": "https://fetch.spec.whatwg.org/#fetch-timing-info", "dfnText": "fetch timing info", "refSections": [{"refs": [{"id": "ref-for-fetch-timing-info"}], "title": "6.4.3.7. The network.FetchTimingInfo Type"}], "external": true};
window.dfnpanelData['7d9064d0'] = {"dfnID": "7d9064d0", "url": "https://fetch.spec.whatwg.org/#fetch-timing-info-final-connection-timing-info", "dfnText": "final connection timing info", "refSections": [{"refs": [{"id": "ref-for-fetch-timing-info-final-connection-timing-info"}], "title": "6.4.3.7. The network.FetchTimingInfo Type"}, {"refs": [{"id": "ref-for-fetch-timing-info-final-connection-timing-info\u2460"}, {"id": "ref-for-fetch-timing-info-final-connection-timing-info\u2461"}], "title": "6.4.3.14. The network.ResponseData Type"}], "external": true};
window.dfnpanelData['fd8ed7d1'] = {"dfnID": "fd8ed7d1", "url": "https://fetch.spec.whatwg.org/#fetch-timing-info-final-network-request-start-time", "dfnText": "final network-request start time", "refSections": [{"refs": [{"id": "ref-for-fetch-timing-info-final-network-request-start-time"}], "title": "6.4.3.7. The network.FetchTimingInfo Type"}], "external": true};
window.dfnpanelData['a4361c75'] = {"dfnID": "a4361c75", "url": "https://fetch.spec.whatwg.org/#fetch-timing-info-final-network-response-start-time", "dfnText": "final network-response start time", "refSections": [{"refs": [{"id": "ref-for-fetch-timing-info-final-network-response-start-time"}], "title": "6.4.3.7. The network.FetchTimingInfo Type"}], "external": true};
window.dfnpanelData['c9e7c11a'] = {"dfnID": "c9e7c11a", "url": "https://fetch.spec.whatwg.org/#concept-header", "dfnText": "header", "refSections": [{"refs": [{"id": "ref-for-concept-header"}], "title": "6.4.3.8. The network.Header Type"}, {"refs": [{"id": "ref-for-concept-header\u2460"}], "title": "6.4.4.2. The network.continueRequest Command"}], "external": true};
window.dfnpanelData['d85a6c84'] = {"dfnID": "d85a6c84", "url": "https://fetch.spec.whatwg.org/#concept-header-list", "dfnText": "header list", "refSections": [{"refs": [{"id": "ref-for-concept-header-list"}], "title": "6.4.4.2. The network.continueRequest Command"}, {"refs": [{"id": "ref-for-concept-header-list\u2460"}, {"id": "ref-for-concept-header-list\u2461"}], "title": "6.4.4.3. The network.continueResponse Command"}], "external": true};
window.dfnpanelData['6ee0eab1'] = {"dfnID": "6ee0eab1", "url": "https://fetch.spec.whatwg.org/#concept-request-header-list", "dfnText": "header list (for request)", "refSections": [{"refs": [{"id": "ref-for-concept-request-header-list"}, {"id": "ref-for-concept-request-header-list\u2460"}], "title": "6.4.3.12. The network.RequestData Type"}, {"refs": [{"id": "ref-for-concept-request-header-list\u2461"}, {"id": "ref-for-concept-request-header-list\u2462"}, {"id": "ref-for-concept-request-header-list\u2463"}], "title": "6.4.4.2. The network.continueRequest Command"}], "external": true};
window.dfnpanelData['f7b00a8b'] = {"dfnID": "f7b00a8b", "url": "https://fetch.spec.whatwg.org/#concept-response-header-list", "dfnText": "header list (for response)", "refSections": [{"refs": [{"id": "ref-for-concept-response-header-list"}], "title": "6.4.3.1. The network.AuthChallenge Type"}, {"refs": [{"id": "ref-for-concept-response-header-list\u2460"}], "title": "6.4.3.14. The network.ResponseData Type"}, {"refs": [{"id": "ref-for-concept-response-header-list\u2461"}, {"id": "ref-for-concept-response-header-list\u2462"}, {"id": "ref-for-concept-response-header-list\u2463"}, {"id": "ref-for-concept-response-header-list\u2464"}], "title": "6.4.4.3. The network.continueResponse Command"}], "external": true};
window.dfnpanelData['7b0b4fa0'] = {"dfnID": "7b0b4fa0", "url": "https://fetch.spec.whatwg.org/#request-initiator-type", "dfnText": "initiator type", "refSections": [{"refs": [{"id": "ref-for-request-initiator-type"}], "title": "6.4.3.9. The network.Initiator Type"}], "external": true};
window.dfnpanelData['7acd5143'] = {"dfnID": "7acd5143", "url": "https://fetch.spec.whatwg.org/#concept-body-total-bytes", "dfnText": "length", "refSections": [{"refs": [{"id": "ref-for-concept-body-total-bytes"}], "title": "6.4.3.12. The network.RequestData Type"}], "external": true};
window.dfnpanelData['50b05fad'] = {"dfnID": "50b05fad", "url": "https://fetch.spec.whatwg.org/#concept-request-method", "dfnText": "method", "refSections": [{"refs": [{"id": "ref-for-concept-request-method"}], "title": "6.4.3.12. The network.RequestData Type"}, {"refs": [{"id": "ref-for-concept-request-method\u2460"}], "title": "6.4.4.2. The network.continueRequest Command"}], "external": true};
window.dfnpanelData['eb1b1af3'] = {"dfnID": "eb1b1af3", "url": "https://fetch.spec.whatwg.org/#concept-network-error", "dfnText": "network error", "refSections": [{"refs": [{"id": "ref-for-concept-network-error"}], "title": "6.4.4.5. The network.failRequest Command"}], "external": true};
window.dfnpanelData['3c61d9cd'] = {"dfnID": "3c61d9cd", "url": "https://fetch.spec.whatwg.org/#fetch-timing-info-post-redirect-start-time", "dfnText": "post-redirect start time", "refSections": [{"refs": [{"id": "ref-for-fetch-timing-info-post-redirect-start-time"}], "title": "6.4.3.7. The network.FetchTimingInfo Type"}], "external": true};
window.dfnpanelData['8c3deeef'] = {"dfnID": "8c3deeef", "url": "https://fetch.spec.whatwg.org/#concept-request-redirect-count", "dfnText": "redirect count", "refSections": [{"refs": [{"id": "ref-for-concept-request-redirect-count"}], "title": "6.4.3.3. The network.BaseParameters Type"}, {"refs": [{"id": "ref-for-concept-request-redirect-count\u2460"}], "title": "6.4.5.1. The network.authRequired Event"}, {"refs": [{"id": "ref-for-concept-request-redirect-count\u2461"}], "title": "6.4.5.2. The network.beforeRequestSent Event"}, {"refs": [{"id": "ref-for-concept-request-redirect-count\u2462"}], "title": "6.4.5.3. The network.fetchError Event"}, {"refs": [{"id": "ref-for-concept-request-redirect-count\u2463"}], "title": "6.4.5.4. The network.responseCompleted Event"}, {"refs": [{"id": "ref-for-concept-request-redirect-count\u2464"}], "title": "6.4.5.5. The network.responseStarted Event"}], "external": true};
window.dfnpanelData['a8ffe756'] = {"dfnID": "a8ffe756", "url": "https://fetch.spec.whatwg.org/#fetch-timing-info-redirect-end-time", "dfnText": "redirect end time", "refSections": [{"refs": [{"id": "ref-for-fetch-timing-info-redirect-end-time"}], "title": "6.4.3.7. The network.FetchTimingInfo Type"}], "external": true};
window.dfnpanelData['a4341052'] = {"dfnID": "a4341052", "url": "https://fetch.spec.whatwg.org/#fetch-timing-info-redirect-start-time", "dfnText": "redirect start time", "refSections": [{"refs": [{"id": "ref-for-fetch-timing-info-redirect-start-time"}], "title": "6.4.3.7. The network.FetchTimingInfo Type"}], "external": true};
window.dfnpanelData['55213b5b'] = {"dfnID": "55213b5b", "url": "https://fetch.spec.whatwg.org/#concept-request", "dfnText": "request", "refSections": [{"refs": [{"id": "ref-for-concept-request"}], "title": "3.5. Errors"}, {"refs": [{"id": "ref-for-concept-request\u2460"}], "title": "6.3.3.7. The browsingContext.navigate Command"}, {"refs": [{"id": "ref-for-concept-request\u2461"}], "title": "6.3.3.9. The browsingContext.reload Command"}, {"refs": [{"id": "ref-for-concept-request\u2462"}], "title": "6.4.3.7. The network.FetchTimingInfo Type"}], "external": true};
window.dfnpanelData['ee7bba09'] = {"dfnID": "ee7bba09", "url": "https://fetch.spec.whatwg.org/#concept-response", "dfnText": "response", "refSections": [{"refs": [{"id": "ref-for-concept-response"}], "title": "6.4.4.3. The network.continueResponse Command"}], "external": true};
window.dfnpanelData['366a7ed3'] = {"dfnID": "366a7ed3", "url": "https://fetch.spec.whatwg.org/#response-body-info", "dfnText": "response body info", "refSections": [{"refs": [{"id": "ref-for-response-body-info"}], "title": "6.4.3.13. The network.ResponseContent Type"}, {"refs": [{"id": "ref-for-response-body-info\u2460"}], "title": "6.4.3.14. The network.ResponseData Type"}], "external": true};
window.dfnpanelData['21347267'] = {"dfnID": "21347267", "url": "https://fetch.spec.whatwg.org/#connection-timing-info-secure-connection-start-time", "dfnText": "secure connection start time", "refSections": [{"refs": [{"id": "ref-for-connection-timing-info-secure-connection-start-time"}], "title": "6.4.3.7. The network.FetchTimingInfo Type"}], "external": true};
window.dfnpanelData['b42e14e0'] = {"dfnID": "b42e14e0", "url": "https://fetch.spec.whatwg.org/#fetch-timing-info-start-time", "dfnText": "start time", "refSections": [{"refs": [{"id": "ref-for-fetch-timing-info-start-time"}], "title": "6.4.3.7. The network.FetchTimingInfo Type"}], "external": true};
window.dfnpanelData['a1d47575'] = {"dfnID": "a1d47575", "url": "https://fetch.spec.whatwg.org/#concept-response-status", "dfnText": "status", "refSections": [{"refs": [{"id": "ref-for-concept-response-status"}, {"id": "ref-for-concept-response-status\u2460"}], "title": "6.4.3.1. The network.AuthChallenge Type"}, {"refs": [{"id": "ref-for-concept-response-status\u2461"}], "title": "6.4.3.14. The network.ResponseData Type"}, {"refs": [{"id": "ref-for-concept-response-status\u2462"}], "title": "6.4.4.3. The network.continueResponse Command"}], "external": true};
window.dfnpanelData['24afcdf2'] = {"dfnID": "24afcdf2", "url": "https://fetch.spec.whatwg.org/#concept-response-status-message", "dfnText": "status message", "refSections": [{"refs": [{"id": "ref-for-concept-response-status-message"}], "title": "6.4.3.14. The network.ResponseData Type"}, {"refs": [{"id": "ref-for-concept-response-status-message\u2460"}], "title": "6.4.4.3. The network.continueResponse Command"}], "external": true};
window.dfnpanelData['dc1cd39b'] = {"dfnID": "dc1cd39b", "url": "https://fetch.spec.whatwg.org/#concept-request-url", "dfnText": "url (for request)", "refSections": [{"refs": [{"id": "ref-for-concept-request-url"}], "title": "6.4.2. Network Intercepts"}, {"refs": [{"id": "ref-for-concept-request-url\u2460"}], "title": "6.4.3.12. The network.RequestData Type"}, {"refs": [{"id": "ref-for-concept-request-url\u2461"}], "title": "6.4.4.2. The network.continueRequest Command"}], "external": true};
window.dfnpanelData['3268a8eb'] = {"dfnID": "3268a8eb", "url": "https://fetch.spec.whatwg.org/#concept-response-url", "dfnText": "url (for response)", "refSections": [{"refs": [{"id": "ref-for-concept-response-url"}, {"id": "ref-for-concept-response-url\u2460"}], "title": "6.4.3.14. The network.ResponseData Type"}], "external": true};
window.dfnpanelData['1ab127d6'] = {"dfnID": "1ab127d6", "url": "https://fetch.spec.whatwg.org/#concept-request-window", "dfnText": "window", "refSections": [{"refs": [{"id": "ref-for-concept-request-window"}, {"id": "ref-for-concept-request-window\u2460"}], "title": "6.4.3.3. The network.BaseParameters Type"}], "external": true};
window.dfnpanelData['927f9c6b'] = {"dfnID": "927f9c6b", "url": "https://drafts.fxtf.org/geometry/#rectangle-height-dimension", "dfnText": "height dimension", "refSections": [{"refs": [{"id": "ref-for-rectangle-height-dimension"}, {"id": "ref-for-rectangle-height-dimension\u2460"}, {"id": "ref-for-rectangle-height-dimension\u2461"}, {"id": "ref-for-rectangle-height-dimension\u2462"}, {"id": "ref-for-rectangle-height-dimension\u2463"}, {"id": "ref-for-rectangle-height-dimension\u2464"}, {"id": "ref-for-rectangle-height-dimension\u2465"}, {"id": "ref-for-rectangle-height-dimension\u2466"}, {"id": "ref-for-rectangle-height-dimension\u2467"}, {"id": "ref-for-rectangle-height-dimension\u2468"}, {"id": "ref-for-rectangle-height-dimension\u2460\u24ea"}, {"id": "ref-for-rectangle-height-dimension\u2460\u2460"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}], "external": true};
window.dfnpanelData['759027a7'] = {"dfnID": "759027a7", "url": "https://drafts.fxtf.org/geometry/#rectangle-width-dimension", "dfnText": "width dimension", "refSections": [{"refs": [{"id": "ref-for-rectangle-width-dimension"}, {"id": "ref-for-rectangle-width-dimension\u2460"}, {"id": "ref-for-rectangle-width-dimension\u2461"}, {"id": "ref-for-rectangle-width-dimension\u2462"}, {"id": "ref-for-rectangle-width-dimension\u2463"}, {"id": "ref-for-rectangle-width-dimension\u2464"}, {"id": "ref-for-rectangle-width-dimension\u2465"}, {"id": "ref-for-rectangle-width-dimension\u2466"}, {"id": "ref-for-rectangle-width-dimension\u2467"}, {"id": "ref-for-rectangle-width-dimension\u2468"}, {"id": "ref-for-rectangle-width-dimension\u2460\u24ea"}, {"id": "ref-for-rectangle-width-dimension\u2460\u2460"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}], "external": true};
window.dfnpanelData['f20eafbd'] = {"dfnID": "f20eafbd", "url": "https://drafts.fxtf.org/geometry/#rectangle-x-coordinate", "dfnText": "x coordinate", "refSections": [{"refs": [{"id": "ref-for-rectangle-x-coordinate"}, {"id": "ref-for-rectangle-x-coordinate\u2460"}, {"id": "ref-for-rectangle-x-coordinate\u2461"}, {"id": "ref-for-rectangle-x-coordinate\u2462"}, {"id": "ref-for-rectangle-x-coordinate\u2463"}, {"id": "ref-for-rectangle-x-coordinate\u2464"}, {"id": "ref-for-rectangle-x-coordinate\u2465"}, {"id": "ref-for-rectangle-x-coordinate\u2466"}, {"id": "ref-for-rectangle-x-coordinate\u2467"}, {"id": "ref-for-rectangle-x-coordinate\u2468"}, {"id": "ref-for-rectangle-x-coordinate\u2460\u24ea"}, {"id": "ref-for-rectangle-x-coordinate\u2460\u2460"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}], "external": true};
window.dfnpanelData['f45987c0'] = {"dfnID": "f45987c0", "url": "https://drafts.fxtf.org/geometry/#rectangle-y-coordinate", "dfnText": "y coordinate", "refSections": [{"refs": [{"id": "ref-for-rectangle-y-coordinate"}, {"id": "ref-for-rectangle-y-coordinate\u2460"}, {"id": "ref-for-rectangle-y-coordinate\u2461"}, {"id": "ref-for-rectangle-y-coordinate\u2462"}, {"id": "ref-for-rectangle-y-coordinate\u2463"}, {"id": "ref-for-rectangle-y-coordinate\u2464"}, {"id": "ref-for-rectangle-y-coordinate\u2465"}, {"id": "ref-for-rectangle-y-coordinate\u2466"}, {"id": "ref-for-rectangle-y-coordinate\u2467"}, {"id": "ref-for-rectangle-y-coordinate\u2468"}, {"id": "ref-for-rectangle-y-coordinate\u2460\u24ea"}, {"id": "ref-for-rectangle-y-coordinate\u2460\u2460"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}], "external": true};
window.dfnpanelData['fdd2dd4e'] = {"dfnID": "fdd2dd4e", "url": "https://drafts.fxtf.org/geometry-1/#domrectreadonly", "dfnText": "DOMRectReadOnly", "refSections": [{"refs": [{"id": "ref-for-domrectreadonly"}, {"id": "ref-for-domrectreadonly\u2460"}, {"id": "ref-for-domrectreadonly\u2461"}, {"id": "ref-for-domrectreadonly\u2462"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}], "external": true};
window.dfnpanelData['b281322d'] = {"dfnID": "b281322d", "url": "https://w3c.github.io/hr-time/#dfn-get-time-origin-timestamp", "dfnText": "get time origin timestamp", "refSections": [{"refs": [{"id": "ref-for-dfn-get-time-origin-timestamp"}], "title": "6.4.3.7. The network.FetchTimingInfo Type"}], "external": true};
window.dfnpanelData['b4ade816'] = {"dfnID": "b4ade816", "url": "https://html.spec.whatwg.org/multipage/canvas.html#concept-canvas-2d", "dfnText": "2d", "refSections": [{"refs": [{"id": "ref-for-concept-canvas-2d"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}], "external": true};
window.dfnpanelData['73daca45'] = {"dfnID": "73daca45", "url": "https://html.spec.whatwg.org/multipage/canvas.html#2d-context-creation-algorithm", "dfnText": "2d context creation algorithm", "refSections": [{"refs": [{"id": "ref-for-2d-context-creation-algorithm"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}], "external": true};
window.dfnpanelData['b8308563'] = {"dfnID": "b8308563", "url": "https://html.spec.whatwg.org/multipage/workers.html#dedicatedworkerglobalscope", "dfnText": "DedicatedWorkerGlobalScope", "refSections": [{"refs": [{"id": "ref-for-dedicatedworkerglobalscope"}], "title": "6.5.3.10. The script.RealmInfo Type"}], "external": true};
window.dfnpanelData['5b13c537'] = {"dfnID": "5b13c537", "url": "https://html.spec.whatwg.org/multipage/canvas.html#htmlcanvaselement", "dfnText": "HTMLCanvasElement", "refSections": [{"refs": [{"id": "ref-for-htmlcanvaselement"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}], "external": true};
window.dfnpanelData['165b73c9'] = {"dfnID": "165b73c9", "url": "https://html.spec.whatwg.org/multipage/workers.html#sharedworkerglobalscope", "dfnText": "SharedWorkerGlobalScope", "refSections": [{"refs": [{"id": "ref-for-sharedworkerglobalscope"}], "title": "6.5.3.10. The script.RealmInfo Type"}], "external": true};
window.dfnpanelData['5d7209e9'] = {"dfnID": "5d7209e9", "url": "https://html.spec.whatwg.org/multipage/nav-history-apis.html#window", "dfnText": "Window", "refSections": [{"refs": [{"id": "ref-for-window"}], "title": "4. Transport"}, {"refs": [{"id": "ref-for-window\u2460"}], "title": "5. Sandboxed Script Execution"}, {"refs": [{"id": "ref-for-window\u2461"}], "title": "5.1. Sandbox Realms"}, {"refs": [{"id": "ref-for-window\u2462"}, {"id": "ref-for-window\u2463"}], "title": "5.3. SandboxWindowProxy"}, {"refs": [{"id": "ref-for-window\u2464"}], "title": "6.5.2. Preload Scripts"}, {"refs": [{"id": "ref-for-window\u2465"}, {"id": "ref-for-window\u2466"}, {"id": "ref-for-window\u2467"}, {"id": "ref-for-window\u2468"}], "title": "6.5.3.10. The script.RealmInfo Type"}], "external": true};
window.dfnpanelData['94039a0c'] = {"dfnID": "94039a0c", "url": "https://html.spec.whatwg.org/multipage/nav-history-apis.html#windowproxy", "dfnText": "WindowProxy", "refSections": [{"refs": [{"id": "ref-for-windowproxy"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": true};
window.dfnpanelData['83c59a3a'] = {"dfnID": "83c59a3a", "url": "https://html.spec.whatwg.org/multipage/workers.html#workerglobalscope", "dfnText": "WorkerGlobalScope", "refSections": [{"refs": [{"id": "ref-for-workerglobalscope"}], "title": "4. Transport"}, {"refs": [{"id": "ref-for-workerglobalscope\u2460"}, {"id": "ref-for-workerglobalscope\u2461"}], "title": "6.5.3.10. The script.RealmInfo Type"}, {"refs": [{"id": "ref-for-workerglobalscope\u2462"}], "title": "6.5.4.5. The script.getRealms Command"}], "external": true};
window.dfnpanelData['0c9b0d3c'] = {"dfnID": "0c9b0d3c", "url": "https://html.spec.whatwg.org/multipage/worklets.html#workletglobalscope", "dfnText": "WorkletGlobalScope", "refSections": [{"refs": [{"id": "ref-for-workletglobalscope"}, {"id": "ref-for-workletglobalscope\u2460"}], "title": "6.5.3.10. The script.RealmInfo Type"}], "external": true};
window.dfnpanelData['05d21d03'] = {"dfnID": "05d21d03", "url": "https://html.spec.whatwg.org/multipage/window-object.html#a-browsing-context-is-discarded", "dfnText": "a browsing context is discarded", "refSections": [{"refs": [{"id": "ref-for-a-browsing-context-is-discarded"}], "title": "7.1. HTML"}], "external": true};
window.dfnpanelData['36d15a6d'] = {"dfnID": "36d15a6d", "url": "https://html.spec.whatwg.org/multipage/interaction.html#activation-notification", "dfnText": "activation notification", "refSections": [{"refs": [{"id": "ref-for-activation-notification"}], "title": "6.5.4.3. The script.callFunction Command"}, {"refs": [{"id": "ref-for-activation-notification\u2460"}], "title": "6.5.4.4. The script.evaluate Command"}], "external": true};
window.dfnpanelData['55a6b830'] = {"dfnID": "55a6b830", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#nav-bc", "dfnText": "active browsing context", "refSections": [{"refs": [{"id": "ref-for-nav-bc"}, {"id": "ref-for-nav-bc\u2460"}], "title": "6.3.2.2. The browsingContext.Info Type"}], "external": true};
window.dfnpanelData['26513a72'] = {"dfnID": "26513a72", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#active-document", "dfnText": "active document (for browsing context)", "refSections": [{"refs": [{"id": "ref-for-active-document"}, {"id": "ref-for-active-document\u2460"}, {"id": "ref-for-active-document\u2461"}, {"id": "ref-for-active-document\u2462"}, {"id": "ref-for-active-document\u2463"}], "title": "6.3.2.2. The browsingContext.Info Type"}, {"refs": [{"id": "ref-for-active-document\u2464"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}, {"refs": [{"id": "ref-for-active-document\u2465"}], "title": "6.3.3.7. The browsingContext.navigate Command"}, {"refs": [{"id": "ref-for-active-document\u2466"}], "title": "6.3.3.8. The browsingContext.print Command"}, {"refs": [{"id": "ref-for-active-document\u2467"}], "title": "6.3.3.9. The browsingContext.reload Command"}, {"refs": [{"id": "ref-for-active-document\u2468"}], "title": "6.3.4.1. The browsingContext.contextCreated Event"}, {"refs": [{"id": "ref-for-active-document\u2460\u24ea"}], "title": "6.5.3.20. The script.Target Type"}, {"refs": [{"id": "ref-for-active-document\u2460\u2460"}], "title": "6.5.4.5. The script.getRealms Command"}, {"refs": [{"id": "ref-for-active-document\u2460\u2461"}], "title": "6.7.2.1. input.ElementOrigin"}], "external": true};
window.dfnpanelData['35972864'] = {"dfnID": "35972864", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document", "dfnText": "active document (for navigable)", "refSections": [{"refs": [{"id": "ref-for-nav-document"}, {"id": "ref-for-nav-document\u2460"}, {"id": "ref-for-nav-document\u2461"}], "title": "6.3.2.2. The browsingContext.Info Type"}], "external": true};
window.dfnpanelData['97c347af'] = {"dfnID": "97c347af", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#active-window", "dfnText": "active window", "refSections": [{"refs": [{"id": "ref-for-active-window"}], "title": "5.1. Sandbox Realms"}, {"refs": [{"id": "ref-for-active-window\u2460"}], "title": "6.4.3.3. The network.BaseParameters Type"}], "external": true};
window.dfnpanelData['235ddea5'] = {"dfnID": "235ddea5", "url": "https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-alert", "dfnText": "alert", "refSections": [{"refs": [{"id": "ref-for-dom-alert"}], "title": "6.3.3.6. The browsingContext.handleUserPrompt Command"}], "external": true};
window.dfnpanelData['1b5b1c0c'] = {"dfnID": "1b5b1c0c", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#api-base-url", "dfnText": "api base url", "refSections": [{"refs": [{"id": "ref-for-api-base-url"}], "title": "6.5.2. Preload Scripts"}, {"refs": [{"id": "ref-for-api-base-url\u2460"}], "title": "6.5.4.3. The script.callFunction Command"}, {"refs": [{"id": "ref-for-api-base-url\u2461"}], "title": "6.5.4.4. The script.evaluate Command"}], "external": true};
window.dfnpanelData['3349d69f'] = {"dfnID": "3349d69f", "url": "https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window", "dfnText": "associated document", "refSections": [{"refs": [{"id": "ref-for-concept-document-window"}], "title": "4. Transport"}, {"refs": [{"id": "ref-for-concept-document-window\u2460"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}, {"refs": [{"id": "ref-for-concept-document-window\u2461"}], "title": "6.5.2. Preload Scripts"}, {"refs": [{"id": "ref-for-concept-document-window\u2462"}, {"id": "ref-for-concept-document-window\u2463"}, {"id": "ref-for-concept-document-window\u2464"}], "title": "6.5.3.10. The script.RealmInfo Type"}, {"refs": [{"id": "ref-for-concept-document-window\u2465"}, {"id": "ref-for-concept-document-window\u2466"}], "title": "6.5.3.19. The script.Source Type"}, {"refs": [{"id": "ref-for-concept-document-window\u2467"}], "title": "6.5.3.20. The script.Target Type"}, {"refs": [{"id": "ref-for-concept-document-window\u2468"}], "title": "6.5.4.5. The script.getRealms Command"}, {"refs": [{"id": "ref-for-concept-document-window\u2460\u24ea"}, {"id": "ref-for-concept-document-window\u2460\u2460"}], "title": "6.5.5.2. The script.realmCreated Event"}, {"refs": [{"id": "ref-for-concept-document-window\u2460\u2461"}], "title": "6.5.5.3. The script.realmDestroyed Event"}, {"refs": [{"id": "ref-for-concept-document-window\u2460\u2462"}], "title": "6.7.2.1. input.ElementOrigin"}], "external": true};
window.dfnpanelData['3b0ee7a3'] = {"dfnID": "3b0ee7a3", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-script-base-url", "dfnText": "base url", "refSections": [{"refs": [{"id": "ref-for-concept-script-base-url"}, {"id": "ref-for-concept-script-base-url\u2460"}], "title": "6.3.3.7. The browsingContext.navigate Command"}, {"refs": [{"id": "ref-for-concept-script-base-url\u2461"}], "title": "6.4.4.2. The network.continueRequest Command"}], "external": true};
window.dfnpanelData['0d0390b4'] = {"dfnID": "0d0390b4", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context", "dfnText": "browsing context", "refSections": [{"refs": [{"id": "ref-for-browsing-context"}], "title": "6.3.2.1. The browsingContext.BrowsingContext Type"}, {"refs": [{"id": "ref-for-browsing-context\u2460"}, {"id": "ref-for-browsing-context\u2461"}, {"id": "ref-for-browsing-context\u2462"}, {"id": "ref-for-browsing-context\u2463"}], "title": "6.3.3.4. The browsingContext.create Command"}, {"refs": [{"id": "ref-for-browsing-context\u2464"}], "title": "6.3.4.10. The browsingContext.userPromptClosed Event"}, {"refs": [{"id": "ref-for-browsing-context\u2465"}], "title": "6.3.4.11. The browsingContext.userPromptOpened Event"}, {"refs": [{"id": "ref-for-browsing-context\u2466"}], "title": "6.4.3.3. The network.BaseParameters Type"}, {"refs": [{"id": "ref-for-browsing-context\u2467"}], "title": "6.5.2. Preload Scripts"}, {"refs": [{"id": "ref-for-browsing-context\u2468"}], "title": "6.5.3.8. The script.Realm Type"}, {"refs": [{"id": "ref-for-browsing-context\u2460\u24ea"}, {"id": "ref-for-browsing-context\u2460\u2460"}, {"id": "ref-for-browsing-context\u2460\u2461"}], "title": "6.5.3.10. The script.RealmInfo Type"}, {"refs": [{"id": "ref-for-browsing-context\u2460\u2462"}], "title": "6.5.4.5. The script.getRealms Command"}], "external": true};
window.dfnpanelData['3b2ff63e'] = {"dfnID": "3b2ff63e", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#concept-document-bc", "dfnText": "browsing context (for Document)", "refSections": [{"refs": [{"id": "ref-for-concept-document-bc"}, {"id": "ref-for-concept-document-bc\u2460"}], "title": "4. Transport"}, {"refs": [{"id": "ref-for-concept-document-bc\u2461"}], "title": "6.5.3.13. The script.RemoteValue Type"}, {"refs": [{"id": "ref-for-concept-document-bc\u2462"}], "title": "6.5.3.19. The script.Source Type"}, {"refs": [{"id": "ref-for-concept-document-bc\u2463"}], "title": "6.5.5.2. The script.realmCreated Event"}, {"refs": [{"id": "ref-for-concept-document-bc\u2464"}], "title": "6.5.5.3. The script.realmDestroyed Event"}], "external": true};
window.dfnpanelData['6d88ab2e'] = {"dfnID": "6d88ab2e", "url": "https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc", "dfnText": "browsing context (for Window)", "refSections": [{"refs": [{"id": "ref-for-window-bc"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": true};
window.dfnpanelData['f23dc013'] = {"dfnID": "f23dc013", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#child-navigable", "dfnText": "child navigable", "refSections": [{"refs": [{"id": "ref-for-child-navigable"}], "title": "6.3.2.2. The browsingContext.Info Type"}], "external": true};
window.dfnpanelData['b6a1ae3f'] = {"dfnID": "b6a1ae3f", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#clean-up-after-running-script", "dfnText": "clean up after running script", "refSections": [{"refs": [{"id": "ref-for-clean-up-after-running-script"}], "title": "6.5.2. Preload Scripts"}, {"refs": [{"id": "ref-for-clean-up-after-running-script\u2460"}, {"id": "ref-for-clean-up-after-running-script\u2461"}], "title": "6.5.4.3. The script.callFunction Command"}, {"refs": [{"id": "ref-for-clean-up-after-running-script\u2462"}], "title": "6.5.4.4. The script.evaluate Command"}], "external": true};
window.dfnpanelData['b273f87a'] = {"dfnID": "b273f87a", "url": "https://html.spec.whatwg.org/multipage/window-object.html#close-a-browsing-context", "dfnText": "close", "refSections": [{"refs": [{"id": "ref-for-close-a-browsing-context"}], "title": "6.2.2.1. The browser.close Command"}, {"refs": [{"id": "ref-for-close-a-browsing-context\u2460"}], "title": "6.3.3.3. The browsingContext.close Command"}], "external": true};
window.dfnpanelData['3752e9b0'] = {"dfnID": "3752e9b0", "url": "https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-confirm", "dfnText": "confirm", "refSections": [{"refs": [{"id": "ref-for-dom-confirm"}], "title": "6.3.3.6. The browsingContext.handleUserPrompt Command"}], "external": true};
window.dfnpanelData['9d2630e3'] = {"dfnID": "9d2630e3", "url": "https://html.spec.whatwg.org/multipage//canvas.html#offscreencanvas-context-mode", "dfnText": "context mode", "refSections": [{"refs": [{"id": "ref-for-offscreencanvas-context-mode"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}], "external": true};
window.dfnpanelData['860a2f31'] = {"dfnID": "860a2f31", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#creating-a-classic-script", "dfnText": "create a classic script", "refSections": [{"refs": [{"id": "ref-for-creating-a-classic-script"}], "title": "6.5.4.3. The script.callFunction Command"}, {"refs": [{"id": "ref-for-creating-a-classic-script\u2460"}], "title": "6.5.4.4. The script.evaluate Command"}], "external": true};
window.dfnpanelData['4a23b63a'] = {"dfnID": "4a23b63a", "url": "https://html.spec.whatwg.org/multipage/browsers.html#creating-a-new-browsing-context", "dfnText": "create a new browsing context", "refSections": [{"refs": [{"id": "ref-for-creating-a-new-browsing-context"}], "title": "6.3.4.1. The browsingContext.contextCreated Event"}], "external": true};
window.dfnpanelData['12b8dfc0'] = {"dfnID": "12b8dfc0", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object", "dfnText": "current settings object", "refSections": [{"refs": [{"id": "ref-for-current-settings-object"}], "title": "6.6.3.1. The log.entryAdded Event"}], "external": true};
window.dfnpanelData['180e7028'] = {"dfnID": "180e7028", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#default-classic-script-fetch-options", "dfnText": "default classic script fetch options", "refSections": [{"refs": [{"id": "ref-for-default-classic-script-fetch-options"}], "title": "6.5.2. Preload Scripts"}, {"refs": [{"id": "ref-for-default-classic-script-fetch-options\u2460"}], "title": "6.5.4.3. The script.callFunction Command"}, {"refs": [{"id": "ref-for-default-classic-script-fetch-options\u2461"}], "title": "6.5.4.4. The script.evaluate Command"}], "external": true};
window.dfnpanelData['3e12e042'] = {"dfnID": "3e12e042", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object", "dfnText": "environment settings object", "refSections": [{"refs": [{"id": "ref-for-environment-settings-object"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}, {"refs": [{"id": "ref-for-environment-settings-object\u2460"}], "title": "6.4.3.3. The network.BaseParameters Type"}, {"refs": [{"id": "ref-for-environment-settings-object\u2461"}], "title": "6.5.3.12. The script.RemoteReference Type"}, {"refs": [{"id": "ref-for-environment-settings-object\u2462"}], "title": "6.5.3.19. The script.Source Type"}, {"refs": [{"id": "ref-for-environment-settings-object\u2463"}], "title": "6.5.3.20. The script.Target Type"}, {"refs": [{"id": "ref-for-environment-settings-object\u2464"}], "title": "6.5.4.3. The script.callFunction Command"}, {"refs": [{"id": "ref-for-environment-settings-object\u2465"}], "title": "6.5.4.4. The script.evaluate Command"}, {"refs": [{"id": "ref-for-environment-settings-object\u2466"}], "title": "6.5.4.5. The script.getRealms Command"}, {"refs": [{"id": "ref-for-environment-settings-object\u2467"}], "title": "6.5.5.1. The script.message Event"}, {"refs": [{"id": "ref-for-environment-settings-object\u2468"}, {"id": "ref-for-environment-settings-object\u2460\u24ea"}], "title": "6.5.5.2. The script.realmCreated Event"}, {"refs": [{"id": "ref-for-environment-settings-object\u2460\u2460"}, {"id": "ref-for-environment-settings-object\u2460\u2461"}], "title": "6.5.5.3. The script.realmDestroyed Event"}, {"refs": [{"id": "ref-for-environment-settings-object\u2460\u2462"}], "title": "6.7.2.1. input.ElementOrigin"}], "external": true};
window.dfnpanelData['10ae7dd2'] = {"dfnID": "10ae7dd2", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object's-realm", "dfnText": "environment settings object's realm", "refSections": [{"refs": [{"id": "ref-for-environment-settings-object's-realm"}], "title": "6.5.5.3. The script.realmDestroyed Event"}], "external": true};
window.dfnpanelData['f5265332'] = {"dfnID": "f5265332", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-execution-ready-flag", "dfnText": "execution ready flag", "refSections": [{"refs": [{"id": "ref-for-concept-environment-execution-ready-flag"}], "title": "6.5.4.5. The script.getRealms Command"}, {"refs": [{"id": "ref-for-concept-environment-execution-ready-flag\u2460"}], "title": "6.5.5.2. The script.realmCreated Event"}], "external": true};
window.dfnpanelData['6b68adb6'] = {"dfnID": "6b68adb6", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#focused-area-of-the-document", "dfnText": "focused area of the document", "refSections": [{"refs": [{"id": "ref-for-focused-area-of-the-document"}], "title": "6.3.3.1. The browsingContext.activate Command"}], "external": true};
window.dfnpanelData['fe07e8b2'] = {"dfnID": "fe07e8b2", "url": "https://html.spec.whatwg.org/multipage/interaction.html#focusing-steps", "dfnText": "focusing steps", "refSections": [{"refs": [{"id": "ref-for-focusing-steps"}], "title": "6.3.3.4. The browsingContext.create Command"}], "external": true};
window.dfnpanelData['8a30477b'] = {"dfnID": "8a30477b", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-global", "dfnText": "global object (for environment settings object)", "refSections": [{"refs": [{"id": "ref-for-concept-settings-object-global"}], "title": "6.4.3.3. The network.BaseParameters Type"}], "external": true};
window.dfnpanelData['168f1b6e'] = {"dfnID": "168f1b6e", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global", "dfnText": "global object (for realm)", "refSections": [{"refs": [{"id": "ref-for-concept-realm-global"}, {"id": "ref-for-concept-realm-global\u2460"}], "title": "4. Transport"}, {"refs": [{"id": "ref-for-concept-realm-global\u2461"}, {"id": "ref-for-concept-realm-global\u2462"}], "title": "6.5.3.10. The script.RealmInfo Type"}, {"refs": [{"id": "ref-for-concept-realm-global\u2463"}], "title": "6.5.3.12. The script.RemoteReference Type"}, {"refs": [{"id": "ref-for-concept-realm-global\u2464"}], "title": "6.5.4.5. The script.getRealms Command"}], "external": true};
window.dfnpanelData['d6817f23'] = {"dfnID": "d6817f23", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-error-handled", "dfnText": "handled", "refSections": [{"refs": [{"id": "ref-for-concept-error-handled"}], "title": "7.1. HTML"}], "external": true};
window.dfnpanelData['45e3552a'] = {"dfnID": "45e3552a", "url": "https://html.spec.whatwg.org/multipage/canvas.html#dom-canvas-height", "dfnText": "height", "refSections": [{"refs": [{"id": "ref-for-dom-canvas-height"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}], "external": true};
window.dfnpanelData['f449f7f7'] = {"dfnID": "f449f7f7", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#system-visibility-state", "dfnText": "hidden", "refSections": [{"refs": [{"id": "ref-for-system-visibility-state"}, {"id": "ref-for-system-visibility-state\u2460"}, {"id": "ref-for-system-visibility-state\u2461"}, {"id": "ref-for-system-visibility-state\u2462"}, {"id": "ref-for-system-visibility-state\u2463"}], "title": "6.3.3.1. The browsingContext.activate Command"}], "external": true};
window.dfnpanelData['bbdbe8e2'] = {"dfnID": "bbdbe8e2", "url": "https://html.spec.whatwg.org/multipage/browsing-the-web.html#history-handling-behavior", "dfnText": "history handling behavior", "refSections": [{"refs": [{"id": "ref-for-history-handling-behavior"}], "title": "6.3.2.2. The browsingContext.Info Type"}], "external": true};
window.dfnpanelData['a72449dd'] = {"dfnID": "a72449dd", "url": "https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel", "dfnText": "in parallel", "refSections": [{"refs": [{"id": "ref-for-in-parallel"}], "title": "2. Infrastructure"}, {"refs": [{"id": "ref-for-in-parallel\u2460"}, {"id": "ref-for-in-parallel\u2461"}], "title": "6.2.2.1. The browser.close Command"}], "external": true};
window.dfnpanelData['1cd8aace'] = {"dfnID": "1cd8aace", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#navigables", "dfnText": "navigables", "refSections": [{"refs": [{"id": "ref-for-navigables"}, {"id": "ref-for-navigables\u2460"}, {"id": "ref-for-navigables\u2461"}], "title": "6.3.2.2. The browsingContext.Info Type"}, {"refs": [{"id": "ref-for-navigables\u2462"}], "title": "6.3.3.1. The browsingContext.activate Command"}], "external": true};
window.dfnpanelData['2594e562'] = {"dfnID": "2594e562", "url": "https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate", "dfnText": "navigate", "refSections": [{"refs": [{"id": "ref-for-navigate"}], "title": "6.3.2.2. The browsingContext.Info Type"}], "external": true};
window.dfnpanelData['6454d3fd'] = {"dfnID": "6454d3fd", "url": "https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigation-id", "dfnText": "navigation id", "refSections": [{"refs": [{"id": "ref-for-navigation-id"}], "title": "6.3. The browsingContext Module"}, {"refs": [{"id": "ref-for-navigation-id\u2460"}], "title": "6.3.2.2. The browsingContext.Info Type"}, {"refs": [{"id": "ref-for-navigation-id\u2461"}], "title": "6.4.3.3. The network.BaseParameters Type"}], "external": true};
window.dfnpanelData['43ac8374'] = {"dfnID": "43ac8374", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin", "dfnText": "origin", "refSections": [{"refs": [{"id": "ref-for-concept-settings-object-origin"}], "title": "6.5.3.12. The script.RemoteReference Type"}], "external": true};
window.dfnpanelData['dc248371'] = {"dfnID": "dc248371", "url": "https://html.spec.whatwg.org/multipage/workers.html#concept-WorkerGlobalScope-owner-set", "dfnText": "owner set", "refSections": [{"refs": [{"id": "ref-for-concept-WorkerGlobalScope-owner-set"}], "title": "4. Transport"}, {"refs": [{"id": "ref-for-concept-WorkerGlobalScope-owner-set\u2460"}], "title": "6.5.4.5. The script.getRealms Command"}], "external": true};
window.dfnpanelData['1bba3db7'] = {"dfnID": "1bba3db7", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#nav-parent", "dfnText": "parent", "refSections": [{"refs": [{"id": "ref-for-nav-parent"}], "title": "6.3.2.2. The browsingContext.Info Type"}], "external": true};
window.dfnpanelData['c2359c09'] = {"dfnID": "c2359c09", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#prepare-to-run-script", "dfnText": "prepare to run script", "refSections": [{"refs": [{"id": "ref-for-prepare-to-run-script"}], "title": "6.5.2. Preload Scripts"}, {"refs": [{"id": "ref-for-prepare-to-run-script\u2460"}, {"id": "ref-for-prepare-to-run-script\u2461"}], "title": "6.5.4.3. The script.callFunction Command"}, {"refs": [{"id": "ref-for-prepare-to-run-script\u2462"}], "title": "6.5.4.4. The script.evaluate Command"}], "external": true};
window.dfnpanelData['17555c59'] = {"dfnID": "17555c59", "url": "https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-prompt", "dfnText": "prompt", "refSections": [{"refs": [{"id": "ref-for-dom-prompt"}], "title": "6.3.3.6. The browsingContext.handleUserPrompt Command"}], "external": true};
window.dfnpanelData['5bec656b'] = {"dfnID": "5bec656b", "url": "https://html.spec.whatwg.org/multipage/browsing-the-web.html#prompt-to-unload-a-document", "dfnText": "prompt to unload", "refSections": [{"refs": [{"id": "ref-for-prompt-to-unload-a-document"}], "title": "6.2.2.1. The browser.close Command"}, {"refs": [{"id": "ref-for-prompt-to-unload-a-document\u2460"}], "title": "6.3.3.6. The browsingContext.handleUserPrompt Command"}], "external": true};
window.dfnpanelData['ce15d5dc'] = {"dfnID": "ce15d5dc", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#realm-execution-context", "dfnText": "realm execution context", "refSections": [{"refs": [{"id": "ref-for-realm-execution-context"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}, {"refs": [{"id": "ref-for-realm-execution-context\u2460"}], "title": "6.5.2. Preload Scripts"}, {"refs": [{"id": "ref-for-realm-execution-context\u2461"}], "title": "6.5.3.10. The script.RealmInfo Type"}, {"refs": [{"id": "ref-for-realm-execution-context\u2462"}], "title": "6.5.3.12. The script.RemoteReference Type"}, {"refs": [{"id": "ref-for-realm-execution-context\u2463"}], "title": "6.5.3.19. The script.Source Type"}, {"refs": [{"id": "ref-for-realm-execution-context\u2464"}], "title": "6.5.3.20. The script.Target Type"}, {"refs": [{"id": "ref-for-realm-execution-context\u2465"}], "title": "6.5.4.3. The script.callFunction Command"}, {"refs": [{"id": "ref-for-realm-execution-context\u2466"}], "title": "6.5.4.4. The script.evaluate Command"}, {"refs": [{"id": "ref-for-realm-execution-context\u2467"}], "title": "6.5.5.1. The script.message Event"}, {"refs": [{"id": "ref-for-realm-execution-context\u2468"}], "title": "6.5.5.3. The script.realmDestroyed Event"}, {"refs": [{"id": "ref-for-realm-execution-context\u2460\u24ea"}], "title": "6.7.2.1. input.ElementOrigin"}], "external": true};
window.dfnpanelData['e99bd18e'] = {"dfnID": "e99bd18e", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global", "dfnText": "relevant global object", "refSections": [{"refs": [{"id": "ref-for-concept-relevant-global"}, {"id": "ref-for-concept-relevant-global\u2460"}], "title": "4. Transport"}, {"refs": [{"id": "ref-for-concept-relevant-global\u2461"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}, {"refs": [{"id": "ref-for-concept-relevant-global\u2462"}], "title": "6.5.2. Preload Scripts"}, {"refs": [{"id": "ref-for-concept-relevant-global\u2463"}], "title": "6.5.3.10. The script.RealmInfo Type"}, {"refs": [{"id": "ref-for-concept-relevant-global\u2464"}], "title": "6.5.3.20. The script.Target Type"}, {"refs": [{"id": "ref-for-concept-relevant-global\u2465"}], "title": "6.5.4.5. The script.getRealms Command"}, {"refs": [{"id": "ref-for-concept-relevant-global\u2466"}, {"id": "ref-for-concept-relevant-global\u2467"}], "title": "6.5.5.2. The script.realmCreated Event"}, {"refs": [{"id": "ref-for-concept-relevant-global\u2468"}], "title": "6.5.5.3. The script.realmDestroyed Event"}, {"refs": [{"id": "ref-for-concept-relevant-global\u2460\u24ea"}], "title": "6.7.2.1. input.ElementOrigin"}], "external": true};
window.dfnpanelData['5991ccfb'] = {"dfnID": "5991ccfb", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm", "dfnText": "relevant realm", "refSections": [{"refs": [{"id": "ref-for-concept-relevant-realm"}], "title": "6.5.5.3. The script.realmDestroyed Event"}], "external": true};
window.dfnpanelData['4a0606cc'] = {"dfnID": "4a0606cc", "url": "https://html.spec.whatwg.org/multipage/browsers.html#bcg-remove", "dfnText": "remove a browsing context", "refSections": [{"refs": [{"id": "ref-for-bcg-remove"}], "title": "7.1. HTML"}], "external": true};
window.dfnpanelData['d908b2b2'] = {"dfnID": "d908b2b2", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#report-the-error", "dfnText": "report an error", "refSections": [{"refs": [{"id": "ref-for-report-the-error"}], "title": "7.1. HTML"}], "external": true};
window.dfnpanelData['04e154c5'] = {"dfnID": "04e154c5", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#report-the-exception", "dfnText": "report the exception", "refSections": [{"refs": [{"id": "ref-for-report-the-exception"}, {"id": "ref-for-report-the-exception\u2460"}, {"id": "ref-for-report-the-exception\u2461"}], "title": "6.5.2. Preload Scripts"}], "external": true};
window.dfnpanelData['e3288657'] = {"dfnID": "e3288657", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#responsible-event-loop", "dfnText": "responsible event loop", "refSections": [{"refs": [{"id": "ref-for-responsible-event-loop"}], "title": "6.5.5.3. The script.realmDestroyed Event"}], "external": true};
window.dfnpanelData['385fbb31'] = {"dfnID": "385fbb31", "url": "https://html.spec.whatwg.org/multipage/imagebitmap-and-animations.html#run-the-animation-frame-callbacks", "dfnText": "run the animation frame callbacks", "refSections": [{"refs": [{"id": "ref-for-run-the-animation-frame-callbacks"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}, {"refs": [{"id": "ref-for-run-the-animation-frame-callbacks\u2460"}], "title": "6.3.3.8. The browsingContext.print Command"}], "external": true};
window.dfnpanelData['94b4d250'] = {"dfnID": "94b4d250", "url": "https://html.spec.whatwg.org/multipage/browsers.html#same-origin-domain", "dfnText": "same origin domain", "refSections": [{"refs": [{"id": "ref-for-same-origin-domain"}], "title": "6.5.3.12. The script.RemoteReference Type"}], "external": true};
window.dfnpanelData['dae0bfde'] = {"dfnID": "dae0bfde", "url": "https://html.spec.whatwg.org/multipage/browsers.html#ascii-serialisation-of-an-origin", "dfnText": "serialization of an origin", "refSections": [{"refs": [{"id": "ref-for-ascii-serialisation-of-an-origin"}], "title": "6.5.3.10. The script.RealmInfo Type"}], "external": true};
window.dfnpanelData['48093925'] = {"dfnID": "48093925", "url": "https://html.spec.whatwg.org/multipage/history.html#session-history", "dfnText": "session history", "refSections": [{"refs": [{"id": "ref-for-session-history"}], "title": "7.1. HTML"}], "external": true};
window.dfnpanelData['7ecc7f3d'] = {"dfnID": "7ecc7f3d", "url": "https://html.spec.whatwg.org/multipage/window-object.html#set-up-a-window-environment-settings-object", "dfnText": "set up a window environment settings object", "refSections": [{"refs": [{"id": "ref-for-set-up-a-window-environment-settings-object"}], "title": "6.5.5.2. The script.realmCreated Event"}], "external": true};
window.dfnpanelData['bbb5f6df'] = {"dfnID": "bbb5f6df", "url": "https://html.spec.whatwg.org/multipage/workers.html#set-up-a-worker-environment-settings-object", "dfnText": "set up a worker environment settings object", "refSections": [{"refs": [{"id": "ref-for-set-up-a-worker-environment-settings-object"}], "title": "6.5.5.2. The script.realmCreated Event"}], "external": true};
window.dfnpanelData['1cc25024'] = {"dfnID": "1cc25024", "url": "https://html.spec.whatwg.org/multipage/worklets.html#set-up-a-worklet-environment-settings-object", "dfnText": "set up a worklet environment settings object", "refSections": [{"refs": [{"id": "ref-for-set-up-a-worklet-environment-settings-object"}], "title": "6.5.5.2. The script.realmCreated Event"}], "external": true};
window.dfnpanelData['f1eccc95'] = {"dfnID": "f1eccc95", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#settings-object", "dfnText": "settings object", "refSections": [{"refs": [{"id": "ref-for-settings-object"}], "title": "4. Transport"}, {"refs": [{"id": "ref-for-settings-object\u2460"}], "title": "6.6.3.1. The log.entryAdded Event"}], "external": true};
window.dfnpanelData['995692ee'] = {"dfnID": "995692ee", "url": "https://html.spec.whatwg.org/multipage/workers.html#shared-workers", "dfnText": "shared worker", "refSections": [{"refs": [{"id": "ref-for-shared-workers"}], "title": "3.6. Events"}], "external": true};
window.dfnpanelData['124a994b'] = {"dfnID": "124a994b", "url": "https://html.spec.whatwg.org/multipage/interaction.html#system-focus", "dfnText": "system focus", "refSections": [{"refs": [{"id": "ref-for-system-focus"}], "title": "6.3.3.1. The browsingContext.activate Command"}], "external": true};
window.dfnpanelData['ecf857b3'] = {"dfnID": "ecf857b3", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#system-visibility-state", "dfnText": "system visibility state", "refSections": [{"refs": [{"id": "ref-for-system-visibility-state"}, {"id": "ref-for-system-visibility-state\u2460"}, {"id": "ref-for-system-visibility-state\u2461"}, {"id": "ref-for-system-visibility-state\u2462"}, {"id": "ref-for-system-visibility-state\u2463"}], "title": "6.3.3.1. The browsingContext.activate Command"}], "external": true};
window.dfnpanelData['a41b1317'] = {"dfnID": "a41b1317", "url": "https://html.spec.whatwg.org/multipage/workers.html#terminate-a-worker", "dfnText": "terminate a worker", "refSections": [{"refs": [{"id": "ref-for-terminate-a-worker"}], "title": "6.5.5.3. The script.realmDestroyed Event"}], "external": true};
window.dfnpanelData['e9c58cef'] = {"dfnID": "e9c58cef", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-time-origin", "dfnText": "time origin", "refSections": [{"refs": [{"id": "ref-for-concept-settings-object-time-origin"}], "title": "6.4.3.7. The network.FetchTimingInfo Type"}], "external": true};
window.dfnpanelData['ae2a6342'] = {"dfnID": "ae2a6342", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context", "dfnText": "top-level browsing context", "refSections": [{"refs": [{"id": "ref-for-top-level-browsing-context"}, {"id": "ref-for-top-level-browsing-context\u2460"}], "title": "3.6. Events"}, {"refs": [{"id": "ref-for-top-level-browsing-context\u2461"}, {"id": "ref-for-top-level-browsing-context\u2462"}], "title": "6.1.1. Definition"}, {"refs": [{"id": "ref-for-top-level-browsing-context\u2463"}], "title": "6.2.2.1. The browser.close Command"}, {"refs": [{"id": "ref-for-top-level-browsing-context\u2464"}], "title": "6.3.3.1. The browsingContext.activate Command"}, {"refs": [{"id": "ref-for-top-level-browsing-context\u2465"}, {"id": "ref-for-top-level-browsing-context\u2466"}, {"id": "ref-for-top-level-browsing-context\u2467"}], "title": "6.3.3.3. The browsingContext.close Command"}, {"refs": [{"id": "ref-for-top-level-browsing-context\u2468"}, {"id": "ref-for-top-level-browsing-context\u2460\u24ea"}, {"id": "ref-for-top-level-browsing-context\u2460\u2460"}], "title": "6.3.3.4. The browsingContext.create Command"}, {"refs": [{"id": "ref-for-top-level-browsing-context\u2460\u2461"}], "title": "6.3.3.5. The browsingContext.getTree Command"}, {"refs": [{"id": "ref-for-top-level-browsing-context\u2460\u2462"}], "title": "6.3.3.10. The browsingContext.setViewport Command"}, {"refs": [{"id": "ref-for-top-level-browsing-context\u2460\u2463"}], "title": "6.5.2. Preload Scripts"}, {"refs": [{"id": "ref-for-top-level-browsing-context\u2460\u2464"}], "title": "6.5.4.1. The script.addPreloadScript Command"}, {"refs": [{"id": "ref-for-top-level-browsing-context\u2460\u2465"}], "title": "6.5.5.2. The script.realmCreated Event"}, {"refs": [{"id": "ref-for-top-level-browsing-context\u2460\u2466"}], "title": "6.6.3.1. The log.entryAdded Event"}, {"refs": [{"id": "ref-for-top-level-browsing-context\u2460\u2467"}], "title": "6.7.3.1. The input.performActions Command"}, {"refs": [{"id": "ref-for-top-level-browsing-context\u2460\u2468"}], "title": "6.7.3.2. The input.releaseActions Command"}, {"refs": [{"id": "ref-for-top-level-browsing-context\u2461\u24ea"}], "title": "7.1. HTML"}], "external": true};
window.dfnpanelData['d0c1b934'] = {"dfnID": "d0c1b934", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#traversable-navigable", "dfnText": "traversable navigable", "refSections": [{"refs": [{"id": "ref-for-traversable-navigable"}], "title": "6.3.3.1. The browsingContext.activate Command"}], "external": true};
window.dfnpanelData['4411082c'] = {"dfnID": "4411082c", "url": "https://html.spec.whatwg.org/multipage/document-lifecycle.html#unloading-document-cleanup-steps", "dfnText": "unloading document cleanup steps", "refSections": [{"refs": [{"id": "ref-for-unloading-document-cleanup-steps"}], "title": "6.5.5.3. The script.realmDestroyed Event"}], "external": true};
window.dfnpanelData['f245d73f'] = {"dfnID": "f245d73f", "url": "https://html.spec.whatwg.org/multipage/document-sequences.html#system-visibility-state", "dfnText": "visible", "refSections": [{"refs": [{"id": "ref-for-system-visibility-state"}, {"id": "ref-for-system-visibility-state\u2460"}, {"id": "ref-for-system-visibility-state\u2461"}, {"id": "ref-for-system-visibility-state\u2462"}, {"id": "ref-for-system-visibility-state\u2463"}], "title": "6.3.3.1. The browsingContext.activate Command"}], "external": true};
window.dfnpanelData['5474e1ba'] = {"dfnID": "5474e1ba", "url": "https://html.spec.whatwg.org/multipage/canvas.html#dom-canvas-width", "dfnText": "width", "refSections": [{"refs": [{"id": "ref-for-dom-canvas-width"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}], "external": true};
window.dfnpanelData['f7061546'] = {"dfnID": "f7061546", "url": "https://html.spec.whatwg.org/multipage/window-object.html#window-open-steps", "dfnText": "window open steps", "refSections": [{"refs": [{"id": "ref-for-window-open-steps"}], "title": "6.3.3.4. The browsingContext.create Command"}], "external": true};
window.dfnpanelData['aaaa2760'] = {"dfnID": "aaaa2760", "url": "https://html.spec.whatwg.org/multipage/webappapis.html#worker-event-loop-2", "dfnText": "worker event loop", "refSections": [{"refs": [{"id": "ref-for-worker-event-loop-2"}], "title": "6.5.5.3. The script.realmDestroyed Event"}], "external": true};
window.dfnpanelData['18e19756'] = {"dfnID": "18e19756", "url": "https://html.spec.whatwg.org/multipage/worklets.html#concept-document-worklet-global-scopes", "dfnText": "worklet global scopes", "refSections": [{"refs": [{"id": "ref-for-concept-document-worklet-global-scopes"}], "title": "6.5.5.3. The script.realmDestroyed Event"}], "external": true};
window.dfnpanelData['53275e46'] = {"dfnID": "53275e46", "url": "https://infra.spec.whatwg.org/#list-append", "dfnText": "append (for list)", "refSections": [{"refs": [{"id": "ref-for-list-append"}, {"id": "ref-for-list-append\u2460"}], "title": "6.4.2. Network Intercepts"}, {"refs": [{"id": "ref-for-list-append\u2461"}], "title": "6.4.3.1. The network.AuthChallenge Type"}, {"refs": [{"id": "ref-for-list-append\u2462"}], "title": "6.4.4.1. The network.addIntercept Command"}], "external": true};
window.dfnpanelData['a3b18719'] = {"dfnID": "a3b18719", "url": "https://infra.spec.whatwg.org/#set-append", "dfnText": "append (for set)", "refSections": [{"refs": [{"id": "ref-for-set-append"}, {"id": "ref-for-set-append\u2460"}], "title": "4. Transport"}], "external": true};
window.dfnpanelData['f43d6978'] = {"dfnID": "f43d6978", "url": "https://infra.spec.whatwg.org/#ascii-alphanumeric", "dfnText": "ascii alphanumeric", "refSections": [{"refs": [{"id": "ref-for-ascii-alphanumeric"}], "title": "6.4.3.16. The network.UrlPattern Type"}], "external": true};
window.dfnpanelData['3b38c2fe'] = {"dfnID": "3b38c2fe", "url": "https://infra.spec.whatwg.org/#ascii-digit", "dfnText": "ascii digit", "refSections": [{"refs": [{"id": "ref-for-ascii-digit"}], "title": "6.4.3.16. The network.UrlPattern Type"}], "external": true};
window.dfnpanelData['6f2dfa22'] = {"dfnID": "6f2dfa22", "url": "https://infra.spec.whatwg.org/#ascii-lowercase", "dfnText": "ascii lowercase", "refSections": [{"refs": [{"id": "ref-for-ascii-lowercase"}], "title": "6.4.3.16. The network.UrlPattern Type"}], "external": true};
window.dfnpanelData['77b4c09a'] = {"dfnID": "77b4c09a", "url": "https://infra.spec.whatwg.org/#assert", "dfnText": "assert", "refSections": [{"refs": [{"id": "ref-for-assert"}, {"id": "ref-for-assert\u2460"}], "title": "4. Transport"}, {"refs": [{"id": "ref-for-assert\u2461"}], "title": "4.1. Establishing a Connection"}, {"refs": [{"id": "ref-for-assert\u2462"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": true};
window.dfnpanelData['3de9e659'] = {"dfnID": "3de9e659", "url": "https://infra.spec.whatwg.org/#byte-sequence", "dfnText": "byte sequence", "refSections": [{"refs": [{"id": "ref-for-byte-sequence"}, {"id": "ref-for-byte-sequence\u2460"}], "title": "6.4.3.4. The network.BytesValue Type"}, {"refs": [{"id": "ref-for-byte-sequence\u2461"}], "title": "6.4.3.6. The network.CookieHeader Type"}, {"refs": [{"id": "ref-for-byte-sequence\u2462"}], "title": "6.4.3.12. The network.RequestData Type"}, {"refs": [{"id": "ref-for-byte-sequence\u2463"}], "title": "6.4.3.15. The network.SetCookieHeader Type"}, {"refs": [{"id": "ref-for-byte-sequence\u2464"}], "title": "6.4.4.2. The network.continueRequest Command"}], "external": true};
window.dfnpanelData['970896d2'] = {"dfnID": "970896d2", "url": "https://infra.spec.whatwg.org/#byte-case-insensitive", "dfnText": "byte-case-insensitive", "refSections": [{"refs": [{"id": "ref-for-byte-case-insensitive"}], "title": "6.4.3.1. The network.AuthChallenge Type"}, {"refs": [{"id": "ref-for-byte-case-insensitive\u2460"}], "title": "6.4.3.12. The network.RequestData Type"}], "external": true};
window.dfnpanelData['7838e1c1'] = {"dfnID": "7838e1c1", "url": "https://infra.spec.whatwg.org/#byte-lowercase", "dfnText": "byte-lowercase", "refSections": [{"refs": [{"id": "ref-for-byte-lowercase"}], "title": "6.4.4.2. The network.continueRequest Command"}, {"refs": [{"id": "ref-for-byte-lowercase\u2460"}], "title": "6.4.4.3. The network.continueResponse Command"}], "external": true};
window.dfnpanelData['027e3e49'] = {"dfnID": "027e3e49", "url": "https://infra.spec.whatwg.org/#list-clone", "dfnText": "clone (for list)", "refSections": [{"refs": [{"id": "ref-for-list-clone"}, {"id": "ref-for-list-clone\u2460"}], "title": "6.1.1. Definition"}], "external": true};
window.dfnpanelData['ab3919d2'] = {"dfnID": "ab3919d2", "url": "https://infra.spec.whatwg.org/#map-clone", "dfnText": "clone (for map)", "refSections": [{"refs": [{"id": "ref-for-map-clone"}, {"id": "ref-for-map-clone\u2460"}, {"id": "ref-for-map-clone\u2461"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": true};
window.dfnpanelData['915aff5e'] = {"dfnID": "915aff5e", "url": "https://infra.spec.whatwg.org/#code-point", "dfnText": "code point", "refSections": [{"refs": [{"id": "ref-for-code-point"}], "title": "6.4.3.15. The network.SetCookieHeader Type"}], "external": true};
window.dfnpanelData['951b74c1'] = {"dfnID": "951b74c1", "url": "https://infra.spec.whatwg.org/#code-unit-substring", "dfnText": "code unit substring", "refSections": [{"refs": [{"id": "ref-for-code-unit-substring"}], "title": "6.4.3.14. The network.ResponseData Type"}], "external": true};
window.dfnpanelData['4a3bf5fb'] = {"dfnID": "4a3bf5fb", "url": "https://infra.spec.whatwg.org/#string-concatenate", "dfnText": "concatenate", "refSections": [{"refs": [{"id": "ref-for-string-concatenate"}], "title": "6.5.4.3. The script.callFunction Command"}], "external": true};
window.dfnpanelData['ae8def21'] = {"dfnID": "ae8def21", "url": "https://infra.spec.whatwg.org/#list-contain", "dfnText": "contain (for list)", "refSections": [{"refs": [{"id": "ref-for-list-contain"}, {"id": "ref-for-list-contain\u2460"}], "title": "3.6. Events"}, {"refs": [{"id": "ref-for-list-contain\u2461"}], "title": "4. Transport"}, {"refs": [{"id": "ref-for-list-contain\u2462"}], "title": "6.1.1. Definition"}, {"refs": [{"id": "ref-for-list-contain\u2463"}], "title": "6.4.2. Network Intercepts"}, {"refs": [{"id": "ref-for-list-contain\u2464"}, {"id": "ref-for-list-contain\u2465"}, {"id": "ref-for-list-contain\u2466"}, {"id": "ref-for-list-contain\u2467"}], "title": "6.4.3.16. The network.UrlPattern Type"}, {"refs": [{"id": "ref-for-list-contain\u2468"}], "title": "6.5.2. Preload Scripts"}], "external": true};
window.dfnpanelData['a326add7'] = {"dfnID": "a326add7", "url": "https://infra.spec.whatwg.org/#map-exists", "dfnText": "contain (for map)", "refSections": [{"refs": [{"id": "ref-for-map-exists"}], "title": "3.6. Events"}, {"refs": [{"id": "ref-for-map-exists\u2460"}, {"id": "ref-for-map-exists\u2461"}], "title": "4. Transport"}, {"refs": [{"id": "ref-for-map-exists\u2462"}, {"id": "ref-for-map-exists\u2463"}, {"id": "ref-for-map-exists\u2464"}, {"id": "ref-for-map-exists\u2465"}, {"id": "ref-for-map-exists\u2466"}, {"id": "ref-for-map-exists\u2467"}, {"id": "ref-for-map-exists\u2468"}], "title": "6.4.3.15. The network.SetCookieHeader Type"}, {"refs": [{"id": "ref-for-map-exists\u2460\u24ea"}, {"id": "ref-for-map-exists\u2460\u2460"}, {"id": "ref-for-map-exists\u2460\u2461"}, {"id": "ref-for-map-exists\u2460\u2462"}, {"id": "ref-for-map-exists\u2460\u2463"}], "title": "6.4.3.16. The network.UrlPattern Type"}, {"refs": [{"id": "ref-for-map-exists\u2460\u2464"}, {"id": "ref-for-map-exists\u2460\u2465"}, {"id": "ref-for-map-exists\u2460\u2466"}, {"id": "ref-for-map-exists\u2460\u2467"}, {"id": "ref-for-map-exists\u2460\u2468"}, {"id": "ref-for-map-exists\u2461\u24ea"}], "title": "6.4.4.2. The network.continueRequest Command"}, {"refs": [{"id": "ref-for-map-exists\u2461\u2460"}, {"id": "ref-for-map-exists\u2461\u2461"}, {"id": "ref-for-map-exists\u2461\u2462"}, {"id": "ref-for-map-exists\u2461\u2463"}, {"id": "ref-for-map-exists\u2461\u2464"}, {"id": "ref-for-map-exists\u2461\u2465"}, {"id": "ref-for-map-exists\u2461\u2466"}], "title": "6.4.4.3. The network.continueResponse Command"}, {"refs": [{"id": "ref-for-map-exists\u2461\u2467"}], "title": "6.4.4.4. The network.continueWithAuth Command"}, {"refs": [{"id": "ref-for-map-exists\u2461\u2468"}], "title": "6.4.4.5. The network.failRequest Command"}, {"refs": [{"id": "ref-for-map-exists\u2462\u24ea"}], "title": "6.4.4.6. The network.provideResponse Command"}, {"refs": [{"id": "ref-for-map-exists\u2462\u2460"}], "title": "6.4.4.7. The network.removeIntercept Command"}, {"refs": [{"id": "ref-for-map-exists\u2462\u2461"}], "title": "6.4.5.1. The network.authRequired Event"}, {"refs": [{"id": "ref-for-map-exists\u2462\u2462"}], "title": "6.5.4.6. The script.removePreloadScript Command"}, {"refs": [{"id": "ref-for-map-exists\u2462\u2463"}, {"id": "ref-for-map-exists\u2462\u2464"}], "title": "6.5.5.1. The script.message Event"}], "external": true};
window.dfnpanelData['f937b7b6'] = {"dfnID": "f937b7b6", "url": "https://infra.spec.whatwg.org/#iteration-continue", "dfnText": "continue", "refSections": [{"refs": [{"id": "ref-for-iteration-continue"}], "title": "6.5.4.5. The script.getRealms Command"}], "external": true};
window.dfnpanelData['03afaf9c'] = {"dfnID": "03afaf9c", "url": "https://infra.spec.whatwg.org/#list-empty", "dfnText": "empty", "refSections": [{"refs": [{"id": "ref-for-list-empty"}], "title": "6.1.1. Definition"}, {"refs": [{"id": "ref-for-list-empty\u2460"}], "title": "6.2.2.1. The browser.close Command"}, {"refs": [{"id": "ref-for-list-empty\u2461"}], "title": "6.3.3.8. The browsingContext.print Command"}, {"refs": [{"id": "ref-for-list-empty\u2462"}], "title": "6.4.2. Network Intercepts"}, {"refs": [{"id": "ref-for-list-empty\u2463"}], "title": "6.4.3.3. The network.BaseParameters Type"}, {"refs": [{"id": "ref-for-list-empty\u2464"}], "title": "6.4.3.16. The network.UrlPattern Type"}], "external": true};
window.dfnpanelData['16d07e10'] = {"dfnID": "16d07e10", "url": "https://infra.spec.whatwg.org/#list-iterate", "dfnText": "for each", "refSections": [{"refs": [{"id": "ref-for-list-iterate"}], "title": "4. Transport"}], "external": true};
window.dfnpanelData['73e75483'] = {"dfnID": "73e75483", "url": "https://infra.spec.whatwg.org/#forgiving-base64-decode", "dfnText": "forgiving-base64 decode", "refSections": [{"refs": [{"id": "ref-for-forgiving-base64-decode"}], "title": "6.4.3.4. The network.BytesValue Type"}], "external": true};
window.dfnpanelData['b012ccb2'] = {"dfnID": "b012ccb2", "url": "https://infra.spec.whatwg.org/#forgiving-base64-encode", "dfnText": "forgiving-base64 encode", "refSections": [{"refs": [{"id": "ref-for-forgiving-base64-encode"}], "title": "6.4.3.4. The network.BytesValue Type"}], "external": true};
window.dfnpanelData['32dd7834'] = {"dfnID": "32dd7834", "url": "https://infra.spec.whatwg.org/#map-getting-the-values", "dfnText": "get the values", "refSections": [{"refs": [{"id": "ref-for-map-getting-the-values"}], "title": "5.1. Sandbox Realms"}, {"refs": [{"id": "ref-for-map-getting-the-values\u2460"}], "title": "6.5.2. Preload Scripts"}], "external": true};
window.dfnpanelData['860300d4'] = {"dfnID": "860300d4", "url": "https://infra.spec.whatwg.org/#implementation-defined", "dfnText": "implementation-defined", "refSections": [{"refs": [{"id": "ref-for-implementation-defined"}], "title": "4. Transport"}], "external": true};
window.dfnpanelData['c88f3887'] = {"dfnID": "c88f3887", "url": "https://infra.spec.whatwg.org/#struct-item", "dfnText": "item", "refSections": [{"refs": [{"id": "ref-for-struct-item"}], "title": "6.5.2. Preload Scripts"}], "external": true};
window.dfnpanelData['0fa357c3'] = {"dfnID": "0fa357c3", "url": "https://infra.spec.whatwg.org/#string-length", "dfnText": "length", "refSections": [{"refs": [{"id": "ref-for-string-length"}], "title": "6.4.3.14. The network.ResponseData Type"}], "external": true};
window.dfnpanelData['649608b9'] = {"dfnID": "649608b9", "url": "https://infra.spec.whatwg.org/#list", "dfnText": "list", "refSections": [{"refs": [{"id": "ref-for-list"}], "title": "3.2. Session"}, {"refs": [{"id": "ref-for-list\u2460"}], "title": "6.3.2.2. The browsingContext.Info Type"}, {"refs": [{"id": "ref-for-list\u2461"}, {"id": "ref-for-list\u2462"}], "title": "6.3.3.5. The browsingContext.getTree Command"}, {"refs": [{"id": "ref-for-list\u2463"}], "title": "6.3.3.8. The browsingContext.print Command"}, {"refs": [{"id": "ref-for-list\u2464"}], "title": "6.4.3.1. The network.AuthChallenge Type"}, {"refs": [{"id": "ref-for-list\u2465"}, {"id": "ref-for-list\u2466"}], "title": "6.4.4.1. The network.addIntercept Command"}, {"refs": [{"id": "ref-for-list\u2467"}], "title": "6.5.3.13. The script.RemoteValue Type"}, {"refs": [{"id": "ref-for-list\u2468"}], "title": "6.5.4.1. The script.addPreloadScript Command"}, {"refs": [{"id": "ref-for-list\u2460\u24ea"}, {"id": "ref-for-list\u2460\u2460"}], "title": "6.5.4.3. The script.callFunction Command"}, {"refs": [{"id": "ref-for-list\u2460\u2461"}, {"id": "ref-for-list\u2460\u2462"}], "title": "6.5.4.5. The script.getRealms Command"}, {"refs": [{"id": "ref-for-list\u2460\u2463"}], "title": "6.6. The log Module"}], "external": true};
window.dfnpanelData['3fca5a9e'] = {"dfnID": "3fca5a9e", "url": "https://infra.spec.whatwg.org/#ordered-map", "dfnText": "map", "refSections": [{"refs": [{"id": "ref-for-ordered-map"}], "title": "2. Infrastructure"}, {"refs": [{"id": "ref-for-ordered-map\u2460"}], "title": "3.6. Events"}, {"refs": [{"id": "ref-for-ordered-map\u2461"}, {"id": "ref-for-ordered-map\u2462"}, {"id": "ref-for-ordered-map\u2463"}, {"id": "ref-for-ordered-map\u2464"}, {"id": "ref-for-ordered-map\u2465"}], "title": "4. Transport"}, {"refs": [{"id": "ref-for-ordered-map\u2466"}], "title": "5.1. Sandbox Realms"}, {"refs": [{"id": "ref-for-ordered-map\u2467"}, {"id": "ref-for-ordered-map\u2468"}, {"id": "ref-for-ordered-map\u2460\u24ea"}], "title": "6.1.1. Definition"}, {"refs": [{"id": "ref-for-ordered-map\u2460\u2460"}], "title": "6.1.3.1. The session.status Command"}, {"refs": [{"id": "ref-for-ordered-map\u2460\u2461"}], "title": "6.1.3.2. The session.new Command"}, {"refs": [{"id": "ref-for-ordered-map\u2460\u2462"}], "title": "6.1.3.4. The session.subscribe Command"}, {"refs": [{"id": "ref-for-ordered-map\u2460\u2463"}, {"id": "ref-for-ordered-map\u2460\u2464"}, {"id": "ref-for-ordered-map\u2460\u2465"}, {"id": "ref-for-ordered-map\u2460\u2466"}], "title": "6.3.2.2. The browsingContext.Info Type"}, {"refs": [{"id": "ref-for-ordered-map\u2460\u2467"}], "title": "6.3.2.4. The browsingContext.NavigationInfo Type"}, {"refs": [{"id": "ref-for-ordered-map\u2460\u2468"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}, {"refs": [{"id": "ref-for-ordered-map\u2461\u24ea"}], "title": "6.3.3.4. The browsingContext.create Command"}, {"refs": [{"id": "ref-for-ordered-map\u2461\u2460"}], "title": "6.3.3.5. The browsingContext.getTree Command"}, {"refs": [{"id": "ref-for-ordered-map\u2461\u2461"}, {"id": "ref-for-ordered-map\u2461\u2462"}, {"id": "ref-for-ordered-map\u2461\u2463"}], "title": "6.3.3.8. The browsingContext.print Command"}, {"refs": [{"id": "ref-for-ordered-map\u2461\u2464"}], "title": "6.3.4.1. The browsingContext.contextCreated Event"}, {"refs": [{"id": "ref-for-ordered-map\u2461\u2465"}], "title": "6.3.4.2. The browsingContext.contextDestroyed Event"}, {"refs": [{"id": "ref-for-ordered-map\u2461\u2466"}], "title": "6.3.4.3. The browsingContext.navigationStarted Event"}, {"refs": [{"id": "ref-for-ordered-map\u2461\u2467"}], "title": "6.3.4.4. The browsingContext.fragmentNavigated Event"}, {"refs": [{"id": "ref-for-ordered-map\u2461\u2468"}], "title": "6.3.4.5. The browsingContext.domContentLoaded Event"}, {"refs": [{"id": "ref-for-ordered-map\u2462\u24ea"}], "title": "6.3.4.6. The browsingContext.load Event"}, {"refs": [{"id": "ref-for-ordered-map\u2462\u2460"}], "title": "6.3.4.7. The browsingContext.downloadWillBegin Event"}, {"refs": [{"id": "ref-for-ordered-map\u2462\u2461"}], "title": "6.3.4.8. The browsingContext.navigationAborted Event"}, {"refs": [{"id": "ref-for-ordered-map\u2462\u2462"}], "title": "6.3.4.9. The browsingContext.navigationFailed Event"}, {"refs": [{"id": "ref-for-ordered-map\u2462\u2463"}, {"id": "ref-for-ordered-map\u2462\u2464"}], "title": "6.3.4.10. The browsingContext.userPromptClosed Event"}, {"refs": [{"id": "ref-for-ordered-map\u2462\u2465"}, {"id": "ref-for-ordered-map\u2462\u2466"}], "title": "6.3.4.11. The browsingContext.userPromptOpened Event"}, {"refs": [{"id": "ref-for-ordered-map\u2462\u2467"}, {"id": "ref-for-ordered-map\u2462\u2468"}], "title": "6.4.2. Network Intercepts"}, {"refs": [{"id": "ref-for-ordered-map\u2463\u24ea"}], "title": "6.4.3.1. The network.AuthChallenge Type"}, {"refs": [{"id": "ref-for-ordered-map\u2463\u2460"}], "title": "6.4.3.3. The network.BaseParameters Type"}, {"refs": [{"id": "ref-for-ordered-map\u2463\u2461"}, {"id": "ref-for-ordered-map\u2463\u2462"}], "title": "6.4.3.4. The network.BytesValue Type"}, {"refs": [{"id": "ref-for-ordered-map\u2463\u2463"}], "title": "6.4.3.7. The network.FetchTimingInfo Type"}, {"refs": [{"id": "ref-for-ordered-map\u2463\u2464"}], "title": "6.4.3.9. The network.Initiator Type"}, {"refs": [{"id": "ref-for-ordered-map\u2463\u2465"}], "title": "6.4.3.14. The network.ResponseData Type"}, {"refs": [{"id": "ref-for-ordered-map\u2463\u2466"}], "title": "6.4.4.1. The network.addIntercept Command"}, {"refs": [{"id": "ref-for-ordered-map\u2463\u2467"}], "title": "6.5.2. Preload Scripts"}, {"refs": [{"id": "ref-for-ordered-map\u2463\u2468"}, {"id": "ref-for-ordered-map\u2464\u24ea"}, {"id": "ref-for-ordered-map\u2464\u2460"}], "title": "6.5.3.4. The script.ExceptionDetails Type"}, {"refs": [{"id": "ref-for-ordered-map\u2464\u2461"}], "title": "6.5.3.5. The script.Handle Type"}, {"refs": [{"id": "ref-for-ordered-map\u2464\u2462"}, {"id": "ref-for-ordered-map\u2464\u2463"}, {"id": "ref-for-ordered-map\u2464\u2464"}, {"id": "ref-for-ordered-map\u2464\u2465"}, {"id": "ref-for-ordered-map\u2464\u2466"}, {"id": "ref-for-ordered-map\u2464\u2467"}], "title": "6.5.3.9. The script.PrimitiveProtocolValue Type"}, {"refs": [{"id": "ref-for-ordered-map\u2464\u2468"}, {"id": "ref-for-ordered-map\u2465\u24ea"}, {"id": "ref-for-ordered-map\u2465\u2460"}, {"id": "ref-for-ordered-map\u2465\u2461"}, {"id": "ref-for-ordered-map\u2465\u2462"}, {"id": "ref-for-ordered-map\u2465\u2463"}, {"id": "ref-for-ordered-map\u2465\u2464"}, {"id": "ref-for-ordered-map\u2465\u2465"}, {"id": "ref-for-ordered-map\u2465\u2466"}], "title": "6.5.3.10. The script.RealmInfo Type"}, {"refs": [{"id": "ref-for-ordered-map\u2465\u2467"}, {"id": "ref-for-ordered-map\u2465\u2468"}, {"id": "ref-for-ordered-map\u2466\u24ea"}, {"id": "ref-for-ordered-map\u2466\u2460"}, {"id": "ref-for-ordered-map\u2466\u2461"}, {"id": "ref-for-ordered-map\u2466\u2462"}, {"id": "ref-for-ordered-map\u2466\u2463"}, {"id": "ref-for-ordered-map\u2466\u2464"}, {"id": "ref-for-ordered-map\u2466\u2465"}, {"id": "ref-for-ordered-map\u2466\u2466"}, {"id": "ref-for-ordered-map\u2466\u2467"}, {"id": "ref-for-ordered-map\u2466\u2468"}, {"id": "ref-for-ordered-map\u2467\u24ea"}, {"id": "ref-for-ordered-map\u2467\u2460"}, {"id": "ref-for-ordered-map\u2467\u2461"}, {"id": "ref-for-ordered-map\u2467\u2462"}, {"id": "ref-for-ordered-map\u2467\u2463"}, {"id": "ref-for-ordered-map\u2467\u2464"}, {"id": "ref-for-ordered-map\u2467\u2465"}, {"id": "ref-for-ordered-map\u2467\u2466"}, {"id": "ref-for-ordered-map\u2467\u2467"}], "title": "6.5.3.13. The script.RemoteValue Type"}, {"refs": [{"id": "ref-for-ordered-map\u2467\u2468"}, {"id": "ref-for-ordered-map\u2468\u24ea"}], "title": "6.5.3.18. The script.StackTrace Type"}, {"refs": [{"id": "ref-for-ordered-map\u2468\u2460"}], "title": "6.5.3.19. The script.Source Type"}, {"refs": [{"id": "ref-for-ordered-map\u2468\u2461"}], "title": "6.5.4.1. The script.addPreloadScript Command"}, {"refs": [{"id": "ref-for-ordered-map\u2468\u2462"}, {"id": "ref-for-ordered-map\u2468\u2463"}, {"id": "ref-for-ordered-map\u2468\u2464"}, {"id": "ref-for-ordered-map\u2468\u2465"}, {"id": "ref-for-ordered-map\u2468\u2466"}], "title": "6.5.4.3. The script.callFunction Command"}, {"refs": [{"id": "ref-for-ordered-map\u2468\u2467"}, {"id": "ref-for-ordered-map\u2468\u2468"}, {"id": "ref-for-ordered-map\u2460\u24ea\u24ea"}, {"id": "ref-for-ordered-map\u2460\u24ea\u2460"}], "title": "6.5.4.4. The script.evaluate Command"}, {"refs": [{"id": "ref-for-ordered-map\u2460\u24ea\u2461"}], "title": "6.5.4.5. The script.getRealms Command"}, {"refs": [{"id": "ref-for-ordered-map\u2460\u24ea\u2462"}, {"id": "ref-for-ordered-map\u2460\u24ea\u2463"}, {"id": "ref-for-ordered-map\u2460\u24ea\u2464"}, {"id": "ref-for-ordered-map\u2460\u24ea\u2465"}], "title": "6.5.5.1. The script.message Event"}, {"refs": [{"id": "ref-for-ordered-map\u2460\u24ea\u2466"}, {"id": "ref-for-ordered-map\u2460\u24ea\u2467"}], "title": "6.5.5.2. The script.realmCreated Event"}, {"refs": [{"id": "ref-for-ordered-map\u2460\u24ea\u2468"}, {"id": "ref-for-ordered-map\u2460\u2460\u24ea"}, {"id": "ref-for-ordered-map\u2460\u2460\u2460"}, {"id": "ref-for-ordered-map\u2460\u2460\u2461"}, {"id": "ref-for-ordered-map\u2460\u2460\u2462"}, {"id": "ref-for-ordered-map\u2460\u2460\u2463"}], "title": "6.5.5.3. The script.realmDestroyed Event"}, {"refs": [{"id": "ref-for-ordered-map\u2460\u2460\u2464"}], "title": "6.6. The log Module"}, {"refs": [{"id": "ref-for-ordered-map\u2460\u2460\u2465"}, {"id": "ref-for-ordered-map\u2460\u2460\u2466"}, {"id": "ref-for-ordered-map\u2460\u2460\u2467"}, {"id": "ref-for-ordered-map\u2460\u2460\u2468"}, {"id": "ref-for-ordered-map\u2460\u2461\u24ea"}], "title": "6.6.3.1. The log.entryAdded Event"}, {"refs": [{"id": "ref-for-ordered-map\u2460\u2461\u2460"}], "title": "6.7.2.1. input.ElementOrigin"}], "external": true};
window.dfnpanelData['8e8decb4'] = {"dfnID": "8e8decb4", "url": "https://infra.spec.whatwg.org/#parse-a-json-string-to-an-infra-value", "dfnText": "parse json into infra values", "refSections": [{"refs": [{"id": "ref-for-parse-a-json-string-to-an-infra-value"}], "title": "4. Transport"}], "external": true};
window.dfnpanelData['99c988d6'] = {"dfnID": "99c988d6", "url": "https://infra.spec.whatwg.org/#list-remove", "dfnText": "remove (for list)", "refSections": [{"refs": [{"id": "ref-for-list-remove"}], "title": "4. Transport"}, {"refs": [{"id": "ref-for-list-remove\u2460"}], "title": "6.5.4.6. The script.removePreloadScript Command"}], "external": true};
window.dfnpanelData['7d4424b2'] = {"dfnID": "7d4424b2", "url": "https://infra.spec.whatwg.org/#map-remove", "dfnText": "remove (for map)", "refSections": [{"refs": [{"id": "ref-for-map-remove"}], "title": "6.4.4.7. The network.removeIntercept Command"}, {"refs": [{"id": "ref-for-map-remove\u2460"}], "title": "6.4.5.2. The network.beforeRequestSent Event"}], "external": true};
window.dfnpanelData['762869d3'] = {"dfnID": "762869d3", "url": "https://infra.spec.whatwg.org/#scalar-value-string", "dfnText": "scalar value string", "refSections": [{"refs": [{"id": "ref-for-scalar-value-string"}], "title": "4. Transport"}], "external": true};
window.dfnpanelData['4c07280e'] = {"dfnID": "4c07280e", "url": "https://infra.spec.whatwg.org/#serialize-an-infra-value-to-json-bytes", "dfnText": "serialize an infra value to json bytes", "refSections": [{"refs": [{"id": "ref-for-serialize-an-infra-value-to-json-bytes"}, {"id": "ref-for-serialize-an-infra-value-to-json-bytes\u2460"}, {"id": "ref-for-serialize-an-infra-value-to-json-bytes\u2461"}], "title": "4. Transport"}], "external": true};
window.dfnpanelData['15e48c39'] = {"dfnID": "15e48c39", "url": "https://infra.spec.whatwg.org/#ordered-set", "dfnText": "set", "refSections": [{"refs": [{"id": "ref-for-ordered-set"}], "title": "3.4. Commands"}, {"refs": [{"id": "ref-for-ordered-set\u2460"}, {"id": "ref-for-ordered-set\u2461"}, {"id": "ref-for-ordered-set\u2462"}, {"id": "ref-for-ordered-set\u2463"}, {"id": "ref-for-ordered-set\u2464"}, {"id": "ref-for-ordered-set\u2465"}], "title": "3.6. Events"}, {"refs": [{"id": "ref-for-ordered-set\u2466"}, {"id": "ref-for-ordered-set\u2467"}, {"id": "ref-for-ordered-set\u2468"}, {"id": "ref-for-ordered-set\u2460\u24ea"}], "title": "4. Transport"}, {"refs": [{"id": "ref-for-ordered-set\u2460\u2460"}, {"id": "ref-for-ordered-set\u2460\u2461"}, {"id": "ref-for-ordered-set\u2460\u2462"}], "title": "6.1.1. Definition"}, {"refs": [{"id": "ref-for-ordered-set\u2460\u2463"}], "title": "6.1.3.2. The session.new Command"}, {"refs": [{"id": "ref-for-ordered-set\u2460\u2464"}, {"id": "ref-for-ordered-set\u2460\u2465"}], "title": "6.3.2.2. The browsingContext.Info Type"}, {"refs": [{"id": "ref-for-ordered-set\u2460\u2466"}], "title": "6.3.4.1. The browsingContext.contextCreated Event"}, {"refs": [{"id": "ref-for-ordered-set\u2460\u2467"}, {"id": "ref-for-ordered-set\u2460\u2468"}], "title": "6.3.4.2. The browsingContext.contextDestroyed Event"}, {"refs": [{"id": "ref-for-ordered-set\u2461\u24ea"}], "title": "6.3.4.3. The browsingContext.navigationStarted Event"}, {"refs": [{"id": "ref-for-ordered-set\u2461\u2460"}], "title": "6.3.4.4. The browsingContext.fragmentNavigated Event"}, {"refs": [{"id": "ref-for-ordered-set\u2461\u2461"}], "title": "6.3.4.5. The browsingContext.domContentLoaded Event"}, {"refs": [{"id": "ref-for-ordered-set\u2461\u2462"}], "title": "6.3.4.6. The browsingContext.load Event"}, {"refs": [{"id": "ref-for-ordered-set\u2461\u2463"}], "title": "6.3.4.7. The browsingContext.downloadWillBegin Event"}, {"refs": [{"id": "ref-for-ordered-set\u2461\u2464"}], "title": "6.3.4.8. The browsingContext.navigationAborted Event"}, {"refs": [{"id": "ref-for-ordered-set\u2461\u2465"}], "title": "6.3.4.9. The browsingContext.navigationFailed Event"}, {"refs": [{"id": "ref-for-ordered-set\u2461\u2466"}], "title": "6.3.4.10. The browsingContext.userPromptClosed Event"}, {"refs": [{"id": "ref-for-ordered-set\u2461\u2467"}], "title": "6.3.4.11. The browsingContext.userPromptOpened Event"}, {"refs": [{"id": "ref-for-ordered-set\u2461\u2468"}], "title": "6.4.3.16. The network.UrlPattern Type"}, {"refs": [{"id": "ref-for-ordered-set\u2462\u24ea"}], "title": "6.5.5.2. The script.realmCreated Event"}, {"refs": [{"id": "ref-for-ordered-set\u2462\u2460"}], "title": "6.5.5.3. The script.realmDestroyed Event"}], "external": true};
window.dfnpanelData['0204d188'] = {"dfnID": "0204d188", "url": "https://infra.spec.whatwg.org/#list-size", "dfnText": "size (for list)", "refSections": [{"refs": [{"id": "ref-for-list-size"}], "title": "6.5.3.6. The script.LocalValue Type"}, {"refs": [{"id": "ref-for-list-size\u2460"}, {"id": "ref-for-list-size\u2461"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": true};
window.dfnpanelData['653d0848'] = {"dfnID": "653d0848", "url": "https://infra.spec.whatwg.org/#map-size", "dfnText": "size (for map)", "refSections": [{"refs": [{"id": "ref-for-map-size"}], "title": "4. Transport"}], "external": true};
window.dfnpanelData['fe28f7a2'] = {"dfnID": "fe28f7a2", "url": "https://infra.spec.whatwg.org/#map-sort-in-ascending-order", "dfnText": "sort in ascending order", "refSections": [{"refs": [{"id": "ref-for-map-sort-in-ascending-order"}], "title": "6.1.3.4. The session.subscribe Command"}], "external": true};
window.dfnpanelData['54627f47'] = {"dfnID": "54627f47", "url": "https://infra.spec.whatwg.org/#string-starts-with", "dfnText": "starts with", "refSections": [{"refs": [{"id": "ref-for-string-starts-with"}, {"id": "ref-for-string-starts-with\u2460"}], "title": "6.4.3.16. The network.UrlPattern Type"}], "external": true};
window.dfnpanelData['984221ca'] = {"dfnID": "984221ca", "url": "https://infra.spec.whatwg.org/#struct", "dfnText": "struct", "refSections": [{"refs": [{"id": "ref-for-struct"}, {"id": "ref-for-struct\u2460"}], "title": "6.4.2. Network Intercepts"}, {"refs": [{"id": "ref-for-struct\u2461"}], "title": "6.5.2. Preload Scripts"}], "external": true};
window.dfnpanelData['0e8de730'] = {"dfnID": "0e8de730", "url": "https://infra.spec.whatwg.org/#tuple", "dfnText": "tuple", "refSections": [{"refs": [{"id": "ref-for-tuple"}], "title": "6.4.3.1. The network.AuthChallenge Type"}], "external": true};
window.dfnpanelData['bb049306'] = {"dfnID": "bb049306", "url": "https://infra.spec.whatwg.org/#code-point-value", "dfnText": "value", "refSections": [{"refs": [{"id": "ref-for-code-point-value"}, {"id": "ref-for-code-point-value\u2460"}], "title": "6.4.3.15. The network.SetCookieHeader Type"}], "external": true};
window.dfnpanelData['12d6b9a8'] = {"dfnID": "12d6b9a8", "url": "https://infra.spec.whatwg.org/#map-getting-the-values", "dfnText": "values", "refSections": [{"refs": [{"id": "ref-for-map-getting-the-values"}], "title": "5.1. Sandbox Realms"}, {"refs": [{"id": "ref-for-map-getting-the-values\u2460"}], "title": "6.5.2. Preload Scripts"}], "external": true};
window.dfnpanelData['c93b716b'] = {"dfnID": "c93b716b", "url": "https://drafts.csswg.org/mediaqueries-5/#media-type", "dfnText": "media type", "refSections": [{"refs": [{"id": "ref-for-media-type"}], "title": "6.3.3.8. The browsingContext.print Command"}], "external": true};
window.dfnpanelData['4e30844a'] = {"dfnID": "4e30844a", "url": "https://mimesniff.spec.whatwg.org/#computed-mime-type", "dfnText": "computed mime type", "refSections": [{"refs": [{"id": "ref-for-computed-mime-type"}], "title": "6.4.3.14. The network.ResponseData Type"}], "external": true};
window.dfnpanelData['7c195f8b'] = {"dfnID": "7c195f8b", "url": "https://mimesniff.spec.whatwg.org/#mime-type-essence", "dfnText": "essence", "refSections": [{"refs": [{"id": "ref-for-mime-type-essence"}], "title": "6.4.3.14. The network.ResponseData Type"}], "external": true};
window.dfnpanelData['188c72fd'] = {"dfnID": "188c72fd", "url": "https://w3c.github.io/resource-timing/#dfn-convert-fetch-timestamp", "dfnText": "convert fetch timestamp", "refSections": [{"refs": [{"id": "ref-for-dfn-convert-fetch-timestamp"}, {"id": "ref-for-dfn-convert-fetch-timestamp\u2460"}, {"id": "ref-for-dfn-convert-fetch-timestamp\u2461"}, {"id": "ref-for-dfn-convert-fetch-timestamp\u2462"}, {"id": "ref-for-dfn-convert-fetch-timestamp\u2463"}, {"id": "ref-for-dfn-convert-fetch-timestamp\u2464"}, {"id": "ref-for-dfn-convert-fetch-timestamp\u2465"}, {"id": "ref-for-dfn-convert-fetch-timestamp\u2466"}, {"id": "ref-for-dfn-convert-fetch-timestamp\u2467"}, {"id": "ref-for-dfn-convert-fetch-timestamp\u2468"}, {"id": "ref-for-dfn-convert-fetch-timestamp\u2460\u24ea"}, {"id": "ref-for-dfn-convert-fetch-timestamp\u2460\u2460"}], "title": "6.4.3.7. The network.FetchTimingInfo Type"}], "external": true};
window.dfnpanelData['6d9bf486'] = {"dfnID": "6d9bf486", "url": "https://tools.ietf.org/html/rfc4648#section-4", "dfnText": "base64 encode", "refSections": [{"refs": [{"id": "ref-for-section-4"}], "title": "6.3.3.8. The browsingContext.print Command"}], "external": true};
window.dfnpanelData['7162eb1a'] = {"dfnID": "7162eb1a", "url": "https://tools.ietf.org/html/rfc6455#section-5.2", "dfnText": "%x1 denotes a text frame", "refSections": [{"refs": [{"id": "ref-for-section-5.2"}], "title": "4. Transport"}], "external": true};
window.dfnpanelData['1065054c'] = {"dfnID": "1065054c", "url": "https://tools.ietf.org/html/rfc6455#section-6.2", "dfnText": "a websocket message has been received", "refSections": [{"refs": [{"id": "ref-for-section-6.2"}], "title": "4. Transport"}], "external": true};
window.dfnpanelData['1e855c18'] = {"dfnID": "1e855c18", "url": "https://tools.ietf.org/html/rfc6455#section-4.1", "dfnText": "establishes a websocket connection", "refSections": [{"refs": [{"id": "ref-for-section-4.1"}], "title": "4. Transport"}], "external": true};
window.dfnpanelData['a0f3a43b'] = {"dfnID": "a0f3a43b", "url": "https://tools.ietf.org/html/rfc6455#section-7.1.7", "dfnText": "fail the websocket connection", "refSections": [{"refs": [{"id": "ref-for-section-7.1.7"}], "title": "4. Transport"}], "external": true};
window.dfnpanelData['2499ae2a'] = {"dfnID": "2499ae2a", "url": "https://tools.ietf.org/html/rfc6455#section-8.1", "dfnText": "handling errors in utf-8-encoded data", "refSections": [{"refs": [{"id": "ref-for-section-8.1"}], "title": "4. Transport"}], "external": true};
window.dfnpanelData['e4c5f264'] = {"dfnID": "e4c5f264", "url": "https://tools.ietf.org/html/rfc6455#section-4.2.1", "dfnText": "reading the client's opening handshake", "refSections": [{"refs": [{"id": "ref-for-section-4.2.1"}], "title": "4. Transport"}], "external": true};
window.dfnpanelData['b7ad9913'] = {"dfnID": "b7ad9913", "url": "https://tools.ietf.org/html/rfc6455#section-6.1", "dfnText": "send a websocket message", "refSections": [{"refs": [{"id": "ref-for-section-6.1"}, {"id": "ref-for-section-6.1\u2460"}, {"id": "ref-for-section-6.1\u2461"}], "title": "4. Transport"}, {"refs": [{"id": "ref-for-section-6.1\u2462"}], "title": "6.1.3.3. The session.end Command"}, {"refs": [{"id": "ref-for-section-6.1\u2463"}, {"id": "ref-for-section-6.1\u2464"}], "title": "6.2.2.1. The browser.close Command"}], "external": true};
window.dfnpanelData['31afd3ea'] = {"dfnID": "31afd3ea", "url": "https://tools.ietf.org/html/rfc6455#section-4.2", "dfnText": "server-side requirements", "refSections": [{"refs": [{"id": "ref-for-section-4.2"}, {"id": "ref-for-section-4.2\u2460"}], "title": "4. Transport"}], "external": true};
window.dfnpanelData['69f831e0'] = {"dfnID": "69f831e0", "url": "https://tools.ietf.org/html/rfc6455#section-7.1.2", "dfnText": "start the websocket closing handshake", "refSections": [{"refs": [{"id": "ref-for-section-7.1.2"}], "title": "4. Transport"}], "external": true};
window.dfnpanelData['5644bb38'] = {"dfnID": "5644bb38", "url": "https://tools.ietf.org/html/rfc6455#section-7.4", "dfnText": "status codes", "refSections": [{"refs": [{"id": "ref-for-section-7.4"}], "title": "4. Transport"}], "external": true};
window.dfnpanelData['adc2b755'] = {"dfnID": "adc2b755", "url": "https://tools.ietf.org/html/rfc6455#section-7.1.3", "dfnText": "the websocket closing handshake is started", "refSections": [{"refs": [{"id": "ref-for-section-7.1.3"}], "title": "4. Transport"}], "external": true};
window.dfnpanelData['36f1b87f'] = {"dfnID": "36f1b87f", "url": "https://tools.ietf.org/html/rfc6455#section-7.1.4", "dfnText": "the websocket connection is closed", "refSections": [{"refs": [{"id": "ref-for-section-7.1.4"}], "title": "4. Transport"}], "external": true};
window.dfnpanelData['7fdc1cbb'] = {"dfnID": "7fdc1cbb", "url": "https://tools.ietf.org/html/rfc6455#section-3", "dfnText": "websocket uri", "refSections": [{"refs": [{"id": "ref-for-section-3"}], "title": "4. Transport"}], "external": true};
window.dfnpanelData['86d2a717'] = {"dfnID": "86d2a717", "url": "https://w3c.github.io/ServiceWorker/#serviceworkerglobalscope", "dfnText": "ServiceWorkerGlobalScope", "refSections": [{"refs": [{"id": "ref-for-serviceworkerglobalscope"}], "title": "6.5.3.10. The script.RealmInfo Type"}], "external": true};
window.dfnpanelData['12553145'] = {"dfnID": "12553145", "url": "https://url.spec.whatwg.org/#default-port", "dfnText": "default port", "refSections": [{"refs": [{"id": "ref-for-default-port"}, {"id": "ref-for-default-port\u2460"}, {"id": "ref-for-default-port\u2461"}, {"id": "ref-for-default-port\u2462"}], "title": "6.4.3.16. The network.UrlPattern Type"}], "external": true};
window.dfnpanelData['b85ee3be'] = {"dfnID": "b85ee3be", "url": "https://url.spec.whatwg.org/#concept-url-host", "dfnText": "host", "refSections": [{"refs": [{"id": "ref-for-concept-url-host"}, {"id": "ref-for-concept-url-host\u2460"}], "title": "6.4.3.16. The network.UrlPattern Type"}], "external": true};
window.dfnpanelData['60d30068'] = {"dfnID": "60d30068", "url": "https://url.spec.whatwg.org/#is-special", "dfnText": "is special", "refSections": [{"refs": [{"id": "ref-for-is-special"}, {"id": "ref-for-is-special\u2460"}, {"id": "ref-for-is-special\u2461"}], "title": "6.4.3.16. The network.UrlPattern Type"}], "external": true};
window.dfnpanelData['c0868016'] = {"dfnID": "c0868016", "url": "https://url.spec.whatwg.org/#concept-url-path", "dfnText": "path", "refSections": [{"refs": [{"id": "ref-for-concept-url-path"}], "title": "6.4.3.16. The network.UrlPattern Type"}], "external": true};
window.dfnpanelData['852ada56'] = {"dfnID": "852ada56", "url": "https://url.spec.whatwg.org/#concept-url-port", "dfnText": "port", "refSections": [{"refs": [{"id": "ref-for-concept-url-port"}, {"id": "ref-for-concept-url-port\u2460"}, {"id": "ref-for-concept-url-port\u2461"}, {"id": "ref-for-concept-url-port\u2462"}, {"id": "ref-for-concept-url-port\u2463"}, {"id": "ref-for-concept-url-port\u2464"}], "title": "6.4.3.16. The network.UrlPattern Type"}], "external": true};
window.dfnpanelData['3ab2ec8b'] = {"dfnID": "3ab2ec8b", "url": "https://url.spec.whatwg.org/#concept-url-query", "dfnText": "query", "refSections": [{"refs": [{"id": "ref-for-concept-url-query"}, {"id": "ref-for-concept-url-query\u2460"}], "title": "6.4.3.16. The network.UrlPattern Type"}], "external": true};
window.dfnpanelData['3a711be7'] = {"dfnID": "3a711be7", "url": "https://url.spec.whatwg.org/#concept-url-scheme", "dfnText": "scheme", "refSections": [{"refs": [{"id": "ref-for-concept-url-scheme"}], "title": "6.4.3.14. The network.ResponseData Type"}, {"refs": [{"id": "ref-for-concept-url-scheme\u2460"}, {"id": "ref-for-concept-url-scheme\u2461"}, {"id": "ref-for-concept-url-scheme\u2462"}, {"id": "ref-for-concept-url-scheme\u2463"}, {"id": "ref-for-concept-url-scheme\u2464"}, {"id": "ref-for-concept-url-scheme\u2465"}, {"id": "ref-for-concept-url-scheme\u2466"}, {"id": "ref-for-concept-url-scheme\u2467"}], "title": "6.4.3.16. The network.UrlPattern Type"}], "external": true};
window.dfnpanelData['dcffbccd'] = {"dfnID": "dcffbccd", "url": "https://url.spec.whatwg.org/#concept-url", "dfnText": "url", "refSections": [{"refs": [{"id": "ref-for-concept-url"}], "title": "6.5.3.18. The script.StackTrace Type"}], "external": true};
window.dfnpanelData['ca3ca4ae'] = {"dfnID": "ca3ca4ae", "url": "https://url.spec.whatwg.org/#concept-url-parser", "dfnText": "url parser", "refSections": [{"refs": [{"id": "ref-for-concept-url-parser"}], "title": "6.3.3.7. The browsingContext.navigate Command"}, {"refs": [{"id": "ref-for-concept-url-parser\u2460"}, {"id": "ref-for-concept-url-parser\u2461"}], "title": "6.4.3.16. The network.UrlPattern Type"}, {"refs": [{"id": "ref-for-concept-url-parser\u2462"}], "title": "6.4.4.2. The network.continueRequest Command"}], "external": true};
window.dfnpanelData['40a40eb4'] = {"dfnID": "40a40eb4", "url": "https://url.spec.whatwg.org/#url-path-serializer", "dfnText": "url path serializer", "refSections": [{"refs": [{"id": "ref-for-url-path-serializer"}, {"id": "ref-for-url-path-serializer\u2460"}], "title": "6.4.3.16. The network.UrlPattern Type"}], "external": true};
window.dfnpanelData['5442ea33'] = {"dfnID": "5442ea33", "url": "https://url.spec.whatwg.org/#concept-url-serializer", "dfnText": "url serializer", "refSections": [{"refs": [{"id": "ref-for-concept-url-serializer"}, {"id": "ref-for-concept-url-serializer\u2460"}, {"id": "ref-for-concept-url-serializer\u2461"}, {"id": "ref-for-concept-url-serializer\u2462"}], "title": "6.3.2.2. The browsingContext.Info Type"}, {"refs": [{"id": "ref-for-concept-url-serializer\u2463"}], "title": "6.3.2.4. The browsingContext.NavigationInfo Type"}, {"refs": [{"id": "ref-for-concept-url-serializer\u2464"}], "title": "6.4.2. Network Intercepts"}, {"refs": [{"id": "ref-for-concept-url-serializer\u2465"}], "title": "6.4.3.12. The network.RequestData Type"}, {"refs": [{"id": "ref-for-concept-url-serializer\u2466"}], "title": "6.4.3.14. The network.ResponseData Type"}, {"refs": [{"id": "ref-for-concept-url-serializer\u2467"}], "title": "6.5.3.18. The script.StackTrace Type"}], "external": true};
window.dfnpanelData['8fe058df'] = {"dfnID": "8fe058df", "url": "https://webaudio.github.io/web-audio-api/#AudioWorkletGlobalScope", "dfnText": "AudioWorkletGlobalScope", "refSections": [{"refs": [{"id": "ref-for-AudioWorkletGlobalScope"}], "title": "6.5.3.10. The script.RealmInfo Type"}], "external": true};
window.dfnpanelData['36828a3b'] = {"dfnID": "36828a3b", "url": "https://w3c.github.io/webdriver/#dfn-actions-options", "dfnText": "actions options", "refSections": [{"refs": [{"id": "ref-for-dfn-actions-options"}], "title": "6.7.3.1. The input.performActions Command"}, {"refs": [{"id": "ref-for-dfn-actions-options\u2460"}], "title": "6.7.3.2. The input.releaseActions Command"}], "external": true};
window.dfnpanelData['49bb0560'] = {"dfnID": "49bb0560", "url": "https://w3c.github.io/webdriver/#dfn-active-session", "dfnText": "active sessions", "refSections": [{"refs": [{"id": "ref-for-dfn-active-session"}], "title": "3.2. Session"}, {"refs": [{"id": "ref-for-dfn-active-session\u2460"}, {"id": "ref-for-dfn-active-session\u2461"}, {"id": "ref-for-dfn-active-session\u2462"}], "title": "4. Transport"}, {"refs": [{"id": "ref-for-dfn-active-session\u2463"}, {"id": "ref-for-dfn-active-session\u2464"}], "title": "6.1.1. Definition"}, {"refs": [{"id": "ref-for-dfn-active-session\u2465"}, {"id": "ref-for-dfn-active-session\u2466"}], "title": "6.2.2.1. The browser.close Command"}], "external": true};
window.dfnpanelData['3555dec9'] = {"dfnID": "3555dec9", "url": "https://w3c.github.io/webdriver/#dfn-additional-capability-deserialization-algorithm", "dfnText": "additional capability deserialization algorithm", "refSections": [{"refs": [{"id": "ref-for-dfn-additional-capability-deserialization-algorithm"}], "title": "4.1. Establishing a Connection"}], "external": true};
window.dfnpanelData['189cc7e1'] = {"dfnID": "189cc7e1", "url": "https://w3c.github.io/webdriver/#dfn-additional-webdriver-capability", "dfnText": "additional webdriver capability", "refSections": [{"refs": [{"id": "ref-for-dfn-additional-webdriver-capability"}], "title": "4.1. Establishing a Connection"}], "external": true};
window.dfnpanelData['36acc234'] = {"dfnID": "36acc234", "url": "https://w3c.github.io/webdriver/#dfn-capability-name", "dfnText": "capability name", "refSections": [{"refs": [{"id": "ref-for-dfn-capability-name"}], "title": "4.1. Establishing a Connection"}], "external": true};
window.dfnpanelData['14549aa9'] = {"dfnID": "14549aa9", "url": "https://w3c.github.io/webdriver/#dfn-create-a-session", "dfnText": "create a session", "refSections": [{"refs": [{"id": "ref-for-dfn-create-a-session"}], "title": "6.1.3.2. The session.new Command"}], "external": true};
window.dfnpanelData['136bda97'] = {"dfnID": "136bda97", "url": "https://w3c.github.io/webdriver/#dfn-dispatch-actions", "dfnText": "dispatch actions", "refSections": [{"refs": [{"id": "ref-for-dfn-dispatch-actions"}], "title": "6.7.3.1. The input.performActions Command"}], "external": true};
window.dfnpanelData['94219729'] = {"dfnID": "94219729", "url": "https://w3c.github.io/webdriver/#dfn-dispatch-tick-actions", "dfnText": "dispatch tick actions", "refSections": [{"refs": [{"id": "ref-for-dfn-dispatch-tick-actions"}], "title": "6.7.3.2. The input.releaseActions Command"}], "external": true};
window.dfnpanelData['809cf459'] = {"dfnID": "809cf459", "url": "https://w3c.github.io/webdriver/#dfn-encoding-a-canvas-as-base64", "dfnText": "encode a canvas as base64", "refSections": [{"refs": [{"id": "ref-for-dfn-encoding-a-canvas-as-base64"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}], "external": true};
window.dfnpanelData['ee843963'] = {"dfnID": "ee843963", "url": "https://w3c.github.io/webdriver/#dfn-endpoint-node", "dfnText": "endpoint node", "refSections": [{"refs": [{"id": "ref-for-dfn-endpoint-node"}, {"id": "ref-for-dfn-endpoint-node\u2460"}], "title": "4. Transport"}], "external": true};
window.dfnpanelData['a4c28706'] = {"dfnID": "a4c28706", "url": "https://w3c.github.io/webdriver/#dfn-errors", "dfnText": "error", "refSections": [{"refs": [{"id": "ref-for-dfn-errors"}, {"id": "ref-for-dfn-errors\u2460"}], "title": "3.6. Events"}, {"refs": [{"id": "ref-for-dfn-errors\u2461"}], "title": "4. Transport"}, {"refs": [{"id": "ref-for-dfn-errors\u2462"}], "title": "4.1. Establishing a Connection"}, {"refs": [{"id": "ref-for-dfn-errors\u2463"}], "title": "5.1. Sandbox Realms"}, {"refs": [{"id": "ref-for-dfn-errors\u2464"}, {"id": "ref-for-dfn-errors\u2465"}], "title": "6.1.1. Definition"}, {"refs": [{"id": "ref-for-dfn-errors\u2466"}, {"id": "ref-for-dfn-errors\u2467"}], "title": "6.1.3.2. The session.new Command"}, {"refs": [{"id": "ref-for-dfn-errors\u2468"}], "title": "6.2.2.1. The browser.close Command"}, {"refs": [{"id": "ref-for-dfn-errors\u2460\u24ea"}], "title": "6.3.2.1. The browsingContext.BrowsingContext Type"}, {"refs": [{"id": "ref-for-dfn-errors\u2460\u2460"}, {"id": "ref-for-dfn-errors\u2460\u2461"}], "title": "6.3.2.2. The browsingContext.Info Type"}, {"refs": [{"id": "ref-for-dfn-errors\u2460\u2462"}, {"id": "ref-for-dfn-errors\u2460\u2463"}], "title": "6.3.3.1. The browsingContext.activate Command"}, {"refs": [{"id": "ref-for-dfn-errors\u2460\u2464"}, {"id": "ref-for-dfn-errors\u2460\u2465"}, {"id": "ref-for-dfn-errors\u2460\u2466"}, {"id": "ref-for-dfn-errors\u2460\u2467"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}, {"refs": [{"id": "ref-for-dfn-errors\u2460\u2468"}], "title": "6.3.3.3. The browsingContext.close Command"}, {"refs": [{"id": "ref-for-dfn-errors\u2461\u24ea"}, {"id": "ref-for-dfn-errors\u2461\u2460"}, {"id": "ref-for-dfn-errors\u2461\u2461"}], "title": "6.3.3.4. The browsingContext.create Command"}, {"refs": [{"id": "ref-for-dfn-errors\u2461\u2462"}], "title": "6.3.3.6. The browsingContext.handleUserPrompt Command"}, {"refs": [{"id": "ref-for-dfn-errors\u2461\u2463"}], "title": "6.3.3.7. The browsingContext.navigate Command"}, {"refs": [{"id": "ref-for-dfn-errors\u2461\u2464"}], "title": "6.3.3.8. The browsingContext.print Command"}, {"refs": [{"id": "ref-for-dfn-errors\u2461\u2465"}, {"id": "ref-for-dfn-errors\u2461\u2466"}], "title": "6.3.3.10. The browsingContext.setViewport Command"}, {"refs": [{"id": "ref-for-dfn-errors\u2461\u2467"}, {"id": "ref-for-dfn-errors\u2461\u2468"}, {"id": "ref-for-dfn-errors\u2462\u24ea"}, {"id": "ref-for-dfn-errors\u2462\u2460"}, {"id": "ref-for-dfn-errors\u2462\u2461"}, {"id": "ref-for-dfn-errors\u2462\u2462"}, {"id": "ref-for-dfn-errors\u2462\u2463"}, {"id": "ref-for-dfn-errors\u2462\u2464"}, {"id": "ref-for-dfn-errors\u2462\u2465"}, {"id": "ref-for-dfn-errors\u2462\u2466"}, {"id": "ref-for-dfn-errors\u2462\u2467"}, {"id": "ref-for-dfn-errors\u2462\u2468"}], "title": "6.4.3.16. The network.UrlPattern Type"}, {"refs": [{"id": "ref-for-dfn-errors\u2463\u24ea"}, {"id": "ref-for-dfn-errors\u2463\u2460"}, {"id": "ref-for-dfn-errors\u2463\u2461"}], "title": "6.4.4.2. The network.continueRequest Command"}, {"refs": [{"id": "ref-for-dfn-errors\u2463\u2462"}, {"id": "ref-for-dfn-errors\u2463\u2463"}], "title": "6.4.4.3. The network.continueResponse Command"}, {"refs": [{"id": "ref-for-dfn-errors\u2463\u2464"}, {"id": "ref-for-dfn-errors\u2463\u2465"}], "title": "6.4.4.4. The network.continueWithAuth Command"}, {"refs": [{"id": "ref-for-dfn-errors\u2463\u2466"}, {"id": "ref-for-dfn-errors\u2463\u2467"}], "title": "6.4.4.5. The network.failRequest Command"}, {"refs": [{"id": "ref-for-dfn-errors\u2463\u2468"}], "title": "6.4.4.7. The network.removeIntercept Command"}, {"refs": [{"id": "ref-for-dfn-errors\u2464\u24ea"}, {"id": "ref-for-dfn-errors\u2464\u2460"}, {"id": "ref-for-dfn-errors\u2464\u2461"}, {"id": "ref-for-dfn-errors\u2464\u2462"}], "title": "6.5.3.6. The script.LocalValue Type"}, {"refs": [{"id": "ref-for-dfn-errors\u2464\u2463"}], "title": "6.5.3.8. The script.Realm Type"}, {"refs": [{"id": "ref-for-dfn-errors\u2464\u2464"}, {"id": "ref-for-dfn-errors\u2464\u2465"}, {"id": "ref-for-dfn-errors\u2464\u2466"}], "title": "6.5.3.9. The script.PrimitiveProtocolValue Type"}, {"refs": [{"id": "ref-for-dfn-errors\u2464\u2467"}, {"id": "ref-for-dfn-errors\u2464\u2468"}, {"id": "ref-for-dfn-errors\u2465\u24ea"}, {"id": "ref-for-dfn-errors\u2465\u2460"}], "title": "6.5.3.12. The script.RemoteReference Type"}, {"refs": [{"id": "ref-for-dfn-errors\u2465\u2461"}], "title": "6.5.4.1. The script.addPreloadScript Command"}, {"refs": [{"id": "ref-for-dfn-errors\u2465\u2462"}], "title": "6.5.4.3. The script.callFunction Command"}, {"refs": [{"id": "ref-for-dfn-errors\u2465\u2463"}], "title": "6.5.4.6. The script.removePreloadScript Command"}, {"refs": [{"id": "ref-for-dfn-errors\u2465\u2464"}], "title": "6.6.3.1. The log.entryAdded Event"}, {"refs": [{"id": "ref-for-dfn-errors\u2465\u2465"}], "title": "6.7.2.1. input.ElementOrigin"}], "external": true};
window.dfnpanelData['c8ff8493'] = {"dfnID": "c8ff8493", "url": "https://w3c.github.io/webdriver/#dfn-error-code", "dfnText": "error code", "refSections": [{"refs": [{"id": "ref-for-dfn-error-code"}], "title": "3.5. Errors"}, {"refs": [{"id": "ref-for-dfn-error-code\u2460"}, {"id": "ref-for-dfn-error-code\u2461"}], "title": "3.6. Events"}, {"refs": [{"id": "ref-for-dfn-error-code\u2462"}], "title": "4. Transport"}, {"refs": [{"id": "ref-for-dfn-error-code\u2463"}], "title": "4.1. Establishing a Connection"}, {"refs": [{"id": "ref-for-dfn-error-code\u2464"}], "title": "5.1. Sandbox Realms"}, {"refs": [{"id": "ref-for-dfn-error-code\u2465"}, {"id": "ref-for-dfn-error-code\u2466"}], "title": "6.1.1. Definition"}, {"refs": [{"id": "ref-for-dfn-error-code\u2467"}], "title": "6.2.2.1. The browser.close Command"}, {"refs": [{"id": "ref-for-dfn-error-code\u2468"}], "title": "6.3.2.1. The browsingContext.BrowsingContext Type"}, {"refs": [{"id": "ref-for-dfn-error-code\u2460\u24ea"}, {"id": "ref-for-dfn-error-code\u2460\u2460"}], "title": "6.3.2.2. The browsingContext.Info Type"}, {"refs": [{"id": "ref-for-dfn-error-code\u2460\u2461"}], "title": "6.3.3.1. The browsingContext.activate Command"}, {"refs": [{"id": "ref-for-dfn-error-code\u2460\u2462"}, {"id": "ref-for-dfn-error-code\u2460\u2463"}, {"id": "ref-for-dfn-error-code\u2460\u2464"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}, {"refs": [{"id": "ref-for-dfn-error-code\u2460\u2465"}], "title": "6.3.3.3. The browsingContext.close Command"}, {"refs": [{"id": "ref-for-dfn-error-code\u2460\u2466"}, {"id": "ref-for-dfn-error-code\u2460\u2467"}], "title": "6.3.3.4. The browsingContext.create Command"}, {"refs": [{"id": "ref-for-dfn-error-code\u2460\u2468"}], "title": "6.3.3.6. The browsingContext.handleUserPrompt Command"}, {"refs": [{"id": "ref-for-dfn-error-code\u2461\u24ea"}], "title": "6.3.3.7. The browsingContext.navigate Command"}, {"refs": [{"id": "ref-for-dfn-error-code\u2461\u2460"}], "title": "6.3.3.8. The browsingContext.print Command"}, {"refs": [{"id": "ref-for-dfn-error-code\u2461\u2461"}, {"id": "ref-for-dfn-error-code\u2461\u2462"}], "title": "6.3.3.10. The browsingContext.setViewport Command"}, {"refs": [{"id": "ref-for-dfn-error-code\u2461\u2463"}, {"id": "ref-for-dfn-error-code\u2461\u2464"}, {"id": "ref-for-dfn-error-code\u2461\u2465"}, {"id": "ref-for-dfn-error-code\u2461\u2466"}, {"id": "ref-for-dfn-error-code\u2461\u2467"}, {"id": "ref-for-dfn-error-code\u2461\u2468"}, {"id": "ref-for-dfn-error-code\u2462\u24ea"}, {"id": "ref-for-dfn-error-code\u2462\u2460"}, {"id": "ref-for-dfn-error-code\u2462\u2461"}, {"id": "ref-for-dfn-error-code\u2462\u2462"}, {"id": "ref-for-dfn-error-code\u2462\u2463"}, {"id": "ref-for-dfn-error-code\u2462\u2464"}], "title": "6.4.3.16. The network.UrlPattern Type"}, {"refs": [{"id": "ref-for-dfn-error-code\u2462\u2465"}, {"id": "ref-for-dfn-error-code\u2462\u2466"}, {"id": "ref-for-dfn-error-code\u2462\u2467"}], "title": "6.4.4.2. The network.continueRequest Command"}, {"refs": [{"id": "ref-for-dfn-error-code\u2462\u2468"}, {"id": "ref-for-dfn-error-code\u2463\u24ea"}], "title": "6.4.4.3. The network.continueResponse Command"}, {"refs": [{"id": "ref-for-dfn-error-code\u2463\u2460"}, {"id": "ref-for-dfn-error-code\u2463\u2461"}], "title": "6.4.4.4. The network.continueWithAuth Command"}, {"refs": [{"id": "ref-for-dfn-error-code\u2463\u2462"}, {"id": "ref-for-dfn-error-code\u2463\u2463"}], "title": "6.4.4.5. The network.failRequest Command"}, {"refs": [{"id": "ref-for-dfn-error-code\u2463\u2464"}], "title": "6.4.4.7. The network.removeIntercept Command"}, {"refs": [{"id": "ref-for-dfn-error-code\u2463\u2465"}, {"id": "ref-for-dfn-error-code\u2463\u2466"}, {"id": "ref-for-dfn-error-code\u2463\u2467"}, {"id": "ref-for-dfn-error-code\u2463\u2468"}], "title": "6.5.3.6. The script.LocalValue Type"}, {"refs": [{"id": "ref-for-dfn-error-code\u2464\u24ea"}], "title": "6.5.3.8. The script.Realm Type"}, {"refs": [{"id": "ref-for-dfn-error-code\u2464\u2460"}, {"id": "ref-for-dfn-error-code\u2464\u2461"}, {"id": "ref-for-dfn-error-code\u2464\u2462"}], "title": "6.5.3.9. The script.PrimitiveProtocolValue Type"}, {"refs": [{"id": "ref-for-dfn-error-code\u2464\u2463"}, {"id": "ref-for-dfn-error-code\u2464\u2464"}, {"id": "ref-for-dfn-error-code\u2464\u2465"}, {"id": "ref-for-dfn-error-code\u2464\u2466"}], "title": "6.5.3.12. The script.RemoteReference Type"}, {"refs": [{"id": "ref-for-dfn-error-code\u2464\u2467"}], "title": "6.5.4.1. The script.addPreloadScript Command"}, {"refs": [{"id": "ref-for-dfn-error-code\u2464\u2468"}], "title": "6.5.4.3. The script.callFunction Command"}, {"refs": [{"id": "ref-for-dfn-error-code\u2465\u24ea"}], "title": "6.5.4.6. The script.removePreloadScript Command"}, {"refs": [{"id": "ref-for-dfn-error-code\u2465\u2460"}], "title": "6.7.2.1. input.ElementOrigin"}], "external": true};
window.dfnpanelData['a6b7422e'] = {"dfnID": "a6b7422e", "url": "https://w3c.github.io/webdriver/#dfn-extract-an-action-sequence", "dfnText": "extract an action sequence", "refSections": [{"refs": [{"id": "ref-for-dfn-extract-an-action-sequence"}], "title": "6.7.3.1. The input.performActions Command"}], "external": true};
window.dfnpanelData['01bb51cf'] = {"dfnID": "01bb51cf", "url": "https://w3c.github.io/webdriver/#dfn-get-a-node", "dfnText": "get a node", "refSections": [{"refs": [{"id": "ref-for-dfn-get-a-node"}], "title": "6.5.3.12. The script.RemoteReference Type"}], "external": true};
window.dfnpanelData['3b685aa8'] = {"dfnID": "3b685aa8", "url": "https://w3c.github.io/webdriver/#dfn-get-element-origin", "dfnText": "get element origin", "refSections": [{"refs": [{"id": "ref-for-dfn-get-element-origin"}], "title": "6.7.3.1. The input.performActions Command"}, {"refs": [{"id": "ref-for-dfn-get-element-origin\u2460"}], "title": "6.7.3.2. The input.releaseActions Command"}], "external": true};
window.dfnpanelData['80d3509a'] = {"dfnID": "80d3509a", "url": "https://w3c.github.io/webdriver/#dfn-get-or-create-a-node-reference", "dfnText": "get or create a node reference", "refSections": [{"refs": [{"id": "ref-for-dfn-get-or-create-a-node-reference"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": true};
window.dfnpanelData['9ca7d4a1'] = {"dfnID": "9ca7d4a1", "url": "https://w3c.github.io/webdriver/#dfn-get-the-input-state", "dfnText": "get the input state", "refSections": [{"refs": [{"id": "ref-for-dfn-get-the-input-state"}], "title": "6.7.3.1. The input.performActions Command"}, {"refs": [{"id": "ref-for-dfn-get-the-input-state\u2460"}], "title": "6.7.3.2. The input.releaseActions Command"}], "external": true};
window.dfnpanelData['814d830a'] = {"dfnID": "814d830a", "url": "https://w3c.github.io/webdriver/#dfn-get-a-property", "dfnText": "getting a property", "refSections": [{"refs": [{"id": "ref-for-dfn-get-a-property"}], "title": "4.1. Establishing a Connection"}], "external": true};
window.dfnpanelData['87bc2e00'] = {"dfnID": "87bc2e00", "url": "https://w3c.github.io/webdriver/#dfn-http-session", "dfnText": "http session", "refSections": [{"refs": [{"id": "ref-for-dfn-http-session"}], "title": "4.1. Establishing a Connection"}], "external": true};
window.dfnpanelData['a4cd9a97'] = {"dfnID": "a4cd9a97", "url": "https://w3c.github.io/webdriver/#dfn-input-cancel-list", "dfnText": "input cancel list", "refSections": [{"refs": [{"id": "ref-for-dfn-input-cancel-list"}], "title": "6.7.3.2. The input.releaseActions Command"}], "external": true};
window.dfnpanelData['93f9e904'] = {"dfnID": "93f9e904", "url": "https://w3c.github.io/webdriver/#dfn-intermediary-node", "dfnText": "intermediary node", "refSections": [{"refs": [{"id": "ref-for-dfn-intermediary-node"}], "title": "4. Transport"}], "external": true};
window.dfnpanelData['8da4d1e3'] = {"dfnID": "8da4d1e3", "url": "https://w3c.github.io/webdriver/#dfn-invalid-argument", "dfnText": "invalid argument", "refSections": [{"refs": [{"id": "ref-for-dfn-invalid-argument"}, {"id": "ref-for-dfn-invalid-argument\u2460"}], "title": "3.6. Events"}, {"refs": [{"id": "ref-for-dfn-invalid-argument\u2461"}, {"id": "ref-for-dfn-invalid-argument\u2462"}, {"id": "ref-for-dfn-invalid-argument\u2463"}], "title": "4. Transport"}, {"refs": [{"id": "ref-for-dfn-invalid-argument\u2464"}], "title": "4.1. Establishing a Connection"}, {"refs": [{"id": "ref-for-dfn-invalid-argument\u2465"}], "title": "5.1. Sandbox Realms"}, {"refs": [{"id": "ref-for-dfn-invalid-argument\u2466"}, {"id": "ref-for-dfn-invalid-argument\u2467"}], "title": "6.1.1. Definition"}, {"refs": [{"id": "ref-for-dfn-invalid-argument\u2468"}], "title": "6.3.3.1. The browsingContext.activate Command"}, {"refs": [{"id": "ref-for-dfn-invalid-argument\u2460\u24ea"}], "title": "6.3.3.3. The browsingContext.close Command"}, {"refs": [{"id": "ref-for-dfn-invalid-argument\u2460\u2460"}], "title": "6.3.3.4. The browsingContext.create Command"}, {"refs": [{"id": "ref-for-dfn-invalid-argument\u2460\u2461"}], "title": "6.3.3.7. The browsingContext.navigate Command"}, {"refs": [{"id": "ref-for-dfn-invalid-argument\u2460\u2462"}], "title": "6.3.3.10. The browsingContext.setViewport Command"}, {"refs": [{"id": "ref-for-dfn-invalid-argument\u2460\u2463"}, {"id": "ref-for-dfn-invalid-argument\u2460\u2464"}, {"id": "ref-for-dfn-invalid-argument\u2460\u2465"}, {"id": "ref-for-dfn-invalid-argument\u2460\u2466"}, {"id": "ref-for-dfn-invalid-argument\u2460\u2467"}, {"id": "ref-for-dfn-invalid-argument\u2460\u2468"}, {"id": "ref-for-dfn-invalid-argument\u2461\u24ea"}, {"id": "ref-for-dfn-invalid-argument\u2461\u2460"}, {"id": "ref-for-dfn-invalid-argument\u2461\u2461"}, {"id": "ref-for-dfn-invalid-argument\u2461\u2462"}, {"id": "ref-for-dfn-invalid-argument\u2461\u2463"}], "title": "6.4.3.16. The network.UrlPattern Type"}, {"refs": [{"id": "ref-for-dfn-invalid-argument\u2461\u2464"}, {"id": "ref-for-dfn-invalid-argument\u2461\u2465"}], "title": "6.4.4.2. The network.continueRequest Command"}, {"refs": [{"id": "ref-for-dfn-invalid-argument\u2461\u2466"}], "title": "6.4.4.4. The network.continueWithAuth Command"}, {"refs": [{"id": "ref-for-dfn-invalid-argument\u2461\u2467"}], "title": "6.4.4.5. The network.failRequest Command"}, {"refs": [{"id": "ref-for-dfn-invalid-argument\u2461\u2468"}, {"id": "ref-for-dfn-invalid-argument\u2462\u24ea"}, {"id": "ref-for-dfn-invalid-argument\u2462\u2460"}, {"id": "ref-for-dfn-invalid-argument\u2462\u2461"}], "title": "6.5.3.6. The script.LocalValue Type"}, {"refs": [{"id": "ref-for-dfn-invalid-argument\u2462\u2462"}, {"id": "ref-for-dfn-invalid-argument\u2462\u2463"}, {"id": "ref-for-dfn-invalid-argument\u2462\u2464"}], "title": "6.5.3.9. The script.PrimitiveProtocolValue Type"}, {"refs": [{"id": "ref-for-dfn-invalid-argument\u2462\u2465"}], "title": "6.5.4.1. The script.addPreloadScript Command"}, {"refs": [{"id": "ref-for-dfn-invalid-argument\u2462\u2466"}], "title": "6.5.4.3. The script.callFunction Command"}], "external": true};
window.dfnpanelData['900d0fcf'] = {"dfnID": "900d0fcf", "url": "https://w3c.github.io/webdriver/#dfn-invalid-session-id", "dfnText": "invalid session id", "refSections": [{"refs": [{"id": "ref-for-dfn-invalid-session-id"}], "title": "4. Transport"}], "external": true};
window.dfnpanelData['47ddb771'] = {"dfnID": "47ddb771", "url": "https://w3c.github.io/webdriver/#dfn-is-element-origin", "dfnText": "is element origin", "refSections": [{"refs": [{"id": "ref-for-dfn-is-element-origin"}], "title": "6.7.3.1. The input.performActions Command"}, {"refs": [{"id": "ref-for-dfn-is-element-origin\u2460"}], "title": "6.7.3.2. The input.releaseActions Command"}], "external": true};
window.dfnpanelData['9a707b42'] = {"dfnID": "9a707b42", "url": "https://w3c.github.io/webdriver/#dfn-local-ends", "dfnText": "local end", "refSections": [{"refs": [{"id": "ref-for-dfn-local-ends"}, {"id": "ref-for-dfn-local-ends\u2460"}], "title": "3. Protocol"}, {"refs": [{"id": "ref-for-dfn-local-ends\u2461"}, {"id": "ref-for-dfn-local-ends\u2462"}, {"id": "ref-for-dfn-local-ends\u2463"}, {"id": "ref-for-dfn-local-ends\u2464"}, {"id": "ref-for-dfn-local-ends\u2465"}, {"id": "ref-for-dfn-local-ends\u2466"}], "title": "3.4. Commands"}, {"refs": [{"id": "ref-for-dfn-local-ends\u2467"}], "title": "3.6. Events"}, {"refs": [{"id": "ref-for-dfn-local-ends\u2468"}, {"id": "ref-for-dfn-local-ends\u2460\u24ea"}], "title": "4. Transport"}, {"refs": [{"id": "ref-for-dfn-local-ends\u2460\u2460"}], "title": "6.2.2.1. The browser.close Command"}, {"refs": [{"id": "ref-for-dfn-local-ends\u2460\u2461"}], "title": "6.5.3.1. The script.Channel Type"}, {"refs": [{"id": "ref-for-dfn-local-ends\u2460\u2462"}], "title": "6.5.3.2. The script.ChannelValue Type"}], "external": true};
window.dfnpanelData['a192e236'] = {"dfnID": "a192e236", "url": "https://w3c.github.io/webdriver/#dfn-matched-capability-serialization-algorithm", "dfnText": "matched capability serialization algorithm", "refSections": [{"refs": [{"id": "ref-for-dfn-matched-capability-serialization-algorithm"}], "title": "4.1. Establishing a Connection"}], "external": true};
window.dfnpanelData['3d4e20bd'] = {"dfnID": "3d4e20bd", "url": "https://w3c.github.io/webdriver/#dfn-no-such-alert", "dfnText": "no such alert", "refSections": [{"refs": [{"id": "ref-for-dfn-no-such-alert"}], "title": "6.3.3.6. The browsingContext.handleUserPrompt Command"}], "external": true};
window.dfnpanelData['38951aff'] = {"dfnID": "38951aff", "url": "https://w3c.github.io/webdriver/#dfn-no-such-element", "dfnText": "no such element", "refSections": [{"refs": [{"id": "ref-for-dfn-no-such-element"}, {"id": "ref-for-dfn-no-such-element\u2460"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}, {"refs": [{"id": "ref-for-dfn-no-such-element\u2461"}], "title": "6.7.2.1. input.ElementOrigin"}], "external": true};
window.dfnpanelData['0d868320'] = {"dfnID": "0d868320", "url": "https://w3c.github.io/webdriver/#dfn-no-such-frame", "dfnText": "no such frame", "refSections": [{"refs": [{"id": "ref-for-dfn-no-such-frame"}], "title": "6.3.2.1. The browsingContext.BrowsingContext Type"}, {"refs": [{"id": "ref-for-dfn-no-such-frame\u2460"}], "title": "6.5.3.8. The script.Realm Type"}], "external": true};
window.dfnpanelData['b88752f4'] = {"dfnID": "b88752f4", "url": "https://w3c.github.io/webdriver/#dfn-parse-a-page-range", "dfnText": "parse a page range", "refSections": [{"refs": [{"id": "ref-for-dfn-parse-a-page-range"}], "title": "6.3.3.8. The browsingContext.print Command"}], "external": true};
window.dfnpanelData['bfaaa9a6'] = {"dfnID": "bfaaa9a6", "url": "https://w3c.github.io/webdriver/#dfn-processing-capabilities", "dfnText": "process capabilities", "refSections": [{"refs": [{"id": "ref-for-dfn-processing-capabilities"}], "title": "6.1.3.2. The session.new Command"}], "external": true};
window.dfnpanelData['a49a724d'] = {"dfnID": "a49a724d", "url": "https://w3c.github.io/webdriver/#dfn-readiness-state", "dfnText": "readiness state", "refSections": [{"refs": [{"id": "ref-for-dfn-readiness-state"}, {"id": "ref-for-dfn-readiness-state\u2460"}], "title": "6.1.3.1. The session.status Command"}], "external": true};
window.dfnpanelData['35d404ee'] = {"dfnID": "35d404ee", "url": "https://w3c.github.io/webdriver/#dfn-remote-ends", "dfnText": "remote end", "refSections": [{"refs": [{"id": "ref-for-dfn-remote-ends"}, {"id": "ref-for-dfn-remote-ends\u2460"}], "title": "3. Protocol"}, {"refs": [{"id": "ref-for-dfn-remote-ends\u2461"}, {"id": "ref-for-dfn-remote-ends\u2462"}], "title": "3.4. Commands"}, {"refs": [{"id": "ref-for-dfn-remote-ends\u2463"}, {"id": "ref-for-dfn-remote-ends\u2464"}], "title": "3.6. Events"}, {"refs": [{"id": "ref-for-dfn-remote-ends\u2465"}, {"id": "ref-for-dfn-remote-ends\u2466"}, {"id": "ref-for-dfn-remote-ends\u2467"}, {"id": "ref-for-dfn-remote-ends\u2468"}, {"id": "ref-for-dfn-remote-ends\u2460\u24ea"}, {"id": "ref-for-dfn-remote-ends\u2460\u2460"}, {"id": "ref-for-dfn-remote-ends\u2460\u2461"}, {"id": "ref-for-dfn-remote-ends\u2460\u2462"}, {"id": "ref-for-dfn-remote-ends\u2460\u2463"}], "title": "4. Transport"}, {"refs": [{"id": "ref-for-dfn-remote-ends\u2460\u2464"}, {"id": "ref-for-dfn-remote-ends\u2460\u2465"}], "title": "6.1.3.1. The session.status Command"}, {"refs": [{"id": "ref-for-dfn-remote-ends\u2460\u2466"}, {"id": "ref-for-dfn-remote-ends\u2460\u2467"}], "title": "6.2.2.1. The browser.close Command"}, {"refs": [{"id": "ref-for-dfn-remote-ends\u2460\u2468"}], "title": "6.4.1. Definition"}, {"refs": [{"id": "ref-for-dfn-remote-ends\u2461\u24ea"}], "title": "6.5.3.1. The script.Channel Type"}, {"refs": [{"id": "ref-for-dfn-remote-ends\u2461\u2460"}], "title": "6.5.3.2. The script.ChannelValue Type"}], "external": true};
window.dfnpanelData['82c23298'] = {"dfnID": "82c23298", "url": "https://w3c.github.io/webdriver/#dfn-remote-end-steps", "dfnText": "remote end steps", "refSections": [{"refs": [{"id": "ref-for-dfn-remote-end-steps"}], "title": "3.4. Commands"}, {"refs": [{"id": "ref-for-dfn-remote-end-steps\u2460"}], "title": "4. Transport"}, {"refs": [{"id": "ref-for-dfn-remote-end-steps\u2461"}], "title": "6.1.3.1. The session.status Command"}, {"refs": [{"id": "ref-for-dfn-remote-end-steps\u2462"}], "title": "6.1.3.2. The session.new Command"}, {"refs": [{"id": "ref-for-dfn-remote-end-steps\u2463"}], "title": "6.1.3.3. The session.end Command"}, {"refs": [{"id": "ref-for-dfn-remote-end-steps\u2464"}], "title": "6.1.3.4. The session.subscribe Command"}, {"refs": [{"id": "ref-for-dfn-remote-end-steps\u2465"}], "title": "6.1.3.5. The session.unsubscribe Command"}, {"refs": [{"id": "ref-for-dfn-remote-end-steps\u2466"}], "title": "6.2.2.1. The browser.close Command"}, {"refs": [{"id": "ref-for-dfn-remote-end-steps\u2467"}], "title": "6.3.3.1. The browsingContext.activate Command"}, {"refs": [{"id": "ref-for-dfn-remote-end-steps\u2468"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}, {"refs": [{"id": "ref-for-dfn-remote-end-steps\u2460\u24ea"}], "title": "6.3.3.3. The browsingContext.close Command"}, {"refs": [{"id": "ref-for-dfn-remote-end-steps\u2460\u2460"}], "title": "6.3.3.4. The browsingContext.create Command"}, {"refs": [{"id": "ref-for-dfn-remote-end-steps\u2460\u2461"}], "title": "6.3.3.5. The browsingContext.getTree Command"}, {"refs": [{"id": "ref-for-dfn-remote-end-steps\u2460\u2462"}], "title": "6.3.3.6. The browsingContext.handleUserPrompt Command"}, {"refs": [{"id": "ref-for-dfn-remote-end-steps\u2460\u2463"}], "title": "6.3.3.7. The browsingContext.navigate Command"}, {"refs": [{"id": "ref-for-dfn-remote-end-steps\u2460\u2464"}], "title": "6.3.3.8. The browsingContext.print Command"}, {"refs": [{"id": "ref-for-dfn-remote-end-steps\u2460\u2465"}], "title": "6.3.3.9. The browsingContext.reload Command"}, {"refs": [{"id": "ref-for-dfn-remote-end-steps\u2460\u2466"}], "title": "6.3.3.10. The browsingContext.setViewport Command"}, {"refs": [{"id": "ref-for-dfn-remote-end-steps\u2460\u2467"}], "title": "6.4.4.1. The network.addIntercept Command"}, {"refs": [{"id": "ref-for-dfn-remote-end-steps\u2460\u2468"}], "title": "6.4.4.2. The network.continueRequest Command"}, {"refs": [{"id": "ref-for-dfn-remote-end-steps\u2461\u24ea"}], "title": "6.4.4.3. The network.continueResponse Command"}, {"refs": [{"id": "ref-for-dfn-remote-end-steps\u2461\u2460"}], "title": "6.4.4.4. The network.continueWithAuth Command"}, {"refs": [{"id": "ref-for-dfn-remote-end-steps\u2461\u2461"}], "title": "6.4.4.5. The network.failRequest Command"}, {"refs": [{"id": "ref-for-dfn-remote-end-steps\u2461\u2462"}], "title": "6.4.4.6. The network.provideResponse Command"}, {"refs": [{"id": "ref-for-dfn-remote-end-steps\u2461\u2463"}], "title": "6.4.4.7. The network.removeIntercept Command"}, {"refs": [{"id": "ref-for-dfn-remote-end-steps\u2461\u2464"}], "title": "6.5.4.1. The script.addPreloadScript Command"}, {"refs": [{"id": "ref-for-dfn-remote-end-steps\u2461\u2465"}], "title": "6.5.4.2. The script.disown Command"}, {"refs": [{"id": "ref-for-dfn-remote-end-steps\u2461\u2466"}], "title": "6.5.4.3. The script.callFunction Command"}, {"refs": [{"id": "ref-for-dfn-remote-end-steps\u2461\u2467"}], "title": "6.5.4.4. The script.evaluate Command"}, {"refs": [{"id": "ref-for-dfn-remote-end-steps\u2461\u2468"}], "title": "6.5.4.5. The script.getRealms Command"}, {"refs": [{"id": "ref-for-dfn-remote-end-steps\u2462\u24ea"}], "title": "6.5.4.6. The script.removePreloadScript Command"}, {"refs": [{"id": "ref-for-dfn-remote-end-steps\u2462\u2460"}], "title": "6.7.3.1. The input.performActions Command"}, {"refs": [{"id": "ref-for-dfn-remote-end-steps\u2462\u2461"}], "title": "6.7.3.2. The input.releaseActions Command"}], "external": true};
window.dfnpanelData['4cca2ed0'] = {"dfnID": "4cca2ed0", "url": "https://w3c.github.io/webdriver/#dfn-reset-the-input-state", "dfnText": "reset the input state", "refSections": [{"refs": [{"id": "ref-for-dfn-reset-the-input-state"}], "title": "6.7.3.2. The input.releaseActions Command"}], "external": true};
window.dfnpanelData['d4bcfb3f'] = {"dfnID": "d4bcfb3f", "url": "https://w3c.github.io/webdriver/#dfn-scrolls-into-view", "dfnText": "scroll into view", "refSections": [{"refs": [{"id": "ref-for-dfn-scrolls-into-view"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}], "external": true};
window.dfnpanelData['79d221ec'] = {"dfnID": "79d221ec", "url": "https://w3c.github.io/webdriver/#dfn-sessions", "dfnText": "session", "refSections": [{"refs": [{"id": "ref-for-dfn-sessions"}, {"id": "ref-for-dfn-sessions\u2460"}, {"id": "ref-for-dfn-sessions\u2461"}], "title": "3.2. Session"}, {"refs": [{"id": "ref-for-dfn-sessions\u2462"}, {"id": "ref-for-dfn-sessions\u2463"}, {"id": "ref-for-dfn-sessions\u2464"}, {"id": "ref-for-dfn-sessions\u2465"}, {"id": "ref-for-dfn-sessions\u2466"}], "title": "4. Transport"}, {"refs": [{"id": "ref-for-dfn-sessions\u2467"}], "title": "6.1.3.3. The session.end Command"}], "external": true};
window.dfnpanelData['4fc3ddf9'] = {"dfnID": "4fc3ddf9", "url": "https://w3c.github.io/webdriver/#dfn-session-id", "dfnText": "session id", "refSections": [{"refs": [{"id": "ref-for-dfn-session-id"}, {"id": "ref-for-dfn-session-id\u2460"}, {"id": "ref-for-dfn-session-id\u2461"}], "title": "4. Transport"}, {"refs": [{"id": "ref-for-dfn-session-id\u2462"}], "title": "6.1.3.2. The session.new Command"}], "external": true};
window.dfnpanelData['4c001258'] = {"dfnID": "4c001258", "url": "https://w3c.github.io/webdriver/#dfn-session-not-created", "dfnText": "session not created", "refSections": [{"refs": [{"id": "ref-for-dfn-session-not-created"}, {"id": "ref-for-dfn-session-not-created\u2460"}], "title": "6.1.3.2. The session.new Command"}], "external": true};
window.dfnpanelData['cb9acc83'] = {"dfnID": "cb9acc83", "url": "https://w3c.github.io/webdriver/#dfn-set-a-property", "dfnText": "set a property", "refSections": [{"refs": [{"id": "ref-for-dfn-set-a-property"}], "title": "4.1. Establishing a Connection"}], "external": true};
window.dfnpanelData['4be6272b'] = {"dfnID": "4be6272b", "url": "https://w3c.github.io/webdriver/#dfn-success", "dfnText": "success", "refSections": [{"refs": [{"id": "ref-for-dfn-success"}, {"id": "ref-for-dfn-success\u2460"}], "title": "3.6. Events"}, {"refs": [{"id": "ref-for-dfn-success\u2461"}, {"id": "ref-for-dfn-success\u2462"}, {"id": "ref-for-dfn-success\u2463"}], "title": "4.1. Establishing a Connection"}, {"refs": [{"id": "ref-for-dfn-success\u2464"}], "title": "5.1. Sandbox Realms"}, {"refs": [{"id": "ref-for-dfn-success\u2465"}], "title": "6.1.1. Definition"}, {"refs": [{"id": "ref-for-dfn-success\u2466"}], "title": "6.1.3.1. The session.status Command"}, {"refs": [{"id": "ref-for-dfn-success\u2467"}], "title": "6.1.3.2. The session.new Command"}, {"refs": [{"id": "ref-for-dfn-success\u2468"}], "title": "6.1.3.3. The session.end Command"}, {"refs": [{"id": "ref-for-dfn-success\u2460\u24ea"}], "title": "6.1.3.4. The session.subscribe Command"}, {"refs": [{"id": "ref-for-dfn-success\u2460\u2460"}], "title": "6.1.3.5. The session.unsubscribe Command"}, {"refs": [{"id": "ref-for-dfn-success\u2460\u2461"}], "title": "6.2.2.1. The browser.close Command"}, {"refs": [{"id": "ref-for-dfn-success\u2460\u2462"}, {"id": "ref-for-dfn-success\u2460\u2463"}], "title": "6.3.2.1. The browsingContext.BrowsingContext Type"}, {"refs": [{"id": "ref-for-dfn-success\u2460\u2464"}, {"id": "ref-for-dfn-success\u2460\u2465"}, {"id": "ref-for-dfn-success\u2460\u2466"}], "title": "6.3.2.2. The browsingContext.Info Type"}, {"refs": [{"id": "ref-for-dfn-success\u2460\u2467"}], "title": "6.3.3.1. The browsingContext.activate Command"}, {"refs": [{"id": "ref-for-dfn-success\u2460\u2468"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}, {"refs": [{"id": "ref-for-dfn-success\u2461\u24ea"}], "title": "6.3.3.3. The browsingContext.close Command"}, {"refs": [{"id": "ref-for-dfn-success\u2461\u2460"}], "title": "6.3.3.4. The browsingContext.create Command"}, {"refs": [{"id": "ref-for-dfn-success\u2461\u2461"}], "title": "6.3.3.5. The browsingContext.getTree Command"}, {"refs": [{"id": "ref-for-dfn-success\u2461\u2462"}], "title": "6.3.3.6. The browsingContext.handleUserPrompt Command"}, {"refs": [{"id": "ref-for-dfn-success\u2461\u2463"}], "title": "6.3.3.8. The browsingContext.print Command"}, {"refs": [{"id": "ref-for-dfn-success\u2461\u2464"}], "title": "6.3.3.10. The browsingContext.setViewport Command"}, {"refs": [{"id": "ref-for-dfn-success\u2461\u2465"}, {"id": "ref-for-dfn-success\u2461\u2466"}], "title": "6.4.3.16. The network.UrlPattern Type"}, {"refs": [{"id": "ref-for-dfn-success\u2461\u2467"}], "title": "6.4.4.2. The network.continueRequest Command"}, {"refs": [{"id": "ref-for-dfn-success\u2461\u2468"}], "title": "6.4.4.3. The network.continueResponse Command"}, {"refs": [{"id": "ref-for-dfn-success\u2462\u24ea"}], "title": "6.4.4.4. The network.continueWithAuth Command"}, {"refs": [{"id": "ref-for-dfn-success\u2462\u2460"}], "title": "6.4.4.5. The network.failRequest Command"}, {"refs": [{"id": "ref-for-dfn-success\u2462\u2461"}], "title": "6.4.4.6. The network.provideResponse Command"}, {"refs": [{"id": "ref-for-dfn-success\u2462\u2462"}], "title": "6.4.4.7. The network.removeIntercept Command"}, {"refs": [{"id": "ref-for-dfn-success\u2462\u2463"}, {"id": "ref-for-dfn-success\u2462\u2464"}, {"id": "ref-for-dfn-success\u2462\u2465"}, {"id": "ref-for-dfn-success\u2462\u2466"}, {"id": "ref-for-dfn-success\u2462\u2467"}, {"id": "ref-for-dfn-success\u2462\u2468"}, {"id": "ref-for-dfn-success\u2463\u24ea"}, {"id": "ref-for-dfn-success\u2463\u2460"}], "title": "6.5.3.6. The script.LocalValue Type"}, {"refs": [{"id": "ref-for-dfn-success\u2463\u2461"}, {"id": "ref-for-dfn-success\u2463\u2462"}], "title": "6.5.3.8. The script.Realm Type"}, {"refs": [{"id": "ref-for-dfn-success\u2463\u2463"}, {"id": "ref-for-dfn-success\u2463\u2464"}, {"id": "ref-for-dfn-success\u2463\u2465"}, {"id": "ref-for-dfn-success\u2463\u2466"}, {"id": "ref-for-dfn-success\u2463\u2467"}, {"id": "ref-for-dfn-success\u2463\u2468"}, {"id": "ref-for-dfn-success\u2464\u24ea"}, {"id": "ref-for-dfn-success\u2464\u2460"}], "title": "6.5.3.9. The script.PrimitiveProtocolValue Type"}, {"refs": [{"id": "ref-for-dfn-success\u2464\u2461"}, {"id": "ref-for-dfn-success\u2464\u2462"}], "title": "6.5.3.12. The script.RemoteReference Type"}, {"refs": [{"id": "ref-for-dfn-success\u2464\u2463"}], "title": "6.5.3.20. The script.Target Type"}, {"refs": [{"id": "ref-for-dfn-success\u2464\u2464"}], "title": "6.5.4.2. The script.disown Command"}, {"refs": [{"id": "ref-for-dfn-success\u2464\u2465"}], "title": "6.5.4.3. The script.callFunction Command"}, {"refs": [{"id": "ref-for-dfn-success\u2464\u2466"}], "title": "6.5.4.5. The script.getRealms Command"}, {"refs": [{"id": "ref-for-dfn-success\u2464\u2467"}], "title": "6.7.2.1. input.ElementOrigin"}, {"refs": [{"id": "ref-for-dfn-success\u2464\u2468"}], "title": "6.7.3.1. The input.performActions Command"}, {"refs": [{"id": "ref-for-dfn-success\u2465\u24ea"}], "title": "6.7.3.2. The input.releaseActions Command"}], "external": true};
window.dfnpanelData['e7c89135'] = {"dfnID": "e7c89135", "url": "https://w3c.github.io/webdriver/#dfn-try", "dfnText": "try", "refSections": [{"refs": [{"id": "ref-for-dfn-try"}, {"id": "ref-for-dfn-try\u2460"}], "title": "6.1.1. Definition"}, {"refs": [{"id": "ref-for-dfn-try\u2461"}, {"id": "ref-for-dfn-try\u2462"}], "title": "6.1.3.2. The session.new Command"}, {"refs": [{"id": "ref-for-dfn-try\u2463"}], "title": "6.1.3.4. The session.subscribe Command"}, {"refs": [{"id": "ref-for-dfn-try\u2464"}], "title": "6.1.3.5. The session.unsubscribe Command"}, {"refs": [{"id": "ref-for-dfn-try\u2465"}], "title": "6.3.3.1. The browsingContext.activate Command"}, {"refs": [{"id": "ref-for-dfn-try\u2466"}, {"id": "ref-for-dfn-try\u2467"}, {"id": "ref-for-dfn-try\u2468"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}, {"refs": [{"id": "ref-for-dfn-try\u2460\u24ea"}], "title": "6.3.3.3. The browsingContext.close Command"}, {"refs": [{"id": "ref-for-dfn-try\u2460\u2460"}], "title": "6.3.3.4. The browsingContext.create Command"}, {"refs": [{"id": "ref-for-dfn-try\u2460\u2461"}], "title": "6.3.3.5. The browsingContext.getTree Command"}, {"refs": [{"id": "ref-for-dfn-try\u2460\u2462"}], "title": "6.3.3.6. The browsingContext.handleUserPrompt Command"}, {"refs": [{"id": "ref-for-dfn-try\u2460\u2463"}], "title": "6.3.3.7. The browsingContext.navigate Command"}, {"refs": [{"id": "ref-for-dfn-try\u2460\u2464"}, {"id": "ref-for-dfn-try\u2460\u2465"}], "title": "6.3.3.8. The browsingContext.print Command"}, {"refs": [{"id": "ref-for-dfn-try\u2460\u2466"}], "title": "6.3.3.9. The browsingContext.reload Command"}, {"refs": [{"id": "ref-for-dfn-try\u2460\u2467"}], "title": "6.3.3.10. The browsingContext.setViewport Command"}, {"refs": [{"id": "ref-for-dfn-try\u2460\u2468"}, {"id": "ref-for-dfn-try\u2461\u24ea"}, {"id": "ref-for-dfn-try\u2461\u2460"}, {"id": "ref-for-dfn-try\u2461\u2461"}, {"id": "ref-for-dfn-try\u2461\u2462"}, {"id": "ref-for-dfn-try\u2461\u2463"}], "title": "6.4.3.16. The network.UrlPattern Type"}, {"refs": [{"id": "ref-for-dfn-try\u2461\u2464"}], "title": "6.4.4.1. The network.addIntercept Command"}, {"refs": [{"id": "ref-for-dfn-try\u2461\u2465"}], "title": "6.4.4.3. The network.continueResponse Command"}, {"refs": [{"id": "ref-for-dfn-try\u2461\u2466"}], "title": "6.4.4.6. The network.provideResponse Command"}, {"refs": [{"id": "ref-for-dfn-try\u2461\u2467"}, {"id": "ref-for-dfn-try\u2461\u2468"}, {"id": "ref-for-dfn-try\u2462\u24ea"}, {"id": "ref-for-dfn-try\u2462\u2460"}, {"id": "ref-for-dfn-try\u2462\u2461"}, {"id": "ref-for-dfn-try\u2462\u2462"}, {"id": "ref-for-dfn-try\u2462\u2463"}], "title": "6.5.3.6. The script.LocalValue Type"}, {"refs": [{"id": "ref-for-dfn-try\u2462\u2464"}], "title": "6.5.3.12. The script.RemoteReference Type"}, {"refs": [{"id": "ref-for-dfn-try\u2462\u2465"}, {"id": "ref-for-dfn-try\u2462\u2466"}], "title": "6.5.3.20. The script.Target Type"}, {"refs": [{"id": "ref-for-dfn-try\u2462\u2467"}], "title": "6.5.4.1. The script.addPreloadScript Command"}, {"refs": [{"id": "ref-for-dfn-try\u2462\u2468"}], "title": "6.5.4.2. The script.disown Command"}, {"refs": [{"id": "ref-for-dfn-try\u2463\u24ea"}, {"id": "ref-for-dfn-try\u2463\u2460"}, {"id": "ref-for-dfn-try\u2463\u2461"}, {"id": "ref-for-dfn-try\u2463\u2462"}], "title": "6.5.4.3. The script.callFunction Command"}, {"refs": [{"id": "ref-for-dfn-try\u2463\u2463"}], "title": "6.5.4.4. The script.evaluate Command"}, {"refs": [{"id": "ref-for-dfn-try\u2463\u2464"}], "title": "6.5.4.5. The script.getRealms Command"}, {"refs": [{"id": "ref-for-dfn-try\u2463\u2465"}], "title": "6.7.2.1. input.ElementOrigin"}, {"refs": [{"id": "ref-for-dfn-try\u2463\u2466"}, {"id": "ref-for-dfn-try\u2463\u2467"}], "title": "6.7.3.1. The input.performActions Command"}, {"refs": [{"id": "ref-for-dfn-try\u2463\u2468"}, {"id": "ref-for-dfn-try\u2464\u24ea"}], "title": "6.7.3.2. The input.releaseActions Command"}], "external": true};
window.dfnpanelData['7aa9c8e0'] = {"dfnID": "7aa9c8e0", "url": "https://w3c.github.io/webdriver/#dfn-try", "dfnText": "trying", "refSections": [{"refs": [{"id": "ref-for-dfn-try"}, {"id": "ref-for-dfn-try\u2460"}], "title": "6.1.1. Definition"}, {"refs": [{"id": "ref-for-dfn-try\u2461"}, {"id": "ref-for-dfn-try\u2462"}], "title": "6.1.3.2. The session.new Command"}, {"refs": [{"id": "ref-for-dfn-try\u2463"}], "title": "6.1.3.4. The session.subscribe Command"}, {"refs": [{"id": "ref-for-dfn-try\u2464"}], "title": "6.1.3.5. The session.unsubscribe Command"}, {"refs": [{"id": "ref-for-dfn-try\u2465"}], "title": "6.3.3.1. The browsingContext.activate Command"}, {"refs": [{"id": "ref-for-dfn-try\u2466"}, {"id": "ref-for-dfn-try\u2467"}, {"id": "ref-for-dfn-try\u2468"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}, {"refs": [{"id": "ref-for-dfn-try\u2460\u24ea"}], "title": "6.3.3.3. The browsingContext.close Command"}, {"refs": [{"id": "ref-for-dfn-try\u2460\u2460"}], "title": "6.3.3.4. The browsingContext.create Command"}, {"refs": [{"id": "ref-for-dfn-try\u2460\u2461"}], "title": "6.3.3.5. The browsingContext.getTree Command"}, {"refs": [{"id": "ref-for-dfn-try\u2460\u2462"}], "title": "6.3.3.6. The browsingContext.handleUserPrompt Command"}, {"refs": [{"id": "ref-for-dfn-try\u2460\u2463"}], "title": "6.3.3.7. The browsingContext.navigate Command"}, {"refs": [{"id": "ref-for-dfn-try\u2460\u2464"}, {"id": "ref-for-dfn-try\u2460\u2465"}], "title": "6.3.3.8. The browsingContext.print Command"}, {"refs": [{"id": "ref-for-dfn-try\u2460\u2466"}], "title": "6.3.3.9. The browsingContext.reload Command"}, {"refs": [{"id": "ref-for-dfn-try\u2460\u2467"}], "title": "6.3.3.10. The browsingContext.setViewport Command"}, {"refs": [{"id": "ref-for-dfn-try\u2460\u2468"}, {"id": "ref-for-dfn-try\u2461\u24ea"}, {"id": "ref-for-dfn-try\u2461\u2460"}, {"id": "ref-for-dfn-try\u2461\u2461"}, {"id": "ref-for-dfn-try\u2461\u2462"}, {"id": "ref-for-dfn-try\u2461\u2463"}], "title": "6.4.3.16. The network.UrlPattern Type"}, {"refs": [{"id": "ref-for-dfn-try\u2461\u2464"}], "title": "6.4.4.1. The network.addIntercept Command"}, {"refs": [{"id": "ref-for-dfn-try\u2461\u2465"}], "title": "6.4.4.3. The network.continueResponse Command"}, {"refs": [{"id": "ref-for-dfn-try\u2461\u2466"}], "title": "6.4.4.6. The network.provideResponse Command"}, {"refs": [{"id": "ref-for-dfn-try\u2461\u2467"}, {"id": "ref-for-dfn-try\u2461\u2468"}, {"id": "ref-for-dfn-try\u2462\u24ea"}, {"id": "ref-for-dfn-try\u2462\u2460"}, {"id": "ref-for-dfn-try\u2462\u2461"}, {"id": "ref-for-dfn-try\u2462\u2462"}, {"id": "ref-for-dfn-try\u2462\u2463"}], "title": "6.5.3.6. The script.LocalValue Type"}, {"refs": [{"id": "ref-for-dfn-try\u2462\u2464"}], "title": "6.5.3.12. The script.RemoteReference Type"}, {"refs": [{"id": "ref-for-dfn-try\u2462\u2465"}, {"id": "ref-for-dfn-try\u2462\u2466"}], "title": "6.5.3.20. The script.Target Type"}, {"refs": [{"id": "ref-for-dfn-try\u2462\u2467"}], "title": "6.5.4.1. The script.addPreloadScript Command"}, {"refs": [{"id": "ref-for-dfn-try\u2462\u2468"}], "title": "6.5.4.2. The script.disown Command"}, {"refs": [{"id": "ref-for-dfn-try\u2463\u24ea"}, {"id": "ref-for-dfn-try\u2463\u2460"}, {"id": "ref-for-dfn-try\u2463\u2461"}, {"id": "ref-for-dfn-try\u2463\u2462"}], "title": "6.5.4.3. The script.callFunction Command"}, {"refs": [{"id": "ref-for-dfn-try\u2463\u2463"}], "title": "6.5.4.4. The script.evaluate Command"}, {"refs": [{"id": "ref-for-dfn-try\u2463\u2464"}], "title": "6.5.4.5. The script.getRealms Command"}, {"refs": [{"id": "ref-for-dfn-try\u2463\u2465"}], "title": "6.7.2.1. input.ElementOrigin"}, {"refs": [{"id": "ref-for-dfn-try\u2463\u2466"}, {"id": "ref-for-dfn-try\u2463\u2467"}], "title": "6.7.3.1. The input.performActions Command"}, {"refs": [{"id": "ref-for-dfn-try\u2463\u2468"}, {"id": "ref-for-dfn-try\u2464\u24ea"}], "title": "6.7.3.2. The input.releaseActions Command"}], "external": true};
window.dfnpanelData['914911f0'] = {"dfnID": "914911f0", "url": "https://w3c.github.io/webdriver/#dfn-unable-to-capture-screen", "dfnText": "unable to capture screen", "refSections": [{"refs": [{"id": "ref-for-dfn-unable-to-capture-screen"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}], "external": true};
window.dfnpanelData['8b8836ef'] = {"dfnID": "8b8836ef", "url": "https://w3c.github.io/webdriver/#dfn-unknown-command", "dfnText": "unknown command", "refSections": [{"refs": [{"id": "ref-for-dfn-unknown-command"}], "title": "4. Transport"}], "external": true};
window.dfnpanelData['6945cc54'] = {"dfnID": "6945cc54", "url": "https://w3c.github.io/webdriver/#dfn-unknown-error", "dfnText": "unknown error", "refSections": [{"refs": [{"id": "ref-for-dfn-unknown-error"}, {"id": "ref-for-dfn-unknown-error\u2460"}], "title": "6.3.2.2. The browsingContext.Info Type"}], "external": true};
window.dfnpanelData['a869e769'] = {"dfnID": "a869e769", "url": "https://w3c.github.io/webdriver/#dfn-unsupported-operation", "dfnText": "unsupported operation", "refSections": [{"refs": [{"id": "ref-for-dfn-unsupported-operation"}], "title": "6.3.3.1. The browsingContext.activate Command"}, {"refs": [{"id": "ref-for-dfn-unsupported-operation\u2460"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}, {"refs": [{"id": "ref-for-dfn-unsupported-operation\u2461"}], "title": "6.3.3.4. The browsingContext.create Command"}, {"refs": [{"id": "ref-for-dfn-unsupported-operation\u2462"}], "title": "6.3.3.8. The browsingContext.print Command"}, {"refs": [{"id": "ref-for-dfn-unsupported-operation\u2463"}], "title": "6.3.3.10. The browsingContext.setViewport Command"}], "external": true};
window.dfnpanelData['a795f739'] = {"dfnID": "a795f739", "url": "https://w3c.github.io/webdriver/#dfn-webdriver-new-session-algorithm", "dfnText": "webdriver new session algorithm", "refSections": [{"refs": [{"id": "ref-for-dfn-webdriver-new-session-algorithm"}], "title": "4.1. Establishing a Connection"}], "external": true};
window.dfnpanelData['db8fb765'] = {"dfnID": "db8fb765", "url": "https://w3c.github.io/webdriver/#dfn-webdriver-active-flag", "dfnText": "webdriver-active flag", "refSections": [{"refs": [{"id": "ref-for-dfn-webdriver-active-flag"}], "title": "6.1.1. Definition"}], "external": true};
window.dfnpanelData['660a1a43'] = {"dfnID": "660a1a43", "url": "https://w3c.github.io/webdriver/#dfn-window-handle", "dfnText": "window handle", "refSections": [{"refs": [{"id": "ref-for-dfn-window-handle"}, {"id": "ref-for-dfn-window-handle\u2460"}], "title": "6.3.2.1. The browsingContext.BrowsingContext Type"}], "external": true};
window.dfnpanelData['82ca3efc'] = {"dfnID": "82ca3efc", "url": "https://webidl.spec.whatwg.org/#exceptiondef-typeerror", "dfnText": "TypeError", "refSections": [{"refs": [{"id": "ref-for-exceptiondef-typeerror"}], "title": "6.5.2. Preload Scripts"}], "external": true};
window.dfnpanelData['6728fdee'] = {"dfnID": "6728fdee", "url": "https://webidl.spec.whatwg.org/#dfn-platform-object", "dfnText": "platform object", "refSections": [{"refs": [{"id": "ref-for-dfn-platform-object"}, {"id": "ref-for-dfn-platform-object\u2460"}, {"id": "ref-for-dfn-platform-object\u2461"}, {"id": "ref-for-dfn-platform-object\u2462"}, {"id": "ref-for-dfn-platform-object\u2463"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": true};
window.dfnpanelData['wait-queue'] = {"dfnID": "wait-queue", "url": "#wait-queue", "dfnText": "wait queue", "refSections": [{"refs": [{"id": "ref-for-wait-queue"}, {"id": "ref-for-wait-queue\u2460"}, {"id": "ref-for-wait-queue\u2461"}, {"id": "ref-for-wait-queue\u2462"}, {"id": "ref-for-wait-queue\u2463"}], "title": "2. Infrastructure"}], "external": false};
window.dfnpanelData['awaits'] = {"dfnID": "awaits", "url": "#awaits", "dfnText": "awaits", "refSections": [{"refs": [{"id": "ref-for-awaits"}], "title": "2. Infrastructure"}, {"refs": [{"id": "ref-for-awaits\u2460"}, {"id": "ref-for-awaits\u2461"}], "title": "6.3.2.2. The browsingContext.Info Type"}, {"refs": [{"id": "ref-for-awaits\u2462"}], "title": "6.4.5.1. The network.authRequired Event"}, {"refs": [{"id": "ref-for-awaits\u2463"}], "title": "6.4.5.2. The network.beforeRequestSent Event"}, {"refs": [{"id": "ref-for-awaits\u2464"}], "title": "6.4.5.5. The network.responseStarted Event"}], "external": false};
window.dfnpanelData['resume'] = {"dfnID": "resume", "url": "#resume", "dfnText": "resume", "refSections": [{"refs": [{"id": "ref-for-resume"}], "title": "6.3.4.3. The browsingContext.navigationStarted Event"}, {"refs": [{"id": "ref-for-resume\u2460"}], "title": "6.3.4.4. The browsingContext.fragmentNavigated Event"}, {"refs": [{"id": "ref-for-resume\u2461"}], "title": "6.3.4.5. The browsingContext.domContentLoaded Event"}, {"refs": [{"id": "ref-for-resume\u2462"}], "title": "6.3.4.6. The browsingContext.load Event"}, {"refs": [{"id": "ref-for-resume\u2463"}], "title": "6.3.4.7. The browsingContext.downloadWillBegin Event"}, {"refs": [{"id": "ref-for-resume\u2464"}], "title": "6.3.4.8. The browsingContext.navigationAborted Event"}, {"refs": [{"id": "ref-for-resume\u2465"}], "title": "6.3.4.9. The browsingContext.navigationFailed Event"}, {"refs": [{"id": "ref-for-resume\u2466"}], "title": "6.4.4.2. The network.continueRequest Command"}, {"refs": [{"id": "ref-for-resume\u2467"}], "title": "6.4.4.3. The network.continueResponse Command"}, {"refs": [{"id": "ref-for-resume\u2468"}], "title": "6.4.4.4. The network.continueWithAuth Command"}, {"refs": [{"id": "ref-for-resume\u2460\u24ea"}], "title": "6.4.4.5. The network.failRequest Command"}, {"refs": [{"id": "ref-for-resume\u2460\u2460"}], "title": "6.4.4.6. The network.provideResponse Command"}], "external": false};
window.dfnpanelData['remote-end-definition'] = {"dfnID": "remote-end-definition", "url": "#remote-end-definition", "dfnText": "remote end definition", "refSections": [{"refs": [{"id": "ref-for-remote-end-definition"}, {"id": "ref-for-remote-end-definition\u2460"}, {"id": "ref-for-remote-end-definition\u2461"}], "title": "3.1. Definition"}, {"refs": [{"id": "ref-for-remote-end-definition\u2462"}, {"id": "ref-for-remote-end-definition\u2463"}], "title": "3.3. Modules"}, {"refs": [{"id": "ref-for-remote-end-definition\u2464"}], "title": "3.4. Commands"}, {"refs": [{"id": "ref-for-remote-end-definition\u2465"}], "title": "4. Transport"}, {"refs": [{"id": "ref-for-remote-end-definition\u2466"}], "title": "6.1.1. Definition"}, {"refs": [{"id": "ref-for-remote-end-definition\u2467"}], "title": "6.1.2.2. The session.CapabilityRequest Type"}, {"refs": [{"id": "ref-for-remote-end-definition\u2468"}], "title": "6.2.1. Definition"}, {"refs": [{"id": "ref-for-remote-end-definition\u2460\u24ea"}], "title": "6.3.1. Definition"}, {"refs": [{"id": "ref-for-remote-end-definition\u2460\u2460"}], "title": "6.3.2.1. The browsingContext.BrowsingContext Type"}, {"refs": [{"id": "ref-for-remote-end-definition\u2460\u2461"}], "title": "6.3.2.3. The browsingContext.Navigation Type"}, {"refs": [{"id": "ref-for-remote-end-definition\u2460\u2462"}], "title": "6.4.1. Definition"}, {"refs": [{"id": "ref-for-remote-end-definition\u2460\u2463"}], "title": "6.4.3.5. The network.Cookie Type"}, {"refs": [{"id": "ref-for-remote-end-definition\u2460\u2464"}], "title": "6.4.3.6. The network.CookieHeader Type"}, {"refs": [{"id": "ref-for-remote-end-definition\u2460\u2465"}], "title": "6.4.3.7. The network.FetchTimingInfo Type"}, {"refs": [{"id": "ref-for-remote-end-definition\u2460\u2466"}], "title": "6.4.3.8. The network.Header Type"}, {"refs": [{"id": "ref-for-remote-end-definition\u2460\u2467"}], "title": "6.4.3.9. The network.Initiator Type"}, {"refs": [{"id": "ref-for-remote-end-definition\u2460\u2468"}], "title": "6.4.3.10. The network.Intercept Type"}, {"refs": [{"id": "ref-for-remote-end-definition\u2461\u24ea"}], "title": "6.4.3.11. The network.Request Type"}, {"refs": [{"id": "ref-for-remote-end-definition\u2461\u2460"}], "title": "6.4.3.12. The network.RequestData Type"}, {"refs": [{"id": "ref-for-remote-end-definition\u2461\u2461"}], "title": "6.4.3.13. The network.ResponseContent Type"}, {"refs": [{"id": "ref-for-remote-end-definition\u2461\u2462"}], "title": "6.4.3.14. The network.ResponseData Type"}, {"refs": [{"id": "ref-for-remote-end-definition\u2461\u2463"}], "title": "6.4.3.15. The network.SetCookieHeader Type"}, {"refs": [{"id": "ref-for-remote-end-definition\u2461\u2464"}], "title": "6.4.3.16. The network.UrlPattern Type"}, {"refs": [{"id": "ref-for-remote-end-definition\u2461\u2465"}], "title": "6.5.1. Definition"}, {"refs": [{"id": "ref-for-remote-end-definition\u2461\u2466"}], "title": "6.5.3.1. The script.Channel Type"}, {"refs": [{"id": "ref-for-remote-end-definition\u2461\u2467"}], "title": "6.5.3.2. The script.ChannelValue Type"}, {"refs": [{"id": "ref-for-remote-end-definition\u2461\u2468"}], "title": "6.5.3.3. The script.EvaluateResult Type"}, {"refs": [{"id": "ref-for-remote-end-definition\u2462\u24ea"}], "title": "6.5.3.4. The script.ExceptionDetails Type"}, {"refs": [{"id": "ref-for-remote-end-definition\u2462\u2460"}], "title": "6.5.3.5. The script.Handle Type"}, {"refs": [{"id": "ref-for-remote-end-definition\u2462\u2461"}], "title": "6.5.3.6. The script.LocalValue Type"}, {"refs": [{"id": "ref-for-remote-end-definition\u2462\u2462"}], "title": "6.5.3.7. The script.PreloadScript Type"}, {"refs": [{"id": "ref-for-remote-end-definition\u2462\u2463"}], "title": "6.5.3.8. The script.Realm Type"}, {"refs": [{"id": "ref-for-remote-end-definition\u2462\u2464"}], "title": "6.5.3.9. The script.PrimitiveProtocolValue Type"}, {"refs": [{"id": "ref-for-remote-end-definition\u2462\u2465"}], "title": "6.5.3.11. The script.RealmType Type"}, {"refs": [{"id": "ref-for-remote-end-definition\u2462\u2466"}], "title": "6.5.3.12. The script.RemoteReference Type"}, {"refs": [{"id": "ref-for-remote-end-definition\u2462\u2467"}], "title": "6.5.3.13. The script.RemoteValue Type"}, {"refs": [{"id": "ref-for-remote-end-definition\u2462\u2468"}], "title": "6.5.3.15. The script.SerializationOptions Type"}, {"refs": [{"id": "ref-for-remote-end-definition\u2463\u24ea"}], "title": "6.5.3.16. The script.SharedId Type"}, {"refs": [{"id": "ref-for-remote-end-definition\u2463\u2460"}], "title": "6.5.3.17. The script.StackFrame Type"}, {"refs": [{"id": "ref-for-remote-end-definition\u2463\u2461"}], "title": "6.5.3.18. The script.StackTrace Type"}, {"refs": [{"id": "ref-for-remote-end-definition\u2463\u2462"}], "title": "6.5.3.20. The script.Target Type"}, {"refs": [{"id": "ref-for-remote-end-definition\u2463\u2463"}], "title": "6.7.1. Definition"}], "external": false};
window.dfnpanelData['local-end-definition'] = {"dfnID": "local-end-definition", "url": "#local-end-definition", "dfnText": "local end\ndefinition", "refSections": [{"refs": [{"id": "ref-for-local-end-definition"}, {"id": "ref-for-local-end-definition\u2460"}, {"id": "ref-for-local-end-definition\u2461"}], "title": "3.1. Definition"}, {"refs": [{"id": "ref-for-local-end-definition\u2462"}, {"id": "ref-for-local-end-definition\u2463"}, {"id": "ref-for-local-end-definition\u2464"}], "title": "3.3. Modules"}, {"refs": [{"id": "ref-for-local-end-definition\u2465"}], "title": "3.4. Commands"}, {"refs": [{"id": "ref-for-local-end-definition\u2466"}], "title": "3.6. Events"}, {"refs": [{"id": "ref-for-local-end-definition\u2467"}, {"id": "ref-for-local-end-definition\u2468"}], "title": "4. Transport"}, {"refs": [{"id": "ref-for-local-end-definition\u2460\u24ea"}], "title": "6.1.1. Definition"}, {"refs": [{"id": "ref-for-local-end-definition\u2460\u2460"}], "title": "6.1.2.2. The session.CapabilityRequest Type"}, {"refs": [{"id": "ref-for-local-end-definition\u2460\u2461"}], "title": "6.2.1. Definition"}, {"refs": [{"id": "ref-for-local-end-definition\u2460\u2462"}], "title": "6.3.1. Definition"}, {"refs": [{"id": "ref-for-local-end-definition\u2460\u2463"}], "title": "6.3.2.1. The browsingContext.BrowsingContext Type"}, {"refs": [{"id": "ref-for-local-end-definition\u2460\u2464"}], "title": "6.3.2.2. The browsingContext.Info Type"}, {"refs": [{"id": "ref-for-local-end-definition\u2460\u2465"}], "title": "6.3.2.3. The browsingContext.Navigation Type"}, {"refs": [{"id": "ref-for-local-end-definition\u2460\u2466"}], "title": "6.3.2.4. The browsingContext.NavigationInfo Type"}, {"refs": [{"id": "ref-for-local-end-definition\u2460\u2467"}], "title": "6.4.1. Definition"}, {"refs": [{"id": "ref-for-local-end-definition\u2460\u2468"}], "title": "6.4.3.5. The network.Cookie Type"}, {"refs": [{"id": "ref-for-local-end-definition\u2461\u24ea"}], "title": "6.4.3.7. The network.FetchTimingInfo Type"}, {"refs": [{"id": "ref-for-local-end-definition\u2461\u2460"}], "title": "6.4.3.8. The network.Header Type"}, {"refs": [{"id": "ref-for-local-end-definition\u2461\u2461"}], "title": "6.4.3.9. The network.Initiator Type"}, {"refs": [{"id": "ref-for-local-end-definition\u2461\u2462"}], "title": "6.4.3.10. The network.Intercept Type"}, {"refs": [{"id": "ref-for-local-end-definition\u2461\u2463"}], "title": "6.4.3.11. The network.Request Type"}, {"refs": [{"id": "ref-for-local-end-definition\u2461\u2464"}], "title": "6.4.3.12. The network.RequestData Type"}, {"refs": [{"id": "ref-for-local-end-definition\u2461\u2465"}], "title": "6.4.3.13. The network.ResponseContent Type"}, {"refs": [{"id": "ref-for-local-end-definition\u2461\u2466"}], "title": "6.4.3.14. The network.ResponseData Type"}, {"refs": [{"id": "ref-for-local-end-definition\u2461\u2467"}], "title": "6.5.1. Definition"}, {"refs": [{"id": "ref-for-local-end-definition\u2461\u2468"}], "title": "6.5.3.1. The script.Channel Type"}, {"refs": [{"id": "ref-for-local-end-definition\u2462\u24ea"}], "title": "6.5.3.3. The script.EvaluateResult Type"}, {"refs": [{"id": "ref-for-local-end-definition\u2462\u2460"}], "title": "6.5.3.4. The script.ExceptionDetails Type"}, {"refs": [{"id": "ref-for-local-end-definition\u2462\u2461"}], "title": "6.5.3.5. The script.Handle Type"}, {"refs": [{"id": "ref-for-local-end-definition\u2462\u2462"}], "title": "6.5.3.7. The script.PreloadScript Type"}, {"refs": [{"id": "ref-for-local-end-definition\u2462\u2463"}], "title": "6.5.3.8. The script.Realm Type"}, {"refs": [{"id": "ref-for-local-end-definition\u2462\u2464"}, {"id": "ref-for-local-end-definition\u2462\u2465"}, {"id": "ref-for-local-end-definition\u2462\u2466"}, {"id": "ref-for-local-end-definition\u2462\u2467"}, {"id": "ref-for-local-end-definition\u2462\u2468"}, {"id": "ref-for-local-end-definition\u2463\u24ea"}, {"id": "ref-for-local-end-definition\u2463\u2460"}], "title": "6.5.3.9. The script.PrimitiveProtocolValue Type"}, {"refs": [{"id": "ref-for-local-end-definition\u2463\u2461"}], "title": "6.5.3.10. The script.RealmInfo Type"}, {"refs": [{"id": "ref-for-local-end-definition\u2463\u2462"}], "title": "6.5.3.11. The script.RealmType Type"}, {"refs": [{"id": "ref-for-local-end-definition\u2463\u2463"}, {"id": "ref-for-local-end-definition\u2463\u2464"}, {"id": "ref-for-local-end-definition\u2463\u2465"}, {"id": "ref-for-local-end-definition\u2463\u2466"}, {"id": "ref-for-local-end-definition\u2463\u2467"}, {"id": "ref-for-local-end-definition\u2463\u2468"}, {"id": "ref-for-local-end-definition\u2464\u24ea"}, {"id": "ref-for-local-end-definition\u2464\u2460"}, {"id": "ref-for-local-end-definition\u2464\u2461"}, {"id": "ref-for-local-end-definition\u2464\u2462"}, {"id": "ref-for-local-end-definition\u2464\u2463"}, {"id": "ref-for-local-end-definition\u2464\u2464"}, {"id": "ref-for-local-end-definition\u2464\u2465"}, {"id": "ref-for-local-end-definition\u2464\u2466"}, {"id": "ref-for-local-end-definition\u2464\u2467"}, {"id": "ref-for-local-end-definition\u2464\u2468"}, {"id": "ref-for-local-end-definition\u2465\u24ea"}, {"id": "ref-for-local-end-definition\u2465\u2460"}, {"id": "ref-for-local-end-definition\u2465\u2461"}], "title": "6.5.3.13. The script.RemoteValue Type"}, {"refs": [{"id": "ref-for-local-end-definition\u2465\u2462"}], "title": "6.5.3.16. The script.SharedId Type"}, {"refs": [{"id": "ref-for-local-end-definition\u2465\u2463"}], "title": "6.5.3.17. The script.StackFrame Type"}, {"refs": [{"id": "ref-for-local-end-definition\u2465\u2464"}], "title": "6.5.3.18. The script.StackTrace Type"}, {"refs": [{"id": "ref-for-local-end-definition\u2465\u2465"}], "title": "6.5.3.19. The script.Source Type"}, {"refs": [{"id": "ref-for-local-end-definition\u2465\u2466"}], "title": "6.6.1. Definition"}, {"refs": [{"id": "ref-for-local-end-definition\u2465\u2467"}], "title": "6.6.2.1. log.LogEntry"}], "external": false};
window.dfnpanelData['bidi-flag'] = {"dfnID": "bidi-flag", "url": "#bidi-flag", "dfnText": "BiDi flag", "refSections": [{"refs": [{"id": "ref-for-bidi-flag"}], "title": "3.2. Session"}, {"refs": [{"id": "ref-for-bidi-flag\u2460"}], "title": "4.1. Establishing a Connection"}, {"refs": [{"id": "ref-for-bidi-flag\u2461"}], "title": "6.1.3.2. The session.new Command"}], "external": false};
window.dfnpanelData['bidi-session'] = {"dfnID": "bidi-session", "url": "#bidi-session", "dfnText": "BiDi session", "refSections": [{"refs": [{"id": "ref-for-bidi-session"}], "title": "3.2. Session"}, {"refs": [{"id": "ref-for-bidi-session\u2460"}], "title": "3.4. Commands"}, {"refs": [{"id": "ref-for-bidi-session\u2461"}, {"id": "ref-for-bidi-session\u2462"}], "title": "3.6. Events"}, {"refs": [{"id": "ref-for-bidi-session\u2463"}, {"id": "ref-for-bidi-session\u2464"}, {"id": "ref-for-bidi-session\u2465"}, {"id": "ref-for-bidi-session\u2466"}, {"id": "ref-for-bidi-session\u2467"}, {"id": "ref-for-bidi-session\u2468"}], "title": "4. Transport"}, {"refs": [{"id": "ref-for-bidi-session\u2460\u24ea"}], "title": "4.1. Establishing a Connection"}, {"refs": [{"id": "ref-for-bidi-session\u2460\u2460"}], "title": "5. Sandboxed Script Execution"}, {"refs": [{"id": "ref-for-bidi-session\u2460\u2461"}], "title": "6.1.3.2. The session.new Command"}, {"refs": [{"id": "ref-for-bidi-session\u2460\u2462"}, {"id": "ref-for-bidi-session\u2460\u2463"}], "title": "6.4.2. Network Intercepts"}, {"refs": [{"id": "ref-for-bidi-session\u2460\u2464"}], "title": "6.5.2. Preload Scripts"}, {"refs": [{"id": "ref-for-bidi-session\u2460\u2465"}], "title": "6.6. The log Module"}], "external": false};
window.dfnpanelData['active-bidi-sessions'] = {"dfnID": "active-bidi-sessions", "url": "#active-bidi-sessions", "dfnText": "active BiDi sessions", "refSections": [{"refs": [{"id": "ref-for-active-bidi-sessions"}], "title": "3.6. Events"}, {"refs": [{"id": "ref-for-active-bidi-sessions\u2460"}], "title": "6.5.2. Preload Scripts"}, {"refs": [{"id": "ref-for-active-bidi-sessions\u2461"}, {"id": "ref-for-active-bidi-sessions\u2462"}], "title": "6.6.3.1. The log.entryAdded Event"}], "external": false};
window.dfnpanelData['module-name'] = {"dfnID": "module-name", "url": "#module-name", "dfnText": "module name", "refSections": [{"refs": [{"id": "ref-for-module-name"}, {"id": "ref-for-module-name\u2460"}], "title": "3.3. Modules"}, {"refs": [{"id": "ref-for-module-name\u2461"}], "title": "3.6. Events"}], "external": false};
window.dfnpanelData['extension-modules'] = {"dfnID": "extension-modules", "url": "#extension-modules", "dfnText": "extension modules", "refSections": [{"refs": [{"id": "ref-for-extension-modules"}], "title": "3.4. Commands"}], "external": false};
window.dfnpanelData['command'] = {"dfnID": "command", "url": "#command", "dfnText": "command", "refSections": [{"refs": [{"id": "ref-for-command"}, {"id": "ref-for-command\u2460"}, {"id": "ref-for-command\u2461"}, {"id": "ref-for-command\u2462"}], "title": "3.3. Modules"}, {"refs": [{"id": "ref-for-command\u2463"}], "title": "3.4. Commands"}, {"refs": [{"id": "ref-for-command\u2464"}], "title": "4. Transport"}], "external": false};
window.dfnpanelData['command-command-name'] = {"dfnID": "command-command-name", "url": "#command-command-name", "dfnText": "command\nname", "refSections": [{"refs": [{"id": "ref-for-command-command-name"}], "title": "3.3. Modules"}, {"refs": [{"id": "ref-for-command-command-name\u2460"}], "title": "3.4. Commands"}, {"refs": [{"id": "ref-for-command-command-name\u2461"}, {"id": "ref-for-command-command-name\u2462"}], "title": "4. Transport"}], "external": false};
window.dfnpanelData['command-command-parameters'] = {"dfnID": "command-command-parameters", "url": "#command-command-parameters", "dfnText": "command parameters", "refSections": [{"refs": [{"id": "ref-for-command-command-parameters"}], "title": "3.4. Commands"}, {"refs": [{"id": "ref-for-command-command-parameters\u2460"}], "title": "4. Transport"}], "external": false};
window.dfnpanelData['command-result-type'] = {"dfnID": "command-result-type", "url": "#command-result-type", "dfnText": "result type", "refSections": [{"refs": [{"id": "ref-for-command-result-type"}], "title": "3.4. Commands"}, {"refs": [{"id": "ref-for-command-result-type\u2460"}], "title": "4. Transport"}], "external": false};
window.dfnpanelData['static-command'] = {"dfnID": "static-command", "url": "#static-command", "dfnText": "static\ncommand", "refSections": [{"refs": [{"id": "ref-for-static-command"}], "title": "4. Transport"}, {"refs": [{"id": "ref-for-static-command\u2460"}], "title": "6.1.3.1. The session.status Command"}, {"refs": [{"id": "ref-for-static-command\u2461"}], "title": "6.1.3.2. The session.new Command"}], "external": false};
window.dfnpanelData['command-set-of-all-command-names'] = {"dfnID": "command-set-of-all-command-names", "url": "#command-set-of-all-command-names", "dfnText": "set of all command names", "refSections": [{"refs": [{"id": "ref-for-command-set-of-all-command-names"}], "title": "4. Transport"}], "external": false};
window.dfnpanelData['no-such-handle'] = {"dfnID": "no-such-handle", "url": "#no-such-handle", "dfnText": "no such handle", "refSections": [{"refs": [{"id": "ref-for-no-such-handle"}], "title": "6.5.3.12. The script.RemoteReference Type"}], "external": false};
window.dfnpanelData['no-such-intercept'] = {"dfnID": "no-such-intercept", "url": "#no-such-intercept", "dfnText": "no such intercept", "refSections": [{"refs": [{"id": "ref-for-no-such-intercept"}], "title": "6.4.4.7. The network.removeIntercept Command"}], "external": false};
window.dfnpanelData['no-such-node'] = {"dfnID": "no-such-node", "url": "#no-such-node", "dfnText": "no such node", "refSections": [{"refs": [{"id": "ref-for-no-such-node"}, {"id": "ref-for-no-such-node\u2460"}, {"id": "ref-for-no-such-node\u2461"}], "title": "6.5.3.12. The script.RemoteReference Type"}], "external": false};
window.dfnpanelData['no-such-request'] = {"dfnID": "no-such-request", "url": "#no-such-request", "dfnText": "no such request", "refSections": [{"refs": [{"id": "ref-for-no-such-request"}], "title": "6.4.4.2. The network.continueRequest Command"}, {"refs": [{"id": "ref-for-no-such-request\u2460"}], "title": "6.4.4.3. The network.continueResponse Command"}, {"refs": [{"id": "ref-for-no-such-request\u2461"}], "title": "6.4.4.4. The network.continueWithAuth Command"}, {"refs": [{"id": "ref-for-no-such-request\u2462"}], "title": "6.4.4.5. The network.failRequest Command"}], "external": false};
window.dfnpanelData['no-such-script'] = {"dfnID": "no-such-script", "url": "#no-such-script", "dfnText": "no such script", "refSections": [{"refs": [{"id": "ref-for-no-such-script"}], "title": "6.5.4.6. The script.removePreloadScript Command"}], "external": false};
window.dfnpanelData['unable-to-close-browser'] = {"dfnID": "unable-to-close-browser", "url": "#unable-to-close-browser", "dfnText": "unable to close browser", "refSections": [{"refs": [{"id": "ref-for-unable-to-close-browser"}], "title": "6.2.2.1. The browser.close Command"}], "external": false};
window.dfnpanelData['event'] = {"dfnID": "event", "url": "#event", "dfnText": "event", "refSections": [{"refs": [{"id": "ref-for-event"}, {"id": "ref-for-event\u2460"}, {"id": "ref-for-event\u2461"}], "title": "3.3. Modules"}, {"refs": [{"id": "ref-for-event\u2462"}], "title": "3.6. Events"}, {"refs": [{"id": "ref-for-event\u2463"}], "title": "4. Transport"}, {"refs": [{"id": "ref-for-event\u2464"}, {"id": "ref-for-event\u2465"}, {"id": "ref-for-event\u2466"}, {"id": "ref-for-event\u2467"}], "title": "6.1.3.4. The session.subscribe Command"}], "external": false};
window.dfnpanelData['event-event-type'] = {"dfnID": "event-event-type", "url": "#event-event-type", "dfnText": "event type", "refSections": [{"refs": [{"id": "ref-for-event-event-type"}], "title": "3.6. Events"}], "external": false};
window.dfnpanelData['event-event-name'] = {"dfnID": "event-event-name", "url": "#event-event-name", "dfnText": "event\nname", "refSections": [{"refs": [{"id": "ref-for-event-event-name"}], "title": "3.3. Modules"}, {"refs": [{"id": "ref-for-event-event-name\u2460"}, {"id": "ref-for-event-event-name\u2461"}, {"id": "ref-for-event-event-name\u2462"}, {"id": "ref-for-event-event-name\u2463"}], "title": "3.6. Events"}, {"refs": [{"id": "ref-for-event-event-name\u2464"}, {"id": "ref-for-event-event-name\u2465"}], "title": "6.1.3.4. The session.subscribe Command"}], "external": false};
window.dfnpanelData['remote-end-event-trigger'] = {"dfnID": "remote-end-event-trigger", "url": "#remote-end-event-trigger", "dfnText": "remote end event trigger", "refSections": [{"refs": [{"id": "ref-for-remote-end-event-trigger"}], "title": "6.3.4.1. The browsingContext.contextCreated Event"}, {"refs": [{"id": "ref-for-remote-end-event-trigger\u2460"}], "title": "6.3.4.2. The browsingContext.contextDestroyed Event"}, {"refs": [{"id": "ref-for-remote-end-event-trigger\u2461"}], "title": "6.3.4.3. The browsingContext.navigationStarted Event"}, {"refs": [{"id": "ref-for-remote-end-event-trigger\u2462"}], "title": "6.3.4.4. The browsingContext.fragmentNavigated Event"}, {"refs": [{"id": "ref-for-remote-end-event-trigger\u2463"}], "title": "6.3.4.5. The browsingContext.domContentLoaded Event"}, {"refs": [{"id": "ref-for-remote-end-event-trigger\u2464"}], "title": "6.3.4.6. The browsingContext.load Event"}, {"refs": [{"id": "ref-for-remote-end-event-trigger\u2465"}], "title": "6.3.4.7. The browsingContext.downloadWillBegin Event"}, {"refs": [{"id": "ref-for-remote-end-event-trigger\u2466"}], "title": "6.3.4.8. The browsingContext.navigationAborted Event"}, {"refs": [{"id": "ref-for-remote-end-event-trigger\u2467"}], "title": "6.3.4.9. The browsingContext.navigationFailed Event"}, {"refs": [{"id": "ref-for-remote-end-event-trigger\u2468"}], "title": "6.3.4.10. The browsingContext.userPromptClosed Event"}, {"refs": [{"id": "ref-for-remote-end-event-trigger\u2460\u24ea"}], "title": "6.3.4.11. The browsingContext.userPromptOpened Event"}, {"refs": [{"id": "ref-for-remote-end-event-trigger\u2460\u2460"}], "title": "6.4.5.1. The network.authRequired Event"}, {"refs": [{"id": "ref-for-remote-end-event-trigger\u2460\u2461"}], "title": "6.4.5.2. The network.beforeRequestSent Event"}, {"refs": [{"id": "ref-for-remote-end-event-trigger\u2460\u2462"}], "title": "6.4.5.3. The network.fetchError Event"}, {"refs": [{"id": "ref-for-remote-end-event-trigger\u2460\u2463"}], "title": "6.4.5.4. The network.responseCompleted Event"}, {"refs": [{"id": "ref-for-remote-end-event-trigger\u2460\u2464"}], "title": "6.4.5.5. The network.responseStarted Event"}, {"refs": [{"id": "ref-for-remote-end-event-trigger\u2460\u2465"}], "title": "6.5.5.1. The script.message Event"}, {"refs": [{"id": "ref-for-remote-end-event-trigger\u2460\u2466"}], "title": "6.5.5.2. The script.realmCreated Event"}, {"refs": [{"id": "ref-for-remote-end-event-trigger\u2460\u2467"}], "title": "6.5.5.3. The script.realmDestroyed Event"}, {"refs": [{"id": "ref-for-remote-end-event-trigger\u2460\u2468"}], "title": "6.6.3.1. The log.entryAdded Event"}], "external": false};
window.dfnpanelData['remote-end-subscribe-steps'] = {"dfnID": "remote-end-subscribe-steps", "url": "#remote-end-subscribe-steps", "dfnText": "remote end subscribe steps", "refSections": [{"refs": [{"id": "ref-for-remote-end-subscribe-steps"}, {"id": "ref-for-remote-end-subscribe-steps\u2460"}], "title": "6.1.3.4. The session.subscribe Command"}, {"refs": [{"id": "ref-for-remote-end-subscribe-steps\u2461"}], "title": "6.3.4.1. The browsingContext.contextCreated Event"}, {"refs": [{"id": "ref-for-remote-end-subscribe-steps\u2462"}], "title": "6.5.5.2. The script.realmCreated Event"}, {"refs": [{"id": "ref-for-remote-end-subscribe-steps\u2463"}], "title": "6.6.3.1. The log.entryAdded Event"}], "external": false};
window.dfnpanelData['subscribe-priority'] = {"dfnID": "subscribe-priority", "url": "#subscribe-priority", "dfnText": "subscribe priority", "refSections": [{"refs": [{"id": "ref-for-subscribe-priority"}], "title": "6.1.3.4. The session.subscribe Command"}, {"refs": [{"id": "ref-for-subscribe-priority\u2460"}], "title": "6.3.4.1. The browsingContext.contextCreated Event"}, {"refs": [{"id": "ref-for-subscribe-priority\u2461"}], "title": "6.5.5.2. The script.realmCreated Event"}, {"refs": [{"id": "ref-for-subscribe-priority\u2462"}], "title": "6.6.3.1. The log.entryAdded Event"}], "external": false};
window.dfnpanelData['event-global-event-set'] = {"dfnID": "event-global-event-set", "url": "#event-global-event-set", "dfnText": "global event set", "refSections": [{"refs": [{"id": "ref-for-event-global-event-set"}], "title": "3.6. Events"}, {"refs": [{"id": "ref-for-event-global-event-set\u2460"}, {"id": "ref-for-event-global-event-set\u2461"}], "title": "6.1.1. Definition"}], "external": false};
window.dfnpanelData['event-browsing-context-event-map'] = {"dfnID": "event-browsing-context-event-map", "url": "#event-browsing-context-event-map", "dfnText": "browsing context event\nmap", "refSections": [{"refs": [{"id": "ref-for-event-browsing-context-event-map"}, {"id": "ref-for-event-browsing-context-event-map\u2460"}], "title": "3.6. Events"}, {"refs": [{"id": "ref-for-event-browsing-context-event-map\u2461"}, {"id": "ref-for-event-browsing-context-event-map\u2462"}], "title": "6.1.1. Definition"}], "external": false};
window.dfnpanelData['event-enabled-browsing-contexts'] = {"dfnID": "event-enabled-browsing-contexts", "url": "#event-enabled-browsing-contexts", "dfnText": "event enabled browsing contexts", "refSections": [{"refs": [{"id": "ref-for-event-enabled-browsing-contexts"}], "title": "6.1.1. Definition"}], "external": false};
window.dfnpanelData['set-of-sessions-for-which-an-event-is-enabled'] = {"dfnID": "set-of-sessions-for-which-an-event-is-enabled", "url": "#set-of-sessions-for-which-an-event-is-enabled", "dfnText": "set of sessions for which an event is enabled", "refSections": [{"refs": [{"id": "ref-for-set-of-sessions-for-which-an-event-is-enabled"}], "title": "6.3.4.1. The browsingContext.contextCreated Event"}, {"refs": [{"id": "ref-for-set-of-sessions-for-which-an-event-is-enabled\u2460"}], "title": "6.3.4.2. The browsingContext.contextDestroyed Event"}, {"refs": [{"id": "ref-for-set-of-sessions-for-which-an-event-is-enabled\u2461"}], "title": "6.3.4.3. The browsingContext.navigationStarted Event"}, {"refs": [{"id": "ref-for-set-of-sessions-for-which-an-event-is-enabled\u2462"}], "title": "6.3.4.4. The browsingContext.fragmentNavigated Event"}, {"refs": [{"id": "ref-for-set-of-sessions-for-which-an-event-is-enabled\u2463"}], "title": "6.3.4.5. The browsingContext.domContentLoaded Event"}, {"refs": [{"id": "ref-for-set-of-sessions-for-which-an-event-is-enabled\u2464"}], "title": "6.3.4.6. The browsingContext.load Event"}, {"refs": [{"id": "ref-for-set-of-sessions-for-which-an-event-is-enabled\u2465"}], "title": "6.3.4.7. The browsingContext.downloadWillBegin Event"}, {"refs": [{"id": "ref-for-set-of-sessions-for-which-an-event-is-enabled\u2466"}], "title": "6.3.4.8. The browsingContext.navigationAborted Event"}, {"refs": [{"id": "ref-for-set-of-sessions-for-which-an-event-is-enabled\u2467"}], "title": "6.3.4.9. The browsingContext.navigationFailed Event"}, {"refs": [{"id": "ref-for-set-of-sessions-for-which-an-event-is-enabled\u2468"}], "title": "6.3.4.10. The browsingContext.userPromptClosed Event"}, {"refs": [{"id": "ref-for-set-of-sessions-for-which-an-event-is-enabled\u2460\u24ea"}], "title": "6.3.4.11. The browsingContext.userPromptOpened Event"}, {"refs": [{"id": "ref-for-set-of-sessions-for-which-an-event-is-enabled\u2460\u2460"}], "title": "6.4.5.1. The network.authRequired Event"}, {"refs": [{"id": "ref-for-set-of-sessions-for-which-an-event-is-enabled\u2460\u2461"}], "title": "6.4.5.2. The network.beforeRequestSent Event"}, {"refs": [{"id": "ref-for-set-of-sessions-for-which-an-event-is-enabled\u2460\u2462"}], "title": "6.4.5.3. The network.fetchError Event"}, {"refs": [{"id": "ref-for-set-of-sessions-for-which-an-event-is-enabled\u2460\u2463"}], "title": "6.4.5.4. The network.responseCompleted Event"}, {"refs": [{"id": "ref-for-set-of-sessions-for-which-an-event-is-enabled\u2460\u2464"}], "title": "6.4.5.5. The network.responseStarted Event"}, {"refs": [{"id": "ref-for-set-of-sessions-for-which-an-event-is-enabled\u2460\u2465"}], "title": "6.5.5.2. The script.realmCreated Event"}, {"refs": [{"id": "ref-for-set-of-sessions-for-which-an-event-is-enabled\u2460\u2466"}, {"id": "ref-for-set-of-sessions-for-which-an-event-is-enabled\u2460\u2467"}], "title": "6.5.5.3. The script.realmDestroyed Event"}], "external": false};
window.dfnpanelData['event-is-enabled'] = {"dfnID": "event-is-enabled", "url": "#event-is-enabled", "dfnText": "event is enabled", "refSections": [{"refs": [{"id": "ref-for-event-is-enabled"}], "title": "3.6. Events"}, {"refs": [{"id": "ref-for-event-is-enabled\u2460"}], "title": "6.5.5.1. The script.message Event"}, {"refs": [{"id": "ref-for-event-is-enabled\u2461"}], "title": "6.5.5.2. The script.realmCreated Event"}, {"refs": [{"id": "ref-for-event-is-enabled\u2462"}, {"id": "ref-for-event-is-enabled\u2463"}], "title": "6.6.3.1. The log.entryAdded Event"}], "external": false};
window.dfnpanelData['obtain-a-set-of-event-names'] = {"dfnID": "obtain-a-set-of-event-names", "url": "#obtain-a-set-of-event-names", "dfnText": "obtain a set of event names", "refSections": [{"refs": [{"id": "ref-for-obtain-a-set-of-event-names"}], "title": "6.1.1. Definition"}], "external": false};
window.dfnpanelData['websocket-listener'] = {"dfnID": "websocket-listener", "url": "#websocket-listener", "dfnText": "WebSocket listener", "refSections": [{"refs": [{"id": "ref-for-websocket-listener"}, {"id": "ref-for-websocket-listener\u2460"}, {"id": "ref-for-websocket-listener\u2461"}, {"id": "ref-for-websocket-listener\u2462"}, {"id": "ref-for-websocket-listener\u2463"}, {"id": "ref-for-websocket-listener\u2464"}], "title": "4. Transport"}, {"refs": [{"id": "ref-for-websocket-listener\u2465"}], "title": "6.2.2.1. The browser.close Command"}], "external": false};
window.dfnpanelData['listener-host'] = {"dfnID": "listener-host", "url": "#listener-host", "dfnText": "host", "refSections": [{"refs": [{"id": "ref-for-listener-host"}, {"id": "ref-for-listener-host\u2460"}, {"id": "ref-for-listener-host\u2461"}, {"id": "ref-for-listener-host\u2462"}], "title": "4. Transport"}], "external": false};
window.dfnpanelData['listener-port'] = {"dfnID": "listener-port", "url": "#listener-port", "dfnText": "port", "refSections": [{"refs": [{"id": "ref-for-listener-port"}, {"id": "ref-for-listener-port\u2460"}, {"id": "ref-for-listener-port\u2461"}], "title": "4. Transport"}], "external": false};
window.dfnpanelData['listener-secure-flag'] = {"dfnID": "listener-secure-flag", "url": "#listener-secure-flag", "dfnText": "secure flag", "refSections": [{"refs": [{"id": "ref-for-listener-secure-flag"}, {"id": "ref-for-listener-secure-flag\u2460"}, {"id": "ref-for-listener-secure-flag\u2461"}], "title": "4. Transport"}], "external": false};
window.dfnpanelData['list-of-websocket-resources'] = {"dfnID": "list-of-websocket-resources", "url": "#list-of-websocket-resources", "dfnText": "list of WebSocket resources", "refSections": [{"refs": [{"id": "ref-for-list-of-websocket-resources"}, {"id": "ref-for-list-of-websocket-resources\u2460"}, {"id": "ref-for-list-of-websocket-resources\u2461"}], "title": "4. Transport"}], "external": false};
window.dfnpanelData['active-listeners'] = {"dfnID": "active-listeners", "url": "#active-listeners", "dfnText": "active\nlisteners", "refSections": [{"refs": [{"id": "ref-for-active-listeners"}, {"id": "ref-for-active-listeners\u2460"}, {"id": "ref-for-active-listeners\u2461"}], "title": "4. Transport"}], "external": false};
window.dfnpanelData['websocket-connections-not-associated-with-a-session'] = {"dfnID": "websocket-connections-not-associated-with-a-session", "url": "#websocket-connections-not-associated-with-a-session", "dfnText": "WebSocket connections not associated with a\nsession", "refSections": [{"refs": [{"id": "ref-for-websocket-connections-not-associated-with-a-session"}, {"id": "ref-for-websocket-connections-not-associated-with-a-session\u2460"}, {"id": "ref-for-websocket-connections-not-associated-with-a-session\u2461"}, {"id": "ref-for-websocket-connections-not-associated-with-a-session\u2462"}], "title": "4. Transport"}], "external": false};
window.dfnpanelData['websocket-connection'] = {"dfnID": "websocket-connection", "url": "#websocket-connection", "dfnText": "WebSocket connection", "refSections": [{"refs": [{"id": "ref-for-websocket-connection"}, {"id": "ref-for-websocket-connection\u2460"}, {"id": "ref-for-websocket-connection\u2461"}, {"id": "ref-for-websocket-connection\u2462"}, {"id": "ref-for-websocket-connection\u2463"}, {"id": "ref-for-websocket-connection\u2464"}, {"id": "ref-for-websocket-connection\u2465"}], "title": "4. Transport"}], "external": false};
window.dfnpanelData['session-websocket-connections'] = {"dfnID": "session-websocket-connections", "url": "#session-websocket-connections", "dfnText": "session WebSocket\nconnections", "refSections": [{"refs": [{"id": "ref-for-session-websocket-connections"}, {"id": "ref-for-session-websocket-connections\u2460"}, {"id": "ref-for-session-websocket-connections\u2461"}, {"id": "ref-for-session-websocket-connections\u2462"}, {"id": "ref-for-session-websocket-connections\u2463"}, {"id": "ref-for-session-websocket-connections\u2464"}], "title": "4. Transport"}], "external": false};
window.dfnpanelData['associated-with-connection'] = {"dfnID": "associated-with-connection", "url": "#associated-with-connection", "dfnText": "associated with connection", "refSections": [{"refs": [{"id": "ref-for-associated-with-connection"}, {"id": "ref-for-associated-with-connection\u2460"}, {"id": "ref-for-associated-with-connection\u2461"}], "title": "4. Transport"}], "external": false};
window.dfnpanelData['construct-a-websocket-resource-name'] = {"dfnID": "construct-a-websocket-resource-name", "url": "#construct-a-websocket-resource-name", "dfnText": "construct a WebSocket resource name", "refSections": [{"refs": [{"id": "ref-for-construct-a-websocket-resource-name"}, {"id": "ref-for-construct-a-websocket-resource-name\u2460"}], "title": "4. Transport"}], "external": false};
window.dfnpanelData['construct-a-websocket-url'] = {"dfnID": "construct-a-websocket-url", "url": "#construct-a-websocket-url", "dfnText": "construct a WebSocket URL", "refSections": [{"refs": [{"id": "ref-for-construct-a-websocket-url"}], "title": "4.1. Establishing a Connection"}], "external": false};
window.dfnpanelData['get-a-session-id-for-a-websocket-resource'] = {"dfnID": "get-a-session-id-for-a-websocket-resource", "url": "#get-a-session-id-for-a-websocket-resource", "dfnText": "get a session ID for a WebSocket resource", "refSections": [{"refs": [{"id": "ref-for-get-a-session-id-for-a-websocket-resource"}], "title": "4. Transport"}], "external": false};
window.dfnpanelData['start-listening-for-a-websocket-connection'] = {"dfnID": "start-listening-for-a-websocket-connection", "url": "#start-listening-for-a-websocket-connection", "dfnText": "start listening for a WebSocket connection", "refSections": [{"refs": [{"id": "ref-for-start-listening-for-a-websocket-connection"}, {"id": "ref-for-start-listening-for-a-websocket-connection\u2460"}], "title": "4.1. Establishing a Connection"}], "external": false};
window.dfnpanelData['handle-an-incoming-message'] = {"dfnID": "handle-an-incoming-message", "url": "#handle-an-incoming-message", "dfnText": "handle an incoming message", "refSections": [{"refs": [{"id": "ref-for-handle-an-incoming-message"}], "title": "4. Transport"}], "external": false};
window.dfnpanelData['get-related-browsing-contexts'] = {"dfnID": "get-related-browsing-contexts", "url": "#get-related-browsing-contexts", "dfnText": "get related browsing contexts", "refSections": [{"refs": [{"id": "ref-for-get-related-browsing-contexts"}], "title": "6.4.5.1. The network.authRequired Event"}, {"refs": [{"id": "ref-for-get-related-browsing-contexts\u2460"}], "title": "6.4.5.2. The network.beforeRequestSent Event"}, {"refs": [{"id": "ref-for-get-related-browsing-contexts\u2461"}], "title": "6.4.5.3. The network.fetchError Event"}, {"refs": [{"id": "ref-for-get-related-browsing-contexts\u2462"}], "title": "6.4.5.4. The network.responseCompleted Event"}, {"refs": [{"id": "ref-for-get-related-browsing-contexts\u2463"}], "title": "6.4.5.5. The network.responseStarted Event"}, {"refs": [{"id": "ref-for-get-related-browsing-contexts\u2464"}], "title": "6.5.5.1. The script.message Event"}, {"refs": [{"id": "ref-for-get-related-browsing-contexts\u2465"}], "title": "6.5.5.2. The script.realmCreated Event"}, {"refs": [{"id": "ref-for-get-related-browsing-contexts\u2466"}], "title": "6.5.5.3. The script.realmDestroyed Event"}, {"refs": [{"id": "ref-for-get-related-browsing-contexts\u2467"}, {"id": "ref-for-get-related-browsing-contexts\u2468"}], "title": "6.6.3.1. The log.entryAdded Event"}], "external": false};
window.dfnpanelData['emit-an-event'] = {"dfnID": "emit-an-event", "url": "#emit-an-event", "dfnText": "emit an event", "refSections": [{"refs": [{"id": "ref-for-emit-an-event"}], "title": "6.3.4.1. The browsingContext.contextCreated Event"}, {"refs": [{"id": "ref-for-emit-an-event\u2460"}], "title": "6.3.4.2. The browsingContext.contextDestroyed Event"}, {"refs": [{"id": "ref-for-emit-an-event\u2461"}], "title": "6.3.4.3. The browsingContext.navigationStarted Event"}, {"refs": [{"id": "ref-for-emit-an-event\u2462"}], "title": "6.3.4.4. The browsingContext.fragmentNavigated Event"}, {"refs": [{"id": "ref-for-emit-an-event\u2463"}], "title": "6.3.4.5. The browsingContext.domContentLoaded Event"}, {"refs": [{"id": "ref-for-emit-an-event\u2464"}], "title": "6.3.4.6. The browsingContext.load Event"}, {"refs": [{"id": "ref-for-emit-an-event\u2465"}], "title": "6.3.4.7. The browsingContext.downloadWillBegin Event"}, {"refs": [{"id": "ref-for-emit-an-event\u2466"}], "title": "6.3.4.8. The browsingContext.navigationAborted Event"}, {"refs": [{"id": "ref-for-emit-an-event\u2467"}], "title": "6.3.4.9. The browsingContext.navigationFailed Event"}, {"refs": [{"id": "ref-for-emit-an-event\u2468"}], "title": "6.3.4.10. The browsingContext.userPromptClosed Event"}, {"refs": [{"id": "ref-for-emit-an-event\u2460\u24ea"}], "title": "6.3.4.11. The browsingContext.userPromptOpened Event"}, {"refs": [{"id": "ref-for-emit-an-event\u2460\u2460"}], "title": "6.4.5.1. The network.authRequired Event"}, {"refs": [{"id": "ref-for-emit-an-event\u2460\u2461"}], "title": "6.4.5.2. The network.beforeRequestSent Event"}, {"refs": [{"id": "ref-for-emit-an-event\u2460\u2462"}], "title": "6.4.5.3. The network.fetchError Event"}, {"refs": [{"id": "ref-for-emit-an-event\u2460\u2463"}], "title": "6.4.5.4. The network.responseCompleted Event"}, {"refs": [{"id": "ref-for-emit-an-event\u2460\u2464"}], "title": "6.4.5.5. The network.responseStarted Event"}, {"refs": [{"id": "ref-for-emit-an-event\u2460\u2465"}], "title": "6.5.5.1. The script.message Event"}, {"refs": [{"id": "ref-for-emit-an-event\u2460\u2466"}, {"id": "ref-for-emit-an-event\u2460\u2467"}], "title": "6.5.5.2. The script.realmCreated Event"}, {"refs": [{"id": "ref-for-emit-an-event\u2460\u2468"}, {"id": "ref-for-emit-an-event\u2461\u24ea"}], "title": "6.5.5.3. The script.realmDestroyed Event"}, {"refs": [{"id": "ref-for-emit-an-event\u2461\u2460"}, {"id": "ref-for-emit-an-event\u2461\u2461"}, {"id": "ref-for-emit-an-event\u2461\u2462"}], "title": "6.6.3.1. The log.entryAdded Event"}], "external": false};
window.dfnpanelData['send-an-error-response'] = {"dfnID": "send-an-error-response", "url": "#send-an-error-response", "dfnText": "send an error response", "refSections": [{"refs": [{"id": "ref-for-send-an-error-response"}, {"id": "ref-for-send-an-error-response\u2460"}, {"id": "ref-for-send-an-error-response\u2461"}, {"id": "ref-for-send-an-error-response\u2462"}, {"id": "ref-for-send-an-error-response\u2463"}], "title": "4. Transport"}], "external": false};
window.dfnpanelData['handle-a-connection-closing'] = {"dfnID": "handle-a-connection-closing", "url": "#handle-a-connection-closing", "dfnText": "handle a connection closing", "refSections": [{"refs": [{"id": "ref-for-handle-a-connection-closing"}, {"id": "ref-for-handle-a-connection-closing\u2460"}], "title": "4. Transport"}], "external": false};
window.dfnpanelData['close-the-websocket-connections'] = {"dfnID": "close-the-websocket-connections", "url": "#close-the-websocket-connections", "dfnText": "close the WebSocket connections", "refSections": [{"refs": [{"id": "ref-for-close-the-websocket-connections"}], "title": "6.1.1. Definition"}], "external": false};
window.dfnpanelData['supports-bidi-only-sessions'] = {"dfnID": "supports-bidi-only-sessions", "url": "#supports-bidi-only-sessions", "dfnText": "supports\nBiDi-only sessions", "refSections": [{"refs": [{"id": "ref-for-supports-bidi-only-sessions"}], "title": "4. Transport"}], "external": false};
window.dfnpanelData['sandbox-map'] = {"dfnID": "sandbox-map", "url": "#sandbox-map", "dfnText": "sandbox map", "refSections": [{"refs": [{"id": "ref-for-sandbox-map"}, {"id": "ref-for-sandbox-map\u2460"}, {"id": "ref-for-sandbox-map\u2461"}, {"id": "ref-for-sandbox-map\u2462"}], "title": "5.1. Sandbox Realms"}], "external": false};
window.dfnpanelData['get-or-create-a-sandbox-realm'] = {"dfnID": "get-or-create-a-sandbox-realm", "url": "#get-or-create-a-sandbox-realm", "dfnText": "get or create a sandbox realm", "refSections": [{"refs": [{"id": "ref-for-get-or-create-a-sandbox-realm"}], "title": "6.5.2. Preload Scripts"}, {"refs": [{"id": "ref-for-get-or-create-a-sandbox-realm\u2460"}], "title": "6.5.3.20. The script.Target Type"}], "external": false};
window.dfnpanelData['create-a-sandbox-realm'] = {"dfnID": "create-a-sandbox-realm", "url": "#create-a-sandbox-realm", "dfnText": "create a sandbox realm", "refSections": [{"refs": [{"id": "ref-for-create-a-sandbox-realm"}], "title": "5.1. Sandbox Realms"}], "external": false};
window.dfnpanelData['get-a-sandbox-name'] = {"dfnID": "get-a-sandbox-name", "url": "#get-a-sandbox-name", "dfnText": "get a sandbox name", "refSections": [{"refs": [{"id": "ref-for-get-a-sandbox-name"}], "title": "6.5.3.10. The script.RealmInfo Type"}], "external": false};
window.dfnpanelData['sandboxproxy'] = {"dfnID": "sandboxproxy", "url": "#sandboxproxy", "dfnText": "SandboxProxy", "refSections": [{"refs": [{"id": "ref-for-sandboxproxy"}], "title": "5.1. Sandbox Realms"}, {"refs": [{"id": "ref-for-sandboxproxy\u2460"}, {"id": "ref-for-sandboxproxy\u2461"}, {"id": "ref-for-sandboxproxy\u2462"}], "title": "5.2. Sandbox Proxy Objects"}, {"refs": [{"id": "ref-for-sandboxproxy\u2463"}], "title": "5.3. SandboxWindowProxy"}, {"refs": [{"id": "ref-for-sandboxproxy\u2464"}], "title": "6.5.3.12. The script.RemoteReference Type"}], "external": false};
window.dfnpanelData['unwrapped'] = {"dfnID": "unwrapped", "url": "#unwrapped", "dfnText": "unwrapped", "refSections": [{"refs": [{"id": "ref-for-unwrapped"}], "title": "6.5.3.10. The script.RealmInfo Type"}, {"refs": [{"id": "ref-for-unwrapped\u2460"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": false};
window.dfnpanelData['sandboxwindowproxy'] = {"dfnID": "sandboxwindowproxy", "url": "#sandboxwindowproxy", "dfnText": "SandboxWindowProxy", "refSections": [{"refs": [{"id": "ref-for-sandboxwindowproxy"}], "title": "5. Sandboxed Script Execution"}, {"refs": [{"id": "ref-for-sandboxwindowproxy\u2460"}], "title": "5.1. Sandbox Realms"}, {"refs": [{"id": "ref-for-sandboxwindowproxy\u2461"}], "title": "5.2. Sandbox Proxy Objects"}, {"refs": [{"id": "ref-for-sandboxwindowproxy\u2462"}], "title": "6.5.3.10. The script.RealmInfo Type"}, {"refs": [{"id": "ref-for-sandboxwindowproxy\u2463"}], "title": "6.5.3.12. The script.RemoteReference Type"}], "external": false};
window.dfnpanelData['end-the-session'] = {"dfnID": "end-the-session", "url": "#end-the-session", "dfnText": "end the session", "refSections": [{"refs": [{"id": "ref-for-end-the-session"}], "title": "6.1.3.3. The session.end Command"}, {"refs": [{"id": "ref-for-end-the-session\u2460"}, {"id": "ref-for-end-the-session\u2461"}], "title": "6.2.2.1. The browser.close Command"}], "external": false};
window.dfnpanelData['cleanup-the-session'] = {"dfnID": "cleanup-the-session", "url": "#cleanup-the-session", "dfnText": "cleanup the session", "refSections": [{"refs": [{"id": "ref-for-cleanup-the-session"}], "title": "6.1.3.3. The session.end Command"}, {"refs": [{"id": "ref-for-cleanup-the-session\u2460"}, {"id": "ref-for-cleanup-the-session\u2461"}, {"id": "ref-for-cleanup-the-session\u2462"}], "title": "6.2.2.1. The browser.close Command"}], "external": false};
window.dfnpanelData['update-the-event-map'] = {"dfnID": "update-the-event-map", "url": "#update-the-event-map", "dfnText": "update the event map", "refSections": [{"refs": [{"id": "ref-for-update-the-event-map"}], "title": "6.1.3.4. The session.subscribe Command"}, {"refs": [{"id": "ref-for-update-the-event-map\u2460"}], "title": "6.1.3.5. The session.unsubscribe Command"}], "external": false};
window.dfnpanelData['browsing-context-id'] = {"dfnID": "browsing-context-id", "url": "#browsing-context-id", "dfnText": "browsing context\nid", "refSections": [{"refs": [{"id": "ref-for-browsing-context-id"}, {"id": "ref-for-browsing-context-id\u2460"}], "title": "6.3.2.1. The browsingContext.BrowsingContext Type"}, {"refs": [{"id": "ref-for-browsing-context-id\u2461"}, {"id": "ref-for-browsing-context-id\u2462"}], "title": "6.3.2.2. The browsingContext.Info Type"}, {"refs": [{"id": "ref-for-browsing-context-id\u2463"}], "title": "6.3.2.4. The browsingContext.NavigationInfo Type"}, {"refs": [{"id": "ref-for-browsing-context-id\u2464"}, {"id": "ref-for-browsing-context-id\u2465"}], "title": "6.3.3.4. The browsingContext.create Command"}, {"refs": [{"id": "ref-for-browsing-context-id\u2466"}], "title": "6.3.4.10. The browsingContext.userPromptClosed Event"}, {"refs": [{"id": "ref-for-browsing-context-id\u2467"}], "title": "6.3.4.11. The browsingContext.userPromptOpened Event"}, {"refs": [{"id": "ref-for-browsing-context-id\u2468"}], "title": "6.4.3.3. The network.BaseParameters Type"}, {"refs": [{"id": "ref-for-browsing-context-id\u2460\u24ea"}], "title": "6.5.3.8. The script.Realm Type"}, {"refs": [{"id": "ref-for-browsing-context-id\u2460\u2460"}, {"id": "ref-for-browsing-context-id\u2460\u2461"}], "title": "6.5.3.10. The script.RealmInfo Type"}, {"refs": [{"id": "ref-for-browsing-context-id\u2460\u2462"}], "title": "6.5.3.13. The script.RemoteValue Type"}, {"refs": [{"id": "ref-for-browsing-context-id\u2460\u2463"}], "title": "6.5.3.19. The script.Source Type"}, {"refs": [{"id": "ref-for-browsing-context-id\u2460\u2464"}, {"id": "ref-for-browsing-context-id\u2460\u2465"}], "title": "6.6. The log Module"}], "external": false};
window.dfnpanelData['get-a-browsing-context'] = {"dfnID": "get-a-browsing-context", "url": "#get-a-browsing-context", "dfnText": "get a browsing context", "refSections": [{"refs": [{"id": "ref-for-get-a-browsing-context"}], "title": "6.1.1. Definition"}, {"refs": [{"id": "ref-for-get-a-browsing-context\u2460"}], "title": "6.3.3.1. The browsingContext.activate Command"}, {"refs": [{"id": "ref-for-get-a-browsing-context\u2461"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}, {"refs": [{"id": "ref-for-get-a-browsing-context\u2462"}], "title": "6.3.3.3. The browsingContext.close Command"}, {"refs": [{"id": "ref-for-get-a-browsing-context\u2463"}], "title": "6.3.3.4. The browsingContext.create Command"}, {"refs": [{"id": "ref-for-get-a-browsing-context\u2464"}], "title": "6.3.3.5. The browsingContext.getTree Command"}, {"refs": [{"id": "ref-for-get-a-browsing-context\u2465"}], "title": "6.3.3.6. The browsingContext.handleUserPrompt Command"}, {"refs": [{"id": "ref-for-get-a-browsing-context\u2466"}], "title": "6.3.3.7. The browsingContext.navigate Command"}, {"refs": [{"id": "ref-for-get-a-browsing-context\u2467"}], "title": "6.3.3.8. The browsingContext.print Command"}, {"refs": [{"id": "ref-for-get-a-browsing-context\u2468"}], "title": "6.3.3.9. The browsingContext.reload Command"}, {"refs": [{"id": "ref-for-get-a-browsing-context\u2460\u24ea"}], "title": "6.3.3.10. The browsingContext.setViewport Command"}, {"refs": [{"id": "ref-for-get-a-browsing-context\u2460\u2460"}], "title": "6.5.3.20. The script.Target Type"}, {"refs": [{"id": "ref-for-get-a-browsing-context\u2460\u2461"}], "title": "6.5.4.1. The script.addPreloadScript Command"}, {"refs": [{"id": "ref-for-get-a-browsing-context\u2460\u2462"}], "title": "6.5.4.5. The script.getRealms Command"}, {"refs": [{"id": "ref-for-get-a-browsing-context\u2460\u2463"}], "title": "6.6.3.1. The log.entryAdded Event"}, {"refs": [{"id": "ref-for-get-a-browsing-context\u2460\u2464"}], "title": "6.7.3.1. The input.performActions Command"}, {"refs": [{"id": "ref-for-get-a-browsing-context\u2460\u2465"}], "title": "6.7.3.2. The input.releaseActions Command"}], "external": false};
window.dfnpanelData['get-the-parent-browsing-context'] = {"dfnID": "get-the-parent-browsing-context", "url": "#get-the-parent-browsing-context", "dfnText": "get the parent browsing context", "refSections": [{"refs": [{"id": "ref-for-get-the-parent-browsing-context"}], "title": "6.3.2.2. The browsingContext.Info Type"}, {"refs": [{"id": "ref-for-get-the-parent-browsing-context\u2460"}], "title": "6.3.4.2. The browsingContext.contextDestroyed Event"}], "external": false};
window.dfnpanelData['get-the-child-browsing-contexts'] = {"dfnID": "get-the-child-browsing-contexts", "url": "#get-the-child-browsing-contexts", "dfnText": "get the child browsing contexts", "refSections": [{"refs": [{"id": "ref-for-get-the-child-browsing-contexts"}], "title": "6.3.2.2. The browsingContext.Info Type"}], "external": false};
window.dfnpanelData['get-the-browsing-context-info'] = {"dfnID": "get-the-browsing-context-info", "url": "#get-the-browsing-context-info", "dfnText": "get the browsing context info", "refSections": [{"refs": [{"id": "ref-for-get-the-browsing-context-info"}], "title": "6.3.2.2. The browsingContext.Info Type"}, {"refs": [{"id": "ref-for-get-the-browsing-context-info\u2460"}], "title": "6.3.3.5. The browsingContext.getTree Command"}, {"refs": [{"id": "ref-for-get-the-browsing-context-info\u2461"}], "title": "6.3.4.1. The browsingContext.contextCreated Event"}, {"refs": [{"id": "ref-for-get-the-browsing-context-info\u2462"}], "title": "6.3.4.2. The browsingContext.contextDestroyed Event"}], "external": false};
window.dfnpanelData['await-a-navigation'] = {"dfnID": "await-a-navigation", "url": "#await-a-navigation", "dfnText": "await a navigation", "refSections": [{"refs": [{"id": "ref-for-await-a-navigation"}], "title": "6.3.3.7. The browsingContext.navigate Command"}, {"refs": [{"id": "ref-for-await-a-navigation\u2460"}], "title": "6.3.3.9. The browsingContext.reload Command"}], "external": false};
window.dfnpanelData['get-the-navigation-info'] = {"dfnID": "get-the-navigation-info", "url": "#get-the-navigation-info", "dfnText": "get the navigation info", "refSections": [{"refs": [{"id": "ref-for-get-the-navigation-info"}], "title": "6.3.4.3. The browsingContext.navigationStarted Event"}, {"refs": [{"id": "ref-for-get-the-navigation-info\u2460"}], "title": "6.3.4.4. The browsingContext.fragmentNavigated Event"}, {"refs": [{"id": "ref-for-get-the-navigation-info\u2461"}], "title": "6.3.4.5. The browsingContext.domContentLoaded Event"}, {"refs": [{"id": "ref-for-get-the-navigation-info\u2462"}], "title": "6.3.4.6. The browsingContext.load Event"}, {"refs": [{"id": "ref-for-get-the-navigation-info\u2463"}], "title": "6.3.4.7. The browsingContext.downloadWillBegin Event"}, {"refs": [{"id": "ref-for-get-the-navigation-info\u2464"}], "title": "6.3.4.8. The browsingContext.navigationAborted Event"}, {"refs": [{"id": "ref-for-get-the-navigation-info\u2465"}], "title": "6.3.4.9. The browsingContext.navigationFailed Event"}], "external": false};
window.dfnpanelData['activate-a-context'] = {"dfnID": "activate-a-context", "url": "#activate-a-context", "dfnText": "activate a context", "refSections": [{"refs": [{"id": "ref-for-activate-a-context"}], "title": "6.3.3.1. The browsingContext.activate Command"}, {"refs": [{"id": "ref-for-activate-a-context\u2460"}], "title": "6.3.3.4. The browsingContext.create Command"}], "external": false};
window.dfnpanelData['normalize-rect'] = {"dfnID": "normalize-rect", "url": "#normalize-rect", "dfnText": "normalize rect", "refSections": [{"refs": [{"id": "ref-for-normalize-rect"}, {"id": "ref-for-normalize-rect\u2460"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}], "external": false};
window.dfnpanelData['rectangle-intersection'] = {"dfnID": "rectangle-intersection", "url": "#rectangle-intersection", "dfnText": "rectangle intersection", "refSections": [{"refs": [{"id": "ref-for-rectangle-intersection"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}], "external": false};
window.dfnpanelData['render-viewport-to-a-canvas'] = {"dfnID": "render-viewport-to-a-canvas", "url": "#render-viewport-to-a-canvas", "dfnText": "render viewport to a canvas", "refSections": [{"refs": [{"id": "ref-for-render-viewport-to-a-canvas"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}], "external": false};
window.dfnpanelData['recursively-emit-context-created-events'] = {"dfnID": "recursively-emit-context-created-events", "url": "#recursively-emit-context-created-events", "dfnText": "Recursively emit context created events", "refSections": [{"refs": [{"id": "ref-for-recursively-emit-context-created-events"}, {"id": "ref-for-recursively-emit-context-created-events\u2460"}], "title": "6.3.4.1. The browsingContext.contextCreated Event"}], "external": false};
window.dfnpanelData['emit-a-context-created-event'] = {"dfnID": "emit-a-context-created-event", "url": "#emit-a-context-created-event", "dfnText": "Emit a context created event", "refSections": [{"refs": [{"id": "ref-for-emit-a-context-created-event"}, {"id": "ref-for-emit-a-context-created-event\u2460"}], "title": "6.3.4.1. The browsingContext.contextCreated Event"}], "external": false};
window.dfnpanelData['before-request-sent-map'] = {"dfnID": "before-request-sent-map", "url": "#before-request-sent-map", "dfnText": "before request sent map", "refSections": [{"refs": [{"id": "ref-for-before-request-sent-map"}], "title": "6.4.5.1. The network.authRequired Event"}, {"refs": [{"id": "ref-for-before-request-sent-map\u2460"}, {"id": "ref-for-before-request-sent-map\u2461"}, {"id": "ref-for-before-request-sent-map\u2462"}], "title": "6.4.5.2. The network.beforeRequestSent Event"}, {"refs": [{"id": "ref-for-before-request-sent-map\u2463"}], "title": "6.4.5.3. The network.fetchError Event"}, {"refs": [{"id": "ref-for-before-request-sent-map\u2464"}], "title": "6.4.5.4. The network.responseCompleted Event"}, {"refs": [{"id": "ref-for-before-request-sent-map\u2465"}], "title": "6.4.5.5. The network.responseStarted Event"}], "external": false};
window.dfnpanelData['network-intercept'] = {"dfnID": "network-intercept", "url": "#network-intercept", "dfnText": "network intercept", "refSections": [{"refs": [{"id": "ref-for-network-intercept"}], "title": "3.5. Errors"}, {"refs": [{"id": "ref-for-network-intercept\u2460"}], "title": "6.4.3.10. The network.Intercept Type"}, {"refs": [{"id": "ref-for-network-intercept\u2461"}], "title": "6.4.3.16. The network.UrlPattern Type"}, {"refs": [{"id": "ref-for-network-intercept\u2462"}], "title": "6.4.4.1. The network.addIntercept Command"}, {"refs": [{"id": "ref-for-network-intercept\u2463"}], "title": "6.4.4.2. The network.continueRequest Command"}, {"refs": [{"id": "ref-for-network-intercept\u2464"}], "title": "6.4.4.3. The network.continueResponse Command"}, {"refs": [{"id": "ref-for-network-intercept\u2465"}], "title": "6.4.4.4. The network.continueWithAuth Command"}, {"refs": [{"id": "ref-for-network-intercept\u2466"}], "title": "6.4.4.5. The network.failRequest Command"}, {"refs": [{"id": "ref-for-network-intercept\u2467"}], "title": "6.4.4.6. The network.provideResponse Command"}, {"refs": [{"id": "ref-for-network-intercept\u2468"}], "title": "6.4.4.7. The network.removeIntercept Command"}], "external": false};
window.dfnpanelData['intercept-map'] = {"dfnID": "intercept-map", "url": "#intercept-map", "dfnText": "intercept map", "refSections": [{"refs": [{"id": "ref-for-intercept-map"}], "title": "6.4.2. Network Intercepts"}, {"refs": [{"id": "ref-for-intercept-map\u2460"}], "title": "6.4.4.1. The network.addIntercept Command"}, {"refs": [{"id": "ref-for-intercept-map\u2461"}], "title": "6.4.4.7. The network.removeIntercept Command"}], "external": false};
window.dfnpanelData['blocked-request-map'] = {"dfnID": "blocked-request-map", "url": "#blocked-request-map", "dfnText": "blocked request map", "refSections": [{"refs": [{"id": "ref-for-blocked-request-map"}], "title": "6.4.4.2. The network.continueRequest Command"}, {"refs": [{"id": "ref-for-blocked-request-map\u2460"}], "title": "6.4.4.3. The network.continueResponse Command"}, {"refs": [{"id": "ref-for-blocked-request-map\u2461"}], "title": "6.4.4.4. The network.continueWithAuth Command"}, {"refs": [{"id": "ref-for-blocked-request-map\u2462"}], "title": "6.4.4.5. The network.failRequest Command"}, {"refs": [{"id": "ref-for-blocked-request-map\u2463"}], "title": "6.4.5.1. The network.authRequired Event"}, {"refs": [{"id": "ref-for-blocked-request-map\u2464"}], "title": "6.4.5.2. The network.beforeRequestSent Event"}, {"refs": [{"id": "ref-for-blocked-request-map\u2465"}], "title": "6.4.5.5. The network.responseStarted Event"}], "external": false};
window.dfnpanelData['get-the-network-intercepts'] = {"dfnID": "get-the-network-intercepts", "url": "#get-the-network-intercepts", "dfnText": "get the network intercepts", "refSections": [{"refs": [{"id": "ref-for-get-the-network-intercepts"}], "title": "6.4.3.3. The network.BaseParameters Type"}], "external": false};
window.dfnpanelData['extract-challenges'] = {"dfnID": "extract-challenges", "url": "#extract-challenges", "dfnText": "extract challenges", "refSections": [{"refs": [{"id": "ref-for-extract-challenges"}], "title": "6.4.3.14. The network.ResponseData Type"}], "external": false};
window.dfnpanelData['process-a-network-event'] = {"dfnID": "process-a-network-event", "url": "#process-a-network-event", "dfnText": "process a network event", "refSections": [{"refs": [{"id": "ref-for-process-a-network-event"}], "title": "6.4.5.1. The network.authRequired Event"}, {"refs": [{"id": "ref-for-process-a-network-event\u2460"}], "title": "6.4.5.2. The network.beforeRequestSent Event"}, {"refs": [{"id": "ref-for-process-a-network-event\u2461"}], "title": "6.4.5.3. The network.fetchError Event"}, {"refs": [{"id": "ref-for-process-a-network-event\u2462"}], "title": "6.4.5.4. The network.responseCompleted Event"}, {"refs": [{"id": "ref-for-process-a-network-event\u2463"}], "title": "6.4.5.5. The network.responseStarted Event"}], "external": false};
window.dfnpanelData['deserialize-protocol-bytes'] = {"dfnID": "deserialize-protocol-bytes", "url": "#deserialize-protocol-bytes", "dfnText": "deserialize protocol bytes", "refSections": [{"refs": [{"id": "ref-for-deserialize-protocol-bytes"}], "title": "6.4.3.6. The network.CookieHeader Type"}, {"refs": [{"id": "ref-for-deserialize-protocol-bytes\u2460"}], "title": "6.4.3.8. The network.Header Type"}, {"refs": [{"id": "ref-for-deserialize-protocol-bytes\u2461"}], "title": "6.4.3.15. The network.SetCookieHeader Type"}, {"refs": [{"id": "ref-for-deserialize-protocol-bytes\u2462"}], "title": "6.4.4.2. The network.continueRequest Command"}, {"refs": [{"id": "ref-for-deserialize-protocol-bytes\u2463"}], "title": "6.4.4.6. The network.provideResponse Command"}], "external": false};
window.dfnpanelData['serialize-protocol-bytes'] = {"dfnID": "serialize-protocol-bytes", "url": "#serialize-protocol-bytes", "dfnText": "serialize protocol bytes", "refSections": [{"refs": [{"id": "ref-for-serialize-protocol-bytes"}], "title": "6.4.3.5. The network.Cookie Type"}, {"refs": [{"id": "ref-for-serialize-protocol-bytes\u2460"}], "title": "6.4.3.8. The network.Header Type"}], "external": false};
window.dfnpanelData['serialize-cookie'] = {"dfnID": "serialize-cookie", "url": "#serialize-cookie", "dfnText": "serialize cookie", "refSections": [{"refs": [{"id": "ref-for-serialize-cookie"}], "title": "6.4.3.12. The network.RequestData Type"}], "external": false};
window.dfnpanelData['serialize-cookie-header'] = {"dfnID": "serialize-cookie-header", "url": "#serialize-cookie-header", "dfnText": "serialize cookie header", "refSections": [{"refs": [{"id": "ref-for-serialize-cookie-header"}], "title": "6.4.4.2. The network.continueRequest Command"}], "external": false};
window.dfnpanelData['get-the-fetch-timings'] = {"dfnID": "get-the-fetch-timings", "url": "#get-the-fetch-timings", "dfnText": "get the fetch timings", "refSections": [{"refs": [{"id": "ref-for-get-the-fetch-timings"}], "title": "6.4.3.12. The network.RequestData Type"}], "external": false};
window.dfnpanelData['serialize-header'] = {"dfnID": "serialize-header", "url": "#serialize-header", "dfnText": "serialize header", "refSections": [{"refs": [{"id": "ref-for-serialize-header"}], "title": "6.4.3.12. The network.RequestData Type"}, {"refs": [{"id": "ref-for-serialize-header\u2460"}], "title": "6.4.3.14. The network.ResponseData Type"}], "external": false};
window.dfnpanelData['deserialize-header'] = {"dfnID": "deserialize-header", "url": "#deserialize-header", "dfnText": "deserialize header", "refSections": [{"refs": [{"id": "ref-for-deserialize-header"}], "title": "6.4.4.2. The network.continueRequest Command"}, {"refs": [{"id": "ref-for-deserialize-header\u2460"}], "title": "6.4.4.3. The network.continueResponse Command"}], "external": false};
window.dfnpanelData['get-the-initiator'] = {"dfnID": "get-the-initiator", "url": "#get-the-initiator", "dfnText": "get the initiator", "refSections": [{"refs": [{"id": "ref-for-get-the-initiator"}], "title": "6.4.5.2. The network.beforeRequestSent Event"}], "external": false};
window.dfnpanelData['request-id'] = {"dfnID": "request-id", "url": "#request-id", "dfnText": "request id", "refSections": [{"refs": [{"id": "ref-for-request-id"}], "title": "6.4.2. Network Intercepts"}, {"refs": [{"id": "ref-for-request-id\u2460"}], "title": "6.4.3.9. The network.Initiator Type"}, {"refs": [{"id": "ref-for-request-id\u2461"}], "title": "6.4.3.12. The network.RequestData Type"}, {"refs": [{"id": "ref-for-request-id\u2462"}], "title": "6.4.5.1. The network.authRequired Event"}, {"refs": [{"id": "ref-for-request-id\u2463"}, {"id": "ref-for-request-id\u2464"}], "title": "6.4.5.2. The network.beforeRequestSent Event"}, {"refs": [{"id": "ref-for-request-id\u2465"}], "title": "6.4.5.5. The network.responseStarted Event"}], "external": false};
window.dfnpanelData['get-the-request-data'] = {"dfnID": "get-the-request-data", "url": "#get-the-request-data", "dfnText": "get the request data", "refSections": [{"refs": [{"id": "ref-for-get-the-request-data"}], "title": "6.4.3.3. The network.BaseParameters Type"}], "external": false};
window.dfnpanelData['get-the-response-content-info'] = {"dfnID": "get-the-response-content-info", "url": "#get-the-response-content-info", "dfnText": "get the response content info", "refSections": [{"refs": [{"id": "ref-for-get-the-response-content-info"}], "title": "6.4.3.14. The network.ResponseData Type"}], "external": false};
window.dfnpanelData['get-the-protocol'] = {"dfnID": "get-the-protocol", "url": "#get-the-protocol", "dfnText": "get the protocol", "refSections": [{"refs": [{"id": "ref-for-get-the-protocol"}], "title": "6.4.3.14. The network.ResponseData Type"}], "external": false};
window.dfnpanelData['get-the-response-data'] = {"dfnID": "get-the-response-data", "url": "#get-the-response-data", "dfnText": "get the response data", "refSections": [{"refs": [{"id": "ref-for-get-the-response-data"}], "title": "6.4.5.1. The network.authRequired Event"}, {"refs": [{"id": "ref-for-get-the-response-data\u2460"}], "title": "6.4.5.4. The network.responseCompleted Event"}, {"refs": [{"id": "ref-for-get-the-response-data\u2461"}], "title": "6.4.5.5. The network.responseStarted Event"}], "external": false};
window.dfnpanelData['serialize-an-integer'] = {"dfnID": "serialize-an-integer", "url": "#serialize-an-integer", "dfnText": "serialize an integer", "refSections": [{"refs": [{"id": "ref-for-serialize-an-integer"}], "title": "6.4.3.15. The network.SetCookieHeader Type"}, {"refs": [{"id": "ref-for-serialize-an-integer\u2460"}, {"id": "ref-for-serialize-an-integer\u2461"}], "title": "6.4.3.16. The network.UrlPattern Type"}], "external": false};
window.dfnpanelData['serialize-set-cookie-header'] = {"dfnID": "serialize-set-cookie-header", "url": "#serialize-set-cookie-header", "dfnText": "serialize set-cookie header", "refSections": [{"refs": [{"id": "ref-for-serialize-set-cookie-header"}], "title": "6.4.4.3. The network.continueResponse Command"}], "external": false};
window.dfnpanelData['unescape-url-pattern'] = {"dfnID": "unescape-url-pattern", "url": "#unescape-url-pattern", "dfnText": "unescape URL pattern", "refSections": [{"refs": [{"id": "ref-for-unescape-url-pattern"}, {"id": "ref-for-unescape-url-pattern\u2460"}, {"id": "ref-for-unescape-url-pattern\u2461"}, {"id": "ref-for-unescape-url-pattern\u2462"}, {"id": "ref-for-unescape-url-pattern\u2463"}, {"id": "ref-for-unescape-url-pattern\u2464"}], "title": "6.4.3.16. The network.UrlPattern Type"}], "external": false};
window.dfnpanelData['parse-url-pattern'] = {"dfnID": "parse-url-pattern", "url": "#parse-url-pattern", "dfnText": "parse URL pattern", "refSections": [{"refs": [{"id": "ref-for-parse-url-pattern"}], "title": "6.4.4.1. The network.addIntercept Command"}], "external": false};
window.dfnpanelData['match-url-pattern'] = {"dfnID": "match-url-pattern", "url": "#match-url-pattern", "dfnText": "match URL pattern", "refSections": [{"refs": [{"id": "ref-for-match-url-pattern"}], "title": "6.4.2. Network Intercepts"}], "external": false};
window.dfnpanelData['update-the-response'] = {"dfnID": "update-the-response", "url": "#update-the-response", "dfnText": "update the response", "refSections": [{"refs": [{"id": "ref-for-update-the-response"}], "title": "6.4.4.3. The network.continueResponse Command"}, {"refs": [{"id": "ref-for-update-the-response\u2460"}], "title": "6.4.4.6. The network.provideResponse Command"}], "external": false};
window.dfnpanelData['webdriver-bidi-before-request-sent'] = {"dfnID": "webdriver-bidi-before-request-sent", "url": "#webdriver-bidi-before-request-sent", "dfnText": "WebDriver BiDi before\nrequest sent", "refSections": [{"refs": [{"id": "ref-for-webdriver-bidi-before-request-sent"}], "title": "6.4.5.1. The network.authRequired Event"}, {"refs": [{"id": "ref-for-webdriver-bidi-before-request-sent\u2460"}, {"id": "ref-for-webdriver-bidi-before-request-sent\u2461"}], "title": "6.4.5.3. The network.fetchError Event"}, {"refs": [{"id": "ref-for-webdriver-bidi-before-request-sent\u2462"}], "title": "6.4.5.4. The network.responseCompleted Event"}, {"refs": [{"id": "ref-for-webdriver-bidi-before-request-sent\u2463"}], "title": "6.4.5.5. The network.responseStarted Event"}], "external": false};
window.dfnpanelData['preload-script'] = {"dfnID": "preload-script", "url": "#preload-script", "dfnText": "Preload script", "refSections": [{"refs": [{"id": "ref-for-preload-script"}], "title": "3.5. Errors"}, {"refs": [{"id": "ref-for-preload-script\u2460"}], "title": "6.5.2. Preload Scripts"}, {"refs": [{"id": "ref-for-preload-script\u2461"}], "title": "6.5.4.1. The script.addPreloadScript Command"}, {"refs": [{"id": "ref-for-preload-script\u2462"}], "title": "6.5.4.6. The script.removePreloadScript Command"}], "external": false};
window.dfnpanelData['preload-script-map'] = {"dfnID": "preload-script-map", "url": "#preload-script-map", "dfnText": "preload script map", "refSections": [{"refs": [{"id": "ref-for-preload-script-map"}], "title": "6.5.2. Preload Scripts"}, {"refs": [{"id": "ref-for-preload-script-map\u2460"}], "title": "6.5.4.1. The script.addPreloadScript Command"}, {"refs": [{"id": "ref-for-preload-script-map\u2461"}], "title": "6.5.4.6. The script.removePreloadScript Command"}], "external": false};
window.dfnpanelData['scriptchannel'] = {"dfnID": "scriptchannel", "url": "#scriptchannel", "dfnText": "script.Channel", "refSections": [{"refs": [{"id": "ref-for-scriptchannel"}], "title": "6.5.3.6. The script.LocalValue Type"}], "external": false};
window.dfnpanelData['create-a-channel'] = {"dfnID": "create-a-channel", "url": "#create-a-channel", "dfnText": "create a channel", "refSections": [{"refs": [{"id": "ref-for-create-a-channel"}], "title": "6.5.2. Preload Scripts"}, {"refs": [{"id": "ref-for-create-a-channel\u2460"}], "title": "6.5.3.6. The script.LocalValue Type"}], "external": false};
window.dfnpanelData['get-exception-details'] = {"dfnID": "get-exception-details", "url": "#get-exception-details", "dfnText": "get exception details", "refSections": [{"refs": [{"id": "ref-for-get-exception-details"}, {"id": "ref-for-get-exception-details\u2460"}], "title": "6.5.4.3. The script.callFunction Command"}, {"refs": [{"id": "ref-for-get-exception-details\u2461"}], "title": "6.5.4.4. The script.evaluate Command"}], "external": false};
window.dfnpanelData['handle-object-map'] = {"dfnID": "handle-object-map", "url": "#handle-object-map", "dfnText": "handle object map", "refSections": [{"refs": [{"id": "ref-for-handle-object-map"}], "title": "6.5.3.8. The script.Realm Type"}, {"refs": [{"id": "ref-for-handle-object-map\u2460"}, {"id": "ref-for-handle-object-map\u2461"}], "title": "6.5.3.12. The script.RemoteReference Type"}, {"refs": [{"id": "ref-for-handle-object-map\u2462"}], "title": "6.5.3.13. The script.RemoteValue Type"}, {"refs": [{"id": "ref-for-handle-object-map\u2463"}], "title": "6.5.4.2. The script.disown Command"}], "external": false};
window.dfnpanelData['deserialize-key-value-list'] = {"dfnID": "deserialize-key-value-list", "url": "#deserialize-key-value-list", "dfnText": "deserialize key-value list", "refSections": [{"refs": [{"id": "ref-for-deserialize-key-value-list"}, {"id": "ref-for-deserialize-key-value-list\u2460"}], "title": "6.5.3.6. The script.LocalValue Type"}], "external": false};
window.dfnpanelData['deserialize-value-list'] = {"dfnID": "deserialize-value-list", "url": "#deserialize-value-list", "dfnText": "deserialize value list", "refSections": [{"refs": [{"id": "ref-for-deserialize-value-list"}, {"id": "ref-for-deserialize-value-list\u2460"}], "title": "6.5.3.6. The script.LocalValue Type"}], "external": false};
window.dfnpanelData['deserialize-local-value'] = {"dfnID": "deserialize-local-value", "url": "#deserialize-local-value", "dfnText": "deserialize local value", "refSections": [{"refs": [{"id": "ref-for-deserialize-local-value"}, {"id": "ref-for-deserialize-local-value\u2460"}, {"id": "ref-for-deserialize-local-value\u2461"}], "title": "6.5.3.6. The script.LocalValue Type"}, {"refs": [{"id": "ref-for-deserialize-local-value\u2462"}, {"id": "ref-for-deserialize-local-value\u2463"}], "title": "6.5.4.3. The script.callFunction Command"}], "external": false};
window.dfnpanelData['realm-id'] = {"dfnID": "realm-id", "url": "#realm-id", "dfnText": "realm id", "refSections": [{"refs": [{"id": "ref-for-realm-id"}, {"id": "ref-for-realm-id\u2460"}, {"id": "ref-for-realm-id\u2461"}], "title": "6.5.3.8. The script.Realm Type"}, {"refs": [{"id": "ref-for-realm-id\u2462"}], "title": "6.5.3.10. The script.RealmInfo Type"}, {"refs": [{"id": "ref-for-realm-id\u2463"}], "title": "6.5.3.19. The script.Source Type"}, {"refs": [{"id": "ref-for-realm-id\u2464"}], "title": "6.5.4.3. The script.callFunction Command"}, {"refs": [{"id": "ref-for-realm-id\u2465"}], "title": "6.5.4.4. The script.evaluate Command"}, {"refs": [{"id": "ref-for-realm-id\u2466"}, {"id": "ref-for-realm-id\u2467"}, {"id": "ref-for-realm-id\u2468"}], "title": "6.5.5.3. The script.realmDestroyed Event"}, {"refs": [{"id": "ref-for-realm-id\u2460\u24ea"}], "title": "6.6.3.1. The log.entryAdded Event"}], "external": false};
window.dfnpanelData['get-a-realm'] = {"dfnID": "get-a-realm", "url": "#get-a-realm", "dfnText": "get a realm", "refSections": [{"refs": [{"id": "ref-for-get-a-realm"}], "title": "6.5.3.20. The script.Target Type"}], "external": false};
window.dfnpanelData['scriptprimitiveprotocolvalue'] = {"dfnID": "scriptprimitiveprotocolvalue", "url": "#scriptprimitiveprotocolvalue", "dfnText": "script.PrimitiveProtocolValue", "refSections": [{"refs": [{"id": "ref-for-scriptprimitiveprotocolvalue"}], "title": "6.5.3.6. The script.LocalValue Type"}], "external": false};
window.dfnpanelData['serialize-primitive-protocol-value'] = {"dfnID": "serialize-primitive-protocol-value", "url": "#serialize-primitive-protocol-value", "dfnText": "serialize primitive protocol value", "refSections": [{"refs": [{"id": "ref-for-serialize-primitive-protocol-value"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": false};
window.dfnpanelData['deserialize-primitive-protocol-value'] = {"dfnID": "deserialize-primitive-protocol-value", "url": "#deserialize-primitive-protocol-value", "dfnText": "deserialize primitive protocol value", "refSections": [{"refs": [{"id": "ref-for-deserialize-primitive-protocol-value"}], "title": "6.5.3.6. The script.LocalValue Type"}], "external": false};
window.dfnpanelData['get-the-browsing-context'] = {"dfnID": "get-the-browsing-context", "url": "#get-the-browsing-context", "dfnText": "get the browsing context", "refSections": [{"refs": [{"id": "ref-for-get-the-browsing-context"}], "title": "6.5.3.12. The script.RemoteReference Type"}], "external": false};
window.dfnpanelData['get-the-realm-info'] = {"dfnID": "get-the-realm-info", "url": "#get-the-realm-info", "dfnText": "get the realm info", "refSections": [{"refs": [{"id": "ref-for-get-the-realm-info"}], "title": "6.5.4.5. The script.getRealms Command"}, {"refs": [{"id": "ref-for-get-the-realm-info\u2460"}, {"id": "ref-for-get-the-realm-info\u2461"}], "title": "6.5.5.2. The script.realmCreated Event"}], "external": false};
window.dfnpanelData['scriptremotereference'] = {"dfnID": "scriptremotereference", "url": "#scriptremotereference", "dfnText": "script.RemoteReference", "refSections": [{"refs": [{"id": "ref-for-scriptremotereference"}, {"id": "ref-for-scriptremotereference\u2460"}], "title": "6.5.3.6. The script.LocalValue Type"}], "external": false};
window.dfnpanelData['deserialize-remote-reference'] = {"dfnID": "deserialize-remote-reference", "url": "#deserialize-remote-reference", "dfnText": "deserialize remote reference", "refSections": [{"refs": [{"id": "ref-for-deserialize-remote-reference"}], "title": "6.3.3.2. The browsingContext.captureScreenshot Command"}, {"refs": [{"id": "ref-for-deserialize-remote-reference\u2460"}], "title": "6.5.3.6. The script.LocalValue Type"}, {"refs": [{"id": "ref-for-deserialize-remote-reference\u2461"}], "title": "6.7.2.1. input.ElementOrigin"}], "external": false};
window.dfnpanelData['deserialize-remote-object-reference'] = {"dfnID": "deserialize-remote-object-reference", "url": "#deserialize-remote-object-reference", "dfnText": "deserialize remote object reference", "refSections": [{"refs": [{"id": "ref-for-deserialize-remote-object-reference"}], "title": "6.5.3.12. The script.RemoteReference Type"}], "external": false};
window.dfnpanelData['deserialize-shared-reference'] = {"dfnID": "deserialize-shared-reference", "url": "#deserialize-shared-reference", "dfnText": "deserialize shared reference", "refSections": [{"refs": [{"id": "ref-for-deserialize-shared-reference"}], "title": "6.5.3.12. The script.RemoteReference Type"}], "external": false};
window.dfnpanelData['handle-for-an-object'] = {"dfnID": "handle-for-an-object", "url": "#handle-for-an-object", "dfnText": "handle for an object", "refSections": [{"refs": [{"id": "ref-for-handle-for-an-object"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": false};
window.dfnpanelData['get-shared-id-for-a-node'] = {"dfnID": "get-shared-id-for-a-node", "url": "#get-shared-id-for-a-node", "dfnText": "get shared id for a node", "refSections": [{"refs": [{"id": "ref-for-get-shared-id-for-a-node"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": false};
window.dfnpanelData['set-internal-ids-if-needed'] = {"dfnID": "set-internal-ids-if-needed", "url": "#set-internal-ids-if-needed", "dfnText": "set internal ids if needed", "refSections": [{"refs": [{"id": "ref-for-set-internal-ids-if-needed"}, {"id": "ref-for-set-internal-ids-if-needed\u2460"}, {"id": "ref-for-set-internal-ids-if-needed\u2461"}, {"id": "ref-for-set-internal-ids-if-needed\u2462"}, {"id": "ref-for-set-internal-ids-if-needed\u2463"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": false};
window.dfnpanelData['serialize-as-a-remote-value'] = {"dfnID": "serialize-as-a-remote-value", "url": "#serialize-as-a-remote-value", "dfnText": "serialize as a remote value", "refSections": [{"refs": [{"id": "ref-for-serialize-as-a-remote-value"}], "title": "6.5.3.4. The script.ExceptionDetails Type"}, {"refs": [{"id": "ref-for-serialize-as-a-remote-value\u2460"}, {"id": "ref-for-serialize-as-a-remote-value\u2461"}, {"id": "ref-for-serialize-as-a-remote-value\u2462"}, {"id": "ref-for-serialize-as-a-remote-value\u2463"}, {"id": "ref-for-serialize-as-a-remote-value\u2464"}], "title": "6.5.3.13. The script.RemoteValue Type"}, {"refs": [{"id": "ref-for-serialize-as-a-remote-value\u2465"}], "title": "6.5.4.3. The script.callFunction Command"}, {"refs": [{"id": "ref-for-serialize-as-a-remote-value\u2466"}], "title": "6.5.4.4. The script.evaluate Command"}, {"refs": [{"id": "ref-for-serialize-as-a-remote-value\u2467"}], "title": "6.5.5.1. The script.message Event"}, {"refs": [{"id": "ref-for-serialize-as-a-remote-value\u2468"}], "title": "6.6.3.1. The log.entryAdded Event"}], "external": false};
window.dfnpanelData['serialize-an-array-like'] = {"dfnID": "serialize-an-array-like", "url": "#serialize-an-array-like", "dfnText": "serialize an Array-like", "refSections": [{"refs": [{"id": "ref-for-serialize-an-array-like"}, {"id": "ref-for-serialize-an-array-like\u2460"}, {"id": "ref-for-serialize-an-array-like\u2461"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": false};
window.dfnpanelData['serialize-as-a-list'] = {"dfnID": "serialize-as-a-list", "url": "#serialize-as-a-list", "dfnText": "serialize as a list", "refSections": [{"refs": [{"id": "ref-for-serialize-as-a-list"}, {"id": "ref-for-serialize-as-a-list\u2460"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": false};
window.dfnpanelData['serialize-as-a-mapping'] = {"dfnID": "serialize-as-a-mapping", "url": "#serialize-as-a-mapping", "dfnText": "serialize as a mapping", "refSections": [{"refs": [{"id": "ref-for-serialize-as-a-mapping"}, {"id": "ref-for-serialize-as-a-mapping\u2460"}], "title": "6.5.3.13. The script.RemoteValue Type"}], "external": false};
window.dfnpanelData['list-of-stack-frames'] = {"dfnID": "list-of-stack-frames", "url": "#list-of-stack-frames", "dfnText": "list of stack\nframes", "refSections": [{"refs": [{"id": "ref-for-list-of-stack-frames"}, {"id": "ref-for-list-of-stack-frames\u2460"}], "title": "6.5.3.18. The script.StackTrace Type"}], "external": false};
window.dfnpanelData['stack-frame'] = {"dfnID": "stack-frame", "url": "#stack-frame", "dfnText": "stack\nframe", "refSections": [{"refs": [{"id": "ref-for-stack-frame"}], "title": "6.5.3.18. The script.StackTrace Type"}], "external": false};
window.dfnpanelData['stackframe-script-url'] = {"dfnID": "stackframe-script-url", "url": "#stackframe-script-url", "dfnText": "script url", "refSections": [{"refs": [{"id": "ref-for-stackframe-script-url"}], "title": "6.5.3.18. The script.StackTrace Type"}], "external": false};
window.dfnpanelData['stackframe-function'] = {"dfnID": "stackframe-function", "url": "#stackframe-function", "dfnText": "function", "refSections": [{"refs": [{"id": "ref-for-stackframe-function"}], "title": "6.5.3.18. The script.StackTrace Type"}], "external": false};
window.dfnpanelData['stackframe-line-number'] = {"dfnID": "stackframe-line-number", "url": "#stackframe-line-number", "dfnText": "line number", "refSections": [{"refs": [{"id": "ref-for-stackframe-line-number"}], "title": "6.5.3.18. The script.StackTrace Type"}], "external": false};
window.dfnpanelData['stackframe-column-number'] = {"dfnID": "stackframe-column-number", "url": "#stackframe-column-number", "dfnText": "column number", "refSections": [{"refs": [{"id": "ref-for-stackframe-column-number"}], "title": "6.5.3.18. The script.StackTrace Type"}], "external": false};
window.dfnpanelData['construct-a-stack-trace'] = {"dfnID": "construct-a-stack-trace", "url": "#construct-a-stack-trace", "dfnText": "construct a stack trace", "refSections": [{"refs": [{"id": "ref-for-construct-a-stack-trace"}, {"id": "ref-for-construct-a-stack-trace\u2460"}], "title": "6.5.3.18. The script.StackTrace Type"}], "external": false};
window.dfnpanelData['current-stack-trace'] = {"dfnID": "current-stack-trace", "url": "#current-stack-trace", "dfnText": "current stack trace", "refSections": [{"refs": [{"id": "ref-for-current-stack-trace"}], "title": "6.4.3.9. The network.Initiator Type"}, {"refs": [{"id": "ref-for-current-stack-trace\u2460"}], "title": "6.6.3.1. The log.entryAdded Event"}], "external": false};
window.dfnpanelData['stack-trace-for-an-exception'] = {"dfnID": "stack-trace-for-an-exception", "url": "#stack-trace-for-an-exception", "dfnText": "stack trace for an exception", "refSections": [{"refs": [{"id": "ref-for-stack-trace-for-an-exception"}], "title": "6.5.3.4. The script.ExceptionDetails Type"}, {"refs": [{"id": "ref-for-stack-trace-for-an-exception\u2460"}], "title": "6.6.3.1. The log.entryAdded Event"}], "external": false};
window.dfnpanelData['get-the-source'] = {"dfnID": "get-the-source", "url": "#get-the-source", "dfnText": "get the source", "refSections": [{"refs": [{"id": "ref-for-get-the-source"}], "title": "6.5.5.1. The script.message Event"}, {"refs": [{"id": "ref-for-get-the-source\u2460"}, {"id": "ref-for-get-the-source\u2461"}], "title": "6.6.3.1. The log.entryAdded Event"}], "external": false};
window.dfnpanelData['get-a-realm-from-a-target'] = {"dfnID": "get-a-realm-from-a-target", "url": "#get-a-realm-from-a-target", "dfnText": "get a realm from a target", "refSections": [{"refs": [{"id": "ref-for-get-a-realm-from-a-target"}], "title": "6.5.4.2. The script.disown Command"}, {"refs": [{"id": "ref-for-get-a-realm-from-a-target\u2460"}], "title": "6.5.4.3. The script.callFunction Command"}, {"refs": [{"id": "ref-for-get-a-realm-from-a-target\u2461"}], "title": "6.5.4.4. The script.evaluate Command"}], "external": false};
window.dfnpanelData['deserialize-arguments'] = {"dfnID": "deserialize-arguments", "url": "#deserialize-arguments", "dfnText": "deserialize arguments", "refSections": [{"refs": [{"id": "ref-for-deserialize-arguments"}], "title": "6.5.4.3. The script.callFunction Command"}], "external": false};
window.dfnpanelData['evaluate-function-body'] = {"dfnID": "evaluate-function-body", "url": "#evaluate-function-body", "dfnText": "evaluate function body", "refSections": [{"refs": [{"id": "ref-for-evaluate-function-body"}], "title": "6.5.2. Preload Scripts"}, {"refs": [{"id": "ref-for-evaluate-function-body\u2460"}], "title": "6.5.4.3. The script.callFunction Command"}], "external": false};
window.dfnpanelData['emit-a-script-message'] = {"dfnID": "emit-a-script-message", "url": "#emit-a-script-message", "dfnText": "emit a script message", "refSections": [{"refs": [{"id": "ref-for-emit-a-script-message"}], "title": "6.5.3.2. The script.ChannelValue Type"}], "external": false};
window.dfnpanelData['log-event-buffer'] = {"dfnID": "log-event-buffer", "url": "#log-event-buffer", "dfnText": "log event buffer", "refSections": [{"refs": [{"id": "ref-for-log-event-buffer"}], "title": "6.6. The log Module"}, {"refs": [{"id": "ref-for-log-event-buffer\u2460"}, {"id": "ref-for-log-event-buffer\u2461"}, {"id": "ref-for-log-event-buffer\u2462"}, {"id": "ref-for-log-event-buffer\u2463"}], "title": "6.6.3.1. The log.entryAdded Event"}], "external": false};
window.dfnpanelData['buffer-a-log-event'] = {"dfnID": "buffer-a-log-event", "url": "#buffer-a-log-event", "dfnText": "buffer a log event", "refSections": [{"refs": [{"id": "ref-for-buffer-a-log-event"}, {"id": "ref-for-buffer-a-log-event\u2460"}], "title": "6.6.3.1. The log.entryAdded Event"}], "external": false};
window.dfnpanelData['is-inputelementorigin'] = {"dfnID": "is-inputelementorigin", "url": "#is-inputelementorigin", "dfnText": "is input.ElementOrigin", "refSections": [{"refs": [{"id": "ref-for-is-inputelementorigin"}], "title": "6.7.3.1. The input.performActions Command"}, {"refs": [{"id": "ref-for-is-inputelementorigin\u2460"}], "title": "6.7.3.2. The input.releaseActions Command"}], "external": false};
window.dfnpanelData['get-element-from-inputelementorigin-steps'] = {"dfnID": "get-element-from-inputelementorigin-steps", "url": "#get-element-from-inputelementorigin-steps", "dfnText": "get Element from input.ElementOrigin\nsteps", "refSections": [{"refs": [{"id": "ref-for-get-element-from-inputelementorigin-steps"}], "title": "6.7.3.1. The input.performActions Command"}, {"refs": [{"id": "ref-for-get-element-from-inputelementorigin-steps\u2460"}], "title": "6.7.3.2. The input.releaseActions Command"}], "external": false};
window.dfnpanelData['browsing-context-tree-discarded'] = {"dfnID": "browsing-context-tree-discarded", "url": "#browsing-context-tree-discarded", "dfnText": "browsing context\n tree discarded", "refSections": [{"refs": [{"id": "ref-for-browsing-context-tree-discarded"}], "title": "6.3.4.2. The browsingContext.contextDestroyed Event"}], "external": false};
window.dfnpanelData['error-reporting-steps'] = {"dfnID": "error-reporting-steps", "url": "#error-reporting-steps", "dfnText": "error reporting steps", "refSections": [{"refs": [{"id": "ref-for-error-reporting-steps"}], "title": "6.6.3.1. The log.entryAdded Event"}], "external": false};
window.dfnpanelData['console-steps'] = {"dfnID": "console-steps", "url": "#console-steps", "dfnText": "console steps", "refSections": [{"refs": [{"id": "ref-for-console-steps"}], "title": "6.6.3.1. The log.entryAdded Event"}, {"refs": [{"id": "ref-for-console-steps\u2460"}, {"id": "ref-for-console-steps\u2461"}], "title": "7.2. Console"}], "external": false};
</script>
<script>/* Boilerplate: script-dom-helper */
function query(sel) { return document.querySelector(sel); }

function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

function iter(obj) {
	if(!obj) return [];
	var it = obj[Symbol.iterator];
	if(it) return it;
	return Object.entries(obj);
}

function mk(tagname, attrs, ...children) {
	const el = document.createElement(tagname);
	for(const [k,v] of iter(attrs)) {
		if(k.slice(0,3) == "_on") {
			const eventName = k.slice(3);
			el.addEventListener(eventName, v);
		} else if(k[0] == "_") {
			// property, not attribute
			el[k.slice(1)] = v;
		} else {
			if(v === false || v == null) {
        continue;
      } else if(v === true) {
        el.setAttribute(k, "");
        continue;
      } else {
  			el.setAttribute(k, v);
      }
		}
	}
	append(el, children);
	return el;
}

/* Create shortcuts for every known HTML element */
[
  "a",
  "abbr",
  "acronym",
  "address",
  "applet",
  "area",
  "article",
  "aside",
  "audio",
  "b",
  "base",
  "basefont",
  "bdo",
  "big",
  "blockquote",
  "body",
  "br",
  "button",
  "canvas",
  "caption",
  "center",
  "cite",
  "code",
  "col",
  "colgroup",
  "datalist",
  "dd",
  "del",
  "details",
  "dfn",
  "dialog",
  "div",
  "dl",
  "dt",
  "em",
  "embed",
  "fieldset",
  "figcaption",
  "figure",
  "font",
  "footer",
  "form",
  "frame",
  "frameset",
  "head",
  "header",
  "h1",
  "h2",
  "h3",
  "h4",
  "h5",
  "h6",
  "hr",
  "html",
  "i",
  "iframe",
  "img",
  "input",
  "ins",
  "kbd",
  "label",
  "legend",
  "li",
  "link",
  "main",
  "map",
  "mark",
  "meta",
  "meter",
  "nav",
  "nobr",
  "noscript",
  "object",
  "ol",
  "optgroup",
  "option",
  "output",
  "p",
  "param",
  "pre",
  "progress",
  "q",
  "s",
  "samp",
  "script",
  "section",
  "select",
  "small",
  "source",
  "span",
  "strike",
  "strong",
  "style",
  "sub",
  "summary",
  "sup",
  "table",
  "tbody",
  "td",
  "template",
  "textarea",
  "tfoot",
  "th",
  "thead",
  "time",
  "title",
  "tr",
  "u",
  "ul",
  "var",
  "video",
  "wbr",
  "xmp",
].forEach(tagname=>{
	mk[tagname] = (...args) => mk(tagname, ...args);
});

function* nodesFromChildList(children) {
	for(const child of children.flat(Infinity)) {
		if(child instanceof Node) {
			yield child;
		} else {
			yield new Text(child);
		}
	}
}
function append(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		if(el instanceof Node) el.appendChild(child);
		else el.push(child);
	}
	return el;
}

function insertAfter(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		el.parentNode.insertBefore(child, el.nextSibling);
	}
	return el;
}

function clearContents(el) {
	el.innerHTML = "";
	return el;
}

function parseHTML(markup) {
	if(markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
		const doc = document.implementation.createHTMLDocument("");
		doc.documentElement.innerHTML = markup;
		return doc;
	} else {
		const el = mk.template({});
		el.innerHTML = markup;
		return el.content;
	}
}
</script>
<script>/* Boilerplate: script-var-click-highlighting */
/*
Color-choosing design:

Colors are ordered by goodness.
Each color has a usage count (initially zero).
Each variable has a last-used color.

* If the var has a last-used color, and that color's usage is 0,
    return that color.
* Otherwise, return the lowest-indexed color with the lowest usage.
    Increment the color's usage and set it as the last-used color
    for that var.
* On unclicking, decrement usage of the color.
*/
"use strict";
{
    document.addEventListener("click", e=>{
        if(e.target.nodeName == "VAR") {
            highlightSameAlgoVars(e.target);
        }
    });
    const indexCounts = new Map();
    const indexNames = new Map();
    function highlightSameAlgoVars(v) {
        // Find the algorithm container.
        let algoContainer = null;
        let searchEl = v;
        while(algoContainer == null && searchEl != document.body) {
            searchEl = searchEl.parentNode;
            if(searchEl.hasAttribute("data-algorithm")) {
                algoContainer = searchEl;
            }
        }

        // Not highlighting document-global vars,
        // too likely to be unrelated.
        if(algoContainer == null) return;

        const algoName = algoContainer.getAttribute("data-algorithm");
        const varName = getVarName(v);
        const addClass = !v.classList.contains("selected");
        let highlightClass = null;
        if(addClass) {
            const index = chooseHighlightIndex(algoName, varName);
            indexCounts.get(algoName)[index] += 1;
            indexNames.set(algoName+"///"+varName, index);
            highlightClass = nameFromIndex(index);
        } else {
            const index = previousHighlightIndex(algoName, varName);
            indexCounts.get(algoName)[index] -= 1;
            highlightClass = nameFromIndex(index);
        }

        // Find all same-name vars, and toggle their class appropriately.
        for(const el of algoContainer.querySelectorAll("var")) {
            if(getVarName(el) == varName) {
                el.classList.toggle("selected", addClass);
                el.classList.toggle(highlightClass, addClass);
            }
        }
    }
    function getVarName(el) {
        return el.textContent.replace(/(\s|\xa0)+/, " ").trim();
    }
    function chooseHighlightIndex(algoName, varName) {
        let indexes = null;
        if(indexCounts.has(algoName)) {
            indexes = indexCounts.get(algoName);
        } else {
            // 7 classes right now
            indexes = [0,0,0,0,0,0,0];
            indexCounts.set(algoName, indexes);
        }

        // If the element was recently unclicked,
        // *and* that color is still unclaimed,
        // give it back the same color.
        const lastIndex = previousHighlightIndex(algoName, varName);
        if(indexes[lastIndex] === 0) return lastIndex;

        // Find the earliest index with the lowest count.
        const minCount = Math.min.apply(null, indexes);
        let index = null;
        for(var i = 0; i < indexes.length; i++) {
            if(indexes[i] == minCount) {
                return i;
            }
        }
    }
    function previousHighlightIndex(algoName, varName) {
        return indexNames.get(algoName+"///"+varName);
    }
    function nameFromIndex(index) {
        return "selected" + index;
    }
}
</script>